(this.webpackJsonpukrpay_front=this.webpackJsonpukrpay_front||[]).push([[0],{297:function(e,t,n){},298:function(e,t,n){},586:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),i=n(30),r=n.n(i),o=(n(297),n(9)),c=n(10),l=n(12),d=n(11),u=(n(298),n(74)),p=n(34),_=n(45),h=n(7),m={token:null,user_code:null,user_name:null,user_position:null,OPERATIONS:null},b=function(e,t,n,a,s){return{type:"addUserData",token:e,user_code:t,user_name:n,user_position:a,OPERATIONS:s}},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"addUserData":var n=Object(h.a)({},e);return n.token=t.token,n.user_code=t.user_code,n.user_name=t.user_name,n.user_position=t.user_position,n.OPERATIONS=t.OPERATIONS,n;default:return e}},T="roleData",g={isLoading:!1,showTable:!1,tableData:null,nameOperation:null,operation:null,showPopupTable:!1,typePopup:null,roleData:null},O=function(e){return{type:"isLoading",loading:e}},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"showPopupTable":var n=Object(h.a)({},e);return n.showPopupTable=t.showPopupTable,n.typePopup=t.typePopup,console.log(n),n;case"isLoading":var a=Object(h.a)({},e);return a.isLoading=t.loading,console.log(a),a;case"tableData":var s=Object(h.a)({},e);return console.log(t.tableData),console.log("empty"!=t.tableData),s.tableData=t.tableData,s.showTable=t.showTable,console.log(s),s;case"operationName":var i=Object(h.a)({},e);return i.nameOperation=t.nameOperation,i.operation=t.operation,console.log(i),i;case"roleData":var r=Object(h.a)({},e);return r.roleData=t.roleData,console.log(r),r;default:return e}},I=n(2),f=n.n(I),C=n(4),R=n(3),v=n.n(R),x=n(595),N=n(290),D=n(0),y=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).userShortName=function(e){var t=e.split(" ",2),n=t[0]&&t[0][0];return t[1]&&t[1].length>0&&(n+=t[1][0]),n},a.getProfileData=function(){a.props.store.history.push("/profile")},a.state={date:""},a}return Object(c.a)(n,[{key:"requestLogOut",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Auth",e.next=5,v.a.delete("/api/Auth",{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(e){window.localStorage.removeItem("token"),n.props.store.history.push("/login"),n.props.store.changeLoading(!1)})).catch((function(e){console.error(e.response)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getDate",value:function(){var e=Object(C.a)(f.a.mark((function e(){var t=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Dictionary/GetLastBankingDate",e.next=4,v.a.get("/api/Dictionary/GetLastBankingDate",{headers:{Token:"".concat(this.props.store.userState.token)}}).then((function(e){t.setState({date:e.data.last_banking_date}),t.props.store.changeLoading(!1)})).catch((function(e){console.error(e.response)}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.getDate()}},{key:"render",value:function(){var e=this;return Object(D.jsxs)("header",{children:[Object(D.jsx)("div",{className:"blockNav",children:Object(D.jsx)("div",{className:"logoBank",children:"\u041e\u0429\u0410\u0414\u0411\u0410\u041d\u041a"})}),Object(D.jsxs)("div",{className:"blockHeader",children:[Object(D.jsxs)("div",{className:"nameProject",children:[Object(D.jsx)("div",{className:"title",children:"\u0410\u0420\u041c \u0417\u0432\u0456\u0442\u043d\u0456\u0441\u0442\u044c"}),Object(D.jsxs)("div",{className:"dates",children:[Object(D.jsx)("p",{children:Object(D.jsxs)("b",{children:["\u043e\u0441\u0442\u0430\u043d\u043d\u044f \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u0430 \u0434\u0430\u0442\u0430 \u043e\u0431\u0440\u043e\u0431\u043a\u0438: ",this.state.date]})}),Object(D.jsx)("p",{children:Object(D.jsxs)("b",{children:["\u043e\u0441\u0442\u0430\u043d\u043d\u044f \u0437\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u0430 \u0434\u0430\u0442\u0430 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0456\u0457: ",this.state.date]})})]})]}),Object(D.jsxs)("div",{className:"userBlock",children:[Object(D.jsx)("div",{onClick:this.getProfileData,title:"\u041c\u0456\u0439 \u043a\u0430\u0431\u0456\u043d\u0435\u0442",className:"userLogo",children:this.userShortName(this.props.store.userState.user_name)}),Object(D.jsx)("div",{onClick:this.getProfileData,title:"\u041c\u0456\u0439 \u043a\u0430\u0431\u0456\u043d\u0435\u0442",className:"userName",children:this.props.store.userState.user_name}),Object(D.jsx)(x.a,{id:"dropdown-basic-button",title:"",children:Object(D.jsx)(N.a.Item,{onClick:function(){return e.requestLogOut(e.props.store.userState.token)},as:"button",children:"\u0412\u0438\u0439\u0442\u0438"})})]})]})]})}}]),n}(s.a.Component),E=n(599),k=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).generateUserRoutingMenu=function(e){return[e.reduce((function(t,n){var a=n&&n.menu&&n.operation;try{if(a){var s=function(){var t=(e=e.filter((function(e){return e.menu}))).filter((function(e){return null===e.parent_operation})),n=e.filter((function(e){return null!==e.parent_operation}));t=t.map((function(e){var t=n.filter((function(t){return e.operation===t.parent_operation}));return Object(h.a)(Object(h.a)({},e),{},{children:t})}));for(var a=0;a<t.length;a++){var s=t[a];s.children=s.children.map((function(e){var t=n.filter((function(t){return e.operation===t.parent_operation}));return Object(h.a)(Object(h.a)({},e),{},{children:t})}))}return{v:t}}();if("object"===typeof s)return s.v}return t}catch(i){throw new Error(i)}}),[])]},a.activeOperation=function(e,t){for(var n,a=0;a<e.length;a++){var s=e[a];s.operation===t&&(n=s.name)}return n},a.menuRender=function(e){for(var t in e){return Object(D.jsx)(E.a,{children:(n=e[t],n.map((function(e,t){if(!e.parent_operation)return 0!=e.children?Object(D.jsxs)(E.a.Item,{eventKey:t,children:[Object(D.jsx)(E.a.Header,{style:{fontWeight:"500"},children:e.name}),function(e){if(0!=e)return Object(D.jsx)(E.a.Body,{children:e.map((function(e,t){return 0!==e.children.length?Object(D.jsx)(E.a,{children:Object(D.jsxs)(E.a.Item,{eventKey:t,children:[Object(D.jsx)(E.a.Header,{children:e.name}),Object(D.jsx)(E.a.Body,{children:e.children.map((function(e){return Object(D.jsx)("div",{className:"dropdownMenuItemLink ".concat(a.props.store.location.pathname.substr(11)===e.operation?"itemAct":""),name:e.name,operation:e.operation,onClick:a.itemLink,children:Object(D.jsx)("span",{children:e.name})})}))})]})}):Object(D.jsx)("div",{className:"dropdownMenuItemLink ".concat(a.props.store.location.pathname.substr(11)===e.operation?"itemAct":""),name:e.name,operation:e.operation,onClick:a.itemLink,children:Object(D.jsx)("span",{children:e.name})})}))})}(e.children)]}):Object(D.jsx)("div",{className:"accordion-item",children:Object(D.jsx)("h5",{className:"accordion-header",children:Object(D.jsx)("button",{type:"button","aria-expanded":"false",className:"accordionWithOutChildren collapsed",children:e.name})})})})))})}var n},a.itemLink=function(e){e.stopPropagation();var t=e.currentTarget.getAttribute("operation");a.props.store.history.push("/dashboard/".concat(t))},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.activeOperation(this.props.store.userState.OPERATIONS,this.props.params)}},{key:"render",value:function(){return Object(D.jsx)("div",{className:"menu",children:Object(D.jsx)("div",{className:"coverList",children:this.menuRender(this.generateUserRoutingMenu(this.props.store.userState.OPERATIONS))})})}}]),n}(a.Component),A=n(283),w=n.n(A),P=n(284),q=n.n(P),M=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).columnsData=function(e){var t=[];return Object.keys(e).map((function(n){return t.push({dataField:n,text:e[n]})})),t},a.activeOperation=function(e,t){for(var n,a=0;a<e.length;a++){var s=e[a];s.operation===t&&(n=s.name)}return n},a.state={},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.requestDICT(this.props.store.userState.token,this.params)}},{key:"requestDICT",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n){var a,s=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),a="/api/Dictionary/".concat(n),e.next=4,R.get(a,{headers:{Token:"".concat(t)}}).then((function(e){s.props.store.addTableData(!0,e.data.Table),s.props.store.changeLoading(!1)})).catch((function(e){throw new Error(e)}));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(D.jsxs)("div",{className:"coverTable",children:[Object(D.jsxs)("div",{className:"headerTable",children:[Object(D.jsx)("div",{className:"titleTable",children:this.activeOperation(this.props.store.userState.OPERATIONS,this.props.store.location.pathname.substr(11))}),Object(D.jsx)("div",{className:"optionBlock"})]}),Object(D.jsx)("div",{className:"innerTable",children:Object(D.jsx)("div",{className:"Table",children:Object(D.jsx)(w.a,{keyField:"id",data:this.props.store.menuState.tableData.TableRows,columns:this.columnsData(this.props.store.menuState.tableData.TableHeaders),cellEdit:q()({mode:"click",blurToSave:!0})})})})]})}}]),n}(a.Component),B=n(6),L=n(8),F=n(597),Y=n(70);function V(e){var t=e.store,n=Object(a.useState)(!1),s=Object(L.a)(n,2),i=s[0],r=s[1],o=Object(a.useState)([]),c=Object(L.a)(o,2),l=c[0],d=c[1],u=Object(a.useState)(null),p=Object(L.a)(u,2),_=p[0],m=p[1],b=Object(a.useState)(),j=Object(L.a)(b,2),T=(j[0],j[1],Object(a.useState)([])),g=Object(L.a)(T,2),O=g[0],S=g[1],I=Object(a.useState)(!1),R=Object(L.a)(I,2),x=(R[0],R[1],Object(a.useState)([])),N=Object(L.a)(x,2),y=(N[0],N[1],Object(a.useState)(null)),E=Object(L.a)(y,2),k=(E[0],E[1],Object(a.useState)(!1)),A=Object(L.a)(k,2),w=(A[0],A[1]),P=Object(a.useState)([]),q=Object(L.a)(P,2),M=(q[0],q[1]),V=Object(a.useState)(null),U=Object(L.a)(V,2),H=(U[0],U[1],Object(a.useState)(!1)),Q=Object(L.a)(H,2),G=(Q[0],Q[1],Object(a.useState)([])),W=Object(L.a)(G,2),K=(W[0],W[1],Object(a.useState)(null)),Z=Object(L.a)(K,2),z=(Z[0],Z[1],Object(a.useState)(!1)),$=Object(L.a)(z,2),J=($[0],$[1],Object(a.useState)([])),X=Object(L.a)(J,2),ee=(X[0],X[1],Object(a.useState)(null)),te=Object(L.a)(ee,2),ne=(te[0],te[1],Object(a.useState)(!1)),ae=Object(L.a)(ne,2),se=(ae[0],ae[1],Object(a.useState)([])),ie=Object(L.a)(se,2),re=(ie[0],ie[1],Object(a.useState)(null)),oe=Object(L.a)(re,2),ce=(oe[0],oe[1],Object(a.useState)(!1)),le=Object(L.a)(ce,2),de=(le[0],le[1],Object(a.useState)([])),ue=Object(L.a)(de,2),pe=(ue[0],ue[1],Object(a.useState)(null)),_e=Object(L.a)(pe,2),he=(_e[0],_e[1],Object(a.useState)(!1)),me=Object(L.a)(he,2),be=(me[0],me[1],Object(a.useState)([])),je=Object(L.a)(be,2),Te=(je[0],je[1],Object(a.useState)(null)),ge=Object(L.a)(Te,2),Oe=(ge[0],ge[1],Object(a.useState)({brand_id:0,brand_name:1,brand_status_name:1,brand_manager_id:1,brand_manager_institution_id:1,brand_contact_name:1,brand_contact_position:1,brand_contact_phone:1,brand_contact_email:1,level2_ident_code:1,level2_id:1,level2_name:1,level2_manager_id:1,level2_manager_institution_id:1,client_name:1,ident_code:1,client_manager_id:1,client_manager_institution_id:1,client_institution_id:1})),Se=Object(L.a)(Oe,2),Ie=Se[0],fe=Se[1],Ce=function(){var e=Object(C.a)(f.a.mark((function e(n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!0),e.next=3,v.a.get("/api/Dictionary/DICT_NET_BRAND?name=brand_name&param1=".concat(n),{headers:{token:t.userState.token}}).then((function(e){var t=e.data.record_count>0?e.data.Table.TableRows:[];d(t),r(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Re=function(){var e=Object(C.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/api/Dictionary/DICT_NETWORK_MANAGERS?name=manager_name",{headers:{token:t.userState.token}}).then((function(e){var t=e.data.Table.TableRows.map((function(e){return{id:e.manager_id,value:e.manager_name}}));M(t),w(!0)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){Re()}),[]);var ve=function(){var e=Object(C.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.changeLoading(!0),console.log(O),e.next=4,v.a.post("/api/Dictionary/GetNetworkClientsReport",Object(h.a)(Object(h.a)({},Ie),{},{brand_id:0!==O.length?_.brand_id:0}),{headers:{token:t.userState.token},responseType:"blob"}).then((function(e){t.changeLoading(!1);var n=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a"),s=decodeURI(e.headers["content-disposition"].split("filename*=UTF-8''")[1]);a.href=n,a.setAttribute("download",s),document.body.appendChild(a),a.click()}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(D.jsxs)("div",{className:"coverTable DICT_NET_BRAND",children:[Object(D.jsxs)("div",{className:"headerTable",children:[Object(D.jsx)("div",{className:"titleTable",children:function(e,t){var n;return e.map((function(e,a){e.operation==t&&(console.log(e.name),n=e.name)})),n}(t.userState.OPERATIONS,t.location.pathname.substr(11))}),Object(D.jsx)("div",{className:"optionBlock"})]}),Object(D.jsxs)("div",{className:"addbBlock",onChange:function(e){if(e.target.name){var t=e.target.name,n=e.target.checked;fe((function(e){return Object(h.a)(Object(h.a)({},e),{},Object(B.a)({},t,n?1:0))}))}},children:[Object(D.jsxs)("div",{className:"row col-4",children:[Object(D.jsx)("div",{className:"row col-8",children:Object(D.jsx)(Y.a,{filterBy:function(){return!0},id:"async-brand",isLoading:i,labelKey:function(e){return m(e),e.brand_name},minLength:3,onSearch:Ce,options:l,searchText:"\u041f\u043e\u0448\u0443\u043a...",placeholder:"\u041d\u0430\u0437\u0432\u0430 \u043c\u0435\u0440\u0435\u0436\u0456...",onChange:S,renderMenuItemChildren:function(e,t){return Object(D.jsx)("option",{value:e.brand_id,children:e.brand_name})}})}),Object(D.jsx)("div",{children:Object(D.jsx)(F.a.Check,{defaultChecked:!0,style:{marginTop:"20px"},type:"checkbox",name:"brand_status_name",label:"\u041d\u0430\u0437\u0432\u0430 \u0441\u0442\u0430\u0442\u0443\u0441\u0430 \u043c\u0435\u0440\u0435\u0436\u0456"})}),Object(D.jsx)("div",{children:Object(D.jsx)(F.a.Check,{defaultChecked:!0,style:{marginTop:"20px"},type:"checkbox",name:"brand_manager_id",label:"\u041f\u0406\u0411 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430 \u043c\u0435\u0440\u0435\u0436\u0456"})}),Object(D.jsx)("div",{children:Object(D.jsx)(F.a.Check,{defaultChecked:!0,style:{marginTop:"20px"},type:"checkbox",name:"brand_manager_institution_id",label:"\u0420\u0423 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430 \u043c\u0435\u0440\u0435\u0436\u0456"})}),Object(D.jsx)("h5",{className:"mt-4",children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u0430 \u043e\u0441\u043e\u0431\u0430 \u043c\u0435\u0440\u0435\u0436\u0456"}),Object(D.jsx)("div",{children:Object(D.jsx)(F.a.Check,{defaultChecked:!0,style:{marginTop:"10px"},type:"checkbox",name:"brand_contact_name",label:"\u041f\u0406\u0411"})}),Object(D.jsx)("div",{children:Object(D.jsx)(F.a.Check,{defaultChecked:!0,style:{marginTop:"20px"},type:"checkbox",name:"brand_contact_position",label:"\u041f\u043e\u0441\u0430\u0434\u0430"})}),Object(D.jsx)("div",{children:Object(D.jsx)(F.a.Check,{defaultChecked:!0,style:{marginTop:"20px"},type:"checkbox",name:"brand_contact_phone",label:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"})}),Object(D.jsx)("div",{children:Object(D.jsx)(F.a.Check,{defaultChecked:!0,style:{marginTop:"20px"},type:"checkbox",name:"brand_contact_email",label:"Email"})})]}),Object(D.jsxs)("div",{className:"col-4",children:[Object(D.jsx)("div",{children:Object(D.jsx)("h5",{children:"2 \u0440\u0456\u0432\u0435\u043d\u044c"})}),Object(D.jsx)(F.a.Check,{defaultChecked:!0,style:{marginTop:"20px"},type:"checkbox",name:"level2_manager_id",label:"\u041f\u0406\u0411 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430 2\u0433\u043e \u0440\u0456\u0432\u043d\u044f"}),Object(D.jsx)("div",{children:Object(D.jsx)(F.a.Check,{defaultChecked:!0,style:{marginTop:"20px"},type:"checkbox",name:"level2_ident_code",label:"\u0404\u0414\u0420\u041f\u041e\u0423 2 \u0440\u0456\u0432\u0435\u043d\u044c"})}),Object(D.jsxs)("div",{children:[Object(D.jsx)("div",{children:Object(D.jsx)(F.a.Check,{defaultChecked:!0,style:{marginTop:"20px"},type:"checkbox",name:"level2_name",label:"\u041d\u0430\u0437\u0432\u0430 2 \u0440\u0456\u0432\u043d\u044f"})}),Object(D.jsx)("div",{children:Object(D.jsx)(F.a.Check,{defaultChecked:!0,style:{marginTop:"20px"},type:"checkbox",name:"level2_id",label:"ID 2 \u0440\u0456\u0432\u043d\u044f"})}),Object(D.jsx)("div",{children:Object(D.jsx)(F.a.Check,{defaultChecked:!0,style:{marginTop:"20px"},type:"checkbox",name:"level2_manager_id",label:"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440 2 \u0440\u0456\u0432\u043d\u044f"})}),Object(D.jsx)("div",{children:Object(D.jsx)(F.a.Check,{defaultChecked:!0,style:{marginTop:"20px"},type:"checkbox",name:"level2_manager_institution_id",label:"\u0420\u0423 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430 2 \u0440\u0456\u0432\u043d\u044f"})})]})]}),Object(D.jsxs)("div",{className:"col-4",children:[Object(D.jsx)("div",{className:"row",children:Object(D.jsx)("h5",{children:"\u0422\u0421\u041f"})}),Object(D.jsx)("div",{children:Object(D.jsx)(F.a.Check,{defaultChecked:!0,style:{marginTop:"20px"},type:"checkbox",name:"ident_code",label:"\u0406\u041d\u041d/\u0404\u0414\u0420\u041f\u041e\u0423"})}),Object(D.jsxs)("div",{children:[Object(D.jsx)("div",{children:Object(D.jsx)(F.a.Check,{defaultChecked:!0,style:{marginTop:"20px"},type:"checkbox",name:"client_name",label:"\u041d\u0430\u0437\u0432\u0430 \u0422\u0421\u041f"})}),Object(D.jsx)("div",{children:Object(D.jsx)(F.a.Check,{defaultChecked:!0,style:{marginTop:"20px"},type:"checkbox",name:"client_manager_id",label:"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440 \u0422\u0421\u041f"})}),Object(D.jsx)("div",{children:Object(D.jsx)(F.a.Check,{defaultChecked:!0,style:{marginTop:"20px"},type:"checkbox",name:"client_manager_institution_id",label:"\u0420\u0423 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430 \u0422\u0421\u041f"})}),Object(D.jsx)("div",{children:Object(D.jsx)(F.a.Check,{defaultChecked:!0,style:{marginTop:"20px"},type:"checkbox",name:"client_institution_id",label:"\u0420\u0423 \u0440\u0430\u0445\u0443\u043d\u043a\u0430 \u0422\u0421\u041f"})})]})]})]}),Object(D.jsx)("div",{class:"btnBlock",style:{background:"white",padding:"10px"},children:Object(D.jsx)("button",{class:"btn btn-success",onClick:ve,children:"\u0421\u0444\u043e\u0440\u043c\u0443\u0432\u0430\u0442\u0438"})})]})}var U=n(291);function H(e){var t,n,s,i,r,o,c=e.store,l="\u0417\u0430\u043f\u043e\u0432\u043d\u0456\u0442\u044c \u0431\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430 \u043f\u043e\u043b\u0435!",d=Object(a.useState)({}),u=Object(L.a)(d,2),p=u[0],_=u[1],m=Object(a.useState)(!1),b=Object(L.a)(m,2),j=b[0],T=b[1],g=Object(a.useState)(!1),O=Object(L.a)(g,2),S=O[0],I=O[1],R=Object(a.useState)(!1),x=Object(L.a)(R,2),N=x[0],y=x[1],E=Object(a.useState)(""),k=Object(L.a)(E,2),A=k[0],w=k[1],P=Object(a.useState)(""),q=Object(L.a)(P,2),M=q[0],Y=q[1];function V(e){if(null!==e.target.value){var t=Object(B.a)({},e.target.name,e.target.value);_((function(e){return null!==e?Object(h.a)(Object(h.a)({},e),t):t}))}}function H(){return(H=Object(C.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/Dictionary/DICT_BIN_TABLE",e.next=3,v.a.post("/api/Dictionary/DICT_BIN_TABLE",p,{headers:{token:"".concat(c.userState.token)}}).then((function(e){0===e.data.ErrorStatus.ErrorCode?(w("success"),Y("".concat(e.data.ErrorStatus.ErrorMessage))):(w("danger"),Y("".concat(e.data.ErrorStatus.ErrorCode,": ").concat(e.data.ErrorStatus.ErrorMessage)))}));case 3:y(!0),_({}),setTimeout((function(){y(!1)}),3e3);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(D.jsxs)("div",{className:"coverTable DICT_BIN_TABLE",children:[N?Object(D.jsx)(U.a,{variant:A,children:M},1):null,Object(D.jsxs)("div",{class:"headerTable",children:[Object(D.jsx)("div",{class:"titleTable",children:"BIN \u0442\u0430\u0431\u043b\u0438\u0446\u044f"}),Object(D.jsx)("div",{class:"optionBlock"})]}),Object(D.jsxs)("div",{className:"filter row",children:[Object(D.jsx)("div",{className:"col-4",children:Object(D.jsxs)(F.a,{onChange:V,children:[Object(D.jsxs)(F.a.Group,{className:"form-input",children:[Object(D.jsx)(F.a.Label,{children:"BIN"}),Object(D.jsx)(F.a.Control,{className:j?"error":null,name:"bin",value:null!==(t=p.bin)&&void 0!==t?t:"",type:"text",placeholder:"\u0412\u043f\u0438\u0448\u0456\u0442\u044c bin"}),j?Object(D.jsx)("p",{className:"error-text",children:l}):null]}),Object(D.jsxs)(F.a.Group,{className:"form-input",children:[Object(D.jsx)(F.a.Label,{children:"\u041d\u0430\u0437\u0432\u0430 \u0431\u0430\u043d\u043a\u0443"}),Object(D.jsx)(F.a.Control,{className:S?"error":null,name:"bankname",value:null!==(n=p.bankname)&&void 0!==n?n:"",type:"text",placeholder:"\u041e\u0449\u0430\u0434\u0411\u0430\u043d\u043a"}),S?Object(D.jsx)("p",{className:"error-text",children:l}):null]}),Object(D.jsxs)(F.a.Group,{className:"form-input",children:[Object(D.jsx)(F.a.Label,{children:"\u041b\u043e\u043a\u0430\u043b\u044c\u043d\u0430 \u043d\u0430\u0437\u0432\u0430 \u0431\u0430\u043d\u043a\u0443 "}),Object(D.jsx)(F.a.Control,{name:"banknameloc",type:"text",value:null!==(s=p.banknameloc)&&void 0!==s?s:"",placeholder:"\u0412\u043f\u0438\u0448\u0456\u0442\u044c bin"})]})]})}),Object(D.jsx)("div",{className:"col-4",children:Object(D.jsxs)(F.a,{onChange:V,children:[Object(D.jsxs)(F.a.Group,{className:"form-input",children:[Object(D.jsx)(F.a.Label,{children:"Ember id"}),Object(D.jsx)(F.a.Control,{name:"emberid",type:"text",value:null!==(i=p.emberid)&&void 0!==i?i:"",placeholder:"\u0412\u043f\u0438\u0448\u0456\u0442\u044c ember id"})]}),Object(D.jsxs)(F.a.Group,{className:"form-input",children:[Object(D.jsx)(F.a.Label,{children:"\u041d\u0430\u0437\u0432\u0430 \u0442\u0438\u043f\u0443 \u043a\u0430\u0440\u0442\u043a\u0438 "}),Object(D.jsx)(F.a.Control,{name:"cardtypename",type:"text",value:null!==(r=p.cardtypename)&&void 0!==r?r:"",placeholder:"\u0412\u043f\u0438\u0448\u0456\u0442\u044c \u0442\u0438\u043f \u043a\u0430\u0440\u0442\u043a\u0438"})]}),Object(D.jsxs)(F.a.Group,{className:"form-input",children:[Object(D.jsx)(F.a.Label,{children:"\u041d\u0430\u0437\u0432\u0430 \u0434\u0435\u0440\u0436\u0430\u0432\u0438"}),Object(D.jsx)(F.a.Control,{name:"country",type:"text",value:null!==(o=p.country)&&void 0!==o?o:"",placeholder:"\u0412\u043f\u0438\u0448\u0456\u0442\u044c \u043d\u0430\u0437\u0432\u0443 \u0434\u0435\u0440\u0436\u0430\u0432\u0438"})]})]})})]}),Object(D.jsx)("div",{class:"btnBlock",children:Object(D.jsx)("button",{class:"search btn btn-primary",onClick:function(){T(!1),I(!1),p.bin||T(!0),p.bankname||I(!0),j||S||function(){H.apply(this,arguments)}()},children:"\u0421\u0442\u0432\u043e\u0440\u0438\u0442\u0438"})})]})}function Q(e){var t,n,s,i,r=e.store,o="\u0417\u0430\u043f\u043e\u0432\u043d\u0456\u0442\u044c \u0431\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430 \u043f\u043e\u043b\u0435!",c=Object(a.useState)({}),l=Object(L.a)(c,2),d=l[0],u=l[1],p=Object(a.useState)(!1),_=Object(L.a)(p,2),m=_[0],b=_[1],j=Object(a.useState)(!1),T=Object(L.a)(j,2),g=T[0],O=T[1],S=Object(a.useState)(!1),I=Object(L.a)(S,2),R=I[0],x=I[1],N=Object(a.useState)(!1),y=Object(L.a)(N,2),E=y[0],k=y[1],A=Object(a.useState)(!1),w=Object(L.a)(A,2),P=w[0],q=w[1],M=Object(a.useState)(""),Y=Object(L.a)(M,2),V=Y[0],H=Y[1],Q=Object(a.useState)(""),G=Object(L.a)(Q,2),W=G[0],K=G[1];function Z(){return(Z=Object(C.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/Dictionary/DICT_BANK_RANGE",e.next=3,v.a.post("/api/Dictionary/DICT_BANK_RANGE",d,{headers:{token:"".concat(r.userState.token)}}).then((function(e){0===e.data.ErrorStatus.ErrorCode?(H("success"),K("".concat(e.data.ErrorStatus.ErrorMessage)),setTimeout((function(){q(!1)}),3e3)):(H("danger"),K("".concat(e.data.ErrorStatus.ErrorCode,": ").concat(e.data.ErrorStatus.ErrorMessage)))}));case 3:q(!0),u({});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(D.jsxs)("div",{className:"coverTable DICT_BIN_TABLE",children:[P?Object(D.jsx)(U.a,{variant:V,children:W},1):null,Object(D.jsxs)("div",{class:"headerTable",children:[Object(D.jsx)("div",{class:"titleTable",children:"\u0414\u0456\u0430\u043f\u0430\u0437\u043e\u043d \u043a\u0430\u0440\u0442\u043a\u043e\u0432\u0438\u0445 \u043f\u0440\u043e\u0434\u0443\u043a\u0442\u0456\u0432 \u0431\u0430\u043d\u043a\u0443"}),Object(D.jsx)("div",{class:"optionBlock"})]}),Object(D.jsx)("div",{className:"filter row",children:Object(D.jsx)("div",{className:"col-4",children:Object(D.jsxs)(F.a,{onChange:function(e){if(null!==e.target.value){var t=Object(B.a)({},e.target.name,e.target.value);u((function(e){return null!==e?Object(h.a)(Object(h.a)({},e),t):t}))}},children:[Object(D.jsxs)(F.a.Group,{className:"form-input",children:[Object(D.jsx)(F.a.Label,{children:"BIN"}),Object(D.jsx)(F.a.Control,{className:m?"error":null,name:"bin",value:null!==(t=d.bin)&&void 0!==t?t:"",type:"text",placeholder:"\u0412\u043f\u0438\u0448\u0456\u0442\u044c bin"}),m?Object(D.jsx)("p",{className:"error-text",children:o}):null]}),Object(D.jsxs)(F.a.Group,{className:"form-input",children:[Object(D.jsx)(F.a.Label,{children:"\u041d\u0430\u0437\u0432\u0430 \u0431\u0430\u043d\u043a\u0443"}),Object(D.jsx)(F.a.Control,{className:g?"error":null,name:"bank_range_name",value:null!==(n=d.bank_range_name)&&void 0!==n?n:"",type:"text",placeholder:"\u041e\u0449\u0430\u0434\u0431\u0430\u043d\u043a"}),g?Object(D.jsx)("p",{className:"error-text",children:o}):null]}),Object(D.jsxs)(F.a.Group,{className:"form-input",children:[Object(D.jsx)(F.a.Label,{children:"\u041c\u0456\u043d\u0456\u043c\u0430\u043b\u044c\u043d\u0435 \u0447\u0438\u0441\u043b\u043e"}),Object(D.jsx)(F.a.Control,{className:R?"error":null,name:"min_number",value:null!==(s=d.min_number)&&void 0!==s?s:"",type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0447\u0438\u0441\u043b\u043e..."}),R?Object(D.jsx)("p",{className:"error-text",children:o}):null]}),Object(D.jsxs)(F.a.Group,{className:"form-input",children:[Object(D.jsx)(F.a.Label,{children:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0435 \u0447\u0438\u0441\u043b\u043e"}),Object(D.jsx)(F.a.Control,{className:E?"error":null,name:"max_number",value:null!==(i=d.max_number)&&void 0!==i?i:"",type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0447\u0438\u0441\u043b\u043e..."}),E?Object(D.jsx)("p",{className:"error-text",children:o}):null]})]})})}),Object(D.jsx)("div",{class:"btnBlock",children:Object(D.jsx)("button",{class:"search btn btn-primary",onClick:function(){b(!1),O(!1),x(!1),k(!1),d.bin||b(!0),d.bank_range_name||O(!0),d.min_number||x(!0),d.max_number||k(!0),m||g||R||E||function(){Z.apply(this,arguments)}()},children:"\u0421\u0442\u0432\u043e\u0440\u0438\u0442\u0438"})})]})}var G=n(27),W=n.n(G);function K(e,t){var n;return e.map((function(e){e.operation===t&&(n=e.name)})),n}function Z(e,t,n){var a=e.currentTarget.getAttribute("name"),s=e.target.checked;t[a]=s;var i={role_id:"".concat(n.state.isSelected),operations:[t]};!function(e,t,n){z.apply(this,arguments)}(n.props.store.userState.token,i,n)}function z(){return(z=Object(C.a)(f.a.mark((function e(t,n,a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.props.store.changeLoading(!0),"/api/UserOperations",e.next=4,R.put("/api/UserOperations",n,{headers:{Token:"".concat(t)}}).then((function(){a.requestADMIN_ROLE_OPERATIONS(a.props.store.userState.token,a.state.isSelected),a.props.store.changeLoading(!1)})).catch((function(e){throw new Error(e)}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(){return($=Object(C.a)(f.a.mark((function e(t){var n,a,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.props.store.userState.token,a=t.state.isSelected,t.props.store.changeLoading(!0),s="/api/UserOperations/".concat(a),e.next=6,R.get(s,{headers:{Token:"".concat(n)}}).then((function(e){t.setState({operations:e.data.operations,isShowTable:!0}),t.props.store.changeLoading(!1)})).catch((function(e){console.log(e)}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e,t){var n=e.target.value;n&&(t.setState({isSelected:n}),function(e){$.apply(this,arguments)}(t))}function X(e,t,n,a){return Object(D.jsx)("input",{onChange:function(t){return Z(t,e,a)},checked:t,name:n,type:"checkbox"})}var ee=function(e){return Object(D.jsx)("option",{selected:e.state.isSelected===e.optionItem.user_code?"selected":"",value:e.optionItem.user_code,children:e.optionItem.user_name})};function te(){return(te=Object(C.a)(f.a.mark((function e(t){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.props.store.userState.token,t.props.store.changeLoading(!0),a={user_code:"",user_name:"",bank_branch_id:0,only_active:!0},"/api/User",e.next=6,R.post("/api/User",a,{headers:{Token:"".concat(n)}}).then((function(e){t.setState({roles:e.data.users,isShowSelectRoles:!0}),t.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response)}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ne=function(e){return Object(D.jsx)("option",{value:e.optionItem.brand_id,children:e.optionItem.brand_name})},ae=function(e){return Object(D.jsx)("option",{value:e.optionItem.entity_id,children:e.optionItem.entity_name})},se=function(e){return Object(D.jsx)("option",{selected:e.optionItem.manager_id==e.manager_id?"selected":"",value:e.optionItem.manager_id,children:e.optionItem.manager_name})},ie=function(e){return Object(D.jsx)("option",{className:"blockSelectItem",value:e.item.ident_code,name:e.item.client_name,onClick:function(t){return e.onClickBlockSelectItem(t)},children:e.item.ident_code})},re=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).onChangeAutocompleteInput=function(e){var t=e.target.value;a.props.addIdentCode(Number(0),"",!1),a.setState({inputRequest:t,selected:!1}),""!==t&&t.length>=0&&a.request(a.props.token,t,!0)},a.onClickAutocompleteInputRes=function(){a.setState({inputResult:null,isShowBlockSelect:!0,isShowInputResult:!1,isShowInputRequest:!0})},a.onBlurBlockSelect=function(){a.setState({isShowBlockSelect:!1})},a.onClickBlockSelectItem=function(e){if(e.stopPropagation(),e){var t=e.currentTarget.getAttribute("value"),n=a.state.data.filter((function(e){return e.ident_code.toString().includes(t)}))[0];""!==t&&(a.props.addIdentCode(n.ident_code,n.client_name,!0),a.setState({inputRequest:n.ident_code,inputResult:n.ident_code,isShowBlockSelect:!1,selected:!0}),t.toString()!==a.state.inputRequest.toString()&&a.request(a.props.token,t,!1),a.setState({isShowBlockSelect:!1}))}},a.state={data:null,inputRequest:null,inputResult:a.props.ident_code,isShowBlockSelect:!1,isShowInputResult:!1,isShowInputRequest:!0,isLoading:!1,selected:!1},a.myRef=s.a.createRef(),a}return Object(c.a)(n,[{key:"request",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n,a){var s,i=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),"/api/Dictionary/QueryTSP",s={institution_id:this.props.institution_id,branch_id:this.props.branch_id,ident_code:n},e.next=5,R.post("/api/Dictionary/QueryTSP",s,{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(e){null==e.data.tsp_list.TableRows?i.setState({data:[{ident_code:"\u041d\u0435\u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0436\u043e\u0434\u043d\u043e\u0433\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443"}]}):i.setState({data:e.data.tsp_list.TableRows}),a?i.setState({isShowBlockSelect:!0}):i.setState({isShowBlockSelect:!1}),i.setState({isLoading:!1})})).catch((function(e){throw new Error(e)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this;return Object(D.jsxs)("div",{className:"autocomplete",children:[Object(D.jsx)(W.a,(e={mask:"999999999999",type:"text",maskChar:"",id:"inputmask",alwaysShowMask:"false",pattern:"[0-9]",className:"".concat(this.state.selected?"selected ":"").concat(this.state.isShowInputRequest?"":"dn ","form-control"),placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043f\u0435\u0440\u0448\u0456 \u0442\u0440\u0438 \u0446\u0438\u0444\u0440\u0438..."},Object(B.a)(e,"type","text"),Object(B.a)(e,"onBlur",this.onClickBlockSelectItem),Object(B.a)(e,"onChange",this.onChangeAutocompleteInput),Object(B.a)(e,"onClick",(function(){return t.state.isShowBlockSelect?t.setState({isShowBlockSelect:!1}):null})),Object(B.a)(e,"value",this.state.inputRequest),e)),Object(D.jsx)("input",{className:"".concat(this.state.selected?"selected ":"").concat(this.state.isShowInputResult?"":"dn ","form-control"),placeholder:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442",type:"text",value:this.state.inputResult,onClick:this.onClickAutocompleteInputRes}),Object(D.jsx)("div",{className:"".concat(this.state.isShowBlockSelect?"":"dn ","blockSelect"),onBlur:this.onBlurBlockSelect,ref:this.myRef,children:this.state.isShowBlockSelect&&null!=this.state.data?this.state.data.map((function(e,n){return Object(D.jsx)(ie,{item:e,onClickBlockSelectItem:t.onClickBlockSelectItem},n)})):null}),this.state.isLoading?Object(D.jsx)("div",{className:"coverloader",children:Object(D.jsx)("div",{className:"loader"})}):null]})}}]),n}(s.a.Component),oe=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).changeSelect=function(e){var t=e.currentTarget.getAttribute("name"),n=e.target.value;"physical_acquiring_type_id"===t&&a.setState(Object(B.a)({},t,Number(n)))},a.closePopupError=function(){a.setState({isShowPopupError:!1})},a.closePopupErrorSave=function(){a.setState({isShowPopupErrorSave:!1})},a.closePopupOrder_numberError=function(){a.setState({isShowOrder_numberError:!1,isShowBootstrapTable:!0})},a.renderItem=function(e,t){return Object(D.jsx)("div",{id:e.ident_code,style:{backgroundColor:t?"#eee":"transparent"},children:e.ident_code},e.ident_code)},a.shouldItemRender=function(e,t){return e.ident_code.toLowerCase().indexOf(t.toLowerCase())>-1},a.autocompleteSelect=function(e){a.setState({value:e})},a.ident_code=function(e){var t=e.target.value;""!=t?a.requestDICT_NET_BRAND_QueryTSP(a.props.store.userState.token,t):a.setState({isDisableInput:!0})},a.changeSelectDICT_NET_BRAND_QueryTSP=function(e){var t,n,s=e.target.value;a.state.DICT_NET_BRAND_QueryTSP.filter((function(e,a,i){e.ident_code==s&&(t=e.client_name,n=e.client_id)})),a.setState({ident_code:s,client_name:t,client_id:n})},a.changeInputDICT_NETWORK_MANAGERS=function(e){var t=e.target.value;a.setState({manager_id:t}),a.requestDICT_NET_BRAND(a.props.store.userState.token)},a.changeInputDICT_NET_BRAND=function(e){var t=e.target.value;1===a.state.DICT_NET_BRAND.filter((function(e){return+e.brand_id===+t}))[0].second_level_flag?a.setState({isDisableInputDICT_NET_ENTITY:!1}):a.setState({isDisableInputDICT_NET_ENTITY:!0,entity_id:0}),a.setState({brand_id:t}),a.requestDICT_NET_ENTITY(a.props.store.userState.token,t)},a.changeInputDICT_NET_ENTITY=function(e){var t=e.target.value,n=a.state.DICT_NET_ENTITY.filter((function(e){return+e.entity_id===+t}))[0];a.setState({entity_id:t,isDisableBtnSave:!1,manager_id:n.manager_id,manager_name:n.manager_name})},a.save=function(){var e={ident_code:a.state.ident_code,client_id:Number(a.state.client_id),manager_id:Number(a.state.manager_id),brand_id:Number(a.state.brand_id),entity_id:Number(a.state.entity_id),client_name:a.state.client_name};a.requestDICT_NET_CLIENT(a.props.store.userState.token,e)},a.addIdentCode=function(e,t,n){console.log("value: ",e),n?(a.requestDICT_NETWORK_MANAGERS(a.props.store.userState.token),a.setState({ident_code:e,client_name:t,isDisableInputDICT_NETWORK_MANAGERS:!1})):a.setState({ident_code:e,client_name:t,isDisableInputDICT_NETWORK_MANAGERS:!0})},a.state={isContact_emailError:!1,isDisabledSaveBtn:!1,DICT_INSTITUTION:null,isShowSelectDICT_INSTITUTION:!1,isDisableButton:!1,selectRow:null,DICT_BRANCH:null,isDisableTVBV:!0,isShowSelectTVBV:!1,TSPReportSettingsSearchObj:{},settings:null,tsp_list:null,isShowTsp:!1,currentTsp:null,isShowTypeAcquiring:!1,isShowReport:!1,DICT_REPORT_FORMAT:null,isShowREPORT_FORMAT:!1,DICT_REPORT_PERIOD_TYPE:null,isShowDICT_REPORT_PERIOD_TYPE:!1,DICT_REPORT_CHANNEL_TYPE:null,isShowDICT_REPORT_CHANNEL_TYPE:!1,isShowTableTSPReportSettingsSTD:!1,TSPReportSettingsSTD:null,DICT_NET_CLIENT_STATUS:null,isShowDICT_NET_CLIENT_STATUS:!1,isShowPopupError:!1,isShowPopupErrorSave:!1,currentAcquiring_type_id:null,type_acquiring:1,tsp_id:null,report_format_id:null,report_period_type_id:null,channel_type_id:null,file_name_mask:null,isShowOrder_numberError:!1,isShowBootstrapTable:!0,options:[{client_id:6595650,client_name:"\u041c\u041f \u041e\u043a\u0442\u0430\u043d1",entity_id:0,entity_name:null,ident_code:"13351072"},{client_id:6595651,client_name:"\u041c\u041f \u041e\u043a\u0442\u0430\u043d2",entity_id:1,entity_name:null,ident_code:"13351073"}],value:"",DICT_NET_BRAND_QueryTSP:[],isShowDICT_NET_BRAND_QueryTSP:!1,isDisableInputDICT_NETWORK_MANAGERS:!0,DICT_NETWORK_MANAGERS:null,isShowSelectDICT_NETWORK_MANAGERS:!1,isDisableInputDICT_NET_BRAND:!0,isShowSelectDICT_NET_BRAND:!1,DICT_NET_BRAND:null,isDisableInputDICT_NET_ENTITY:!0,isShowSelectDICT_NET_ENTITY:!1,DICT_NET_ENTITY:null,isDisableBtnSave:!0,isDisableIdent_code:!0,isDisableInput:!0,ident_code:null,client_name:null,client_id:null,manager_id:null,brand_id:null,entity_id:null,isDICT_NET_BRAND_QueryTSPEmpty:!1},a}return Object(c.a)(n,[{key:"requestDICT_NETWORK_MANAGERS",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Dictionary/DICT_NETWORK_MANAGERS",e.next=4,R.get("/api/Dictionary/DICT_NETWORK_MANAGERS",{headers:{Token:"".concat(t)}}).then((function(e){n.setState({DICT_NETWORK_MANAGERS:e.data.Table.TableRows,isShowSelectDICT_NETWORK_MANAGERS:!0,isDisableInputDICT_NETWORK_MANAGERS:!1}),n.props.store.changeLoading(!1)})).catch((function(e){throw new Error(e)}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_NET_CLIENT",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n){var a=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Dictionary/DICT_NET_CLIENT",e.next=4,R.post("/api/Dictionary/DICT_NET_CLIENT",n,{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(e){a.props.store.changeLoading(!1)})).catch((function(e){throw new Error(e)}));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"requestDICT_NET_BRAND_QueryTSP",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n){var a,s=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Dictionary/DICT_NET_BRAND/QueryTSP",a={ident_code:n},e.next=5,R.post("/api/Dictionary/DICT_NET_BRAND/QueryTSP",a,{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(e){0==e.data.record_count?s.setState({isDICT_NET_BRAND_QueryTSPEmpty:!0,isDisableIdent_code:!0,isShowDICT_NET_BRAND_QueryTSP:!1,DICT_NET_BRAND_QueryTSP:[]}):s.setState({DICT_NET_BRAND_QueryTSP:e.data.tsp_list,isDisableIdent_code:!1,isShowDICT_NET_BRAND_QueryTSP:!0,isDICT_NET_BRAND_QueryTSPEmpty:!1}),s.props.store.changeLoading(!1)})).catch((function(e){throw new Error(e)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"requestDICT_NET_BRAND",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Dictionary/DICT_NET_BRAND",e.next=4,R.get("/api/Dictionary/DICT_NET_BRAND",{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(e){n.setState({isDisableInputDICT_NET_BRAND:!1,isShowSelectDICT_NET_BRAND:!0,DICT_NET_BRAND:e.data.Table.TableRows}),n.props.store.changeLoading(!1)})).catch((function(e){throw new Error(e)}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_NET_ENTITY",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n){var a,s=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),a="/api/Dictionary/DICT_NET_ENTITY/?param1=".concat(n),e.next=4,R.get(a,{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(e){e.data.Table.TableRows&&s.setState({isShowSelectDICT_NET_ENTITY:!0,DICT_NET_ENTITY:e.data.Table.TableRows}),s.props.store.changeLoading(!1)})).catch((function(e){throw new Error(e)}));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){this.requestDICT_NET_BRAND(this.props.store.userState.token),this.requestDICT_NETWORK_MANAGERS(this.props.store.userState.token)}},{key:"render",value:function(){var e=this;return Object(D.jsxs)("div",{className:"coverTable DICT_NET_BRAND",children:[Object(D.jsxs)("div",{className:"headerTable",children:[Object(D.jsx)("div",{className:"titleTable",children:K(this.props.store.userState.OPERATIONS,this.props.store.location.pathname.substr(11))}),Object(D.jsx)("div",{className:"optionBlock"})]}),Object(D.jsxs)("div",{className:"addbBlock",children:[Object(D.jsxs)("div",{className:"coverInputs col-4",children:[Object(D.jsx)("label",{htmlFor:"brand_region",children:"\u041c\u0435\u0440\u0435\u0436\u0430"}),Object(D.jsxs)("select",{onChange:this.changeInputDICT_NET_BRAND,api_name:"brand_region",id:"brand_region",className:"form-select",title:"\u0420\u0435\u0433\u0456\u043e\u043d\u0430\u043b\u044c\u043d\u0456 \u0443\u043f\u0440\u0430\u0432\u043b\u0456\u043d\u043d\u044f",children:[Object(D.jsx)("option",{children:"-"}),this.state.isShowSelectDICT_NET_BRAND?this.state.DICT_NET_BRAND.map((function(t,n){return Object(D.jsx)(ne,{optionItem:t,institution_id:e.state.brand_region},n)})):null]}),Object(D.jsx)("label",{htmlFor:"brand_region",children:"2 \u0440\u0456\u0432\u0435\u043d\u044c"}),Object(D.jsxs)("select",{disabled:this.state.isDisableInputDICT_NET_ENTITY?"disabled":"",onChange:this.changeInputDICT_NET_ENTITY,api_name:"brand_region",id:"brand_region",className:"form-select",title:"\u0420\u0435\u0433\u0456\u043e\u043d\u0430\u043b\u044c\u043d\u0456 \u0443\u043f\u0440\u0430\u0432\u043b\u0456\u043d\u043d\u044f",children:[Object(D.jsx)("option",{children:"-"}),this.state.isShowSelectDICT_NET_ENTITY?this.state.DICT_NET_ENTITY.map((function(e,t){return Object(D.jsx)(ae,{optionItem:e},t)})):null]}),Object(D.jsx)("label",{htmlFor:"DICT_NETWORK_MANAGERS",children:"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440 \u0422\u0421\u041f"}),Object(D.jsxs)("select",{id:"dropdown-basic-button",onChange:this.changeInputDICT_NETWORK_MANAGERS,api_name:"manager_name",className:"form-select",title:"\u0422\u0412\u0411\u0412",children:[Object(D.jsx)("option",{children:"-"}),this.state.isShowSelectDICT_NETWORK_MANAGERS?this.state.DICT_NETWORK_MANAGERS.map((function(t,n){return Object(D.jsx)(se,{optionItem:t,manager_id:e.state.manager_id},n)})):null]})]}),Object(D.jsxs)("div",{className:"coverInputs col-4",children:[Object(D.jsx)("label",{htmlFor:"name_netWork",children:"\u0406\u041d\u041d/\u0404\u0414\u0420\u041f\u041e\u0423"}),Object(D.jsx)(re,{token:this.props.store.userState.token,institution_id:0,branch_id:0,addIdentCode:this.addIdentCode,ident_code:this.state.ident_code,client_name:this.state.client_name}),Object(D.jsx)("label",{htmlFor:"status",children:"\u041d\u0430\u0437\u0432\u0430 \u0422\u0421\u041f"}),Object(D.jsx)("input",{className:"form-control",disabled:!0,value:this.state.client_name,type:"text"}),Object(D.jsx)("label",{htmlFor:"status",children:"\u0420\u0423 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430"}),Object(D.jsx)("input",{disabled:!0,value:this.state.manager_id,api_name:"brand_name",id:"name_netWork",type:"text",className:"form-control"})]})]}),Object(D.jsx)("div",{className:"coverBtn",children:Object(D.jsx)("button",{className:"btn btn-success",onClick:this.save,children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438 \u043c\u0435\u0440\u0435\u0436\u0443"})}),this.state.isShowPopupError?Object(D.jsx)("div",{className:"coverPopupError",children:Object(D.jsxs)("div",{className:"innerBlock",children:[Object(D.jsx)("div",{className:"title alert alert-primary",children:"\u041d\u0435\u043c\u0430\u0454 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443 \u043f\u043e \u0434\u0430\u043d\u043e\u043c\u0443 \u043f\u043e\u0448\u0443\u043a\u0443"}),Object(D.jsx)("div",{className:"msg",children:"\u0421\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0432\u0432\u0435\u0441\u0442\u0438 \u0456\u043d\u0448\u0456 \u0434\u0430\u043d\u0456 \u0434\u043b\u044f \u043f\u043e\u0448\u0443\u043a\u0443"}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:this.closePopupError,children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"})]})}):null,this.state.isShowPopupErrorSave?Object(D.jsx)("div",{className:"coverPopupError",children:Object(D.jsxs)("div",{className:"innerBlock",children:[Object(D.jsx)("div",{className:"title alert alert-primary",children:"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0437\u0431\u0435\u0440\u0456\u0433\u0430\u043d\u043d\u0456"}),Object(D.jsx)("div",{className:"msg",children:":("}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:this.closePopupErrorSave,children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"})]})}):null,this.state.isShowOrder_numberError?Object(D.jsx)("div",{className:"coverOrder_numberError",children:Object(D.jsxs)("div",{className:"innerBlock",children:[Object(D.jsx)("div",{className:"title alert alert-primary",children:"\u0422\u0430\u043a\u0438\u0439 \u043f\u043e\u0440\u044f\u0434\u043a\u043e\u0432\u0438\u0439 \u043d\u043e\u043c\u0435\u0440 \u0432\u0436\u0435 \u0432\u0438\u0431\u0440\u0430\u043d\u043e"}),Object(D.jsx)("div",{className:"msg",children:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0456\u043d\u0448\u0438\u0439 \u043f\u043e\u0440\u044f\u0434\u043a\u043e\u0432\u0438\u0439 \u043d\u043e\u043c\u0435\u0440 \u043f\u043e\u043b\u044f"}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:this.closePopupOrder_numberError,children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"})]})}):null]})}}]),n}(s.a.Component),ce=n(21),le=function(e){var t=function(e){return Object(D.jsx)("option",{selected:e.optionItem.manager_id==e.manager_name?"selected":"",value:e.optionItem.manager_id,children:e.optionItem.manager_name})};return Object(D.jsxs)("div",{className:"twoLevel",children:[Object(D.jsxs)("div",{className:"innerBlock",children:[Object(D.jsx)("label",{htmlFor:"ident_code",children:"\u0404\u0414\u0420\u041f\u041e\u0423"}),Object(D.jsx)("input",{api_name:"ident_code",entity_id:e.data.entity_id,onChange:function(t){return e.changeInputSC(t)},value:e.data.ident_code,id:"ident_code",type:"text",className:"form-control"}),Object(D.jsx)("label",{htmlFor:"entity_name",children:"\u041d\u0430\u0437\u0432\u0430 2-\u0433\u043e \u0440\u0456\u0432\u043d\u044f"}),Object(D.jsx)("input",{api_name:"entity_name",entity_id:e.data.entity_id,onChange:function(t){return e.changeInputSC(t)},value:e.data.entity_name,id:"entity_name",type:"text",className:"form-control"}),Object(D.jsx)("label",{htmlFor:"brand_id",children:"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440"}),Object(D.jsxs)("select",{id:"dropdown-basic-button",entity_id:e.data.entity_id,onChange:function(t){e.changeInputSC(t)},api_name:"manager_name",className:"form-select",title:"\u0422\u0412\u0411\u0412",children:[Object(D.jsx)("option",{children:"-"}),e.DICT_NETWORK_MANAGERS.map((function(n,a){return Object(D.jsx)(t,{optionItem:n,manager_name:e.data.manager_name},a)}))]})]}),Object(D.jsxs)("div",{className:"innerBlock",children:[Object(D.jsx)("label",{htmlFor:"brand_id",children:"ID 2-\u0433\u043e \u0440\u0456\u0432\u043d\u044f"}),Object(D.jsx)("input",{api_name:"brand_id",value:e.data.entity_id,id:"brand_id",type:"text",className:"form-control",disabled:!0}),Object(D.jsx)("label",{htmlFor:"brand_region",children:"\u0420\u0423 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430"}),Object(D.jsx)("input",{api_name:"brand_region",value:e.data.brand_manager_name,id:"brand_region",type:"text",className:"form-control",disabled:!0})]})]})},de=function(e){return Object(D.jsx)("option",{selected:e.optionItem.status_code==e.status_code?"selected":"",value:e.optionItem.status_code,children:e.optionItem.status_name})},ue=function(e){return Object(D.jsx)("option",{selected:e.optionItem.manager_id==e.manager_id?"selected":"","data-brandid":e.optionItem.institution_id,"data-brandname":e.optionItem.institution_name,value:e.optionItem.manager_id,children:e.optionItem.manager_name})},pe=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a,s;return Object(o.a)(this,n),(s=t.call(this,e)).selectDICT_INSTITUTION=function(e){console.log(e.target.value);var t=e.target.value;console.log(t);var n=e.currentTarget.getAttribute("apiName");console.log(n);var a=e.target.value;console.log(a);var i=s.state.TSPReportSettingsSearchObj;i[n]=a,console.log(i),s.setState({isShowSelectTVBV:!1,TSPReportSettingsSearchObj:i}),console.log(s.state),console.log(s.state.TSPReportSettingsSearchObj),s.requestDICT_BRANCH(s.props.store.userState.token,t)},s.formatDate=function(e){var t=e.getDate(),n=("0"+(e.getMonth()+1)).slice(-2);return e.getFullYear()+n+t},s.save=function(){var e={brand_name:s.state.brand_name,brand_id:s.state.brand_id,contact_person:s.state.contact_person,contact_phone:s.state.contact_phone,contact_position:s.state.contact_position,contact_email:s.state.contact_email,brand_status_code:s.state.brand_status_code,brand_region:s.state.brand_region,manager_name:s.state.manager_name,manager_id:s.state.manager_id,institution_id:s.state.institution_id};s.setState({showError:!1,errorBrand:!1,errorStatus:!1,errorManager:!1}),e.brand_name&&s.state.brand_status_code&&e.manager_id&&e.brand_id?s.requestDICT_NET_BRAND(s.props.store.userState.token,e):s.setState({errorBrand:""===e.brand_name||null===e.brand_name,errorStatus:""===s.state.brand_status_code||null===e.brand_status_code,errorManager:""===e.manager_id||null===e.manager_id,showError:!0})},s.openStandardReport=function(){s.requestTSPReportSettingsSTD(s.props.store.userState.token)},s.closePopupTable=function(){s.setState({isShowTableTSPReportSettingsSTD:!1})},s.changeSelect=function(e){var t=e.currentTarget.getAttribute("name"),n=e.target.value;console.log(t),console.log(n),"physical_acquiring_type_id"==t&&s.setState({physical_acquiring_type_id:Number(n)}),"physical_channel_type_id"==t&&s.setState({physical_channel_type_id:Number(n)}),"physical_report_format_id"==t&&s.setState({physical_report_format_id:Number(n)}),"physical_report_period_type_id"==t&&s.setState({physical_report_period_type_id:Number(n)}),"internet_acquiring_type_id"==t&&s.setState({internet_acquiring_type_id:Number(n)}),"internet_channel_type_id"==t&&s.setState({internet_channel_type_id:Number(n)}),"internet_report_format_id"==t&&s.setState({internet_report_format_id:Number(n)}),"internet_report_period_type_id"==t&&s.setState({internet_report_period_type_id:Number(n)})},s.changeReport_format_id=function(e){var t=e.target.value;console.log(t),s.setState({report_format_id:Number(t)})},s.changeReport_period_type_id=function(e){var t=e.currentTarget.getAttribute("name"),n=e.target.value;console.log(t),console.log(n),s.setState({name_input:Number(n)})},s.changeChannel_type_id=function(e){var t=e.target.value;console.log(t),s.setState({channel_type_id:Number(t)})},s.saveReport=function(){var e={tsp_list:[{tsp_id:s.state.currentTsp}],main_settings:[{acquiring_type_id:1,report_format_id:s.state.physical_report_format_id,report_period_type_id:s.state.physical_report_period_type_id,channel_type_id:s.state.physical_channel_type_id,file_name_mask:s.state.physical_file_name_mask,channel_address:s.state.physical_channel_address},{acquiring_type_id:1,report_format_id:s.state.internet_report_format_id,report_period_type_id:s.state.internet_report_period_type_id,channel_type_id:s.state.internet_channel_type_id,file_name_mask:s.state.internet_file_name_mask,channel_address:s.state.internet_channel_address}]};null!=s.state.TSPReportSettingsSTD&&(e.std_settings=s.state.TSPReportSettingsSTD),console.log(e)},s.closePopupError=function(){s.setState({isShowPopupError:!1})},s.closePopupErrorSave=function(){s.setState({isShowPopupErrorSave:!1})},s.closePopupOrder_numberError=function(){s.setState({isShowOrder_numberError:!1,isShowBootstrapTable:!0})},s.activeOperation=function(e,t){var n;return e.map((function(e,a){e.operation==t&&(console.log(e.name),n=e.name)})),n},s.nameNetWork=function(e){var t=e.target.value;console.log(t),console.log(""!=t),""!=t?(s.requestGetNewBrandId(s.props.store.userState.token,t),s.setState({brand_name:t})):s.setState({isDisableInput:!0})},s.hendleNnameNetWork=function(e){13===e.keyCode&&s.nameNetWork(e)},s.changeInput=function(e){var t=e.currentTarget.getAttribute("api_name"),n=e.currentTarget.value;if("contact_person"==t)s.setState({contact_person:n});else if("contact_phone"==t)console.log("contact_phone"),s.setState({contact_phone:n});else if("contact_position"==t)s.setState({contact_position:n});else if("contact_email"==t)console.log(/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(n)),/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(n)?(console.log("email \u0432\u0430\u043b\u0456\u0434\u043d\u0438\u0439 \u0432\u0441\u0435 \u043e\u043a"),s.setState({isContact_emailError:!1,isDisabledSaveBtn:!1,contact_email:n})):""==n?s.setState({isContact_emailError:!1,isDisabledSaveBtn:!1,contact_email:n}):(console.log("email \u043d\u0435 \u0432\u0430\u043b\u0456\u0434\u043d\u0438\u0439!"),s.setState({isContact_emailError:!0,isDisabledSaveBtn:!0,contact_email:n}));else if("brand_status_code"==t)s.setState({brand_status_code:n});else if("brand_region"==t)s.setState({brand_region:n});else if("manager_name"===t){var a,i=s.state.DICT_NETWORK_MANAGERS.filter((function(e){return e.manager_id===+n}))[0];(function(e,t){e.filter((function(e,n,s){e.manager_id==t&&(a=e.manager_name)}))}),s.setState({manager_name:a,manager_id:Number(n),institution_id:i.institution_id,brand_region:i.institution_id,brand_manager_name:i.institution_name})}},s.more=function(){s.requestGetNewEntityId(s.props.store.userState.token)},s.showTwoLevelYes=function(){s.setState({showTwoLevel:!0,moreTwoLevel:!0}),s.more()},s.showTwoLevelNo=function(){s.setState({showTwoLevel:!1,moreTwoLevel:!1,twoLevelArr:[]})},s.changeInputSC=function(e){var t=e.target.value;console.log(t);var n=e.currentTarget.getAttribute("api_name");console.log(n);var a=e.currentTarget.getAttribute("entity_id");console.log(a);var i=s.state.twoLevelArr.map((function(e){return Object.assign({},e)}));console.log(i);var r=i.findIndex((function(e){return e.entity_id==a}));if(console.log(r),"manager_name"===n){var o=s.state.DICT_NETWORK_MANAGERS.filter((function(t){return+t.manager_id===+e.target.value}))[0];i[r].brand_manager_name=o.institution_name,i[r].manager_id=o.manager_id,i[r].brand_region=o.institution_id}i[r][n]=t,console.log(i),s.setState({twoLevelArr:i})},s.state=(a={isContact_emailError:!1,isDisabledSaveBtn:!1,DICT_INSTITUTION:null,isShowSelectDICT_INSTITUTION:!1,DICT_NETWORK_MANAGERS:null,isShowSelectDICT_NETWORK_MANAGERS:!1,isDisableInput:!0,brand_name:null,brand_id:null,contact_person:"",contact_phone:"",contact_position:"",contact_email:"",brand_status_code:null,brand_region:null},Object(B.a)(a,"brand_id",null),Object(B.a)(a,"manager_name",null),Object(B.a)(a,"manager_id",null),Object(B.a)(a,"moreTwoLevel",!1),Object(B.a)(a,"showTwoLevel",!1),Object(B.a)(a,"levelBlockNumber",1),Object(B.a)(a,"twoLevelArr",[]),Object(B.a)(a,"isDisableButton",!1),Object(B.a)(a,"selectRow",null),Object(B.a)(a,"DICT_BRANCH",null),Object(B.a)(a,"isDisableTVBV",!0),Object(B.a)(a,"isShowSelectTVBV",!1),Object(B.a)(a,"TSPReportSettingsSearchObj",{}),Object(B.a)(a,"settings",null),Object(B.a)(a,"tsp_list",null),Object(B.a)(a,"isShowTsp",!1),Object(B.a)(a,"currentTsp",null),Object(B.a)(a,"isShowTypeAcquiring",!1),Object(B.a)(a,"isShowReport",!1),Object(B.a)(a,"DICT_REPORT_FORMAT",null),Object(B.a)(a,"isShowREPORT_FORMAT",!1),Object(B.a)(a,"DICT_REPORT_PERIOD_TYPE",null),Object(B.a)(a,"isShowDICT_REPORT_PERIOD_TYPE",!1),Object(B.a)(a,"DICT_REPORT_CHANNEL_TYPE",null),Object(B.a)(a,"isShowDICT_REPORT_CHANNEL_TYPE",!1),Object(B.a)(a,"isShowTableTSPReportSettingsSTD",!1),Object(B.a)(a,"TSPReportSettingsSTD",null),Object(B.a)(a,"DICT_NET_CLIENT_STATUS",null),Object(B.a)(a,"isShowDICT_NET_CLIENT_STATUS",!1),Object(B.a)(a,"isShowPopupError",!1),Object(B.a)(a,"isShowPopupErrorSave",!1),Object(B.a)(a,"currentAcquiring_type_id",null),Object(B.a)(a,"type_acquiring",1),Object(B.a)(a,"tsp_id",null),Object(B.a)(a,"report_format_id",null),Object(B.a)(a,"report_period_type_id",null),Object(B.a)(a,"channel_type_id",null),Object(B.a)(a,"file_name_mask",null),Object(B.a)(a,"physical_acquiring_type_id",1),Object(B.a)(a,"physical_channel_address",""),Object(B.a)(a,"physical_channel_type_id",1),Object(B.a)(a,"physical_extended_report",!1),Object(B.a)(a,"physical_file_name_mask",""),Object(B.a)(a,"physical_installment_report",!1),Object(B.a)(a,"physical_report_format_id",1),Object(B.a)(a,"physical_report_period_type_id",1),Object(B.a)(a,"physical_standard_report",!0),Object(B.a)(a,"internet_acquiring_type_id",2),Object(B.a)(a,"internet_channel_address",""),Object(B.a)(a,"internet_channel_type_id",1),Object(B.a)(a,"internet_extended_report",!1),Object(B.a)(a,"internet_file_name_mask",""),Object(B.a)(a,"internet_installment_report",!1),Object(B.a)(a,"internet_report_format_id",1),Object(B.a)(a,"internet_report_period_type_id",1),Object(B.a)(a,"internet_standard_report",!0),Object(B.a)(a,"isShowOrder_numberError",!1),Object(B.a)(a,"isShowBootstrapTable",!0),Object(B.a)(a,"errorBrand",!1),Object(B.a)(a,"errorStatus",!1),Object(B.a)(a,"errorManager",!1),Object(B.a)(a,"errorId",!1),Object(B.a)(a,"errorRu",!1),Object(B.a)(a,"showError",!1),Object(B.a)(a,"test",[{entity_id:545454,ident_code:null,manager_name:null,entity_name:"frf"},{entity_id:567789,ident_code:null,manager_name:null,entity_name:"gfg"}]),a),s}return Object(c.a)(n,[{key:"componentDidMount",value:function(){}},{key:"requestDICT_INSTITUTION",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_INSTITUTION",e.next=5,R.get("/api/Dictionary/DICT_INSTITUTION",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_INSTITUTION:e.data.Table.TableRows,isShowSelectDICT_INSTITUTION:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestGetNewBrandId",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/GetNewBrandId",e.next=5,R.get("/api/Dictionary/GetNewBrandId",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.requestDICT_NET_CLIENT_STATUS(n.props.store.userState.token),n.requestDICT_NETWORK_MANAGERS(n.props.store.userState.token),n.requestDICT_INSTITUTION(n.props.store.userState.token),n.setState({brand_id:e.data.brand_id,isDisableInput:!1}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestGetNewEntityId",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/GetNewEntityId",e.next=5,R.get("/api/Dictionary/GetNewEntityId",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data);var t={brand_id:n.state.brand_id,entity_id:e.data.entity_id,ident_code:null,manager_name:null,entity_name:""},a=n.state.twoLevelArr.map((function(e){return Object.assign({},e)}));a.push(t),n.setState({twoLevelArr:a}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_NETWORK_MANAGERS",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_NETWORK_MANAGERS",e.next=5,R.get("/api/Dictionary/DICT_NETWORK_MANAGERS",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_NETWORK_MANAGERS:e.data.Table.TableRows,isShowSelectDICT_NETWORK_MANAGERS:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_BRANCH",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n){var a,s=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),a="/api/Dictionary/DICT_BRANCH/?param1=".concat(n),{param1:n},e.next=6,R.get(a,{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),console.log(e.data.Table),s.setState({DICT_BRANCH:e.data.Table.TableRows,isShowSelectTVBV:!0,isDisableTVBV:!1}),s.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"requestDICT_REPORT_FORMAT",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_REPORT_FORMAT",e.next=5,R.get("/api/Dictionary/DICT_REPORT_FORMAT",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_REPORT_FORMAT:e.data.Table.TableRows,isShowREPORT_FORMAT:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_REPORT_PERIOD_TYPE",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_REPORT_PERIOD_TYPE",e.next=5,R.get("/api/Dictionary/DICT_REPORT_PERIOD_TYPE",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_REPORT_PERIOD_TYPE:e.data.Table.TableRows,isShowDICT_REPORT_PERIOD_TYPE:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_REPORT_CHANNEL_TYPE",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_REPORT_CHANNEL_TYPE",e.next=5,R.get("/api/Dictionary/DICT_REPORT_CHANNEL_TYPE",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_REPORT_CHANNEL_TYPE:e.data.Table.TableRows,isShowDICT_REPORT_CHANNEL_TYPE:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_NET_CLIENT_STATUS",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_NET_CLIENT_STATUS",e.next=5,R.get("/api/Dictionary/DICT_NET_CLIENT_STATUS",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_NET_CLIENT_STATUS:e.data.Table.TableRows,isShowDICT_NET_CLIENT_STATUS:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestTSPReportSettings",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n){var a=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/TSPReportSettings",e.next=5,R.post("/api/TSPReportSettings",n,{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(e){console.log(e.data),e.data.record_count>=1?a.setState({settings:e.data.settings,tsp_list:e.data.tsp_list,isShowTsp:!0}):e.data.record_count<1&&a.setState({isShowPopupError:!0}),a.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"requestTSPReportSettings_test",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n,a=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/TSPReportSettings",n={date_from:"2018081",date_to:"2021081",institution_id:"824",tsp_name:"\u0422\u0437\u043e\u0432"},e.next=6,R.post("/api/TSPReportSettings",n,{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(e){console.log(e.data),e.data.record_count>=1?a.setState({settings:e.data.settings,tsp_list:e.data.tsp_list,isShowTsp:!0}):e.data.record_count<1&&a.setState({isShowPopupError:!0}),a.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response)}));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_NET_BRAND",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n){var a=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_NET_BRAND",console.log(n),e.next=6,R.post("/api/Dictionary/DICT_NET_BRAND",n,{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(e){console.log(e.data);0!=a.state.twoLevelArr.length&&a.state.twoLevelArr.forEach((function(e,t,n){console.log(e),function(e){console.log(e),a.requestDICT_NET_ENTITY(a.props.store.userState.token,e)}(e)})),a.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response)}));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"requestDICT_NET_ENTITY",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n){var a=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_NET_ENTITY",console.log(n),e.next=6,R.post("/api/Dictionary/DICT_NET_ENTITY",n,{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(e){console.log(e.data),a.setState({brand_name:null,brand_id:"",contact_person:"",contact_phone:"",contact_position:"",contact_email:"",brand_status_code:null,brand_region:null,manager_name:null,manager_id:null,isDisableInput:!0,showTwoLevel:!1,moreTwoLevel:!1,twoLevelArr:[]}),a.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response)}));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"requestTSPReportSettingsSTD_SAVE",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n){var a=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/TSPReportSettings",console.log(n),e.next=6,R.put("/api/TSPReportSettings",n,{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(e){console.log(e.data),a.setState({isShowTsp:!1,isShowTypeAcquiring:!1}),a.search(),a.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),a.setState({isShowPopupErrorSave:!0}),a.props.store.changeLoading(!1)}));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return console.log(this.state),console.log("test2"),Object(D.jsxs)("div",{className:"coverTable DICT_NET_BRAND",children:[Object(D.jsxs)("div",{className:"headerTable",children:[Object(D.jsx)("div",{className:"titleTable",children:this.activeOperation(this.props.store.userState.OPERATIONS,this.props.store.location.pathname.substr(11))}),Object(D.jsx)("div",{className:"optionBlock"})]}),Object(D.jsxs)("div",{className:"addbBlock",children:[Object(D.jsxs)("div",{className:"coverInputs justify-content-end",children:[Object(D.jsx)("label",{htmlFor:"name_netWork",children:"\u041d\u0430\u0439\u043c\u0435\u043d\u0443\u0432\u0430\u043d\u043d\u044f \u043c\u0435\u0440\u0435\u0436\u0456"}),Object(D.jsx)("input",{onBlur:this.nameNetWork,onKeyDown:this.hendleNnameNetWork,api_name:"brand_name",id:"name_netWork",type:"text",className:"form-control ".concat(this.state.errorBrand?"validError ":"")}),Object(D.jsx)("label",{htmlFor:"status",children:"\u0421\u0442\u0430\u0442\u0443\u0441"}),Object(D.jsxs)("select",{disabled:this.state.isDisableInput?"disabled":"",id:"dropdown-basic-button",onChange:this.changeInput,api_name:"brand_status_code",className:"form-select ".concat(this.state.errorStatus?"validError ":""),title:"\u0422\u0412\u0411\u0412",children:[Object(D.jsx)("option",{children:"-"}),this.state.isShowDICT_NET_CLIENT_STATUS?this.state.DICT_NET_CLIENT_STATUS.map((function(t,n){return Object(D.jsx)(de,{optionItem:t,status_code:e.state.brand_status_code},n)})):Object(D.jsx)(D.Fragment,{})]}),Object(D.jsx)("label",{htmlFor:"DICT_NETWORK_MANAGERS",children:"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440 \u043c\u0435\u0440\u0435\u0436\u0456"}),Object(D.jsxs)("select",{disabled:this.state.isDisableInput?"disabled":"",id:"dropdown-basic-button",onChange:this.changeInput,api_name:"manager_name",className:"form-select ".concat(this.state.errorManager?"validError ":""),children:[Object(D.jsx)("option",{children:"-"}),this.state.isShowSelectDICT_NETWORK_MANAGERS?this.state.DICT_NETWORK_MANAGERS.map((function(t,n){return Object(D.jsx)(ue,{optionItem:t,manager_id:e.state.manager_id},n)})):Object(D.jsx)(D.Fragment,{})]}),this.state.showError?Object(D.jsx)("p",{class:"error",children:"\u0417\u0430\u043f\u043e\u0432\u043d\u0456\u0442\u044c, \u0431\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f"}):null]}),Object(D.jsxs)("div",{className:"coverInputs justify-content-end",children:[Object(D.jsx)("label",{htmlFor:"brand_id",children:"ID \u043c\u0435\u0440\u0435\u0436\u0456"}),Object(D.jsx)("input",{disabled:this.state.isDisableTVBV?"disabled":"",value:this.state.brand_id,api_name:"brand_id",id:"brand_id",type:"text",className:"form-control ".concat(this.state.errorId?"validError ":"")}),Object(D.jsx)("label",{htmlFor:"brand_name",children:"\u0420\u0423 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430"}),Object(D.jsx)("input",{disabled:!0,value:this.state.brand_manager_name,api_name:"brand_name",id:"brand_name",type:"text",className:"form-control ".concat(this.state.errorRu?"validError ":"")}),this.state.showError?Object(D.jsx)("p",{class:"error",style:{opacity:0},children:"\u0417\u0430\u043f\u043e\u0432\u043d\u0456\u0442\u044c, \u0431\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u043e\u0434\u043d\u0435 \u0437 5-\u0438 \u0437\u043d\u0430\u0447\u0435\u043d\u044c"}):null]}),Object(D.jsxs)("div",{className:"coverInputs contactPerson",children:[Object(D.jsx)("span",{children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u0430 \u043e\u0441\u043e\u0431\u0430"}),Object(D.jsxs)("div",{className:"innerBlock",children:[Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"date_from",children:"\u041f\u0406\u0411"}),Object(D.jsx)("input",{disabled:this.state.isDisableInput?"disabled":"",onChange:this.changeInput,api_name:"contact_person",className:"customInput form-control",id:"date_from",type:"text",value:this.state.contact_person})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"date_to",children:"\u041f\u043e\u0441\u0430\u0434\u0430"}),Object(D.jsx)("input",{disabled:this.state.isDisableInput?"disabled":"",onChange:this.changeInput,api_name:"contact_position",className:"customInput form-control",id:"date_to",type:"text",value:this.state.contact_position})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"date_to",children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"}),Object(D.jsx)(W.a,{mask:"999999999999",type:"phone",maskChar:"",alwaysShowMask:"false",pattern:"[0-9]",name:"phone",id:"phoneInput",api_name:"contact_phone",disabled:this.state.isDisableInput?"disabled":"",onChange:this.changeInput,className:"customInput form-control",value:this.state.contact_phone})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"email",children:"Email"}),Object(D.jsx)("input",{disabled:this.state.isDisableInput?"disabled":"",onChange:this.changeInput,api_name:"contact_email",className:"".concat(this.state.isContact_emailError?"errorEmail":""," customInput form-control"),id:"email",type:"text",value:this.state.contact_email})]})]})]})]}),Object(D.jsxs)("div",{className:"addBlockRadio",children:[Object(D.jsx)("div",{className:"title",children:"\u0414\u043e\u0434\u0430\u0442\u0438 2-\u0439 \u0440\u0456\u0432\u0435\u043d\u044c \u043c\u0435\u0440\u0435\u0436\u0456"}),Object(D.jsxs)("div",{className:"coverRadioBtn",children:[Object(D.jsx)("label",{htmlFor:"yes",children:"\u0422\u0430\u043a"}),Object(D.jsx)("input",{name:"is_two_level",onClick:this.showTwoLevelYes,disabled:this.state.isDisableInput?"disabled":"",type:"radio",id:"yes"}),Object(D.jsx)("label",{htmlFor:"no",children:"\u041d\u0456"}),Object(D.jsx)("input",{name:"is_two_level",onClick:this.showTwoLevelNo,disabled:this.state.isDisableInput?"disabled":"",type:"radio",id:"no"})]})]}),Object(D.jsx)("div",{className:"coverTwoLevel",children:this.state.showTwoLevel?Object(D.jsxs)(D.Fragment,{children:[this.state.twoLevelArr.map((function(t,n){return Object(D.jsx)(le,{data:t,brand_region:e.state.brand_region,DICT_NETWORK_MANAGERS:e.state.DICT_NETWORK_MANAGERS,changeInputSC:e.changeInputSC},n)})),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:this.more,children:"\u0414\u043e\u0434\u0430\u0442\u0438 \u0449\u0435"})]}):Object(D.jsx)(D.Fragment,{})}),Object(D.jsx)("div",{className:"coverBtn",children:Object(D.jsx)("button",{className:"btn btn-success",disabled:this.state.isDisabledSaveBtn?"disabled":"",onClick:this.save,children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438 \u043c\u0435\u0440\u0435\u0436\u0443"})}),this.state.isShowPopupError?Object(D.jsx)(D.Fragment,{children:Object(D.jsx)("div",{className:"coverPopupError",children:Object(D.jsxs)("div",{className:"innerBlock",children:[Object(D.jsx)("div",{className:"title alert alert-primary",children:"\u041d\u0435\u043c\u0430\u0454 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443 \u043f\u043e \u0434\u0430\u043d\u043e\u043c\u0443 \u043f\u043e\u0448\u0443\u043a\u0443"}),Object(D.jsx)("div",{className:"msg",children:"\u0421\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0432\u0432\u0435\u0441\u0442\u0438 \u0456\u043d\u0448\u0456 \u0434\u0430\u043d\u0456 \u0434\u043b\u044f \u043f\u043e\u0448\u0443\u043a\u0443"}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:this.closePopupError,children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"})]})})}):Object(D.jsx)(D.Fragment,{}),this.state.isShowPopupErrorSave?Object(D.jsx)(D.Fragment,{children:Object(D.jsx)("div",{className:"coverPopupError",children:Object(D.jsxs)("div",{className:"innerBlock",children:[Object(D.jsx)("div",{className:"title alert alert-primary",children:"\u0423\u043f\u04411 \u0421\u0442\u0430\u043b\u0430\u0441\u044f \u043f\u043e\u043c\u0438\u043b\u043a\u0430"}),Object(D.jsx)("div",{className:"msg",children:":("}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:this.closePopupErrorSave,children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"})]})})}):Object(D.jsx)(D.Fragment,{}),this.state.isShowOrder_numberError?Object(D.jsx)(D.Fragment,{children:Object(D.jsx)("div",{className:"coverOrder_numberError",children:Object(D.jsxs)("div",{className:"innerBlock",children:[Object(D.jsx)("div",{className:"title alert alert-primary",children:"\u0422\u0430\u043a\u0438\u0439 \u043f\u043e\u0440\u044f\u0434\u043a\u043e\u0432\u0438\u0439 \u043d\u043e\u043c\u0435\u0440 \u0432\u0436\u0435 \u0432\u0438\u0431\u0440\u0430\u043d\u043e"}),Object(D.jsx)("div",{className:"msg",children:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0456\u043d\u0448\u0438\u0439 \u043f\u043e\u0440\u044f\u0434\u043a\u043e\u0432\u0438\u0439 \u043d\u043e\u043c\u0435\u0440 \u043f\u043e\u043b\u044f"}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:this.closePopupOrder_numberError,children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"})]})})}):Object(D.jsx)(D.Fragment,{})]})}}]),n}(s.a.Component),_e=n(102),he=(n(588),function(e){return Object(D.jsx)("option",{className:"blockSelectItem",onClick:function(t){return e.onClickBlockSelectItem(t)},value:e.item.brand_id,name:e.item.brand_name,children:e.item.brand_name})}),me=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a,i;return Object(o.a)(this,n),(i=t.call(this,e)).onChangeAutocompleteInput=function(e){var t=e.target.value;i.setState({inputRequest:t,selected:!1}),t.length>2&&i.search(t)},i.onClickAutocompleteInput=function(e){var t=e.target.value;i.search(t)},i.onClickAutocompleteInputRes=function(){i.setState({inputResult:null,isShowBlockSelect:!0,isShowInputResult:!1,isShowInputRequest:!0})},i.onBlurBlockSelect=function(){i.setState({isShowBlockSelect:!1})},i.onClickBlockSelectItem=function(e){var t=e.currentTarget.getAttribute("value"),n=e.currentTarget.getAttribute("name");""!==t&&(i.props.addBrandName(i.state.data.filter((function(e){return e.brand_id===+t}))[0]),t!==i.state.inputRequest&&(i.search(t),i.setState({inputRequest:n,isShowBlockSelect:!1,selected:!0})),i.setState({isShowBlockSelect:!1}))},i.state=(a={data:null,inputRequest:"",inputResult:i.props.tsp_name,isShowBlockSelect:!1,isShowInputResult:!1,isShowInputRequest:!0,isLoading:!1,selected:!1},Object(B.a)(a,"data",null),Object(B.a)(a,"brand_arr",null),a),i.myRef=s.a.createRef(),i}return Object(c.a)(n,[{key:"request",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n){var a=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),"/api/Dictionary/DICT_NET_BRAND?name=brand_name",e.next=4,v.a.get("/api/Dictionary/DICT_NET_BRAND?name=brand_name",{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(e){null===e.data.Table.TableRows?a.setState({brand_arr:[]}):a.setState({data:e.data.Table.TableRows,brand_arr:e.data.Table.TableRows}),a.setState({isLoading:!1,isShowBlockSelect:!0})})).catch((function(e){console.log(e.response)}));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"search",value:function(e){this.setState({isShowBlockSelect:!0});var t=null!==this.state.data?this.state.data.filter((function(t){return t.brand_name.toString().toLowerCase().includes(e.toString().toLowerCase())})):null;null===t?this.setState({brand_arr:[{client_name:"\u041d\u0435\u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0436\u043e\u0434\u043d\u043e\u0433\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443"}]}):this.setState({brand_arr:t})}},{key:"componentDidUpdate",value:function(e,t,n){e.update!==this.props.update&&this.setState({inputRequest:""})}},{key:"render",value:function(){var e=this;return Object(D.jsxs)("div",{className:"autocomplete",children:[Object(D.jsx)("input",{className:"".concat(this.state.selected?"selected ":"").concat(this.state.isShowInputRequest?"":"dn ","form-control merchant-input"),placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043d\u0430\u0437\u0432\u0443 \u043c\u0435\u0440\u0435\u0436\u0456...",type:"text",id:"brand_name_val",onBlur:this.props.onBlur,onChange:this.onChangeAutocompleteInput,onClick:function(){return e.state.isShowBlockSelect?e.setState({isShowBlockSelect:!1}):e.request(e.props.token,"",!1)},value:this.state.inputRequest}),Object(D.jsx)("div",{className:"".concat(this.state.isShowBlockSelect?"":"dn ","blockSelect"),ref:this.myRef,children:this.state.isShowBlockSelect&&null!=this.state.brand_arr?this.state.brand_arr.map((function(t,n){return Object(D.jsx)(he,{item:t,onClickBlockSelectItem:e.onClickBlockSelectItem},n)})):Object(D.jsx)(D.Fragment,{})}),this.state.isLoading?Object(D.jsx)("div",{className:"coverloader",children:Object(D.jsx)("div",{className:"loader"})}):null]})}}]),n}(s.a.Component);function be(e){var t=e.store,n=Object(a.useState)(!1),s=Object(L.a)(n,2),i=(s[0],s[1]),r=Object(a.useState)([]),o=Object(L.a)(r,2),c=(o[0],o[1]),l=Object(a.useState)(null),d=Object(L.a)(l,2),u=d[0],p=d[1],_=Object(a.useState)(),m=Object(L.a)(_,2),b=(m[0],m[1],Object(a.useState)(!1)),j=Object(L.a)(b,2),T=j[0],g=j[1],O=Object(a.useState)(!1),S=Object(L.a)(O,2),I=S[0],R=S[1],x=Object(a.useState)(!1),N=Object(L.a)(x,2),y=N[0],E=N[1],k=Object(a.useState)(!1),A=Object(L.a)(k,2),w=A[0],P=A[1],q=Object(a.useState)(""),M=Object(L.a)(q,2),Y=(M[0],M[1],Object(a.useState)([])),V=Object(L.a)(Y,2),U=V[0],H=V[1],Q=Object(a.useState)(!1),G=Object(L.a)(Q,2),W=G[0],K=G[1],Z=Object(a.useState)(!1),z=Object(L.a)(Z,2),$=z[0],J=z[1],X=Object(a.useState)(!1),ee=Object(L.a)(X,2),te=ee[0],ne=ee[1],ae=Object(a.useState)(null),se=Object(L.a)(ae,2),ie=(se[0],se[1]),re=Object(a.useState)({}),oe=Object(L.a)(re,2),ce=oe[0],le=oe[1],de=Object(a.useState)(!1),ue=Object(L.a)(de,2),pe=(ue[0],ue[1]),he=Object(a.useState)([]),be=Object(L.a)(he,2),je=(be[0],be[1],Object(a.useState)(null)),Te=Object(L.a)(je,2),ge=(Te[0],Te[1],Object(a.useState)(!1)),Oe=Object(L.a)(ge,2),Se=Oe[0],Ie=Oe[1],fe=Object(a.useState)([]),Ce=Object(L.a)(fe,2),Re=Ce[0],ve=Ce[1],xe=Object(a.useState)(null),Ne=Object(L.a)(xe,2),De=(Ne[0],Ne[1],Object(a.useState)(!1)),ye=Object(L.a)(De,2),Ee=(ye[0],ye[1],Object(a.useState)([])),ke=Object(L.a)(Ee,2),Ae=(ke[0],ke[1],Object(a.useState)(null)),we=Object(L.a)(Ae,2),Pe=(we[0],we[1],Object(a.useState)(!1)),qe=Object(L.a)(Pe,2),Me=(qe[0],qe[1]),Be=Object(a.useState)(null),Le=Object(L.a)(Be,2),Fe=Le[0],Ye=Le[1],Ve=Object(a.useState)(null),Ue=Object(L.a)(Ve,2),He=Ue[0],Qe=Ue[1],Ge=Object(a.useState)(null),We=Object(L.a)(Ge,2),Ke=(We[0],We[1],Object(a.useState)(!1)),Ze=Object(L.a)(Ke,2),ze=(Ze[0],Ze[1],Object(a.useState)([])),$e=Object(L.a)(ze,2),Je=($e[0],$e[1],Object(a.useState)(null)),Xe=Object(L.a)(Je,2),et=(Xe[0],Xe[1],Object(a.useState)(null)),tt=Object(L.a)(et,2),nt=(tt[0],tt[1],Object(a.useState)(!1)),at=Object(L.a)(nt,2),st=(at[0],at[1]),it=Object(a.useState)([]),rt=Object(L.a)(it,2),ot=rt[0],ct=rt[1],lt=Object(a.useState)(null),dt=Object(L.a)(lt,2),ut=(dt[0],dt[1],Object(a.useState)(!1)),pt=Object(L.a)(ut,2),_t=(pt[0],pt[1],Object(a.useState)([])),ht=Object(L.a)(_t,2),mt=(ht[0],ht[1],Object(a.useState)(null)),bt=Object(L.a)(mt,2),jt=(bt[0],bt[1],function(){var e=Object(C.a)(f.a.mark((function e(){var n,a=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>0&&void 0!==a[0]?a[0]:"",i(!0),e.next=4,v.a.get("/api/Dictionary/DICT_NET_BRAND?name=brand_name&param1=".concat(n),{headers:{token:t.userState.token}}).then((function(e){var t=e.data.record_count>0?e.data.Table.TableRows:[];c(t),i(!1)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()),Tt=function(){var e=Object(C.a)(f.a.mark((function e(n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/api/Dictionary/DICT_NET_ENTITY?param1=".concat(n),{headers:{token:t.userState.token}}).then((function(e){var t=0;0===e.data.ErrorStatus.ErrorCode&&(null!==e.data.Table.TableRows?(Ye(e.data.Table.TableRows.map((function(e){return Object(h.a)(Object(h.a)({},e),{},{index:t++})}))),J(!0)):J(!1),Me(!0))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),gt=function(){var e=Object(C.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/api/Dictionary/DICT_NETWORK_MANAGERS?name=manager_name",{headers:{token:t.userState.token}}).then((function(e){var t=e.data.Table.TableRows.map((function(e){return{id:e.manager_id,value:e.manager_name,institution_id:e.institution_id,institution_name:e.institution_name}}));ct(t),st(!0)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ot=function(){var e=Object(C.a)(f.a.mark((function e(n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/api/Dictionary/DICT_NET_CLIENT?param1=".concat(n),{headers:{token:t.userState.token}}).then((function(e){0===e.data.ErrorStatus.ErrorCode&&(null!==e.data.Table.TableRows?(Qe(e.data.Table.TableRows),ne(!0)):ne(!1),pe(!0))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),St=function(){var e=Object(C.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("/api/Dictionary/DICT_NETWORK_MANAGERS?name=manager_name",{headers:{token:t.userState.token}}).then((function(e){var t=e.data.Table.TableRows.map((function(e){return{id:e.manager_id,value:e.manager_name}}));ve(t),Ie(!0)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(a.useEffect)((function(){St(),gt(),jt()}),[]);var It=function(){var e=Object(C.a)(f.a.mark((function e(){var n,a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.changeLoading(!0),!I){e.next=4;break}return e.next=4,v.a.post("/api/Dictionary/DICT_NET_BRAND",Object(h.a)({},ce),{headers:{token:t.userState.token}});case 4:if(!y){e.next=7;break}return e.next=7,v.a.post("/api/Dictionary/DICT_NET_ENTITY",Object(h.a)({},Fe),{headers:{token:t.userState.token}});case 7:if(0===U.lenght){e.next=16;break}n=0;case 9:if(!(n<U.length)){e.next=16;break}return a=U[n],e.next=13,v.a.delete("/api/Dictionary/DICT_NET_CLIENT/".concat(a),{headers:{token:t.userState.token}});case 13:n++,e.next=9;break;case 16:R(!1),E(!1),P(!1),g(!T),t.changeLoading(!1);case 21:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function ft(e,t){var n=function(t){return Object(h.a)(Object(h.a)({},t),{},Object(B.a)({},e.target.dataset.id,e.target.value))};switch(t){case"firstLevel":le(n);break;case"secondLevel":var a=Fe[+e.target.dataset.index],s=Fe.filter((function(e){return e.index!==a.index}));console.log(e);var i=[n(a)].concat(Object(_e.a)(s));console.log(n(a)),Ye(i.sort((function(e,t){return e.index<t.index?-1:1})));break;default:throw new Error("this type no exist!")}}var Ct=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"firstLevel";e.stopPropagation();var n={target:{value:e.target.value,dataset:{id:"manager_id",index:e.target.dataset.index}}},a=ot.filter((function(t){return+t.id===+e.target.value}))[0],s={target:{value:a.value,dataset:{id:"manager_name",index:e.target.dataset.index}}},i={target:{value:a.institution_name,dataset:{id:"brand_region",index:e.target.dataset.index}}};ft(n,t),ft(s,t),ft(i,t)};return Object(D.jsxs)("div",{className:"coverTable NETWORK_EDIT",children:[Object(D.jsx)("div",{className:"addbBlock ",children:Object(D.jsxs)("div",{className:"container",children:[Object(D.jsxs)("div",{className:"row col-12",children:[Object(D.jsxs)("div",{className:"row col-12",children:[Object(D.jsx)("div",{children:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u043d\u043d\u044f \u0456\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0456\u0457 \u043f\u043e \u043c\u0435\u0440\u0435\u0436\u0456:"}),Object(D.jsx)(me,{token:t.userState.token,addBrandName:function(e){p(e),le(e),ie(e.brand_name),K(!0),Tt(e.brand_id),Ot(e.brand_id)},update:T})]}),Object(D.jsx)("div",{children:Object(D.jsx)(F.a.Check,{style:{marginTop:"20px"},type:"checkbox",id:"brand_name_checkbox",label:"I \u0420\u0456\u0432\u0435\u043d\u044c",checked:I,onChange:function(){R(!I)},className:W?null:"d-none"})}),Object(D.jsx)("div",{children:Object(D.jsx)(F.a.Check,{style:{marginTop:"20px"},type:"checkbox",id:"brand_contact_name",label:"II \u0420\u0456\u0432\u0435\u043d\u044c",checked:y,onChange:function(){E(!y)},className:$?null:"d-none"})}),Object(D.jsx)("div",{children:Object(D.jsx)(F.a.Check,{style:{marginTop:"20px"},type:"checkbox",id:"brand_manager_id",label:"III \u0420\u0456\u0432\u0435\u043d\u044c",checked:w,onChange:function(){P(!w)},className:te?null:"d-none"})})]}),I?Object(D.jsxs)("div",{className:"row col-12 mt-5",onChange:function(e){return ft(e,"firstLevel")},children:[Object(D.jsx)("h2",{children:"I \u0420\u0456\u0432\u0435\u043d\u044c "}),Object(D.jsxs)("div",{className:"container row  d-flex  justify-content-between",children:[Object(D.jsxs)("div",{className:"col-5 mt-2",children:[Object(D.jsx)("label",{children:"\u041d\u0430\u0437\u0432\u0430 \u043c\u0435\u0440\u0435\u0436\u0456"}),Object(D.jsx)(F.a.Control,{type:"text","data-id":"brand_name",value:ce.brand_name})]}),Object(D.jsxs)("div",{className:"col-5 mt-2",children:[Object(D.jsx)("label",{children:"\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u043d\u0430 \u043e\u0441\u043e\u0431\u0430"}),Object(D.jsx)(F.a.Control,{type:"text","data-id":"contact_person",value:ce.contact_person})]}),Object(D.jsxs)("div",{className:"col-5 mt-2",children:[Object(D.jsx)("label",{children:"\u041d\u0430\u0437\u0432\u0430 \u0441\u0442\u0430\u0442\u0443\u0441\u0443"}),Object(D.jsx)(F.a.Control,{type:"text","data-id":"brand_status_name",value:ce.brand_status_name})]}),Object(D.jsxs)("div",{className:"col-5 mt-2",children:[Object(D.jsx)("label",{children:" \u041f\u043e\u0441\u0430\u0434\u0430 \u043a\u043e\u043d\u0442. \u043e\u0441\u043e\u0431\u0438 "}),Object(D.jsx)(F.a.Control,{type:"text","data-id":"contact_position",value:ce.contact_position})]}),Object(D.jsxs)("div",{className:"col-5 mt-2",children:[Object(D.jsx)("label",{children:"\u041f\u0406\u0411 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430 \u043c\u0435\u0440\u0435\u0436\u0456"}),Object(D.jsxs)(F.a.Select,{onChange:Ct,"data-id":"manager_id",children:[Object(D.jsx)("option",{children:u.manager_name}),Se?Re.map((function(e){return Object(D.jsx)("option",{value:e.id,children:e.value})})):null]})]}),Object(D.jsxs)("div",{className:"col-5 mt-2",children:[Object(D.jsx)("label",{children:" \u0422\u0435\u043b\u0435\u0444\u043e\u043d \u043a\u043e\u043d\u0442. \u043e\u0441\u043e\u0431\u0438 "}),Object(D.jsx)(F.a.Control,{type:"text","data-id":"contact_phone",value:ce.contact_phone})]}),Object(D.jsxs)("div",{className:"col-5 mt-2",children:[Object(D.jsx)("label",{children:"\u0420\u0423 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430"}),Object(D.jsx)(F.a.Control,{type:"text","data-id":"brand_region",disabled:!0,value:ce.brand_region})]}),Object(D.jsxs)("div",{className:"col-5 mt-2",children:[Object(D.jsx)("label",{children:"Email \u043a\u043e\u043d\u0442. \u043e\u0441\u043e\u0431\u0438 "}),Object(D.jsx)(F.a.Control,{type:"text","data-id":"contact_email",value:ce.contact_email})]})]})]}):null,y?Object(D.jsxs)("div",{className:"row col-12 mt-5",onChange:function(e){return ft(e,"secondLevel")},children:[Object(D.jsx)("h2",{children:"II \u0420\u0456\u0432\u0435\u043d\u044c "}),Fe?Fe.map((function(e){return Object(D.jsxs)("div",{style:{margin:"20px 0"},children:[Object(D.jsxs)("div",{className:"col-5 mt-2",children:[Object(D.jsx)("label",{children:"\u041d\u0430\u0437\u0432\u0430 \u043c\u0435\u0440\u0435\u0436\u0456"}),Object(D.jsx)(F.a.Control,{type:"text","data-id":"brand_name","data-index":e.index,value:e.brand_name})]}),Object(D.jsxs)("div",{className:"col-5 mt-2",children:[Object(D.jsx)("label",{children:"ID \u043c\u0435\u0440\u0435\u0436\u0456"}),Object(D.jsx)(F.a.Control,{type:"text","data-id":"brand_id","data-index":e.index,value:e.brand_id})]}),Object(D.jsxs)("div",{className:"col-5 mt-2",children:[Object(D.jsx)("label",{children:"\u041f\u0406\u0411 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430 \u043c\u0435\u0440\u0435\u0436\u0456"}),Object(D.jsxs)(F.a.Select,{onChange:function(e){return Ct(e,"secondLevel")},"data-id":"manager_id","data-index":e.index,children:[Object(D.jsx)("option",{children:e.manager_name}),Se?Re.map((function(e){return Object(D.jsx)("option",{value:e.id,children:e.value})})):null]})]}),Object(D.jsxs)("div",{className:"col-5 mt-2",children:[Object(D.jsx)("label",{children:"\u0420\u0423 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430"}),Object(D.jsx)(F.a.Control,{type:"text","data-id":"brand_region",disabled:!0,"data-index":e.index,value:e.brand_region})]}),Object(D.jsxs)("div",{className:"col-5 mt-2",children:[Object(D.jsx)("label",{children:"\u0406\u041d\u041d/\u0404\u0414\u0420\u041f\u041e\u0423"}),Object(D.jsx)(F.a.Control,{type:"text","data-id":"ident_code","data-index":e.index,value:e.ident_code})]})]})})):null]}):null,w?Object(D.jsxs)("div",{className:"row col-12 mt-5",children:[Object(D.jsx)("h2",{children:"III \u0420\u0456\u0432\u0435\u043d\u044c "}),Object(D.jsx)("div",{class:"container",children:Object(D.jsx)("div",{class:"row",children:Object(D.jsx)("div",{class:"col-12",children:Object(D.jsxs)("table",{class:"table table-bordered",children:[Object(D.jsx)("thead",{children:Object(D.jsxs)("tr",{children:[Object(D.jsx)("th",{scope:"col",children:"\u041a\u043b\u0456\u0454\u043d\u0442"}),Object(D.jsx)("th",{scope:"col",children:"\u0404\u0414\u0420\u041f\u041e\u0423"}),Object(D.jsx)("th",{scope:"col",children:"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440"}),Object(D.jsx)("th",{scope:"col"})]})}),Object(D.jsx)("tbody",{children:He?He.map((function(e){return Object(D.jsxs)("tr",{children:[Object(D.jsx)("td",{children:e.entity_name}),Object(D.jsx)("td",{children:e.ident_code}),Object(D.jsx)("td",{children:e.manager_name}),Object(D.jsx)("td",{children:Object(D.jsx)("button",{type:"button",class:"btn btn-danger",onClick:function(){return t=e.client_id,Qe(He.filter((function(e){return e.client_id!==t}))),void H([].concat(Object(_e.a)(U),[t]));var t},children:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"})})]})})):null})]})})})})]}):null]})}),Object(D.jsx)("div",{class:"btnBlock",style:{background:"white",padding:"10px"},children:Object(D.jsx)("button",{class:"btn btn-success",onClick:It,children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})})]})}function je(e){var t=e.store,n=Object(a.useState)(!1),s=Object(L.a)(n,2),i=s[0],r=s[1],o=Object(a.useState)([]),c=Object(L.a)(o,2),l=c[0],d=c[1],u=Object(a.useState)(null),p=Object(L.a)(u,2),_=p[0],h=p[1],m=Object(a.useState)(),b=Object(L.a)(m,2),j=(b[0],b[1],Object(a.useState)(new Date)),T=Object(L.a)(j,2),g=T[0],O=T[1],S=Object(a.useState)(new Date),I=Object(L.a)(S,2),R=I[0],x=I[1],N=Object(a.useState)(null),y=Object(L.a)(N,2),E=(y[0],y[1]),k=function(){var e=Object(C.a)(f.a.mark((function e(n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(!0),e.next=3,v.a.get("/api/Dictionary/DICT_NET_BRAND?name=brand_name&param1=".concat(n),{headers:{token:t.userState.token}}).then((function(e){var t=e.data.record_count>0?e.data.Table.TableRows:[];d(t),r(!1)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(C.a)(f.a.mark((function e(){var n,a,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.changeLoading(!0),n=g.split("-"),a=R.split("-"),s={brand_id:_.brand_id,date_from:"".concat(n[0]).concat(n[1]).concat(n[2]),date_to:"".concat(a[0]).concat(a[1]).concat(a[2])},e.next=6,v.a.post("/api/Dictionary/GetNetworkAuditReport",s,{headers:{token:t.userState.token},responseType:"blob"}).then((function(e){t.changeLoading(!1);var n=decodeURI(e.headers["content-disposition"].split("filename*=UTF-8''")[1]),a=window.URL.createObjectURL(new Blob([e.data])),s=document.createElement("a");s.href=a,s.setAttribute("download","".concat(n.slice(0,n.length-5),".").concat(n.slice(-4))),document.body.appendChild(s),s.click()}));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(D.jsxs)("div",{className:"coverTable DICT_NET_BRAND",children:[Object(D.jsx)("div",{className:"addbBlock ",children:Object(D.jsx)("div",{className:"container",children:Object(D.jsxs)("div",{className:"row col-12",children:[Object(D.jsxs)("div",{className:"row col-12",children:[Object(D.jsx)("div",{className:"mb-1",children:"\u0417\u043c\u0456\u043d\u0438 \u0456\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0456\u0457 \u043f\u043e \u043c\u0435\u0440\u0435\u0436\u0456:"}),Object(D.jsx)(Y.a,{className:"col-6",filterBy:function(){return!0},id:"async-brand-audit",isLoading:i,labelKey:function(e){return h(e),E(e),e.brand_name},minLength:3,onSearch:k,options:l,searchText:"\u041f\u043e\u0448\u0443\u043a...",placeholder:"\u041d\u0430\u0437\u0432\u0430 \u043c\u0435\u0440\u0435\u0436\u0456...",promptText:"",renderMenuItemChildren:function(e,t){return Object(D.jsx)("option",{value:e.brand_id,children:e.brand_name})}})]}),Object(D.jsx)("div",{children:Object(D.jsxs)("div",{className:"coverInput mt-3",children:[Object(D.jsx)("span",{className:"mb-1",children:"\u041f\u0435\u0440\u0456\u043e\u0434 \u0437\u0432\u0456\u0442\u0443"}),Object(D.jsxs)("div",{className:"row container",children:[Object(D.jsxs)("div",{className:"d-flex align-items-center col-3",children:[Object(D.jsx)("label",{htmlFor:"date_report_from",children:"\u0417"}),Object(D.jsx)(F.a.Control,{onChange:function(e){O(e.target.value)},type:"date",style:{marginLeft:"10px",minWidth:"150px"}})]}),Object(D.jsxs)("div",{className:"d-flex align-items-center  col-3",children:[Object(D.jsx)("label",{htmlFor:"date_report_to",children:"\u041f\u043e"}),Object(D.jsx)(F.a.Control,{onChange:function(e){x(e.target.value)},type:"date",style:{marginLeft:"10px",minWidth:"150px"}})]})]})]})})]})})}),Object(D.jsx)("div",{class:"btnBlock",style:{background:"white",padding:"10px"},children:Object(D.jsx)("button",{class:"btn btn-success",onClick:A,children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0438\u0442\u0438"})})]})}var Te=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).changeUserCode=function(e){var t=e.target.value;a.setState({user_code:t})},a.changeUserName=function(e){var t=e.target.value;a.setState({user_name:t})},a.changeOnlyActive=function(e){var t=e.target.checked;a.setState({only_active:t})},a.search=function(){a.requestADMIN_USERS(a.props.store.userState.token)},a.requestDeleteUser=function(){a.requestADMIN_USERS_delete(a.props.store.userState.token)},a.changeDate=function(e){var t=e.target.value;a.setState({dateBlock:a.formatDate(new Date(t))})},a.formatDate=function(e){return"".concat(e.getFullYear()).concat(("0"+(e.getMonth()+1)).slice(-2)).concat(e.getDate())},a.editHandle=function(){a.requestADMIN_ROLES(a.props.store.userState.token)},a.addHandle=function(){a.setState({isShowAddBlock:!0})},a.deleteHandle=function(){a.setState({isShowDeleteBlock:!0})},a.closeEditForm=function(){a.setState({selectRow:{},isShowEditBlock:!1,isShowAddBlock:!1,isShowDeleteBlock:!1})},a.changeInputSelect=function(e){var t=e.currentTarget.getAttribute("name"),n=e.target.value,s=a.state.selectRow;s[t]=n,a.setState({selectRow:s})},a.changeInput=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.currentTarget.getAttribute("name"),s=e.target.value,i=t?"selectRow":"addRow",r=a.state[i];r[n]=s,a.setState(Object(B.a)({},i,r))},a.saveUser=function(){a.requestADMIN_USERS_add(a.props.store.userState.token,a.state.selectRow)},a.addUser=function(){a.requestADMIN_USERS_add(a.props.store.userState.token,a.state.addRow)},a.state={columns:[{id:"id",text:"Id"},{id:"name",text:"Name"},{id:"animal",text:"Animal"}],data:[{id:1,name:"George",animal:"Monkey"},{id:2,name:"Jeffrey",animal:"Giraffe"},{id:3,name:"Alice",animal:"Giraffe"},{id:4,name:"Alice",animal:"Tiger"}],user_code:"",user_name:"",only_active:!1,isShowTable:!1,isShowDeleteBlock:!1,dateBlock:null,role:null,selectRow:null,addRow:{},isDisableButton:!0,isShowEditBlock:!1,isShowAddBlock:!1,value:{user_code:"TEST22"},initialValues:{account:null,bank_branch_id:0,branch_name:"\u0422\u0443\u0442 \u0431\u0443\u0434\u0435 \u0431\u0430\u043d\u043a \u0431\u0440\u0435\u043d\u0447",date_registered:"04/08/2021",department:null,division:null,ipphone:null,language_code:"UK",language_name:"\u0423\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430",last_logon_date:null,middle_name:null,mobile:null,name:null,office:null,phone:null,region:null,role_name:"\u0420\u043e\u0437\u0440\u043e\u0431\u043d\u0438\u043a",status:"\u0410\u043a\u0442\u0438\u0432\u043d\u0438\u0439",status_code:"ACTIVE",surname:null,tvbv:"no_data",user_code:"TEST22",user_email:null,user_name:"Test",user_position:"tester",user_role:"DEV"}},a}return Object(c.a)(n,[{key:"requestADMIN_USERS",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n,a=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/User",n={user_code:this.state.user_code,user_name:this.state.user_name,bank_branch_id:0,only_active:this.state.only_active},e.next=5,R.post("/api/User",n,{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(e){a.props.store.addTableData(!0,e.data.users),a.setState({isShowTable:!0}),a.props.store.changeLoading(!1)})).catch((function(e){throw new Error(e)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestADMIN_USERS_delete",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n,a=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),n="/api/User/".concat(this.state.selectRow.user_code,"/0/").concat(this.state.dateBlock),e.next=4,R.delete(n,{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(e){a.closeEditForm(),a.requestADMIN_USERS(a.props.store.userState.token),a.props.store.changeLoading(!1)})).catch((function(e){throw new Error(e)}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestADMIN_USERS_add",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n){var a=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/User",e.next=4,R.put("/api/User",n,{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(){a.closeEditForm(),a.requestADMIN_USERS(a.props.store.userState.token),a.props.store.changeLoading(!1)})).catch((function(e){throw new Error(e)}));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"requestADMIN_ROLES",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Role",e.next=4,R.get("/api/Role",{headers:{Token:"".concat(t)}}).then((function(e){n.setState({isShowEditBlock:!0,role:e.data.roles}),n.props.store.changeLoading(!1)})).catch((function(e){throw new Error(e)}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t={mode:"radio",onSelect:function(t){e.setState({selectRow:t,isDisableButton:!1})}},n=function(t){return Object(D.jsx)("option",{selected:t.optionItem.role_id===e.state.selectRow.user_role?"selected":"",value:t.optionItem.role_id,children:t.optionItem.role_name})};return Object(D.jsxs)("div",{className:"coverTable TableADMIN_USERS",children:[Object(D.jsx)("div",{className:"headerTable",children:Object(D.jsx)("div",{className:"titleTable",children:K(this.props.store.userState.OPERATIONS,this.props.store.location.pathname.substr(11))})}),Object(D.jsxs)("div",{className:"filter",children:[Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"user_code",children:"\u041a\u043e\u0434 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430"}),Object(D.jsx)("input",{onChange:this.changeUserCode,defaultValue:this.state.user_code,className:"customInput",id:"user_code",type:"text"}),Object(D.jsx)("label",{htmlFor:"user_name",children:"\u0406\u043c\u044f \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430"}),Object(D.jsx)("input",{onChange:this.changeUserName,defaultValue:this.state.user_name,className:"customInput",id:"user_name",type:"text"})]}),Object(D.jsxs)("div",{className:"coverCheckbox",children:[Object(D.jsx)("label",{htmlFor:"status_code",children:"\u0422\u0456\u043b\u044c\u043a\u0438 \u0430\u043a\u0442\u0438\u0432\u043d\u0456 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0456"}),Object(D.jsx)("input",{onChange:this.changeOnlyActive,id:"status_code",type:"checkbox"})]}),Object(D.jsx)("button",{className:"search btn btn-primary",onClick:this.search,children:"\u041f\u043e\u0448\u0443\u043a"})]}),this.state.isShowDeleteBlock?Object(D.jsx)("div",{className:"coverDeleteBlock",children:Object(D.jsxs)("div",{className:"innerBlock",children:[Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"user_code",children:"\u041a\u043e\u0434 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430"}),Object(D.jsx)("input",{defaultValue:this.state.selectRow.user_code,className:"customInput",id:"user_code",type:"text",disabled:!0})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"user_date",children:"\u0414\u0430\u0442\u0430 \u0434\u043e \u044f\u043a\u043e\u0457 \u043f\u0440\u0438\u0437\u0443\u043f\u0438\u043d\u0438\u0442\u0438 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430"}),Object(D.jsx)("input",{onChange:this.changeDate,className:"customInput",id:"user_date",type:"date"})]}),Object(D.jsx)("button",{className:"btn btn-danger",onClick:this.requestDeleteUser,children:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430"}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:this.closeEditForm,children:"\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438"})]})}):null,this.state.isShowEditBlock?Object(D.jsx)("div",{className:"coverEditBlock",children:Object(D.jsxs)("div",{className:"innerBlock",children:[Object(D.jsx)("input",{onChange:this.changeInput,name:"user_code",type:"text",placeholder:"\u041a\u043e\u0434 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430",defaultValue:this.state.selectRow.user_code,disabled:!0}),Object(D.jsx)("input",{onChange:this.changeInput,name:"user_name",type:"text",placeholder:"\u0406\u043c'\u044f \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430",defaultValue:this.state.selectRow.user_name}),Object(D.jsx)("input",{onChange:this.changeInput,name:"user_position",type:"text",placeholder:"\u041f\u043e\u0441\u0430\u0434\u0430 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430",defaultValue:this.state.selectRow.user_position}),Object(D.jsx)("input",{onChange:this.changeInput,name:"mobile",type:"text",placeholder:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",defaultValue:this.state.selectRow.mobile}),Object(D.jsx)("input",{onChange:this.changeInput,name:"user_email",type:"text",placeholder:"Email",defaultValue:this.state.selectRow.user_email}),Object(D.jsx)("input",{onChange:this.changeInput,name:"division",type:"text",placeholder:"\u0412\u0456\u0434\u0434\u0456\u043b",defaultValue:this.state.selectRow.division}),Object(D.jsx)("select",{onChange:this.changeInputSelect,name:"user_role",id:"dropdown-basic-button",className:"form-select",title:"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u0440\u043e\u043b\u044c",children:this.state.role.map((function(e,t){return Object(D.jsx)(n,{optionItem:e},t)}))}),Object(D.jsxs)("div",{className:"coverBtn",children:[Object(D.jsx)("button",{onClick:this.saveUser,className:"btn btn-success",children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"}),Object(D.jsx)("button",{onClick:this.closeEditForm,className:"btn btn-secondary",children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"})]})]})}):null,this.state.isShowAddBlock?Object(D.jsx)("div",{className:"coverAddBlock",children:Object(D.jsxs)("div",{className:"innerBlock",children:[Object(D.jsx)("input",{onChange:function(t){return e.changeInput(t,!1)},name:"user_code",type:"text",placeholder:"\u041a\u043e\u0434 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430"}),Object(D.jsx)("input",{onChange:function(t){return e.changeInput(t,!1)},name:"user_name",type:"text",placeholder:"\u0406\u043c'\u044f \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430"}),Object(D.jsx)("input",{onChange:function(t){return e.changeInput(t,!1)},name:"user_position",type:"text",placeholder:"\u041f\u043e\u0441\u0430\u0434\u0430 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430"}),Object(D.jsx)("input",{onChange:function(t){return e.changeInput(t,!1)},name:"mobile",type:"text",placeholder:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"}),Object(D.jsx)("input",{onChange:function(t){return e.changeInput(t,!1)},name:"user_email",type:"text",placeholder:"Email"}),Object(D.jsx)("input",{onChange:function(t){return e.changeInput(t,!1)},name:"division",type:"text",placeholder:"\u0412\u0456\u0434\u0434\u0456\u043b"}),Object(D.jsx)("input",{onChange:function(t){return e.changeInput(t,!1)},name:"user_role",type:"text",placeholder:"\u0420\u043e\u043b\u044c"}),Object(D.jsxs)("div",{className:"coverBtn",children:[Object(D.jsx)("button",{onClick:this.addUser,className:"btn btn-success",children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"}),Object(D.jsx)("button",{onClick:this.closeEditForm,className:"btn btn-secondary",children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"})]})]})}):null,Object(D.jsx)("div",{className:"innerTable",children:Object(D.jsx)("div",{className:"Table",children:this.state.isShowTable?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsxs)("div",{className:"controlBlock",children:[Object(D.jsx)("button",{onClick:this.editHandle,disabled:this.state.isDisableButton?"disabled":"",className:"btn btn-secondary",children:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u043d\u043d\u044f"}),Object(D.jsx)("button",{onClick:this.addHandle,className:"btn btn-info",children:"\u0414\u043e\u0434\u0430\u0432\u0430\u043d\u043d\u044f"}),Object(D.jsx)("button",{onClick:this.deleteHandle,disabled:this.state.isDisableButton?"disabled":"",className:"btn btn-warning",children:"\u0412\u0438\u0434\u0430\u043b\u0435\u043d\u043d\u044f"})]}),Object(D.jsxs)(ce.BootstrapTable,{data:this.props.store.menuState.tableData,selectRow:t,children:[Object(D.jsx)(ce.TableHeaderColumn,{isKey:!0,dataField:"user_code",filter:{type:"TextFilter",delay:1e3},children:"\u041a\u043e\u0434 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430"}),Object(D.jsx)(ce.TableHeaderColumn,{dataField:"status_code",filter:{type:"TextFilter",delay:1e3},children:"\u0421\u0442\u0430\u0442\u0443\u0441 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430"}),Object(D.jsx)(ce.TableHeaderColumn,{dataField:"user_name",filter:{type:"TextFilter",delay:1e3},children:"\u0406\u043c'\u044f \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430"}),Object(D.jsx)(ce.TableHeaderColumn,{dataField:"user_position",filter:{type:"TextFilter",delay:1e3},children:"\u041f\u043e\u0441\u0430\u0434\u0430 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430"}),Object(D.jsx)(ce.TableHeaderColumn,{dataField:"mobile",filter:{type:"TextFilter",delay:1e3},children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"}),Object(D.jsx)(ce.TableHeaderColumn,{dataField:"user_email",filter:{type:"TextFilter",delay:1e3},children:"Email"}),Object(D.jsx)(ce.TableHeaderColumn,{dataField:"division",filter:{type:"TextFilter",delay:1e3},children:"\u0412\u0456\u0434\u0434\u0456\u043b"}),Object(D.jsx)(ce.TableHeaderColumn,{dataField:"user_role",filter:{type:"TextFilter",delay:1e3},children:"\u0420\u043e\u043b\u044c"})]})]}):Object(D.jsx)("span",{children:"\u0421\u043a\u043e\u0440\u0438\u0441\u0442\u0430\u0439\u0442\u0435\u0441\u044f \u043f\u043e\u0448\u0443\u043a\u043e\u043c"})})})]})}}]),n}(s.a.Component),ge=Te,Oe=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={tableData:null},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.requestADMIN_OPERATIONS(this.props.store.userState.token)}},{key:"requestADMIN_OPERATIONS",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Operations",e.next=4,R.get("/api/Operations",{headers:{Token:"".concat(t)}}).then((function(e){n.setState({tableData:e.data.operations}),n.props.store.changeLoading(!1)})).catch((function(e){throw new Error(e)}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(D.jsxs)("div",{className:"coverTable ADMIN_OPERATIONS",children:[Object(D.jsxs)("div",{className:"headerTable",children:[Object(D.jsx)("div",{className:"titleTable",children:K(this.props.store.userState.OPERATIONS,this.props.store.location.pathname.substr(11))}),Object(D.jsx)("div",{className:"optionBlock"})]}),Object(D.jsx)("div",{className:"innerTable",children:Object(D.jsx)("div",{className:"Table",children:Object(D.jsxs)(ce.BootstrapTable,{data:this.state.tableData,children:[Object(D.jsx)(ce.TableHeaderColumn,{isKey:!0,dataField:"name",filter:{type:"TextFilter",delay:1e3},children:"\u0406\u043c'\u044f \u043e\u043f\u0435\u0440\u0430\u0446\u0456\u0457"}),Object(D.jsx)(ce.TableHeaderColumn,{dataField:"operation",filter:{type:"TextFilter",delay:1e3},children:"\u041e\u043f\u0435\u0440\u0430\u0446\u0456\u044f"}),Object(D.jsx)(ce.TableHeaderColumn,{dataField:"parent_operation",filter:{type:"TextFilter",delay:1e3},children:"\u0412\u0456\u0434\u043d\u043e\u0441\u0438\u0442\u044c\u0441\u044f \u0434\u043e"})]})})})]})}}]),n}(s.a.Component),Se=Oe,Ie=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).selectRoleID=function(e){var t=e.target.value;a.setState({isSelected:t}),a.requestADMIN_ROLE_OPERATIONS(a.props.store.userState.token,t)},a.activeOperation=function(e,t){var n;return e.map((function(e,a){e.operation===t&&(n=e.name)})),n},a.state={roles:null,isShowSelectRoles:!1,operations:null,isShowTable:!1,isSelected:null,isDisableButton:!0,selectRow:null},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.requestADMIN_ROLES(this.props.store.userState.token)}},{key:"requestADMIN_ROLES",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Role",e.next=4,R.get("/api/Role",{headers:{Token:"".concat(t)}}).then((function(e){n.setState({roles:e.data.roles,isShowSelectRoles:!0}),n.props.store.changeLoading(!1)})).catch((function(e){throw new Error(e)}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestADMIN_ROLE_OPERATIONS",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n){var a,s=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),a="/api/RoleOperations/".concat(n),e.next=5,R.get(a,{headers:{Token:"".concat(t)}}).then((function(e){s.setState({operations:e.data.operations,isShowTable:!0}),s.props.store.changeLoading(!1)})).catch((function(e){throw new Error(e)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"requestADMIN_ROLE_OPERATIONS_edit",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n){var a=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/RoleOperations",e.next=4,R.put("/api/RoleOperations",n,{headers:{Token:"".concat(t)}}).then((function(e){a.requestADMIN_ROLE_OPERATIONS(a.props.store.userState.token,a.state.isSelected),a.props.store.changeLoading(!1)})).catch((function(e){throw new Error(e)}));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"editColumn",value:function(e,t){var n=e.currentTarget.getAttribute("name"),a=e.target.checked;t[n]=a;var s={role_id:"".concat(this.state.isSelected),operations:[t]};this.requestADMIN_ROLE_OPERATIONS_edit(this.props.store.userState.token,s)}},{key:"checkbox",value:function(e,t,n){var a=this;return Object(D.jsx)("input",{onChange:function(t){return a.editColumn(t,e)},checked:t,name:n,type:"checkbox"})}},{key:"render",value:function(){var e=this,t=function(t){return Object(D.jsx)("option",{selected:e.state.isSelected==t.optionItem.role_id?"selected":"",value:t.optionItem.role_id,children:t.optionItem.role_name})};return Object(D.jsxs)("div",{className:"coverTable ADMIN_ROLE_OPERATIONS",children:[Object(D.jsxs)("div",{className:"headerTable",children:[Object(D.jsx)("div",{className:"titleTable",children:this.activeOperation(this.props.store.userState.OPERATIONS,this.props.store.location.pathname.substr(11))}),Object(D.jsxs)("div",{className:"optionBlock",children:[Object(D.jsx)("span",{htmlFor:"dropdown-basic-button",children:"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u0440\u043e\u043b\u044c"}),Object(D.jsxs)("select",{onChange:this.selectRoleID,apiName:"institution_id",id:"dropdown-basic-button",className:"form-select",title:"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u0440\u043e\u043b\u044c",children:[Object(D.jsx)("option",{children:"-"}),this.state.isShowSelectRoles?this.state.roles.map((function(e,n){return Object(D.jsx)(t,{optionItem:e},n)})):null]})]})]}),Object(D.jsx)("div",{className:"innerTable",children:Object(D.jsx)("div",{className:"Table",children:this.state.isShowTable?Object(D.jsx)(D.Fragment,{children:Object(D.jsxs)(ce.BootstrapTable,{data:this.state.operations,children:[Object(D.jsx)(ce.TableHeaderColumn,{isKey:!0,dataField:"operation_desc",filter:{type:"TextFilter",delay:1e3},children:"ID \u043e\u043f\u0435\u0440\u0430\u0446\u0456\u0457"}),Object(D.jsx)(ce.TableHeaderColumn,{dataField:"parent_operation_id",filter:{type:"TextFilter",delay:1e3},children:"\u0412\u0456\u0434\u043d\u043e\u0441\u0438\u0442\u044c\u0441\u044f \u0434\u043e"}),Object(D.jsx)(ce.TableHeaderColumn,{dataField:"cancel",dataFormat:function(t,n){return e.checkbox(n,t,"cancel")},children:"\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u043d\u043d\u044f"}),Object(D.jsx)(ce.TableHeaderColumn,{dataField:"enabled",dataFormat:function(t,n){return e.checkbox(n,t,"create")},children:"\u0421\u0442\u0432\u043e\u0440\u0435\u043d\u043d\u044f"}),Object(D.jsx)(ce.TableHeaderColumn,{dataField:"delete",dataFormat:function(t,n){return e.checkbox(n,t,"delete")},children:"\u0412\u0438\u0434\u0430\u043b\u0435\u043d\u043d\u044f"}),Object(D.jsx)(ce.TableHeaderColumn,{dataField:"modify",dataFormat:function(t,n){return e.checkbox(n,t,"modify")},children:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u043d\u043d\u044f"}),Object(D.jsx)(ce.TableHeaderColumn,{dataField:"enabled",dataFormat:function(t,n){return e.checkbox(n,t,"enabled")},children:"\u0410\u043a\u0442\u0438\u0432\u043d\u043e"})]})}):Object(D.jsx)("span",{children:"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u0440\u043e\u043b\u044c"})})})]})}}]),n}(s.a.Component),fe=Ie,Ce=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={roles:null,isShowSelectRoles:!1,operations:null,isShowTable:!1,isSelected:null,isDisableButton:!0,selectRow:null},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){!function(e){te.apply(this,arguments)}(this)}},{key:"render",value:function(){var e=this;return Object(D.jsxs)("div",{className:"coverTable ADMIN_USER_OPERATIONS",children:[Object(D.jsxs)("div",{className:"headerTable",children:[Object(D.jsx)("div",{className:"titleTable",children:K(this.props.store.userState.OPERATIONS,this.props.store.location.pathname.substr(11))}),Object(D.jsxs)("div",{className:"optionBlock",children:[Object(D.jsx)("span",{htmlFor:"dropdown-basic-button",children:"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u044e\u0437\u0435\u0440\u0430"}),Object(D.jsxs)("select",{onChange:function(t){return J(t,e)},apiName:"institution_id",id:"dropdown-basic-button",className:"form-select",title:"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u0440\u043e\u043b\u044c",children:[Object(D.jsx)("option",{children:"-"}),this.state.isShowSelectRoles?this.state.roles.map((function(t,n){return Object(D.jsx)(ee,{optionItem:t,state:e.state},n)})):null]})]})]}),Object(D.jsx)("div",{className:"innerTable",children:Object(D.jsx)("div",{className:"Table",children:this.state.isShowTable?Object(D.jsxs)(ce.BootstrapTable,{data:this.state.operations,children:[Object(D.jsx)(ce.TableHeaderColumn,{isKey:!0,dataField:"operation_desc",filter:{type:"TextFilter",delay:1e3},children:"ID \u043e\u043f\u0435\u0440\u0430\u0446\u0456\u0457"}),Object(D.jsx)(ce.TableHeaderColumn,{dataField:"parent_operation_id",filter:{type:"TextFilter",delay:1e3},children:"\u0412\u0456\u0434\u043d\u043e\u0441\u0438\u0442\u044c\u0441\u044f \u0434\u043e"}),Object(D.jsx)(ce.TableHeaderColumn,{dataField:"cancel",dataFormat:function(t,n){return function(e,t,n){return X(t,e,"cancel",n)}(t,n,e)},children:"\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u043d\u043d\u044f"}),Object(D.jsx)(ce.TableHeaderColumn,{dataField:"enabled",dataFormat:function(t,n){return function(e,t,n){return X(t,e,"create",n)}(t,n,e)},children:"\u0421\u0442\u0432\u043e\u0440\u0435\u043d\u043d\u044f"}),Object(D.jsx)(ce.TableHeaderColumn,{dataField:"delete",dataFormat:function(t,n){return function(e,t,n){return X(t,e,"delete",n)}(t,n,e)},children:"\u0412\u0438\u0434\u0430\u043b\u0435\u043d\u043d\u044f"}),Object(D.jsx)(ce.TableHeaderColumn,{dataField:"modify",dataFormat:function(t,n){return function(e,t,n){return X(t,e,"modify",n)}(t,n,e)},children:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u043d\u043d\u044f"}),Object(D.jsx)(ce.TableHeaderColumn,{dataField:"enabled",dataFormat:function(t,n){return function(e,t,n){return X(t,e,"enabled",n)}(t,n,e)},children:"\u0410\u043a\u0442\u0438\u0432\u043d\u043e"})]}):Object(D.jsx)("span",{children:"\u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u0440\u043e\u043b\u044c"})})})]})}}]),n}(s.a.Component),Re=Ce,ve=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).editHandle=function(){a.setState({isShowEditBlock:!0})},a.addHandle=function(){a.setState({isShowAddBlock:!0})},a.deleteHandle=function(){a.setState({isShowDeleteBlock:!0})},a.closeEditForm=function(){a.setState({selectRow:{},isShowEditBlock:!1,isShowAddBlock:!1,isShowDeleteBlock:!1})},a.changeInput=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.currentTarget.getAttribute("name"),s=e.target.value,i=t?"selectRow":"addRow",r=a.state[i];r[n]=s,a.setState(Object(B.a)({},i,r))},a.saveUser=function(){a.requestADMIN_ROLE_edit(a.props.store.userState.token,a.state.selectRow)},a.addRole=function(){a.requestADMIN_ROLE_add(a.props.store.userState.token,a.state.addRow)},a.deleteRole=function(){a.requestADMIN_ROLE_delete(a.props.store.userState.token,a.state.selectRow.role_id)},a.state={addRow:{},roles:null,isShowTable:!0,selectRow:null,isDisableButton:!0,isShowEditBlock:!1,isShowAddBlock:!1,isShowDeleteBlock:!1},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.requestADMIN_ROLES(this.props.store.userState.token)}},{key:"requestADMIN_ROLES",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Role",e.next=4,R.get("/api/Role",{headers:{Token:"".concat(t)}}).then((function(e){n.setState({roles:e.data.roles,isShowTable:!0}),n.props.store.changeLoading(!1)})).catch((function(e){throw new Error(e)}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestADMIN_ROLE_add",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n){var a=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Role",e.next=4,R.post("/api/Role",n,{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(){a.closeEditForm(),a.requestADMIN_ROLES(a.props.store.userState.token),a.props.store.changeLoading(!1)})).catch((function(e){throw new Error(e)}));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"requestADMIN_ROLE_edit",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n){var a=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Role",e.next=4,R.put("/api/Role",n,{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(){a.closeEditForm(),a.requestADMIN_ROLES(a.props.store.userState.token),a.props.store.changeLoading(!1)})).catch((function(e){throw new Error(e)}));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"requestADMIN_ROLE_delete",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n){var a,s=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),a="/api/Role/".concat(n),e.next=4,R.delete(a,{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(){s.setState({isDisableButton:!0}),s.closeEditForm(),s.requestADMIN_ROLES(s.props.store.userState.token),s.props.store.changeLoading(!1)})).catch((function(e){throw new Error(e)}));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t={mode:"radio",onSelect:function(t){e.setState({selectRow:t,isDisableButton:!1})}};return Object(D.jsxs)("div",{className:"coverTable TableADMIN_ROLES",children:[Object(D.jsxs)("div",{className:"headerTable",children:[Object(D.jsx)("div",{className:"titleTable",children:K(this.props.store.userState.OPERATIONS,this.props.store.location.pathname.substr(11))}),Object(D.jsx)("div",{className:"optionBlock"})]}),this.state.isShowDeleteBlock?Object(D.jsx)("div",{className:"coverDeleteBlock",children:Object(D.jsxs)("div",{className:"innerBlock",children:[Object(D.jsxs)("div",{children:["\u0412\u0438 \u0432\u043f\u0435\u0432\u043d\u0435\u043d\u0456, \u0432\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0446\u044e \u0440\u043e\u043b\u044c:",Object(D.jsx)("span",{children:this.state.selectRow.role_id}),"?"]}),Object(D.jsx)("br",{}),Object(D.jsxs)("div",{className:"coverBtn",children:[Object(D.jsx)("button",{className:"btn btn-danger",onClick:this.deleteRole,children:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:this.closeEditForm,children:"\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438"})]})]})}):null,this.state.isShowEditBlock?Object(D.jsx)("div",{className:"coverEditBlock",children:Object(D.jsxs)("div",{className:"innerBlock",children:[Object(D.jsx)("input",{onChange:this.changeInput,name:"role_id",type:"text",placeholder:"ID \u0440\u043e\u043b\u0456",defaultValue:this.state.selectRow.role_id,disabled:!0}),Object(D.jsx)("input",{onChange:this.changeInput,name:"role_name",type:"text",placeholder:"\u0406\u043c'\u044f \u0440\u043e\u043b\u0456",defaultValue:this.state.selectRow.role_name}),Object(D.jsx)("input",{onChange:this.changeInput,name:"role_desc",type:"text",placeholder:"\u041e\u043f\u0438\u0441",defaultValue:this.state.selectRow.role_desc}),Object(D.jsx)("input",{onChange:this.changeInput,name:"ad_role",type:"text",placeholder:"\u0406\u0434\u0435\u043d\u0442\u0438\u0444\u0456\u043a\u0430\u0442\u043e\u0440 AD \u0440\u043e\u043b\u0456",defaultValue:this.state.selectRow.ad_role}),Object(D.jsxs)("div",{className:"coverBtn",children:[Object(D.jsx)("button",{onClick:this.saveUser,className:"btn btn-success",children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"}),Object(D.jsx)("button",{onClick:this.closeEditForm,className:"btn btn-secondary",children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"})]})]})}):null,this.state.isShowAddBlock?Object(D.jsx)("div",{className:"coverAddBlock",children:Object(D.jsxs)("div",{className:"innerBlock",children:[Object(D.jsx)("input",{onChange:function(t){return e.changeInput(t,!1)},name:"role_id",type:"text",placeholder:"ID \u0440\u043e\u043b\u0456"}),Object(D.jsx)("input",{onChange:function(t){return e.changeInput(t,!1)},name:"role_name",type:"text",placeholder:"\u0406\u043c'\u044f \u0440\u043e\u043b\u0456"}),Object(D.jsx)("input",{onChange:function(t){return e.changeInput(t,!1)},name:"role_desc",type:"text",placeholder:"\u041e\u043f\u0438\u0441"}),Object(D.jsx)("input",{onChange:function(t){return e.changeInput(t,!1)},name:"ad_role",type:"text",placeholder:"\u0406\u0434\u0435\u043d\u0442\u0438\u0444\u0456\u043a\u0430\u0442\u043e\u0440 AD \u0440\u043e\u043b\u0456"}),Object(D.jsxs)("div",{className:"coverBtn",children:[Object(D.jsx)("button",{onClick:this.addRole,className:"btn btn-success",children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"}),Object(D.jsx)("button",{onClick:this.closeEditForm,className:"btn btn-secondary",children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"})]})]})}):null,Object(D.jsx)("div",{className:"innerTable",children:Object(D.jsx)("div",{className:"Table",children:this.state.isShowTable?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsxs)("div",{className:"controlBlock",children:[Object(D.jsx)("button",{onClick:this.editHandle,disabled:this.state.isDisableButton?"disabled":"",className:"btn btn-secondary",children:"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u043d\u043d\u044f"}),Object(D.jsx)("button",{onClick:this.addHandle,className:"btn btn-info",children:"\u0414\u043e\u0434\u0430\u0432\u0430\u043d\u043d\u044f"}),Object(D.jsx)("button",{onClick:this.deleteHandle,disabled:this.state.isDisableButton?"disabled":"",className:"btn btn-warning",children:"\u0412\u0438\u0434\u0430\u043b\u0435\u043d\u043d\u044f"})]}),Object(D.jsxs)(ce.BootstrapTable,{data:this.state.roles,selectRow:t,children:[Object(D.jsx)(ce.TableHeaderColumn,{isKey:!0,dataField:"role_id",filter:{type:"TextFilter",delay:1e3},children:"ID \u0440\u043e\u043b\u0456"}),Object(D.jsx)(ce.TableHeaderColumn,{dataField:"role_name",filter:{type:"TextFilter",delay:1e3},children:"\u0406\u043c'\u044f \u0440\u043e\u043b\u0456"}),Object(D.jsx)(ce.TableHeaderColumn,{dataField:"ad_role",filter:{type:"TextFilter",delay:1e3},children:"\u0406\u0434\u0435\u043d\u0442\u0438\u0444\u0456\u043a\u0430\u0442\u043e\u0440 AD \u0440\u043e\u043b\u0456"})]})]}):null})})]})}}]),n}(a.Component),xe=ve,Ne=function(e){return Object(D.jsx)("option",{value:e.optionItem.institution_id,children:e.optionItem.institution_name})},De=function(e){return Object(D.jsx)("option",{value:e.optionItem.branch_id,children:e.optionItem.branch_name})},ye=function(e){return Object(D.jsx)("option",{selected:e.optionItem.report_format_id==e.report_format_id?"selected":"",value:e.optionItem.report_format_id,children:e.optionItem.report_format_name})},Ee=function(e){return console.log("props.report_period_type_id: ",e.report_period_type_id),Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("input",{type:"checkbox",checked:null!==e.report_period_type_id&&e.report_period_type_id.includes(e.optionItem.report_period_type_id),value:e.optionItem.report_period_type_id,style:{margin:"10px 0"}})," ",e.optionItem.report_period_type_name,Object(D.jsx)("br",{})]})},ke=function(e){return Object(D.jsx)("option",{selected:e.optionItem.report_channel_type_id==e.channel_type_id?"selected":"",value:e.optionItem.report_channel_type_id,children:e.optionItem.report_channel_type_name})},Ae=function(e){return Object(D.jsx)("div",{className:"blockSelectItem",value:e.item.client_id,name:e.item.client_name,onClick:function(t){return e.onClickBlockSelectItem(t)},children:e.item.client_name})},we=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).onChangeAutocompleteInput=function(e){var t=e.target.value;console.log(t),a.props.addTspName(Number(0)),a.setState({inputRequest:t,selected:!1}),""!=t&&t.length>=3&&a.request(a.props.token,t,!0)},a.onClickAutocompleteInput=function(e){var t=e.target.value;console.log(t),""!=t&&t.length>=3&&a.request(a.props.token,t,!0)},a.onBlurAutocompleteInput=function(e){var t=e.target.value;console.log(t)},a.onClickAutocompleteInputRes=function(){a.setState({inputResult:null,isShowBlockSelect:!0,isShowInputResult:!1,isShowInputRequest:!0})},a.onBlurBlockSelect=function(){a.setState({isShowBlockSelect:!1})},a.onClickBlockSelectItem=function(e){var t=e.currentTarget.getAttribute("value"),n=e.currentTarget.getAttribute("name");""!=t&&(t!=a.state.inputRequest&&(a.request(a.props.token,t,!1),console.log(t),a.props.addTspName(Number(t)),a.setState({inputResult:n,inputRequest:n,isShowBlockSelect:!1,isShowInputResult:!0,isShowInputRequest:!1,selected:!0})),a.setState({isShowBlockSelect:!1}))},a.clickTest=function(e){null!=a.myRef.current&&a.myRef.current.className!=e.target.parentElement.className&&a.setState({isShowBlockSelect:!1})},a.state={data:null,inputRequest:null,inputResult:a.props.tsp_name,isShowBlockSelect:!1,isShowInputResult:!1,isShowInputRequest:!0,isLoading:!1,selected:!1},a.myRef=s.a.createRef(),a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("mousedown",this.clickTest)}},{key:"componentWillUnmount",value:function(){window.addEventListener("mousedown",null)}},{key:"request",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n,a){var s,i,r=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),console.log(t),s="/api/Dictionary/QueryTSP",console.log(s),i={institution_id:this.props.institution_id,branch_id:this.props.branch_id,client_name:n},console.log(i),e.next=8,R.post(s,i,{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(e){console.log(e.data),null==e.data.tsp_list.TableRows?r.setState({data:[{client_name:"\u041d\u0435\u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0436\u043e\u0434\u043d\u043e\u0433\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443"}]}):r.setState({data:e.data.tsp_list.TableRows}),a?r.setState({isShowBlockSelect:!0}):r.setState({isShowBlockSelect:!1}),r.setState({isLoading:!1})})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return console.log(this.props),console.log(this.state),Object(D.jsxs)("div",{className:"autocomplete",children:[Object(D.jsx)("input",{className:"".concat(this.state.selected?"selected ":"").concat(this.state.isShowInputRequest?"":"dn ","form-control"),placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043f\u0435\u0440\u0448\u0456 \u0442\u0440\u0438 \u0431\u0443\u043a\u0432\u0438...",type:"text",onBlur:this.onBlurAutocompleteInput,onChange:this.onChangeAutocompleteInput,onClick:this.onClickAutocompleteInput,value:this.state.inputRequest}),Object(D.jsx)("input",{className:"".concat(this.state.selected?"selected ":"").concat(this.state.isShowInputResult?"":"dn ","form-control"),placeholder:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442",type:"text",value:this.state.inputResult,onClick:this.onClickAutocompleteInputRes}),Object(D.jsx)("div",{className:"".concat(this.state.isShowBlockSelect?"":"dn ","blockSelect"),onBlur:this.onBlurBlockSelect,ref:this.myRef,children:this.state.isShowBlockSelect&&null!=this.state.data?this.state.data.map((function(t,n){return Object(D.jsx)(Ae,{item:t,onClickBlockSelectItem:e.onClickBlockSelectItem},n)})):Object(D.jsx)(D.Fragment,{})}),this.state.isLoading?Object(D.jsx)("div",{className:"coverloader",children:Object(D.jsx)("div",{className:"loader"})}):Object(D.jsx)(D.Fragment,{})]})}}]),n}(s.a.Component),Pe=function(e){return Object(D.jsx)("div",{className:"blockSelectItem",value:e.item.ident_code,onClick:function(t){return e.onClickBlockSelectItem(t)},children:e.item.ident_code})},qe=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).onChangeAutocompleteInput=function(e){var t=e.target.value;console.log(t),a.props.addIdentCode(Number(0)),a.setState({inputRequest:t,selected:!1}),""!=t&&t.length>=3&&a.request(a.props.token,t,!0)},a.onClickAutocompleteInput=function(e){var t=e.target.value;console.log(t),""!=t&&t.length>=3&&a.request(a.props.token,t,!0)},a.onBlurAutocompleteInput=function(e){var t=e.target.value;console.log(t)},a.onClickAutocompleteInputRes=function(){a.setState({inputResult:null,isShowBlockSelect:!0,isShowInputResult:!1,isShowInputRequest:!0})},a.onBlurBlockSelect=function(){a.setState({isShowBlockSelect:!1})},a.onClickBlockSelectItem=function(e){var t=e.currentTarget.getAttribute("value");""!=t&&(t!=a.state.inputRequest&&(a.request(a.props.token,t,!1),console.log(t),a.props.addIdentCode(Number(t)),a.setState({inputResult:t,inputRequest:t,isShowBlockSelect:!1,isShowInputResult:!0,isShowInputRequest:!1,selected:!0})),a.setState({isShowBlockSelect:!1}))},a.clickTest=function(e){null!=a.myRef.current&&a.myRef.current.className!=e.target.parentElement.className&&a.setState({isShowBlockSelect:!1})},a.state={data:null,inputRequest:null,inputResult:a.props.ident_code,isShowBlockSelect:!1,isShowInputResult:!1,isShowInputRequest:!0,isLoading:!1,selected:!1},a.myRef=s.a.createRef(),a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("mousedown",this.clickTest)}},{key:"componentWillUnmount",value:function(){window.addEventListener("mousedown",null)}},{key:"request",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n,a){var s,i,r=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),console.log(t),s="/api/Dictionary/QueryTSP",console.log(s),i={institution_id:this.props.institution_id,branch_id:this.props.branch_id,ident_code:n},console.log(i),e.next=8,R.post(s,i,{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(e){console.log(e.data),null==e.data.tsp_list.TableRows?r.setState({data:[{ident_code:"\u041d\u0435\u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0436\u043e\u0434\u043d\u043e\u0433\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443"}]}):r.setState({data:e.data.tsp_list.TableRows}),a?r.setState({isShowBlockSelect:!0}):r.setState({isShowBlockSelect:!1}),r.setState({isLoading:!1})})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this;return console.log(this.props),console.log(this.state),Object(D.jsxs)("div",{className:"autocomplete",children:[Object(D.jsx)(W.a,(e={mask:"999999999999",type:"text",maskChar:"",alwaysShowMask:"false",pattern:"[0-9]",className:"".concat(this.state.selected?"selected ":"").concat(this.state.isShowInputRequest?"":"dn ","form-control"),placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043f\u0435\u0440\u0448\u0456 \u0442\u0440\u0438 \u0446\u0438\u0444\u0440\u0438..."},Object(B.a)(e,"type","text"),Object(B.a)(e,"onBlur",this.onBlurAutocompleteInput),Object(B.a)(e,"onChange",this.onChangeAutocompleteInput),Object(B.a)(e,"onClick",this.onClickAutocompleteInput),Object(B.a)(e,"value",this.state.inputRequest),e)),Object(D.jsx)("input",{className:"".concat(this.state.selected?"selected ":"").concat(this.state.isShowInputResult?"":"dn ","form-control"),placeholder:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442",type:"text",value:this.state.inputResult,onClick:this.onClickAutocompleteInputRes}),Object(D.jsx)("div",{className:"".concat(this.state.isShowBlockSelect?"":"dn ","blockSelect"),onBlur:this.onBlurBlockSelect,ref:this.myRef,children:this.state.isShowBlockSelect&&null!=this.state.data?this.state.data.map((function(e,n){return Object(D.jsx)(Pe,{item:e,onClickBlockSelectItem:t.onClickBlockSelectItem},n)})):Object(D.jsx)(D.Fragment,{})}),this.state.isLoading?Object(D.jsx)("div",{className:"coverloader",children:Object(D.jsx)("div",{className:"loader"})}):Object(D.jsx)(D.Fragment,{})]})}}]),n}(s.a.Component),Me=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).selectDICT_INSTITUTION=function(e){console.log(e.target.value);var t=e.target.value;console.log(t);var n=e.currentTarget.getAttribute("apiName");console.log(n);var s=e.target.value;console.log(s);var i=a.state.TSPReportSettingsSearchObj;i[n]=s,console.log(i),a.setState({isShowSelectTVBV:!1,TSPReportSettingsSearchObj:i}),console.log(a.state),console.log(a.state.TSPReportSettingsSearchObj),a.requestDICT_BRANCH(a.props.store.userState.token,t)},a.changeInput=function(e){var t=e.currentTarget.getAttribute("apiName");console.log(t);var n=e.target.value;console.log(n);var s=a.state.TSPReportSettingsSearchObj;s[t]="date_from"==t||"date_to"==t?a.formatDate(new Date(n)):n,console.log(s),a.setState({TSPReportSettingsSearchObj:s}),console.log(a.state),console.log(a.state.TSPReportSettingsSearchObj)},a.formatDate=function(e){var t=e.getDate(),n=("0"+(e.getMonth()+1)).slice(-2);return e.getFullYear()+n+t},a.search=function(){a.setState({errorRU:!1}),a.state.isDisableTVBV?a.setState({errorRU:!0}):(console.log(a.state.TSPReportSettingsSearchObj),a.requestTSPReportSettings(a.props.store.userState.token,a.state.TSPReportSettingsSearchObj))},a.Tsp_list=function(e){return e.map((function(e,t){return Object(D.jsx)("li",{className:"dropdownMenuItem",children:Object(D.jsxs)("p",{children:[Object(D.jsx)("input",{name:"tsp_list",id:e.tsp_name,type:"radio",onClick:a.itemTsp,value:e.tsp_id})," ",e.tsp_name]})})}))},a.itemTsp=function(e){var t=e.target.value;console.log(t),a.state.tsp_list.map((function(e,n){+e.tsp_id===+t&&(a.setState({physical_acquiring_type_id:1,physical_channel_address:"",physical_channel_type_id:1,physical_extended_report:!1,physical_file_name_mask:"",physical_installment_report:!1,physical_report_format_id:1,physical_report_period_type_id:null,physical_standard_report:!0,internet_acquiring_type_id:2,internet_channel_address:"",internet_channel_type_id:1,internet_extended_report:!1,internet_file_name_mask:"",internet_installment_report:!1,internet_report_format_id:1,internet_report_period_type_id:null,internet_standard_report:!0,currentTsp:Number(t),TSPReportSettingsSTD:null,isShowTypeAcquiring:!0}),console.log(a.state),e.main_settings?e.main_settings&&e.main_settings.map((function(e,n){1==e.acquiring_type_id?(console.log("item.acquiring_type_id == 1"),a.setState({physical_acquiring_type_id:e.acquiring_type_id,physical_channel_address:e.channel_address,physical_channel_type_id:e.channel_type_id,physical_file_name_mask:e.file_name_mask,physical_file_name:e.file_path,physical_report_format_id:e.report_format_id,physical_report_period_type_id:e.report_period_type_ids,physical_report_settings_id:e.report_setting_id,currentTsp:Number(t),TSPReportSettingsSTD:null,isShowTypeAcquiring:!0})):2==e.acquiring_type_id&&(console.log("item.acquiring_type_id == 2"),a.setState({internet_acquiring_type_id:e.acquiring_type_id,internet_channel_address:e.channel_address,internet_channel_type_id:e.channel_type_id,internet_file_name:e.file_path,internet_file_name_mask:e.file_name_mask,internet_report_format_id:e.report_format_id,internet_report_period_type_id:e.report_period_type_ids,internet_report_settings_id:e.report_setting_id,currentTsp:Number(t),TSPReportSettingsSTD:null,isShowTypeAcquiring:!0}))})):a.setState({isShowTypeAcquiring:!0}))})),console.log("-----------state---------------"),console.log(a.state),a.requestDICT_REPORT_FORMAT(a.props.store.userState.token),a.requestDICT_REPORT_PERIOD_TYPE(a.props.store.userState.token),a.requestDICT_REPORT_CHANNEL_TYPE(a.props.store.userState.token)},a.changeTypeAcquiring=function(e){var t=e.currentTarget.getAttribute("type_acquiring");a.setState({type_acquiring:Number(t)})},a.changeTypeAcquiringInternet=function(e){var t=e.currentTarget.getAttribute("type_acquiring");console.log(t),a.setState({report_period_type_id:a.state.settings[0].report_period_type_id,report_format_id:a.state.settings[0].report_format_id,channel_type_id:a.state.settings[0].channel_type_id,file_name_mask:a.state.settings[0].file_name_mask,type_acquiring:Number(t),isShowReport:!0,isDisabledSaveBtn:!0,physicalEmailMaskError:!1,internetEmailMaskError:!1})},a.openStandardReport=function(){a.requestTSPReportSettingsSTD(a.props.store.userState.token)},a.closePopupTable=function(){a.setState({isShowTableTSPReportSettingsSTD:!1,TSPReportSettingsSTD:null})},a.seveTSPReportSettingsSTD=function(){!function(){var e,t=a.state.TSPReportSettingsSTD.map((function(e){return e.order_number})).filter((function(e){return 0!==e}));return(e=t).filter((function(t,n){return e.indexOf(t)!==n})).length>0}()?a.setState({isShowTableTSPReportSettingsSTD:!1}):a.setState({isShowOrder_numberError:!0})},a.changeSelect=function(e){var t=e.currentTarget.getAttribute("name"),n=e.target.value;if(console.log(t),console.log(n),"physical_acquiring_type_id"==t&&a.setState({physical_acquiring_type_id:Number(n)}),"physical_channel_type_id"==t&&a.setState({physical_channel_type_id:Number(n),physical_channel_address:"",isDisabledSaveBtn:!0,physicalEmailMaskError:!1,internetEmailMaskError:!1}),"physical_report_period_type_id"==t||"internet_report_period_type_id"==t){var s;if(null===a.state[t])return void a.setState(Object(B.a)({},t,"".concat(n)));s=a.state[t].includes(n)?a.state[t].split(",").filter((function(e){return e!=n})).join():a.state[t]+","+n,a.setState(Object(B.a)({},t,s))}"physical_report_format_id"==t&&a.setState({physical_report_format_id:Number(n)}),"internet_acquiring_type_id"==t&&a.setState({internet_acquiring_type_id:Number(n)}),"internet_channel_type_id"==t&&a.setState({internet_channel_type_id:Number(n),internet_channel_address:"",isDisabledSaveBtn:!0,physicalEmailMaskError:!1,internetEmailMaskError:!1}),"internet_report_format_id"==t&&a.setState({internet_report_format_id:Number(n)})},a.changeInputTsp=function(e){var t=e.currentTarget.getAttribute("name"),n=e.target.value;console.log(n),"physical_channel_address"==t&&a.setState({physical_channel_address:n}),"physical_file_name_mask"==t&&a.setState({physical_file_name_mask:n}),"internet_channel_address"==t&&a.setState({internet_channel_address:n}),"internet_file_name_mask"==t&&a.setState({internet_file_name_mask:n}),"catalog-physicall"==t&&a.setState({physical_file_name:n}),"catalog-internet"==t&&a.setState({internet_file_name:n})},a.changeInputTspEmail=function(e){var t=e.currentTarget.getAttribute("name"),n=e.target.value;console.log(t),console.log(n),"physical_channel_address"==t?(console.log(/.+@.+\.[A-Za-z]+$/.test(n)),/.+@.+\.[A-Za-z]+$/.test(n)?(console.log("/.+@.+.[A-Za-z]+$/.test(inputValue)"),a.setState({physicalEmailMaskError:!1,isDisabledSaveBtn:!0})):(console.log("pfqikj"),a.setState({physicalEmailMaskError:!0,isDisabledSaveBtn:!1})),a.setState({physical_channel_address:n})):"internet_channel_address"==t&&(console.log(/.+@.+\.[A-Za-z]+$/.test(n)),/.+@.+\.[A-Za-z]+$/.test(n)?(console.log("/.+@.+.[A-Za-z]+$/.test(inputValue)"),a.setState({internetEmailMaskError:!1,isDisabledSaveBtn:!0})):(console.log("pfqikj"),a.setState({internetEmailMaskError:!0,isDisabledSaveBtn:!1})),a.setState({internet_channel_address:n}))},a.changeInputTspFtp=function(e){var t=e.currentTarget.getAttribute("name"),n=e.target.value;console.log(t),console.log(n),"physical_channel_address"==t?(console.log(n.indexOf(".")),console.log(-1!=n.indexOf(".")),-1!=n.indexOf(".")?a.setState({physicalEmailMaskError:!1,isDisabledSaveBtn:!0}):(console.log("pfqikj2"),a.setState({physicalEmailMaskError:!0,isDisabledSaveBtn:!1})),a.setState({physical_channel_address:n})):"internet_channel_address"==t&&(console.log(n.indexOf(".")),console.log(-1!=n.indexOf(".")),-1!=n.indexOf(".")?a.setState({internetEmailMaskError:!1,isDisabledSaveBtn:!0}):(console.log("pfqikj2"),a.setState({internetEmailMaskError:!0,isDisabledSaveBtn:!1})),a.setState({internet_channel_address:n}))},a.changeReport_format_id=function(e){var t=e.target.value;console.log(t),a.setState({report_format_id:Number(t)})},a.changeReport_period_type_id=function(e){var t=e.currentTarget.getAttribute("name"),n=e.target.value;console.log(t),console.log(n),a.setState({name_input:Number(n)})},a.changeChannel_type_id=function(e){var t=e.target.value;console.log(t),a.setState({channel_type_id:Number(t)})},a.saveReport=function(){var e,t={tsp_id:a.state.currentTsp,main_settings:(e=a.state.type_acquiring,1==e?{acquiring_type_id:1,report_format_id:a.state.physical_report_format_id,report_period_type_ids:a.state.physical_report_period_type_id,channel_type_id:a.state.physical_channel_type_id,file_name_mask:a.state.physical_file_name_mask,channel_address:a.state.physical_channel_address,report_setting_id:a.state.physical_report_settings_id,file_path:a.state.physical_file_name}:2==e?{acquiring_type_id:2,report_format_id:a.state.internet_report_format_id,report_period_type_ids:a.state.internet_report_period_type_id,channel_type_id:a.state.internet_channel_type_id,file_name_mask:a.state.internet_file_name_mask,channel_address:a.state.internet_channel_address,report_setting_id:a.state.internet_report_settings_id,file_path:a.state.internet_file_name}:void 0)};null!=a.state.TSPReportSettingsSTD&&(t.std_settings=a.state.TSPReportSettingsSTD),console.log(t),a.requestTSPReportSettingsSTD_SAVE(a.props.store.userState.token,t)},a.showHtmlReport=function(){return console.log("this.state.physical_file_name_mask"),console.log(a.state.physical_channel_address),Object(D.jsxs)("div",{className:"",children:[Object(D.jsxs)("div",{className:"coverBtn border",children:[Object(D.jsx)("div",{className:"title",children:"\u0412\u0438\u0434 \u0435\u043a\u0432\u0430\u0440\u0438\u043d\u0433\u0443"}),Object(D.jsx)("button",{className:"btn btn-primary customBtnAc",disabled:1==a.state.type_acquiring?"disabled":"",onClick:a.changeTypeAcquiring,type_acquiring:1,children:"\u0424\u0456\u0437\u0438\u0447\u043d\u0438\u0439"}),Object(D.jsx)("button",{className:"btn btn-primary customBtnAc",disabled:2==a.state.type_acquiring?"disabled":"",onClick:a.changeTypeAcquiring,type_acquiring:2,children:"\u0406\u043d\u0442\u0435\u0440\u043d\u0435\u0442"})]}),Object(D.jsxs)("div",{className:"".concat(1==a.state.type_acquiring?"":"d-none"," border report"),children:[Object(D.jsxs)("div",{className:"title",children:["\u041f\u0435\u0440\u0435\u043b\u0456\u043a \u043f\u043e\u043b\u0456\u0432 \u0437\u0432\u0456\u0442\u0443 \u0422\u0421\u041f \u043f\u043e"," ",1==a.state.type_acquiring?"\u0424\u0456\u0437\u0438\u0447\u043d\u043e\u043c\u0443":"\u0406\u043d\u0442\u0435\u0440\u043d\u0435\u0442"," ","\u0435\u043a\u0432\u0430\u0440\u0438\u043d\u0433\u0443"]}),Object(D.jsx)("button",{className:"btn btn-primary",disabled:a.state.physical_standard_report?"":"disabled",onClick:a.openStandardReport,children:"\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("br",{}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_format",children:"\u0424\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0443"}),a.state.isShowREPORT_FORMAT?Object(D.jsx)("select",{className:"form-select",onChange:a.changeSelect,name:"physical_report_format_id",id:"DICT_REPORT_FORMAT",children:a.state.DICT_REPORT_FORMAT.map((function(e,t){return Object(D.jsx)(ye,{optionItem:e,report_format_id:a.state.physical_report_format_id},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"report_period",children:"\u041f\u0435\u0440\u0456\u043e\u0434 \u0437\u0432\u0456\u0442\u0443"}),a.state.isShowDICT_REPORT_PERIOD_TYPE?Object(D.jsx)("div",{className:"form-select",onChange:a.changeSelect,name:"physical_report_period_type_id",id:"DICT_REPORT_PERIOD_TYPE",children:a.state.DICT_REPORT_PERIOD_TYPE.map((function(e,t){return Object(D.jsx)(Ee,{optionItem:e,report_period_type_id:a.state.physical_report_period_type_id},t)}))}):Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("br",{}),Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441hannel",children:"\u041a\u0430\u043d\u0430\u043b"}),a.state.isShowDICT_REPORT_CHANNEL_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeSelect,name:"physical_channel_type_id",id:"DICT_REPORT_CHANNEL_TYPE",children:a.state.DICT_REPORT_CHANNEL_TYPE.map((function(e,t){return Object(D.jsx)(ke,{optionItem:e,channel_type_id:a.state.physical_channel_type_id},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsx)("div",{className:"coverInput",children:1==a.state.physical_channel_type_id?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("input",{placeholder:"ftp",value:a.state.physical_channel_address,onChange:a.changeInputTspFtp,name:"physical_channel_address",className:"".concat(a.state.physicalEmailMaskError?"errorEmail":""," customInput form-control"),type:"text"}),a.state.physicalEmailMaskError?Object(D.jsx)("p",{children:"\u041d\u0435\u0432\u0430\u043b\u0456\u0434\u043d\u0438\u0439 ftp"}):Object(D.jsx)(D.Fragment,{})]}):Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("input",{name:"physical_channel_address",label:"Email",placeholder:"email@email.com",value:a.state.physical_channel_address,onChange:a.changeInputTspEmail,className:"".concat(a.state.physicalEmailMaskError?"errorEmail":""," customInput form-control"),type:"text"}),a.state.physicalEmailMaskError?Object(D.jsx)("p",{children:"\u041d\u0435\u0432\u0430\u043b\u0456\u0434\u043d\u0438\u0439 email"}):Object(D.jsx)(D.Fragment,{})]})}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"catalog",children:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433"}),Object(D.jsx)("input",{onChange:a.changeInputTsp,name:"catalog-physicall",className:"customInput form-control",id:"catalog",type:"text",value:a.state.physical_file_name,disabled:2===a.state.physical_channel_type_id})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_name_mask",children:"\u041c\u0430\u0441\u043a\u0430 \u043d\u0430\u0437\u0432\u0438 \u0444\u0430\u0439\u043b\u0443"}),Object(D.jsx)("input",{onChange:a.changeInputTsp,name:"physical_file_name_mask",className:"customInput form-control",id:"file_name_mask",type:"text",value:a.state.physical_file_name_mask,disabled:2===a.state.physical_channel_type_id})]}),Object(D.jsx)("br",{}),Object(D.jsx)("div",{className:"reportCoverBtn",children:Object(D.jsx)("button",{className:"btn btn-primary",disabled:a.state.isDisabledSaveBtn?"":"disabled",onClick:a.saveReport,children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})})]}),Object(D.jsxs)("div",{className:"".concat(1==a.state.type_acquiring?"d-none":""," border report"),children:[Object(D.jsxs)("div",{className:"title",children:["\u041f\u0435\u0440\u0435\u043b\u0456\u043a \u043f\u043e\u043b\u0456\u0432 \u0437\u0432\u0456\u0442\u0443 \u0422\u0421\u041f \u043f\u043e"," ",1==a.state.type_acquiring?"\u0424\u0456\u0437\u0438\u0447\u043d\u043e\u043c\u0443":"\u0406\u043d\u0442\u0435\u0440\u043d\u0435\u0442"," ","\u0435\u043a\u0432\u0430\u0440\u0438\u043d\u0433\u0443"]}),Object(D.jsx)("button",{className:"btn btn-primary",disabled:a.state.internet_standard_report?"":"disabled",onClick:a.openStandardReport,children:"\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("br",{}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_format",children:"\u0424\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0443"}),a.state.isShowREPORT_FORMAT?Object(D.jsx)("select",{className:"form-select",onChange:a.changeSelect,name:"internet_report_format_id",id:"DICT_REPORT_FORMAT",children:a.state.DICT_REPORT_FORMAT.map((function(e,t){return Object(D.jsx)(ye,{optionItem:e,report_format_id:a.state.internet_report_format_id},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"report_period",children:"\u041f\u0435\u0440\u0456\u043e\u0434 \u0437\u0432\u0456\u0442\u0443"}),a.state.isShowDICT_REPORT_PERIOD_TYPE?Object(D.jsx)("div",{className:"form-select",onChange:a.changeSelect,name:"internet_report_period_type_id",id:"DICT_REPORT_PERIOD_TYPE",children:a.state.DICT_REPORT_PERIOD_TYPE.map((function(e,t){return Object(D.jsx)(Ee,{optionItem:e,report_period_type_id:a.state.internet_report_period_type_id},t)}))}):Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("br",{}),Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441hannel",children:"\u041a\u0430\u043d\u0430\u043b"}),a.state.isShowDICT_REPORT_CHANNEL_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeSelect,name:"internet_channel_type_id",id:"DICT_REPORT_CHANNEL_TYPE",children:a.state.DICT_REPORT_CHANNEL_TYPE.map((function(e,t){return Object(D.jsx)(ke,{optionItem:e,channel_type_id:a.state.internet_channel_type_id},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsx)("div",{className:"coverInput",children:1==a.state.internet_channel_type_id?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("input",{placeholder:"ftp",value:a.state.internet_channel_address,onChange:a.changeInputTspFtp,name:"internet_channel_address",className:"".concat(a.state.internetEmailMaskError?"errorEmail":""," customInput form-control"),type:"text"}),a.state.internetEmailMaskError?Object(D.jsx)("p",{children:"\u041d\u0435\u0432\u0430\u043b\u0456\u0434\u043d\u0438\u0439 ftp"}):Object(D.jsx)(D.Fragment,{})]}):Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("input",{name:"internet_channel_address",label:"Email",placeholder:"email@email.com",value:a.state.internet_channel_address,onChange:a.changeInputTspEmail,className:"".concat(a.state.internetEmailMaskError?"errorEmail":""," customInput form-control"),type:"text"}),a.state.internetEmailMaskError?Object(D.jsx)("p",{children:"\u041d\u0435\u0432\u0430\u043b\u0456\u0434\u043d\u0438\u0439 email"}):Object(D.jsx)(D.Fragment,{})]})}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_name_mask",children:"\u041c\u0430\u0441\u043a\u0430 \u043d\u0430\u0437\u0432\u0438 \u0444\u0430\u0439\u043b\u0443"}),Object(D.jsx)("input",{value:a.state.internet_file_name_mask,onChange:a.changeInputTsp,name:"internet_file_name_mask",className:"customInput form-control",id:"file_name_mask",type:"text",disabled:2===a.state.internet_channel_type_id})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441atalog",children:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433"}),Object(D.jsx)("input",{onChange:a.changeInputTsp,apiName:"catalog-internet",className:"customInput form-control",id:"\u0441atalog",type:"text",value:a.state.internet_file_name,disabled:2===a.state.internet_channel_type_id})]}),Object(D.jsx)("br",{}),Object(D.jsx)("div",{className:"reportCoverBtn",children:Object(D.jsx)("button",{className:"btn btn-primary",disabled:a.state.isDisabledSaveBtn?"":"disabled",onClick:a.saveReport,children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})})]})]})},a.closePopupError=function(){a.setState({isShowPopupError:!1})},a.closePopupErrorSave=function(){a.setState({isShowPopupErrorSave:!1})},a.closePopupOrder_numberError=function(){a.setState({isShowOrder_numberError:!1,isShowBootstrapTable:!0})},a.activeOperation=function(e,t){var n;return e.map((function(e,a){e.operation==t&&(console.log(e.name),n=e.name)})),n},a.addTspName=function(e){console.log(e);var t=a.state.TSPReportSettingsSearchObj;t.tsp_id=e,console.log(t),a.setState({TSPReportSettingsSearchObj:t}),console.log(a.state.TSPReportSettingsSearchObj.tsp_name)},a.addIdentCode=function(e){console.log(e);var t=a.state.TSPReportSettingsSearchObj;t.ident_code=e,console.log(t),a.setState({TSPReportSettingsSearchObj:t})},a.state={DICT_INSTITUTION:null,isShowSelectDICT_INSTITUTION:!1,isDisableButton:!1,selectRow:null,DICT_BRANCH:null,isDisableTVBV:!0,isShowSelectTVBV:!1,TSPReportSettingsSearchObj:{},settings:null,tsp_list:null,isShowTsp:!1,currentTsp:null,isShowTypeAcquiring:!1,isShowReport:!1,DICT_REPORT_FORMAT:null,isShowREPORT_FORMAT:!1,DICT_REPORT_PERIOD_TYPE:null,isShowDICT_REPORT_PERIOD_TYPE:!1,DICT_REPORT_CHANNEL_TYPE:null,isShowDICT_REPORT_CHANNEL_TYPE:!1,isShowTableTSPReportSettingsSTD:!1,TSPReportSettingsSTD:null,errorRU:!1,error_text:"\u0417\u0430\u043f\u043e\u0432\u043d\u0456\u0442\u044c \u043f\u043e\u043b\u0435!",responseTSPReportSettings:{tsp_list:[{tsp_id:595999,tsp_name:"\u0422\u0437\u041e\u0412 \u0410\u041f\u0422\u0415\u041a\u0410-\u0416\u041e\u0412\u0422\u041d\u0415\u0412\u0415 \u041b\u0422\u0414",bank_branch_name:"\u0412\u043e\u043b\u0438\u043d\u0441\u044c\u043a\u0435 \u041e\u0423 /303398/",ident_code:"30297548",merchant_id:0,creation_date:"2012-05-24T18:55:58"},{tsp_id:595998,tsp_name:"\u0422\u0437\u041e\u0412 \u041d\u043e\u0432\u043e\u0432\u043e\u043b\u0438\u043d\u0441\u044c\u043a\u0438\u0439 \u043c'\u044f\u0441\u043e\u043a\u043e\u043c\u0431\u0456\u043d\u0430",bank_branch_name:"\u0412\u043e\u043b\u0438\u043d\u0441\u044c\u043a\u0435frfr \u041e\u0423 /303398/",ident_code:"30297548",merchant_id:0,creation_date:"2012-05-24T18:55:58"},{tsp_id:595997,tsp_name:"\u0422\u043e\u0432 \u0431\u0435\u0440\u0435\u0437\u043a\u0430 \u043d\u0430",bank_branch_name:"\u0412\u043e\u043b\u0438\u043d\u0441\u044c\u043a\u0435frfr \u041e\u0423 /303398/",ident_code:"30297548",merchant_id:0,creation_date:"2012-05-24T18:55:58"}],settings:[{tsp_id:595999,main_settings:[{acquiring_type_id:1,standard_report:!0,extended_report:!1,installment_report:!1,report_format_id:2,report_format_name:"csv",report_period_type_ids:null,channel_type_id:2,channel_type_name:"email",channel_address:"rere@gmail.com",file_name_mask:"Statement_\u0404\u0414\u0420\u041f\u041e\u0423_\u043f\u0435\u0440\u0456\u043e\u0434",file_path:"",report_setting_id:0},{report_setting_id:0,acquiring_type_id:2,standard_report:!0,extended_report:!1,installment_report:!0,report_format_id:1,report_format_name:"xls",report_period_type_ids:null,channel_type_id:2,channel_type_name:null,channel_address:"re3re@gmail.com",file_name_mask:"Statement_\u0404\u0414\u0420\u041f\u041e\u0423_\u043f\u0435\u0440\u0456\u043e\u0434",file_path:""}]}]},isShowPopupError:!1,isShowPopupErrorSave:!1,isShowPopupDone:!1,currentAcquiring_type_id:null,type_acquiring:1,tsp_id:null,report_format_id:null,report_period_type_id:null,channel_type_id:null,file_name_mask:null,physical_acquiring_type_id:1,physical_channel_address:"",physical_channel_type_id:1,physical_extended_report:!1,physical_file_name_mask:"",physical_installment_report:!1,physical_report_format_id:1,physical_report_period_type_id:1,physical_standard_report:!0,internet_acquiring_type_id:2,internet_channel_address:"",internet_channel_type_id:1,internet_extended_report:!1,internet_file_name_mask:"",internet_installment_report:!1,internet_report_format_id:1,internet_report_period_type_id:1,internet_standard_report:!0,internetEmailMaskError:!1,physicalEmailMaskError:!1,isDisabledSaveBtn:!0,isShowOrder_numberError:!1,isShowBootstrapTable:!0},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.requestDICT_INSTITUTION(this.props.store.userState.token)}},{key:"requestDICT_INSTITUTION",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_INSTITUTION",e.next=5,R.get("/api/Dictionary/DICT_INSTITUTION",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_INSTITUTION:e.data.Table.TableRows,isShowSelectDICT_INSTITUTION:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_BRANCH",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n){var a,s=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),a="/api/Dictionary/DICT_BRANCH/?param1=".concat(n),{param1:n},e.next=6,R.get(a,{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),console.log(e.data.Table),s.setState({DICT_BRANCH:e.data.Table.TableRows,isShowSelectTVBV:!0,isDisableTVBV:!1}),s.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"requestDICT_REPORT_FORMAT",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_REPORT_FORMAT",e.next=5,R.get("/api/Dictionary/DICT_REPORT_FORMAT",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_REPORT_FORMAT:e.data.Table.TableRows,isShowREPORT_FORMAT:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_REPORT_PERIOD_TYPE",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_REPORT_PERIOD_TYPE",e.next=5,R.get("/api/Dictionary/DICT_REPORT_PERIOD_TYPE",{headers:{Token:"".concat(t)}}).then((function(e){n.setState({DICT_REPORT_PERIOD_TYPE:e.data.Table.TableRows,isShowDICT_REPORT_PERIOD_TYPE:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_REPORT_CHANNEL_TYPE",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_REPORT_CHANNEL_TYPE",e.next=5,R.get("/api/Dictionary/DICT_REPORT_CHANNEL_TYPE",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_REPORT_CHANNEL_TYPE:e.data.Table.TableRows,isShowDICT_REPORT_CHANNEL_TYPE:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestTSPReportSettings",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n){var a=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/TSPReportSettings",e.next=5,R.post("/api/TSPReportSettings",n,{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(e){if(console.log(e.data),e.data.record_count>=1){if(null===e.data.tsp_list[0].main_settings)e.data.tsp_list[0].main_settings=a.state.responseTSPReportSettings.settings[0].main_settings;else if(1===e.data.tsp_list[0].main_settings.length){var t=1===e.data.tsp_list[0].main_settings[0].acquiring_type_id?1:0;e.data.tsp_list[0].main_settings.push(a.state.responseTSPReportSettings.settings[0].main_settings[t])}console.log("response.data.tsp_list[0]: ",e.data.tsp_list[0]),a.setState({tsp_list:e.data.tsp_list,settings:e.data.tsp_list[0].main_settings,isShowTsp:!0})}else e.data.record_count<1&&a.setState({isShowPopupError:!0});a.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"requestTSPReportSettingsSTD",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n,a=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/TSPReportSettings/STD",(n={acquiring_type_id:this.state.type_acquiring}).report_setting_id=1===+this.state.type_acquiring?this.state.physical_report_settings_id:this.state.internet_report_settings_id,e.next=6,R.post("/api/TSPReportSettings/STD",n,{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(e){a.setState({TSPReportSettingsSTD:e.data.standard_settings,isShowTableTSPReportSettingsSTD:!0}),a.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response)}));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestTSPReportSettingsSTD_SAVE",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n){var a=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/TSPReportSettings",console.log(n),e.next=6,R.put("/api/TSPReportSettings",n,{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(e){console.log(e.data),a.setState({isShowTsp:!1,isShowTypeAcquiring:!1}),a.search(),a.props.store.changeLoading(!1),a.setState({isShowPopupDone:!0})})).catch((function(e){console.log(e.response),a.setState({isShowPopupErrorSave:!0}),a.props.store.changeLoading(!1)}));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;console.log(this.state.TSPReportSettingsSTD),console.log(this.state);return Object(D.jsxs)("div",{className:"coverTable REPORT_SETTINGS_TSP",children:[Object(D.jsxs)("div",{className:"headerTable",children:[Object(D.jsx)("div",{className:"titleTable",children:this.activeOperation(this.props.store.userState.OPERATIONS,this.props.store.location.pathname.substr(11))}),Object(D.jsx)("div",{className:"optionBlock"})]}),Object(D.jsxs)("div",{className:"filter",children:[Object(D.jsxs)("div",{className:"coverInputSelect",children:[Object(D.jsx)("label",{htmlFor:"DICT_INSTITUTION",children:"\u0420\u0423 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430"}),Object(D.jsxs)("select",{onChange:this.selectDICT_INSTITUTION,apiName:"institution_id",id:"dropdown-basic-button",className:"form-select ".concat(this.state.errorRU?"validError":null),title:"\u0420\u0435\u0433\u0456\u043e\u043d\u0430\u043b\u044c\u043d\u0456 \u0443\u043f\u0440\u0430\u0432\u043b\u0456\u043d\u043d\u044f",children:[Object(D.jsx)("option",{children:"-"}),this.state.isShowSelectDICT_INSTITUTION?this.state.DICT_INSTITUTION.map((function(e,t){return Object(D.jsx)(Ne,{optionItem:e},t)})):Object(D.jsx)(D.Fragment,{})]}),Object(D.jsx)("section",{className:this.state.errorRU?"d-block":"d-none ",children:Object(D.jsx)("p",{className:"text-danger",children:this.state.error_text})}),Object(D.jsx)("label",{htmlFor:"TVBV",children:"\u0422\u0412\u0411\u0412"}),Object(D.jsxs)("select",{id:"dropdown-basic-button",onChange:this.changeInput,apiName:"bank_branch_id",className:"form-select",disabled:this.state.isDisableTVBV?"disabled":"",title:"\u0422\u0412\u0411\u0412",children:[Object(D.jsx)("option",{children:"-"}),this.state.isShowSelectTVBV?this.state.DICT_BRANCH.map((function(e,t){return Object(D.jsx)(De,{optionItem:e},t)})):Object(D.jsx)(D.Fragment,{})]})]}),Object(D.jsxs)("div",{className:"coverInputText",children:[Object(D.jsx)("label",{htmlFor:"INN",children:"\u0406\u041d\u041d/\u0404\u0414\u0420\u041f\u041e\u0423"}),Object(D.jsx)(qe,{token:this.props.store.userState.token,institution_id:this.state.TSPReportSettingsSearchObj.institution_id,branch_id:this.state.TSPReportSettingsSearchObj.bank_branch_id,addIdentCode:this.addIdentCode,ident_code:this.state.TSPReportSettingsSearchObj.ident_code}),Object(D.jsx)("label",{htmlFor:"TPS",children:"\u041d\u0430\u0437\u0432\u0430 \u0422\u0421\u041f"}),Object(D.jsx)(we,{token:this.props.store.userState.token,institution_id:this.state.TSPReportSettingsSearchObj.institution_id,branch_id:this.state.TSPReportSettingsSearchObj.bank_branch_id,addTspName:this.addTspName,tsp_name:this.state.TSPReportSettingsSearchObj.tsp_id}),Object(D.jsx)("label",{htmlFor:"merchant",children:"merchant ID"}),Object(D.jsx)("input",{onChange:this.changeInput,apiName:"merchant_id",id:"merchant",type:"text",className:"form-control"})]}),Object(D.jsxs)("div",{className:"coverInputDate",children:[Object(D.jsx)("span",{children:"\u041f\u0435\u0440\u0456\u043e\u0434 \u0432\u0456\u0434\u043a\u0440\u0438\u0442\u0442\u044f \u0422\u0421\u041f"}),Object(D.jsxs)("div",{className:"coverInputs",children:[Object(D.jsxs)("div",{className:"coverDate",children:[Object(D.jsx)("label",{htmlFor:"date_from",children:"\u0417"}),Object(D.jsx)("input",{onChange:this.changeInput,apiName:"date_from",className:"customInput form-control",id:"date_from",type:"date"})]}),Object(D.jsxs)("div",{className:"coverDate",children:[Object(D.jsx)("label",{htmlFor:"date_to",children:"\u041f\u043e"}),Object(D.jsx)("input",{onChange:this.changeInput,apiName:"date_to",className:"customInput form-control",id:"date_to",type:"date"})]})]}),Object(D.jsx)("button",{className:"search btn btn-primary",onClick:this.search,children:"\u041f\u043e\u0448\u0443\u043a"})]})]}),Object(D.jsxs)("div",{className:"coverResult",children:[Object(D.jsx)("div",{className:"resultSearch border",children:this.state.isShowTsp?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("div",{className:"title",children:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u043f\u043e\u0448\u0443\u043a\u0443"}),Object(D.jsx)("ul",{className:"blockTsp_list",children:this.Tsp_list(this.state.tsp_list)})]}):Object(D.jsx)(D.Fragment,{children:"\u041d\u0435 \u0432\u0438\u0431\u0440\u0430\u043d\u043e \u0434\u0430\u043d\u0438\u0445 \u0434\u043b\u044f \u043f\u043e\u0448\u0443\u043a\u0443"})}),Object(D.jsx)("div",{className:"typeAcquiring",children:this.state.isShowTypeAcquiring?Object(D.jsx)(D.Fragment,{children:this.showHtmlReport()}):null})]}),this.state.isShowTableTSPReportSettingsSTD?Object(D.jsx)(D.Fragment,{children:Object(D.jsx)("div",{className:"coverPopupTable",children:Object(D.jsxs)("div",{className:"innerBlock",children:[Object(D.jsx)("button",{onClick:this.seveTSPReportSettingsSTD,type:"button",className:"btn btn-primary btn-save",children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"}),Object(D.jsx)("button",{onClick:this.closePopupTable,type:"button",className:"btn-close","aria-label":"Close"}),this.state.isShowBootstrapTable?Object(D.jsxs)(ce.BootstrapTable,{data:this.state.TSPReportSettingsSTD,children:[Object(D.jsx)(ce.TableHeaderColumn,{isKey:!0,dataField:"field_desc",filter:{type:"TextFilter",delay:1e3},children:"\u0406\u0434\u0435\u043d\u0442\u0438\u0444\u0456\u043a\u0430\u0442\u043e\u0440 \u043f\u043e\u043b\u044f"}),Object(D.jsx)(ce.TableHeaderColumn,{dataField:"include_flag",dataFormat:function(t,n,a){return Object(D.jsx)(D.Fragment,{children:Object(D.jsx)("input",{onChange:function(t){var a=t.currentTarget.getAttribute("name"),s=t.target.checked,i=e.state.TSPReportSettingsSTD;n[a]=s;var r=i.findIndex((function(e){return e.field_name===n.field_name}));i[r]=n,console.log(i),e.setState({TSPReportSettingsSTD:i})},checked:t,name:"include_flag",type:"checkbox"})})},filter:{type:"TextFilter",delay:1e3},children:"\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u0438 \u043f\u043e\u043b\u0435"}),Object(D.jsx)(ce.TableHeaderColumn,{dataField:"order_number",dataFormat:function(t,n,a){return Object(D.jsx)(D.Fragment,{children:Object(D.jsx)("input",{onBlur:function(t){var a=t.currentTarget.getAttribute("name"),s=Number(t.target.value),i=e.state.TSPReportSettingsSTD.map((function(e){return Object.assign({},e)})),r=i.findIndex((function(e){return e.field_name===n.field_name}));n[a]=s,i[r]=n,e.setState({TSPReportSettingsSTD:i})},defaultValue:t,name:"order_number",type:"text"})})},filter:{type:"TextFilter",delay:1e3},children:"\u041f\u043e\u0440\u044f\u0434\u043a\u043e\u0432\u0438\u0439 \u043d\u043e\u043c\u0435\u0440 \u043f\u043e\u043b\u044f"})]}):Object(D.jsx)("div",{className:"coverloader",children:Object(D.jsx)("div",{className:"loader"})})]})})}):Object(D.jsx)(D.Fragment,{}),this.state.isShowPopupError?Object(D.jsx)(D.Fragment,{children:Object(D.jsx)("div",{className:"coverPopupError",children:Object(D.jsxs)("div",{className:"innerBlock",children:[Object(D.jsx)("div",{className:"title alert alert-primary",children:"\u041d\u0435\u043c\u0430\u0454 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443 \u043f\u043e \u0434\u0430\u043d\u043e\u043c\u0443 \u043f\u043e\u0448\u0443\u043a\u0443"}),Object(D.jsx)("div",{className:"msg",children:"\u0421\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0432\u0432\u0435\u0441\u0442\u0438 \u0456\u043d\u0448\u0456 \u0434\u0430\u043d\u0456 \u0434\u043b\u044f \u043f\u043e\u0448\u0443\u043a\u0443"}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:this.closePopupError,children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"})]})})}):null,this.state.isShowPopupErrorSave?Object(D.jsx)(D.Fragment,{children:Object(D.jsx)("div",{className:"coverPopupError",children:Object(D.jsxs)("div",{className:"innerBlock",children:[Object(D.jsx)("div",{className:"title alert alert-primary",children:"\u0421\u0442\u0430\u043b\u0430\u0441\u044f \u043f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u0456"}),Object(D.jsx)("div",{className:"msg"}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:this.closePopupErrorSave,children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"})]})})}):null,this.state.isShowPopupDone?Object(D.jsx)(D.Fragment,{children:Object(D.jsx)("div",{className:"coverPopupError",children:Object(D.jsxs)("div",{className:"innerBlock",children:[Object(D.jsx)("div",{className:"title alert alert-success",children:"\u041d\u0430\u043b\u0430\u0448\u0442\u0443\u0432\u0430\u043d\u043d\u044f \u0434\u043b\u044f \u0444\u043e\u0440\u043c\u0443\u0432\u0430\u043d\u043d\u044f \u0432\u0438\u043f\u0438\u0441\u043a\u0438 \u0437\u0434\u0456\u0439\u0441\u043d\u0435\u043d\u0456"}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:function(){return e.setState({isShowPopupDone:!1})},children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"})]})})}):null,this.state.isShowOrder_numberError?Object(D.jsx)(D.Fragment,{children:Object(D.jsx)("div",{className:"coverOrder_numberError",children:Object(D.jsxs)("div",{className:"innerBlock",children:[Object(D.jsx)("div",{className:"title alert alert-primary",children:"\u0422\u0430\u043a\u0438\u0439 \u043f\u043e\u0440\u044f\u0434\u043a\u043e\u0432\u0438\u0439 \u043d\u043e\u043c\u0435\u0440 \u0432\u0436\u0435 \u0432\u0438\u0431\u0440\u0430\u043d\u043e"}),Object(D.jsx)("div",{className:"msg",children:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0456\u043d\u0448\u0438\u0439 \u043f\u043e\u0440\u044f\u0434\u043a\u043e\u0432\u0438\u0439 \u043d\u043e\u043c\u0435\u0440 \u043f\u043e\u043b\u044f"}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:this.closePopupOrder_numberError,children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"})]})})}):null]})}}]),n}(s.a.Component),Be=Me,Le=n(65),Fe=function(e){return Object(D.jsx)("option",{value:e.optionItem.institution_id,children:e.optionItem.institution_name})},Ye=function(e){return Object(D.jsx)("option",{selected:e.optionItem.report_format_id==e.report_format_id?"selected":"",value:e.optionItem.report_format_id,children:e.optionItem.report_format_name})},Ve=function(e){return console.log("props.report_period_type_id: ",e.report_period_type_id),Object(D.jsxs)(D.Fragment,{children:[Object(D.jsxs)("label",{for:e.optionItem.report_period_type_id,children:[Object(D.jsx)("input",{type:"checkbox",id:e.optionItem.report_period_type_id,checked:null!==e.report_period_type_id&&void 0!==e.report_period_type_id&&e.report_period_type_id.includes(e.optionItem.report_period_type_id),value:e.optionItem.report_period_type_id,style:{margin:"10px 0"}}),e.optionItem.report_period_type_name]}),Object(D.jsx)("br",{})]})},Ue=function(e){return Object(D.jsx)("option",{selected:e.optionItem.report_channel_type_id==e.channel_type_id?"selected":"",value:e.optionItem.report_channel_type_id,children:e.optionItem.report_channel_type_name})},He=function(e){return Object(D.jsx)("div",{className:"blockSelectItem",value:e.item.client_id,name:e.item.client_name,onClick:function(t){return e.onClickBlockSelectItem(t)},children:e.item.client_name})},Qe=(s.a.Component,function(e){return Object(D.jsx)("div",{className:"blockSelectItem",value:e.item.ident_code,onClick:function(t){return e.onClickBlockSelectItem(t)},children:e.item.ident_code})}),Ge=(s.a.Component,function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).selectDICT_INSTITUTION=function(e){var t=e.target.value,n=e.currentTarget.getAttribute("apiName"),s=e.target.value,i=a.state.TSPReportSettingsSearchObj;i[n]=s,a.setState({isShowSelectTVBV:!1,TSPReportSettingsSearchObj:i}),a.requestDICT_BRANCH(a.props.store.userState.token,t),a.get_DICT_NET_BRAND(a.props.store.userState.token,s)},a.changeInput=function(e){var t=e.currentTarget.getAttribute("apiName");console.log(t);var n=e.target.value;console.log(n);var s=a.state.TSPReportSettingsSearchObj;s[t]="date_from"==t||"date_to"==t?a.formatDate(new Date(n)):n,console.log(s),a.setState({TSPReportSettingsSearchObj:s}),console.log(a.state),console.log(a.state.TSPReportSettingsSearchObj)},a.formatDate=function(e){var t=e.getDate(),n=("0"+(e.getMonth()+1)).slice(-2);return e.getFullYear()+n+t},a.search=function(){a.setState({errorRU:!1}),a.state.isDisableTVBV?a.setState({errorRU:!0}):(console.log(a.state.TSPReportSettingsSearchObj),a.requestTSPReportSettings(a.props.store.userState.token,a.state.TSPReportSettingsSearchObj))},a.Tsp_list=function(e){return e.map((function(e,t){return Object(D.jsx)("li",{className:"dropdownMenuItem",children:Object(D.jsxs)("label",{for:e.brand_name,children:[Object(D.jsx)("input",{name:"tsp_list",id:e.brand_name,type:"radio",onClick:a.itemTsp,value:e.brand_id})," ",e.brand_name]})})}))},a.itemTsp=function(e){var t=e.target.value;console.log(t),a.state.tsp_list.map((function(e,n){+e.brand_id===+t&&(a.setState({physical_acquiring_type_id:1,physical_channel_address:"",physical_channel_type_id:1,physical_extended_report:!1,physical_file_name_mask:"",physical_installment_report:!1,physical_report_format_id:1,physical_report_period_type_id:null,physical_standard_report:!0,internet_acquiring_type_id:2,internet_channel_address:"",internet_channel_type_id:1,internet_extended_report:!1,internet_file_name_mask:"",internet_installment_report:!1,internet_report_format_id:1,internet_report_period_type_id:null,internet_standard_report:!0,currentTsp:Number(t),TSPReportSettingsSTD:null,isShowTypeAcquiring:!0}),console.log(a.state),e.main_settings?e.main_settings&&(1==e.acquiring_type_id?(console.log("item.acquiring_type_id == 1"),e.main_settings.channel_address&&a.setState({physical_acquiring_type_id:e.acquiring_type_id,physical_channel_address:e.main_settings.channel_address,physical_channel_type_id:e.main_settings.channel_type_id,physical_file_name_mask:e.main_settings.file_name_mask,physical_file_name:e.main_settings.file_path,physical_report_format_id:e.main_settings.report_format_id,physical_report_period_type_id:e.main_settings.report_period_type_ids,physical_report_settings_id:e.main_settings.report_setting_id,currentTsp:Number(t),TSPReportSettingsSTD:null,isShowTypeAcquiring:!0})):2==e.acquiring_type_id&&(console.log("item.acquiring_type_id == 2"),a.setState({internet_acquiring_type_id:e.acquiring_type_id,internet_channel_address:e.main_settings.channel_address,internet_channel_type_id:e.main_settings.channel_type_id,internet_file_name:e.main_settings.file_path,internet_file_name_mask:e.main_settings.file_name_mask,internet_report_format_id:e.main_settings.report_format_id,internet_report_period_type_id:e.main_settings.report_period_type_ids,internet_report_settings_id:e.main_settings.report_setting_id,currentTsp:Number(t),TSPReportSettingsSTD:null,isShowTypeAcquiring:!0}))):a.setState({isShowTypeAcquiring:!0}))})),console.log("-----------state---------------"),console.log(a.state),a.requestDICT_REPORT_FORMAT(a.props.store.userState.token),a.requestDICT_REPORT_PERIOD_TYPE(a.props.store.userState.token),a.requestDICT_REPORT_CHANNEL_TYPE(a.props.store.userState.token)},a.changeTypeAcquiring=function(e){var t=e.currentTarget.getAttribute("type_acquiring");a.setState({type_acquiring:Number(t)})},a.changeTypeAcquiringInternet=function(e){var t=e.currentTarget.getAttribute("type_acquiring");console.log(t),a.setState({report_period_type_id:a.state.settings[0].report_period_type_id,report_format_id:a.state.settings[0].report_format_id,channel_type_id:a.state.settings[0].channel_type_id,file_name_mask:a.state.settings[0].file_name_mask,type_acquiring:Number(t),isShowReport:!0,isDisabledSaveBtn:!0,physicalEmailMaskError:!1,internetEmailMaskError:!1})},a.openStandardReport=function(){a.requestTSPReportSettingsSTD(a.props.store.userState.token)},a.closePopupTable=function(){a.setState({isShowTableTSPReportSettingsSTD:!1,TSPReportSettingsSTD:null})},a.seveTSPReportSettingsSTD=function(){!function(){var e,t=a.state.TSPReportSettingsSTD.map((function(e){return e.order_number})).filter((function(e){return 0!==e}));return(e=t).filter((function(t,n){return e.indexOf(t)!==n})).length>0}()?a.setState({isShowTableTSPReportSettingsSTD:!1}):a.setState({isShowOrder_numberError:!0})},a.changeSelect=function(e){var t=e.currentTarget.getAttribute("name"),n=e.target.value;if(console.log(t),console.log(n),console.log("this.state[name_input]",a.state[t]),"physical_acquiring_type_id"==t&&a.setState({physical_acquiring_type_id:Number(n)}),"physical_channel_type_id"==t&&a.setState({physical_channel_type_id:Number(n),physical_channel_address:"",isDisabledSaveBtn:!0,physicalEmailMaskError:!1,internetEmailMaskError:!1}),"physical_report_period_type_id"==t||"internet_report_period_type_id"==t){var s;if(null===a.state[t]||void 0===a.state[t])return a.setState({physical_report_period_type_id:"".concat(n)}),void console.log("inputValue",n);s=a.state[t].includes(n)?a.state[t].split(",").filter((function(e){return e!=n})).join():a.state[t]+","+n,a.setState(Object(B.a)({},t,s))}"physical_report_format_id"==t&&a.setState({physical_report_format_id:Number(n)}),"internet_acquiring_type_id"==t&&a.setState({internet_acquiring_type_id:Number(n)}),"internet_channel_type_id"==t&&a.setState({internet_channel_type_id:Number(n),internet_channel_address:"",isDisabledSaveBtn:!0,physicalEmailMaskError:!1,internetEmailMaskError:!1}),"internet_report_format_id"==t&&a.setState({internet_report_format_id:Number(n)})},a.changeInputTsp=function(e){var t=e.currentTarget.getAttribute("name"),n=e.target.value;console.log(n),"physical_channel_address"==t&&a.setState({physical_channel_address:n}),"physical_file_name_mask"==t&&a.setState({physical_file_name_mask:n}),"internet_channel_address"==t&&a.setState({internet_channel_address:n}),"internet_file_name_mask"==t&&a.setState({internet_file_name_mask:n}),"catalog-physicall"==t&&a.setState({physical_file_name:n}),"catalog-internet"==t&&a.setState({internet_file_name:n})},a.changeInputTspEmail=function(e){var t=e.currentTarget.getAttribute("name"),n=e.target.value;console.log(t),console.log(n),"physical_channel_address"==t?(console.log(/.+@.+\.[A-Za-z]+$/.test(n)),/.+@.+\.[A-Za-z]+$/.test(n)?(console.log("/.+@.+.[A-Za-z]+$/.test(inputValue)"),a.setState({physicalEmailMaskError:!1,isDisabledSaveBtn:!0})):(console.log("pfqikj"),a.setState({physicalEmailMaskError:!0,isDisabledSaveBtn:!1})),a.setState({physical_channel_address:n})):"internet_channel_address"==t&&(console.log(/.+@.+\.[A-Za-z]+$/.test(n)),/.+@.+\.[A-Za-z]+$/.test(n)?(console.log("/.+@.+.[A-Za-z]+$/.test(inputValue)"),a.setState({internetEmailMaskError:!1,isDisabledSaveBtn:!0})):(console.log("pfqikj"),a.setState({internetEmailMaskError:!0,isDisabledSaveBtn:!1})),a.setState({internet_channel_address:n}))},a.changeInputTspFtp=function(e){var t=e.currentTarget.getAttribute("name"),n=e.target.value;console.log(t),console.log(n),"physical_channel_address"==t?(console.log(n.indexOf(".")),console.log(-1!=n.indexOf(".")),-1!=n.indexOf(".")?a.setState({physicalEmailMaskError:!1,isDisabledSaveBtn:!0}):(console.log("pfqikj2"),a.setState({physicalEmailMaskError:!0,isDisabledSaveBtn:!1})),a.setState({physical_channel_address:n})):"internet_channel_address"==t&&(console.log(n.indexOf(".")),console.log(-1!=n.indexOf(".")),-1!=n.indexOf(".")?a.setState({internetEmailMaskError:!1,isDisabledSaveBtn:!0}):(console.log("pfqikj2"),a.setState({internetEmailMaskError:!0,isDisabledSaveBtn:!1})),a.setState({internet_channel_address:n}))},a.changeReport_format_id=function(e){var t=e.target.value;console.log(t),a.setState({report_format_id:Number(t)})},a.changeReport_period_type_id=function(e){var t=e.currentTarget.getAttribute("name"),n=e.target.value;console.log(t),console.log(n),a.setState({name_input:Number(n)})},a.changeChannel_type_id=function(e){var t=e.target.value;console.log(t),a.setState({channel_type_id:Number(t)})},a.saveReport=function(){var e=function(e){return console.log("acquiring_type: ",a.state),1==e?{acquiring_type_id:1,report_format_id:0===a.state.physical_report_format_id?1:a.state.physical_report_format_id,report_period_type_ids:a.state.physical_report_period_type_id,channel_type_id:a.state.physical_channel_type_id,file_name_mask:a.state.physical_file_name_mask,channel_address:a.state.physical_channel_address,report_setting_id:a.state.physical_report_settings_id,file_path:a.state.physical_file_name}:2==e?{acquiring_type_id:2,report_format_id:a.state.internet_report_format_id,report_period_type_ids:a.state.internet_report_period_type_id,channel_type_id:a.state.internet_channel_type_id,file_name_mask:a.state.internet_file_name_mask,channel_address:a.state.internet_channel_address,report_setting_id:a.state.internet_report_settings_id,file_path:a.state.internet_file_name}:void 0}.bind(Object(Le.a)(a)),t={brand_id:a.state.currentTsp,main_settings:e(a.state.type_acquiring)};null!=a.state.TSPReportSettingsSTD&&(t.std_settings=a.state.TSPReportSettingsSTD),a.requestTSPReportSettingsSTD_SAVE(a.props.store.userState.token,t)},a.showHtmlReport=function(){return console.log("this.state.physical_file_name_mask"),console.log(a.state.physical_channel_address),Object(D.jsxs)("div",{className:"",children:[Object(D.jsxs)("div",{className:"".concat(1==a.state.type_acquiring?"":"d-none"," border report"),children:[Object(D.jsxs)("div",{className:"title",children:["\u041f\u0435\u0440\u0435\u043b\u0456\u043a \u043f\u043e\u043b\u0456\u0432 \u0437\u0432\u0456\u0442\u0443 \u0422\u0421\u041f \u043f\u043e"," ",1==a.state.type_acquiring?"\u0424\u0456\u0437\u0438\u0447\u043d\u043e\u043c\u0443":"\u0406\u043d\u0442\u0435\u0440\u043d\u0435\u0442"," ","\u0435\u043a\u0432\u0430\u0440\u0438\u043d\u0433\u0443"]}),Object(D.jsx)("button",{className:"btn btn-primary",disabled:a.state.physical_standard_report?"":"disabled",onClick:a.openStandardReport,children:"\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("br",{}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_format",children:"\u0424\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0443"}),a.state.isShowREPORT_FORMAT?Object(D.jsx)("select",{className:"form-select",onChange:a.changeSelect,name:"physical_report_format_id",id:"DICT_REPORT_FORMAT",children:a.state.DICT_REPORT_FORMAT.map((function(e,t){return Object(D.jsx)(Ye,{optionItem:e,report_format_id:a.state.physical_report_format_id},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"report_period",children:"\u041f\u0435\u0440\u0456\u043e\u0434 \u0437\u0432\u0456\u0442\u0443"}),a.state.isShowDICT_REPORT_PERIOD_TYPE?Object(D.jsx)("div",{className:"form-select",onChange:a.changeSelect,name:"physical_report_period_type_id",id:"DICT_REPORT_PERIOD_TYPE",children:a.state.DICT_REPORT_PERIOD_TYPE.map((function(e,t){return Object(D.jsx)(Ve,{optionItem:e,report_period_type_id:a.state.physical_report_period_type_id},t)}))}):Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("br",{}),Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441hannel",children:"\u041a\u0430\u043d\u0430\u043b"}),a.state.isShowDICT_REPORT_CHANNEL_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeSelect,name:"physical_channel_type_id",id:"DICT_REPORT_CHANNEL_TYPE",children:a.state.DICT_REPORT_CHANNEL_TYPE.map((function(e,t){return Object(D.jsx)(Ue,{optionItem:e,channel_type_id:a.state.physical_channel_type_id},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsx)("div",{className:"coverInput",children:1==a.state.physical_channel_type_id?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("input",{placeholder:"ftp",value:a.state.physical_channel_address,onChange:a.changeInputTspFtp,name:"physical_channel_address",className:"".concat(a.state.physicalEmailMaskError?"errorEmail":""," customInput form-control"),type:"text"}),a.state.physicalEmailMaskError?Object(D.jsx)("p",{children:"\u041d\u0435\u0432\u0430\u043b\u0456\u0434\u043d\u0438\u0439 ftp"}):Object(D.jsx)(D.Fragment,{})]}):Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("input",{name:"physical_channel_address",label:"Email",placeholder:"email@email.com",value:a.state.physical_channel_address,onChange:a.changeInputTspEmail,className:"".concat(a.state.physicalEmailMaskError?"errorEmail":""," customInput form-control"),type:"text"}),a.state.physicalEmailMaskError?Object(D.jsx)("p",{children:"\u041d\u0435\u0432\u0430\u043b\u0456\u0434\u043d\u0438\u0439 email"}):Object(D.jsx)(D.Fragment,{})]})}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"catalog",children:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433"}),Object(D.jsx)("input",{onChange:a.changeInputTsp,name:"catalog-physicall",className:"customInput form-control",id:"catalog",type:"text",value:a.state.physical_file_name,disabled:2===a.state.physical_channel_type_id})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_name_mask",children:"\u041c\u0430\u0441\u043a\u0430 \u043d\u0430\u0437\u0432\u0438 \u0444\u0430\u0439\u043b\u0443"}),Object(D.jsx)("input",{onChange:a.changeInputTsp,name:"physical_file_name_mask",className:"customInput form-control",id:"file_name_mask",type:"text",value:a.state.physical_file_name_mask,disabled:2===a.state.physical_channel_type_id})]}),Object(D.jsx)("br",{}),Object(D.jsx)("div",{className:"reportCoverBtn",children:Object(D.jsx)("button",{className:"btn btn-primary",disabled:a.state.isDisabledSaveBtn?"":"disabled",onClick:a.saveReport,children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})})]}),Object(D.jsxs)("div",{className:"".concat(1==a.state.type_acquiring?"d-none":""," border report"),children:[Object(D.jsxs)("div",{className:"title",children:["\u041f\u0435\u0440\u0435\u043b\u0456\u043a \u043f\u043e\u043b\u0456\u0432 \u0437\u0432\u0456\u0442\u0443 \u0422\u0421\u041f \u043f\u043e"," ",1==a.state.type_acquiring?"\u0424\u0456\u0437\u0438\u0447\u043d\u043e\u043c\u0443":"\u0406\u043d\u0442\u0435\u0440\u043d\u0435\u0442"," ","\u0435\u043a\u0432\u0430\u0440\u0438\u043d\u0433\u0443"]}),Object(D.jsx)("button",{className:"btn btn-primary",disabled:a.state.internet_standard_report?"":"disabled",onClick:a.openStandardReport,children:"\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("br",{}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_format",children:"\u0424\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0443"}),a.state.isShowREPORT_FORMAT?Object(D.jsx)("select",{className:"form-select",onChange:a.changeSelect,name:"internet_report_format_id",id:"DICT_REPORT_FORMAT",children:a.state.DICT_REPORT_FORMAT.map((function(e,t){return Object(D.jsx)(Ye,{optionItem:e,report_format_id:a.state.internet_report_format_id},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"report_period",children:"\u041f\u0435\u0440\u0456\u043e\u0434 \u0437\u0432\u0456\u0442\u0443"}),a.state.isShowDICT_REPORT_PERIOD_TYPE?Object(D.jsx)("div",{className:"form-select",onChange:a.changeSelect,name:"internet_report_period_type_id",id:"DICT_REPORT_PERIOD_TYPE",children:a.state.DICT_REPORT_PERIOD_TYPE.map((function(e,t){return Object(D.jsx)(Ve,{optionItem:e,report_period_type_id:a.state.internet_report_period_type_id},t)}))}):Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("br",{}),Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441hannel",children:"\u041a\u0430\u043d\u0430\u043b"}),a.state.isShowDICT_REPORT_CHANNEL_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeSelect,name:"internet_channel_type_id",id:"DICT_REPORT_CHANNEL_TYPE",children:a.state.DICT_REPORT_CHANNEL_TYPE.map((function(e,t){return Object(D.jsx)(Ue,{optionItem:e,channel_type_id:a.state.internet_channel_type_id},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsx)("div",{className:"coverInput",children:1==a.state.internet_channel_type_id?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("input",{placeholder:"ftp",value:a.state.internet_channel_address,onChange:a.changeInputTspFtp,name:"internet_channel_address",className:"".concat(a.state.internetEmailMaskError?"errorEmail":""," customInput form-control"),type:"text"}),a.state.internetEmailMaskError?Object(D.jsx)("p",{children:"\u041d\u0435\u0432\u0430\u043b\u0456\u0434\u043d\u0438\u0439 ftp"}):Object(D.jsx)(D.Fragment,{})]}):Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("input",{name:"internet_channel_address",label:"Email",placeholder:"email@email.com",value:a.state.internet_channel_address,onChange:a.changeInputTspEmail,className:"".concat(a.state.internetEmailMaskError?"errorEmail":""," customInput form-control"),type:"text"}),a.state.internetEmailMaskError?Object(D.jsx)("p",{children:"\u041d\u0435\u0432\u0430\u043b\u0456\u0434\u043d\u0438\u0439 email"}):Object(D.jsx)(D.Fragment,{})]})}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_name_mask",children:"\u041c\u0430\u0441\u043a\u0430 \u043d\u0430\u0437\u0432\u0438 \u0444\u0430\u0439\u043b\u0443"}),Object(D.jsx)("input",{value:a.state.internet_file_name_mask,onChange:a.changeInputTsp,name:"internet_file_name_mask",className:"customInput form-control",id:"file_name_mask",type:"text",disabled:2===a.state.internet_channel_type_id})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441atalog",children:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433"}),Object(D.jsx)("input",{onChange:a.changeInputTsp,apiName:"catalog-internet",className:"customInput form-control",id:"\u0441atalog",type:"text",value:a.state.internet_file_name,disabled:2===a.state.internet_channel_type_id})]}),Object(D.jsx)("br",{}),Object(D.jsx)("div",{className:"reportCoverBtn",children:Object(D.jsx)("button",{className:"btn btn-primary",disabled:a.state.isDisabledSaveBtn?"":"disabled",onClick:a.saveReport,children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})})]})]})},a.closePopupError=function(){a.setState({isShowPopupError:!1})},a.closePopupErrorSave=function(){a.setState({isShowPopupErrorSave:!1})},a.closePopupOrder_numberError=function(){a.setState({isShowOrder_numberError:!1,isShowBootstrapTable:!0})},a.activeOperation=function(e,t){var n;return e.map((function(e,a){e.operation==t&&(console.log(e.name),n=e.name)})),n},a.addTspName=function(e){console.log(e);var t=a.state.TSPReportSettingsSearchObj;t.tsp_id=e,console.log(t),a.setState({TSPReportSettingsSearchObj:t}),console.log(a.state.TSPReportSettingsSearchObj.tsp_name)},a.addIdentCode=function(e){console.log(e);var t=a.state.TSPReportSettingsSearchObj;t.ident_code=e,console.log(t),a.setState({TSPReportSettingsSearchObj:t})},a.requestTSPReportSettingsSTD_SAVE=a.requestTSPReportSettingsSTD_SAVE.bind(Object(Le.a)(a)),a.saveReport=a.saveReport.bind(Object(Le.a)(a)),a.state={DICT_INSTITUTION:null,isShowSelectDICT_INSTITUTION:!1,isDisableButton:!1,selectRow:null,DICT_BRANCH:null,isDisableTVBV:!0,isShowSelectTVBV:!1,TSPReportSettingsSearchObj:{},settings:null,tsp_list:null,isShowTsp:!1,currentTsp:null,isShowTypeAcquiring:!1,isShowReport:!1,DICT_REPORT_FORMAT:null,isShowREPORT_FORMAT:!1,DICT_REPORT_PERIOD_TYPE:null,isShowDICT_REPORT_PERIOD_TYPE:!1,DICT_REPORT_CHANNEL_TYPE:null,isShowDICT_REPORT_CHANNEL_TYPE:!1,isShowTableTSPReportSettingsSTD:!1,TSPReportSettingsSTD:null,errorRU:!1,error_text:"\u0417\u0430\u043f\u043e\u0432\u043d\u0456\u0442\u044c \u043f\u043e\u043b\u0435!",DICT_BRAND_VALUES:[],DICT_BRAND_NAME_VALUES:[],DICT_BRAND_NAME_VAL:null,responseTSPReportSettings:{tsp_list:[{tsp_id:595999,tsp_name:"\u0422\u0437\u041e\u0412 \u0410\u041f\u0422\u0415\u041a\u0410-\u0416\u041e\u0412\u0422\u041d\u0415\u0412\u0415 \u041b\u0422\u0414",bank_branch_name:"\u0412\u043e\u043b\u0438\u043d\u0441\u044c\u043a\u0435 \u041e\u0423 /303398/",ident_code:"30297548",merchant_id:0,creation_date:"2012-05-24T18:55:58"},{tsp_id:595998,tsp_name:"\u0422\u0437\u041e\u0412 \u041d\u043e\u0432\u043e\u0432\u043e\u043b\u0438\u043d\u0441\u044c\u043a\u0438\u0439 \u043c'\u044f\u0441\u043e\u043a\u043e\u043c\u0431\u0456\u043d\u0430",bank_branch_name:"\u0412\u043e\u043b\u0438\u043d\u0441\u044c\u043a\u0435frfr \u041e\u0423 /303398/",ident_code:"30297548",merchant_id:0,creation_date:"2012-05-24T18:55:58"},{tsp_id:595997,tsp_name:"\u0422\u043e\u0432 \u0431\u0435\u0440\u0435\u0437\u043a\u0430 \u043d\u0430",bank_branch_name:"\u0412\u043e\u043b\u0438\u043d\u0441\u044c\u043a\u0435frfr \u041e\u0423 /303398/",ident_code:"30297548",merchant_id:0,creation_date:"2012-05-24T18:55:58"}],settings:[{tsp_id:595999,main_settings:[{acquiring_type_id:1,standard_report:!0,extended_report:!1,installment_report:!1,report_format_id:2,report_format_name:"csv",report_period_type_ids:null,channel_type_id:2,channel_type_name:"email",channel_address:"rere@gmail.com",file_name_mask:"Statement_\u0404\u0414\u0420\u041f\u041e\u0423_\u043f\u0435\u0440\u0456\u043e\u0434",file_path:"",report_setting_id:0},{report_setting_id:0,acquiring_type_id:2,standard_report:!0,extended_report:!1,installment_report:!0,report_format_id:1,report_format_name:"xls",report_period_type_ids:null,channel_type_id:2,channel_type_name:null,channel_address:"re3re@gmail.com",file_name_mask:"Statement_\u0404\u0414\u0420\u041f\u041e\u0423_\u043f\u0435\u0440\u0456\u043e\u0434",file_path:""}]}]},isShowPopupError:!1,isShowPopupErrorSave:!1,currentAcquiring_type_id:null,type_acquiring:1,tsp_id:null,report_format_id:null,report_period_type_id:null,channel_type_id:null,file_name_mask:null,physical_acquiring_type_id:1,physical_channel_address:"",physical_channel_type_id:1,physical_extended_report:!1,physical_file_name_mask:"",physical_installment_report:!1,physical_report_format_id:1,physical_report_period_type_id:1,physical_standard_report:!0,internet_acquiring_type_id:2,internet_channel_address:"",internet_channel_type_id:1,internet_extended_report:!1,internet_file_name_mask:"",internet_installment_report:!1,internet_report_format_id:1,internet_report_period_type_id:1,internet_standard_report:!0,internetEmailMaskError:!1,physicalEmailMaskError:!1,isDisabledSaveBtn:!0,isShowOrder_numberError:!1,isShowBootstrapTable:!0,isShowPopupDone:!1},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.requestDICT_INSTITUTION(this.props.store.userState.token)}},{key:"get_DICT_NET_BRAND",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n){var a,s=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),a="/api/Dictionary/DICT_NET_BRAND?param1=&param2=".concat(n),e.next=4,R.get(a,{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data.Table.TableRows),s.setState({DICT_BRAND_NAME_VALUES:e.data.Table.TableRows.map((function(e){return e.brand_name})),DICT_BRAND_VALUES:e.data.Table.TableRows}),s.props.store.changeLoading(!1)})).catch((function(e){}));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"requestDICT_INSTITUTION",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_INSTITUTION",e.next=5,R.get("/api/Dictionary/DICT_INSTITUTION",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_INSTITUTION:e.data.Table.TableRows,isShowSelectDICT_INSTITUTION:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_BRANCH",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n){var a,s=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),a="/api/Dictionary/DICT_BRANCH/?param1=".concat(n),{param1:n},e.next=6,R.get(a,{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),console.log(e.data.Table),s.setState({DICT_BRANCH:e.data.Table.TableRows,isShowSelectTVBV:!0,isDisableTVBV:!1}),s.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"requestDICT_REPORT_FORMAT",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_REPORT_FORMAT",e.next=5,R.get("/api/Dictionary/DICT_REPORT_FORMAT",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_REPORT_FORMAT:e.data.Table.TableRows,isShowREPORT_FORMAT:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_REPORT_PERIOD_TYPE",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_REPORT_PERIOD_TYPE",e.next=5,R.get("/api/Dictionary/DICT_REPORT_PERIOD_TYPE",{headers:{Token:"".concat(t)}}).then((function(e){n.setState({DICT_REPORT_PERIOD_TYPE:e.data.Table.TableRows,isShowDICT_REPORT_PERIOD_TYPE:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_REPORT_CHANNEL_TYPE",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_REPORT_CHANNEL_TYPE",e.next=5,R.get("/api/Dictionary/DICT_REPORT_CHANNEL_TYPE",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_REPORT_CHANNEL_TYPE:e.data.Table.TableRows,isShowDICT_REPORT_CHANNEL_TYPE:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestTSPReportSettings",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n){var a=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/NetReportSettings",e.next=5,R.post("/api/NetReportSettings",n,{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(e){if(console.log(e.data),e.data.tsp_list=[e.data.brand_settings],e.data.record_count=e.data.tsp_list.length,e.data.record_count>=1){if(null===e.data.brand_settings.main_settings)e.data.tsp_list[0].main_settings=a.state.responseTSPReportSettings.settings[0].main_settings;else if(1===e.data.tsp_list[0].main_settings.length){var t=1===e.data.tsp_list[0].main_settings[0].acquiring_type_id?1:0;e.data.tsp_list[0].main_settings.push(a.state.responseTSPReportSettings.settings[0].main_settings[t])}console.log("response.data.tsp_list[0]: ",e.data.tsp_list[0]),a.setState({tsp_list:e.data.tsp_list,settings:e.data.tsp_list[0].main_settings,isShowTsp:!0})}else a.setState({isShowPopupError:!0});a.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"requestTSPReportSettingsSTD",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n,a=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/NetReportSettings/STD",(n={acquiring_type_id:this.state.type_acquiring}).report_setting_id=1===+this.state.type_acquiring?this.state.physical_report_settings_id:this.state.internet_report_settings_id,e.next=6,R.post("/api/NetReportSettings/STD",n,{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(e){a.setState({TSPReportSettingsSTD:e.data.standard_settings,isShowTableTSPReportSettingsSTD:!0}),a.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response)}));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestTSPReportSettingsSTD_SAVE",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n){var a=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/NetReportSettings",console.log(n),e.next=6,R.put("/api/NetReportSettings",n,{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(e){a.setState({isShowTsp:!1,isShowTypeAcquiring:!1}),a.search(),a.props.store.changeLoading(!1),a.setState({isShowPopupDone:!0})})).catch((function(e){console.log(e.response),a.setState({isShowPopupErrorSave:!0})}));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;console.log(this.state.TSPReportSettingsSTD),console.log(this.state);return Object(D.jsxs)("div",{className:"coverTable REPORT_SETTINGS_TSP",children:[Object(D.jsxs)("div",{className:"headerTable",children:[Object(D.jsx)("div",{className:"titleTable",children:this.activeOperation(this.props.store.userState.OPERATIONS,this.props.store.location.pathname.substr(11))}),Object(D.jsx)("div",{className:"optionBlock"})]}),Object(D.jsx)("div",{className:"filter",children:Object(D.jsxs)("div",{className:"coverInputSelect",children:[Object(D.jsx)("label",{htmlFor:"DICT_INSTITUTION",children:"\u0420\u0423 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430"}),Object(D.jsxs)("select",{onChange:this.selectDICT_INSTITUTION,apiName:"institution_id",id:"dropdown-basic-button",className:"form-select ".concat(this.state.errorRU?"validError":null),title:"\u0420\u0435\u0433\u0456\u043e\u043d\u0430\u043b\u044c\u043d\u0456 \u0443\u043f\u0440\u0430\u0432\u043b\u0456\u043d\u043d\u044f",children:[Object(D.jsx)("option",{children:"-"}),this.state.isShowSelectDICT_INSTITUTION?this.state.DICT_INSTITUTION.map((function(e,t){return Object(D.jsx)(Fe,{optionItem:e},t)})):Object(D.jsx)(D.Fragment,{})]}),Object(D.jsx)("section",{className:this.state.errorRU?"d-block":"d-none ",children:Object(D.jsx)("p",{className:"text-danger",children:this.state.error_text})}),Object(D.jsx)("label",{htmlFor:"tsp_id",children:"\u041d\u0430\u0437\u0432\u0430 \u041c\u0435\u0440\u0435\u0436\u0456"}),Object(D.jsx)(Y.b,{id:"basic-typeahead-single",labelKey:"name",onChange:function(t){e.setState({DICT_BRAND_NAME_VAL:t})},options:this.state.DICT_BRAND_NAME_VALUES,placeholder:"\u041f\u043e\u0447\u043d\u0456\u0442\u044c \u0432\u0432\u043e\u0434\u0438\u0442\u0438 \u043d\u0430\u0437\u0432\u0443",selected:this.state.DICT_BRAND_NAME_VAL,onBlur:function(){e.setState({TSPReportSettingsSearchObj:Object(h.a)(Object(h.a)({},e.state.TSPReportSettingsSearchObj),{},{brand_id:e.state.DICT_BRAND_NAME_VAL?e.state.DICT_BRAND_VALUES.filter((function(t){return t.brand_name===e.state.DICT_BRAND_NAME_VAL[0]}))[0].brand_id:null})})},className:"".concat(this.state.isBrandName_toValidation?"":"validError")}),Object(D.jsx)("button",{className:"search btn btn-primary",onClick:this.search,children:"\u041f\u043e\u0448\u0443\u043a"})]})}),Object(D.jsxs)("div",{className:"coverResult",children:[Object(D.jsx)("div",{className:"resultSearch border",children:this.state.isShowTsp?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("div",{className:"title",children:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442 \u043f\u043e\u0448\u0443\u043a\u0443"}),Object(D.jsx)("ul",{className:"blockTsp_list",children:this.Tsp_list(this.state.tsp_list)})]}):Object(D.jsx)(D.Fragment,{children:"\u041d\u0435 \u0432\u0438\u0431\u0440\u0430\u043d\u043e \u0434\u0430\u043d\u0438\u0445 \u0434\u043b\u044f \u043f\u043e\u0448\u0443\u043a\u0443"})}),Object(D.jsx)("div",{className:"typeAcquiring",children:this.state.isShowTypeAcquiring?Object(D.jsx)(D.Fragment,{children:this.showHtmlReport()}):null})]}),this.state.isShowTableTSPReportSettingsSTD?Object(D.jsx)(D.Fragment,{children:Object(D.jsx)("div",{className:"coverPopupTable",children:Object(D.jsxs)("div",{className:"innerBlock",children:[Object(D.jsx)("button",{onClick:this.seveTSPReportSettingsSTD,type:"button",className:"btn btn-primary btn-save",children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"}),Object(D.jsx)("button",{onClick:this.closePopupTable,type:"button",className:"btn-close","aria-label":"Close"}),this.state.isShowBootstrapTable?Object(D.jsxs)(ce.BootstrapTable,{data:this.state.TSPReportSettingsSTD,children:[Object(D.jsx)(ce.TableHeaderColumn,{isKey:!0,dataField:"field_desc",filter:{type:"TextFilter",delay:1e3},children:"\u0406\u0434\u0435\u043d\u0442\u0438\u0444\u0456\u043a\u0430\u0442\u043e\u0440 \u043f\u043e\u043b\u044f"}),Object(D.jsx)(ce.TableHeaderColumn,{dataField:"include_flag",dataFormat:function(t,n,a){return Object(D.jsx)(D.Fragment,{children:Object(D.jsx)("input",{onChange:function(t){var a=t.currentTarget.getAttribute("name"),s=t.target.checked,i=e.state.TSPReportSettingsSTD;n[a]=s;var r=i.findIndex((function(e){return e.field_name===n.field_name}));i[r]=n,console.log(i),e.setState({TSPReportSettingsSTD:i})},checked:t,name:"include_flag",type:"checkbox"})})},filter:{type:"TextFilter",delay:1e3},children:"\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u0438 \u043f\u043e\u043b\u0435"}),Object(D.jsx)(ce.TableHeaderColumn,{dataField:"order_number",dataFormat:function(t,n,a){return Object(D.jsx)(D.Fragment,{children:Object(D.jsx)("input",{onBlur:function(t){var a=t.currentTarget.getAttribute("name"),s=Number(t.target.value),i=e.state.TSPReportSettingsSTD.map((function(e){return Object.assign({},e)})),r=i.findIndex((function(e){return e.field_name===n.field_name}));n[a]=s,i[r]=n,e.setState({TSPReportSettingsSTD:i})},defaultValue:t,name:"order_number",type:"text"})})},filter:{type:"TextFilter",delay:1e3},children:"\u041f\u043e\u0440\u044f\u0434\u043a\u043e\u0432\u0438\u0439 \u043d\u043e\u043c\u0435\u0440 \u043f\u043e\u043b\u044f"})]}):Object(D.jsx)("div",{className:"coverloader",children:Object(D.jsx)("div",{className:"loader"})})]})})}):Object(D.jsx)(D.Fragment,{}),this.state.isShowPopupError?Object(D.jsx)(D.Fragment,{children:Object(D.jsx)("div",{className:"coverPopupError",children:Object(D.jsxs)("div",{className:"innerBlock",children:[Object(D.jsx)("div",{className:"title alert alert-primary",children:"\u041d\u0435\u043c\u0430\u0454 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443 \u043f\u043e \u0434\u0430\u043d\u043e\u043c\u0443 \u043f\u043e\u0448\u0443\u043a\u0443"}),Object(D.jsx)("div",{className:"msg",children:"\u0421\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0432\u0432\u0435\u0441\u0442\u0438 \u0456\u043d\u0448\u0456 \u0434\u0430\u043d\u0456 \u0434\u043b\u044f \u043f\u043e\u0448\u0443\u043a\u0443"}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:this.closePopupError,children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"})]})})}):null,this.state.isShowPopupDone?Object(D.jsx)(D.Fragment,{children:Object(D.jsx)("div",{className:"coverPopupError",children:Object(D.jsxs)("div",{className:"innerBlock",children:[Object(D.jsx)("div",{className:"title alert alert-success",children:"\u041d\u0430\u043b\u0430\u0448\u0442\u0443\u0432\u0430\u043d\u043d\u044f \u0434\u043b\u044f \u0444\u043e\u0440\u043c\u0443\u0432\u0430\u043d\u043d\u044f \u0432\u0438\u043f\u0438\u0441\u043a\u0438 \u0437\u0434\u0456\u0439\u0441\u043d\u0435\u043d\u0456"}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:function(){return e.setState({isShowPopupDone:!1})},children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"})]})})}):null,this.state.isShowPopupErrorSave?Object(D.jsx)("div",{className:"coverPopupError",children:Object(D.jsxs)("div",{className:"innerBlock",children:[Object(D.jsx)("div",{className:"title alert alert-primary",children:"\u0421\u0442\u0430\u043b\u0430\u0441\u044f \u043f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0437\u0431\u0435\u0440\u0435\u0436\u0435\u043d\u043d\u0456"}),Object(D.jsx)("div",{className:"msg"}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:this.closePopupErrorSave,children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"})]})}):null,this.state.isShowOrder_numberError?Object(D.jsx)(D.Fragment,{children:Object(D.jsx)("div",{className:"coverOrder_numberError",children:Object(D.jsxs)("div",{className:"innerBlock",children:[Object(D.jsx)("div",{className:"title alert alert-primary",children:"\u0422\u0430\u043a\u0438\u0439 \u043f\u043e\u0440\u044f\u0434\u043a\u043e\u0432\u0438\u0439 \u043d\u043e\u043c\u0435\u0440 \u0432\u0436\u0435 \u0432\u0438\u0431\u0440\u0430\u043d\u043e"}),Object(D.jsx)("div",{className:"msg",children:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0456\u043d\u0448\u0438\u0439 \u043f\u043e\u0440\u044f\u0434\u043a\u043e\u0432\u0438\u0439 \u043d\u043e\u043c\u0435\u0440 \u043f\u043e\u043b\u044f"}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:this.closePopupOrder_numberError,children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"})]})})}):null]})}}]),n}(s.a.Component)),We=Ge,Ke=function(e){return Object(D.jsx)("option",{value:e.optionItem.institution_id,children:e.optionItem.institution_name})},Ze=function(e){return Object(D.jsx)("option",{value:e.optionItem.branch_id,children:e.optionItem.branch_name})},ze=function(e){return Object(D.jsx)("option",{value:e.optionItem.report_id,children:e.optionItem.report_name})},$e=function(e){return Object(D.jsx)("option",{value:e.optionItem.acquiring_type_id,children:e.optionItem.acquiring_type_name})},Je=function(e){return Object(D.jsx)("option",{value:e.optionItem.payment_system_id,children:e.optionItem.payment_system_name})},Xe=function(e){return console.log(e),Object(D.jsx)("option",{value:e.optionItem.report_format_id,children:e.optionItem.report_format_name})},et=function(e){return console.log(e),Object(D.jsx)("option",{value:e.optionItem.date_type_id,children:e.optionItem.date_type_name})},tt=function(e){return Object(D.jsx)("option",{selected:e.optionItem.report_format_id==e.report_format_id?"selected":"",value:e.optionItem.report_format_id,children:e.optionItem.report_format_name})},nt=function(e){return Object(D.jsx)("option",{selected:e.optionItem.report_period_type_id==e.report_period_type_id?"selected":"",value:e.optionItem.report_period_type_id,children:e.optionItem.report_period_type_name})},at=function(e){return Object(D.jsx)("option",{selected:e.optionItem.report_channel_type_id==e.channel_type_id?"selected":"",value:e.optionItem.report_channel_type_id,children:e.optionItem.report_channel_type_name})},st=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).selectDICT_INSTITUTION=function(e){console.log(e.target.value);var t=e.target.value;console.log(t);var n=e.currentTarget.getAttribute("apiName");console.log(n);var s=e.target.value;console.log(s);var i=a.state.AcquiringReportsCriteria;i[n]=s,console.log(i),a.setState({isShowSelectTVBV:!1,TSPReportSettingsSearchObj:i}),console.log(a.state),console.log(a.state.AcquiringReportsCriteria),a.requestDICT_BRANCH(a.props.store.userState.token,t)},a.changeInputDateReport=function(e){var t=e.currentTarget.getAttribute("apiName");console.log(t);var n=e.target.value;console.log(n);var s=a.state.AcquiringReportsCriteria;s[t]=a.formatDate(new Date(n)),console.log(s),a.setState({AcquiringReportsCriteria:s}),console.log(a.state),console.log(a.state.AcquiringReportsCriteria)},a.changeInputDateReport_from=function(e){var t=e.currentTarget.getAttribute("apiName");console.log(t);var n=e.target.value;console.log(n);var s=a.state.AcquiringReportsCriteria;s[t]=a.formatDate(new Date(n)),console.log(s),a.setState({AcquiringReportsCriteria:s}),console.log(a.state),console.log(a.state.AcquiringReportsCriteria)},a.changeInputDateReport_to=function(e){var t=e.currentTarget.getAttribute("apiName");console.log(t);var n=e.target.value;console.log(n);var s=a.state.AcquiringReportsCriteria;s[t]=a.formatDate(new Date(n)),console.log(s),a.setState({AcquiringReportsCriteria:s}),console.log(a.state),console.log(a.state.AcquiringReportsCriteria)},a.changeInputBase=function(e){var t=e.currentTarget.getAttribute("apiName");console.log(t);var n=e.target.value;console.log(n);var s=a.state.AcquiringReportsCriteria;s[t]=n,console.log(s),a.setState({AcquiringReportsCriteria:s}),console.log(a.state),console.log(a.state.AcquiringReportsCriteria)},a.changeInput=function(e){var t=e.currentTarget.getAttribute("apiName");console.log(t);var n=e.target.value;console.log(n);var s=a.state.AcquiringReportsCriteria;s[t]="date_type_id"==t||"format_type_id"==t||"mcc_code"==t||"payment_system_id"==t||"terminal_id"==t||"merchant_id"==t||"bank_branch_id"==t||"institution_id"==t?Number(n):n,console.log(s),a.setState({AcquiringReportsCriteria:s}),console.log(a.state),console.log(a.state.AcquiringReportsCriteria)},a.formatDate=function(e){var t=e.getDate(),n=("0"+(e.getMonth()+1)).slice(-2);return e.getFullYear()+n+t},a.search=function(){console.log({institution_id:0,bank_branch_id:0,ident_code:"string",tsp_name:"string",tsp_id:"string",merchant_id:0,date_from:"string",date_to:"string",report_type_id:"string",terminal_type_id:"string",terminal_id:0,payment_system_id:0,mcc_code:0,format_type_id:0,date_type_id:0}),console.log(a.state.AcquiringReportsCriteria),a.requestReports_Acquiring(a.props.store.userState.token,a.state.AcquiringReportsCriteria)},a.Tsp_list=function(e){return console.log(e),e.map((function(e,t){return console.log(e),Object(D.jsx)("li",{className:"dropdownMenuItem",children:Object(D.jsxs)("p",{children:[Object(D.jsx)("input",{name:"tsp_list",id:e.tsp_name,type:"radio",onClick:a.itemTsp,value:e.tsp_id})," ",e.tsp_name]})})}))},a.itemTsp=function(e){var t=e.target.value;console.log(t),console.log(a.state),a.state.settings.map((function(e,n){e.tsp_id==t&&(null==e.main_settings?a.setState({type_acquiring:2,report_format_id:1,report_period_type_id:1,channel_type_id:1,file_name_mask:""}):e.main_settings.length&&(console.log(e.main_settings[0].acquiring_type_id),a.setState({type_acquiring:e.main_settings[0].acquiring_type_id,report_format_id:e.main_settings[0].report_format_id,report_period_type_id:e.main_settings[0].report_period_type_id,channel_type_id:e.main_settings[0].channel_type_id,file_name_mask:e.main_settings[0].file_name_mask})))})),a.setState({currentTsp:Number(t),TSPReportSettingsSTD:null,isShowTypeAcquiring:!0}),a.requestDICT_REPORT_FORMAT(a.props.store.userState.token),a.requestDICT_REPORT_PERIOD_TYPE(a.props.store.userState.token),a.requestDICT_REPORT_CHANNEL_TYPE(a.props.store.userState.token)},a.changeTypeAcquiring=function(e){var t=e.currentTarget.getAttribute("type_acquiring");console.log(t),a.state.settings.map((function(e,n){console.log(a.state.currentTsp),console.log(e.tsp_id),e.tsp_id==a.state.currentTsp&&e.main_settings.length>1&&(console.log(e.main_settings.length>1),e.main_settings.map((function(e,n){e.acquiring_type_id==t&&(console.log(e.acquiring_type_id==t),a.setState({type_acquiring:Number(t),report_format_id:e.report_format_id,report_period_type_id:e.report_period_type_id,channel_type_id:e.channel_type_id,file_name_mask:e.file_name_mask}))})))}))},a.openStandardReport=function(){a.requestTSPReportSettingsSTD(a.props.store.userState.token)},a.closePopupTable=function(){a.setState({isShowTableTSPReportSettingsSTD:!1})},a.changeReport_format_id=function(e){var t=e.target.value;console.log(t),a.setState({report_format_id:Number(t)})},a.changeReport_period_type_id=function(e){var t=e.target.value;console.log(t),a.setState({report_period_type_id:Number(t)})},a.changeChannel_type_id=function(e){var t=e.target.value;console.log(t),a.setState({channel_type_id:Number(t)})},a.changeFile_name_mask=function(e){var t=e.target.value;console.log(t),a.setState({file_name_mask:t})},a.saveReport=function(){var e={acquiring_type_id:a.state.type_acquiring,tsp_list:[{tsp_id:a.state.currentTsp}],main_settings:{acquiring_type_id:a.state.type_acquiring,report_format_id:a.state.report_format_id,report_period_type_id:a.state.report_period_type_id,channel_type_id:a.state.channel_type_id,file_name_mask:a.state.file_name_mask}};null!=a.state.TSPReportSettingsSTD&&(e.std_settings=a.state.TSPReportSettingsSTD),a.requestTSPReportSettingsSTD_SAVE(a.props.store.userState.token)},a.showReport=function(e){return console.log(e),a.state.settings.map((function(t,n){if(console.log(t),console.log(t.tsp_id),console.log(t.tsp_id==e),t.tsp_id==e){if(console.log(t.main_settings),null==t.main_settings){return console.log(1),console.log(1),console.log(1),console.log(""),Object(D.jsxs)("div",{className:"report border",children:[Object(D.jsx)("div",{className:"title",children:"\u041f\u0435\u0440\u0435\u043b\u0456\u043a \u043f\u043e\u043b\u0456\u0432 \u0437\u0432\u0456\u0442\u0443 \u0422\u0421\u041f"}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:a.openStandardReport,children:"\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:!0,children:"\u0420\u043e\u0437\u0448\u0438\u0440\u0435\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:!0,children:"\u0417\u0432\u0456\u0442 \u043f\u043e \u043e\u043f\u0435\u0440\u0430\u0446\u0456\u044f\u043c Installment"}),Object(D.jsx)("br",{}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_format",children:"\u0424\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0443"}),a.state.isShowREPORT_FORMAT?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_format_id,name:"DICT_REPORT_FORMAT",id:"DICT_REPORT_FORMAT",children:a.state.DICT_REPORT_FORMAT.map((function(e,t){return Object(D.jsx)(tt,{optionItem:e,report_format_id:1},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"report_period",children:"\u041f\u0435\u0440\u0456\u043e\u0434 \u0437\u0432\u0456\u0442\u0443"}),a.state.isShowDICT_REPORT_PERIOD_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_period_type_id,name:"DICT_REPORT_PERIOD_TYPE",id:"DICT_REPORT_PERIOD_TYPE",children:a.state.DICT_REPORT_PERIOD_TYPE.map((function(e,t){return Object(D.jsx)(nt,{optionItem:e,report_period_type_id:1},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_name_mask",children:"\u041c\u0430\u0441\u043a\u0430 \u043d\u0430\u0437\u0432\u0438 \u0444\u0430\u0439\u043b\u0443"}),Object(D.jsx)("input",{defaultValue:"",onChange:a.changeFile_name_mask,apiName:"file_name_mask",className:"customInput form-control",id:"file_name_mask",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441atalog",children:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433"}),Object(D.jsx)("input",{disabled:!0,onChange:a.changeInput,apiName:"\u0441atalog",className:"customInput form-control",id:"\u0441atalog",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441hannel",children:"\u041a\u0430\u043d\u0430\u043b"}),a.state.isShowDICT_REPORT_CHANNEL_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeChannel_type_id,name:"DICT_REPORT_CHANNEL_TYPE",id:"DICT_REPORT_CHANNEL_TYPE",children:a.state.DICT_REPORT_CHANNEL_TYPE.map((function(e,t){return Object(D.jsx)(at,{optionItem:e,channel_type_id:1},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsx)("div",{className:"reportCoverBtn",children:Object(D.jsx)("button",{className:"btn btn-secondary",onClick:a.saveReport,children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})})]})}if(1==t.main_settings.length)return t.main_settings.map((function(e,t){var n=e.report_period_type_id,s=e.report_format_id,i=e.channel_type_id,r=e.file_name_mask;return console.log(n),console.log(s),console.log(i),console.log(r),Object(D.jsxs)("div",{className:" border report",children:[Object(D.jsxs)("div",{className:"coverBtn border",children:[Object(D.jsx)("div",{className:"title",children:"\u0412\u0438\u0434 \u0435\u043a\u0432\u0430\u0440\u0438\u043d\u0433\u0443"}),Object(D.jsx)("button",{className:"btn btn-secondary",children:1==a.state.type_acquiring?"\u0424\u0456\u0437\u0438\u0447\u043d\u0438\u0439":"\u0406\u043d\u0442\u0435\u0440\u043d\u0435\u0442"})]}),Object(D.jsxs)("div",{className:"report border",children:[Object(D.jsx)("div",{className:"title",children:"\u041f\u0435\u0440\u0435\u043b\u0456\u043a \u043f\u043e\u043b\u0456\u0432 \u0437\u0432\u0456\u0442\u0443 \u0422\u0421\u041f"}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:a.openStandardReport,children:"\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:!0,children:"\u0420\u043e\u0437\u0448\u0438\u0440\u0435\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:!0,children:"\u0417\u0432\u0456\u0442 \u043f\u043e \u043e\u043f\u0435\u0440\u0430\u0446\u0456\u044f\u043c Installment"}),Object(D.jsx)("br",{}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_format",children:"\u0424\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0443"}),a.state.isShowREPORT_FORMAT?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_format_id,name:"DICT_REPORT_FORMAT",id:"DICT_REPORT_FORMAT",children:a.state.DICT_REPORT_FORMAT.map((function(e,t){return Object(D.jsx)(tt,{optionItem:e,report_format_id:s},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"report_period",children:"\u041f\u0435\u0440\u0456\u043e\u0434 \u0437\u0432\u0456\u0442\u0443"}),a.state.isShowDICT_REPORT_PERIOD_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_period_type_id,name:"DICT_REPORT_PERIOD_TYPE",id:"DICT_REPORT_PERIOD_TYPE",children:a.state.DICT_REPORT_PERIOD_TYPE.map((function(e,t){return Object(D.jsx)(nt,{optionItem:e,report_period_type_id:n},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_name_mask",children:"\u041c\u0430\u0441\u043a\u0430 \u043d\u0430\u0437\u0432\u0438 \u0444\u0430\u0439\u043b\u0443"}),Object(D.jsx)("input",{defaultValue:r,onChange:a.changeFile_name_mask,apiName:"file_name_mask",className:"customInput form-control",id:"file_name_mask",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441atalog",children:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433"}),Object(D.jsx)("input",{disabled:!0,onChange:a.changeInput,apiName:"\u0441atalog",className:"customInput form-control",id:"\u0441atalog",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441hannel",children:"\u041a\u0430\u043d\u0430\u043b"}),a.state.isShowDICT_REPORT_CHANNEL_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeChannel_type_id,name:"DICT_REPORT_CHANNEL_TYPE",id:"DICT_REPORT_CHANNEL_TYPE",children:a.state.DICT_REPORT_CHANNEL_TYPE.map((function(e,t){return Object(D.jsx)(at,{optionItem:e,channel_type_id:i},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsx)("div",{className:"reportCoverBtn",children:Object(D.jsx)("button",{className:"btn btn-secondary",onClick:a.saveReport,children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})})]})]})}));if(2==t.main_settings.length)return Object(D.jsxs)("div",{className:"",children:[Object(D.jsxs)("div",{className:"coverBtn border",children:[Object(D.jsx)("div",{className:"title",children:"\u0412\u0438\u0434 \u0435\u043a\u0432\u0430\u0440\u0438\u043d\u0433\u0443"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:1==a.state.type_acquiring?"disabled":"",onClick:a.changeTypeAcquiring,type_acquiring:1,children:"\u0424\u0456\u0437\u0438\u0447\u043d\u0438\u0439"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:2==a.state.type_acquiring?"disabled":"",onClick:a.changeTypeAcquiring,type_acquiring:2,children:"\u0406\u043d\u0442\u0435\u0440\u043d\u0435\u0442"})]}),t.main_settings.map((function(e,t){var n=e.report_period_type_id,s=e.report_format_id,i=e.channel_type_id,r=e.file_name_mask,o=e.acquiring_type_id,c=e.standard_report,l=e.extended_report,d=e.installment_report;return console.log(o),console.log(n),console.log(s),console.log(i),console.log(r),console.log(a.state.type_acquiring),Object(D.jsxs)("div",{className:"".concat(a.state.type_acquiring==o?"":"d-none"," border report"),children:[Object(D.jsx)("div",{className:"title",children:"\u041f\u0435\u0440\u0435\u043b\u0456\u043a \u043f\u043e\u043b\u0456\u0432 \u0437\u0432\u0456\u0442\u0443 \u0422\u0421\u041f"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:c?"":"disabled",onClick:a.openStandardReport,children:"\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:l?"":"disabled",children:"\u0420\u043e\u0437\u0448\u0438\u0440\u0435\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:d?"":"disabled",children:"\u0417\u0432\u0456\u0442 \u043f\u043e \u043e\u043f\u0435\u0440\u0430\u0446\u0456\u044f\u043c Installment"}),Object(D.jsx)("br",{}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_format",children:"\u0424\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0443"}),a.state.isShowREPORT_FORMAT?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_format_id,name:"DICT_REPORT_FORMAT",id:"DICT_REPORT_FORMAT",children:a.state.DICT_REPORT_FORMAT.map((function(e,t){return Object(D.jsx)(tt,{optionItem:e,report_format_id:s},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"report_period",children:"\u041f\u0435\u0440\u0456\u043e\u0434 \u0437\u0432\u0456\u0442\u0443"}),a.state.isShowDICT_REPORT_PERIOD_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_period_type_id,name:"DICT_REPORT_PERIOD_TYPE",id:"DICT_REPORT_PERIOD_TYPE",children:a.state.DICT_REPORT_PERIOD_TYPE.map((function(e,t){return Object(D.jsx)(nt,{optionItem:e,report_period_type_id:n},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_name_mask",children:"\u041c\u0430\u0441\u043a\u0430 \u043d\u0430\u0437\u0432\u0438 \u0444\u0430\u0439\u043b\u0443"}),Object(D.jsx)("input",{defaultValue:r,onChange:a.changeFile_name_mask,apiName:"file_name_mask",className:"customInput form-control",id:"file_name_mask",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441atalog",children:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433"}),Object(D.jsx)("input",{disabled:!0,onChange:a.changeInput,apiName:"\u0441atalog",className:"customInput form-control",id:"\u0441atalog",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441hannel",children:"\u041a\u0430\u043d\u0430\u043b"}),a.state.isShowDICT_REPORT_CHANNEL_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeChannel_type_id,name:"DICT_REPORT_CHANNEL_TYPE",id:"DICT_REPORT_CHANNEL_TYPE",children:a.state.DICT_REPORT_CHANNEL_TYPE.map((function(e,t){return Object(D.jsx)(at,{optionItem:e,channel_type_id:i},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsx)("br",{}),Object(D.jsx)("div",{className:"reportCoverBtn",children:Object(D.jsx)("button",{className:"btn btn-secondary",onClick:a.saveReport,children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})})]})}))]})}}))},a.closePopupError=function(){a.setState({isShowPopupError:!1})},a.closePopupErrorSave=function(){a.setState({isShowPopupErrorSave:!1})},a.activeOperation=function(e,t){var n;return e.map((function(e,a){e.operation==t&&(console.log(e.name),n=e.name)})),n},a.state={DICT_INSTITUTION:null,isShowSelectDICT_INSTITUTION:!1,DICT_BRANCH:null,isDisableTVBV:!0,isShowSelectTVBV:!1,DICT_ACQUIRING_REPORTS:null,isShowSelectDICT_ACQUIRING_REPORTS:!1,DICT_ACQUIRING_TYPE:null,isShowSelectDICT_ACQUIRING_TYPE:!1,DICT_PAYMENT_SYSTEM:null,isShowSelectDICT_PAYMENT_SYSTEM:!1,DICT_REPORT_FORMAT:null,isShowSelectDICT_REPORT_FORMAT:!1,DICT_DATE_TYPE:null,isShowSelectDICT_DATE_TYPE:!1,AcquiringReportsCriteria:{}},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.requestDICT_INSTITUTION(this.props.store.userState.token),this.requestDICT_ACQUIRING_REPORTS(this.props.store.userState.token),this.requestDICT_ACQUIRING_TYPE(this.props.store.userState.token),this.requestDICT_PAYMENT_SYSTEM(this.props.store.userState.token),this.requestDICT_REPORT_FORMAT(this.props.store.userState.token),this.requestDICT_DATE_TYPE(this.props.store.userState.token)}},{key:"requestDICT_INSTITUTION",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_INSTITUTION",e.next=5,R.get("/api/Dictionary/DICT_INSTITUTION",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_INSTITUTION:e.data.Table.TableRows,isShowSelectDICT_INSTITUTION:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_BRANCH",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n){var a,s=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),a="/api/Dictionary/DICT_BRANCH/?param1=".concat(n),{param1:n},e.next=6,R.get(a,{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),s.setState({DICT_BRANCH:e.data.Table.TableRows,isShowSelectTVBV:!0,isDisableTVBV:!1}),s.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"requestDICT_REPORT_FORMAT",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_REPORT_FORMAT",e.next=5,R.get("/api/Dictionary/DICT_REPORT_FORMAT",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_REPORT_FORMAT:e.data.Table.TableRows,isShowSelectDICT_REPORT_FORMAT:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_REPORT_PERIOD_TYPE",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_REPORT_PERIOD_TYPE",e.next=5,R.get("/api/Dictionary/DICT_REPORT_PERIOD_TYPE",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_REPORT_PERIOD_TYPE:e.data.Table.TableRows,isShowDICT_REPORT_PERIOD_TYPE:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_ACQUIRING_REPORTS",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_ACQUIRING_REPORTS",e.next=5,R.get("/api/Dictionary/DICT_ACQUIRING_REPORTS",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_ACQUIRING_REPORTS:e.data.Table.TableRows,isShowSelectDICT_ACQUIRING_REPORTS:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_ACQUIRING_TYPE",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_ACQUIRING_TYPE",e.next=5,R.get("/api/Dictionary/DICT_ACQUIRING_TYPE",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_ACQUIRING_TYPE:e.data.Table.TableRows,isShowSelectDICT_ACQUIRING_TYPE:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_PAYMENT_SYSTEM",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_PAYMENT_SYSTEM",e.next=5,R.get("/api/Dictionary/DICT_PAYMENT_SYSTEM",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_PAYMENT_SYSTEM:e.data.Table.TableRows,isShowSelectDICT_PAYMENT_SYSTEM:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_DATE_TYPE",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_DATE_TYPE",e.next=5,R.get("/api/Dictionary/DICT_DATE_TYPE",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_DATE_TYPE:e.data.Table.TableRows,isShowSelectDICT_DATE_TYPE:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestReports_Acquiring",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n){var a=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Reports/Acquiring",e.next=5,R.post("/api/Reports/Acquiring",n,{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(e){console.log(e.data),a.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){return console.log(this.state.TSPReportSettingsSTD),console.log(this.state),Object(D.jsxs)("div",{className:"coverTable REPORT_aquiring",children:[Object(D.jsxs)("div",{className:"headerTable",children:[Object(D.jsx)("div",{className:"titleTable",children:this.activeOperation(this.props.store.userState.OPERATIONS,this.props.store.location.pathname.substr(11))}),Object(D.jsx)("div",{className:"optionBlock"})]}),Object(D.jsxs)("div",{className:"filter",children:[Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"DICT_INSTITUTION",children:"\u0420\u0435\u0433\u0456\u043e\u043d\u0430\u043b\u044c\u043d\u0456 \u0443\u043f\u0440\u0430\u0432\u043b\u0456\u043d\u043d\u044f"}),Object(D.jsxs)("select",{onChange:this.selectDICT_INSTITUTION,apiName:"institution_id",id:"dropdown-basic-button",className:"form-select",title:"\u0420\u0435\u0433\u0456\u043e\u043d\u0430\u043b\u044c\u043d\u0456 \u0443\u043f\u0440\u0430\u0432\u043b\u0456\u043d\u043d\u044f",children:[Object(D.jsx)("option",{children:"-"}),this.state.isShowSelectDICT_INSTITUTION?this.state.DICT_INSTITUTION.map((function(e,t){return Object(D.jsx)(Ke,{optionItem:e},t)})):Object(D.jsx)(D.Fragment,{})]}),Object(D.jsx)("label",{htmlFor:"TVBV",children:"\u0422\u0412\u0411\u0412"}),Object(D.jsxs)("select",{id:"dropdown-basic-button",onChange:this.changeInput,apiName:"bank_branch_id",className:"form-select",disabled:this.state.isDisableTVBV?"disabled":"",title:"\u0422\u0412\u0411\u0412",children:[Object(D.jsx)("option",{children:"-"}),this.state.isShowSelectTVBV?this.state.DICT_BRANCH.map((function(e,t){return Object(D.jsx)(Ze,{optionItem:e},t)})):Object(D.jsx)(D.Fragment,{})]}),Object(D.jsx)("label",{htmlFor:"tsp_name",children:"\u041d\u0430\u0437\u0432\u0430 \u0422\u0421\u041f"}),Object(D.jsx)("input",{onChange:this.changeInput,apiName:"tsp_name",id:"tsp_name",type:"text"}),Object(D.jsx)("label",{htmlFor:"INN",children:"\u0406\u041d\u041d/\u0404\u0414\u0420\u041f\u041e\u0423"}),Object(D.jsx)("input",{onChange:this.changeInput,apiName:"ident_code",id:"INN",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"report_type_id",children:"\u041d\u0430\u0437\u0432\u0430 \u0437\u0432\u0456\u0442\u0443"}),Object(D.jsxs)("select",{onChange:this.changeInput,apiName:"report_type_id",id:"report_type_id",className:"form-select",title:"",children:[Object(D.jsx)("option",{children:"-"}),this.state.isShowSelectDICT_ACQUIRING_REPORTS?this.state.DICT_ACQUIRING_REPORTS.map((function(e,t){return Object(D.jsx)(ze,{optionItem:e},t)})):Object(D.jsx)(D.Fragment,{})]}),Object(D.jsx)("label",{htmlFor:"terminal_type_id",children:"\u0412\u0438\u0434 \u0442\u0435\u0440\u043c\u0456\u043d\u0430\u043b\u0430"}),Object(D.jsxs)("select",{onChange:this.changeInput,apiName:"terminal_type_id",id:"terminal_type_id",className:"form-select",title:"\u0420\u0435\u0433\u0456\u043e\u043d\u0430\u043b\u044c\u043d\u0456 \u0443\u043f\u0440\u0430\u0432\u043b\u0456\u043d\u043d\u044f",children:[Object(D.jsx)("option",{children:"-"}),this.state.isShowSelectDICT_ACQUIRING_TYPE?this.state.DICT_ACQUIRING_TYPE.map((function(e,t){return Object(D.jsx)($e,{optionItem:e},t)})):Object(D.jsx)(D.Fragment,{})]}),Object(D.jsx)("label",{htmlFor:"merchant",children:"merchant ID"}),Object(D.jsx)("input",{onChange:this.changeInput,apiName:"merchant_id",id:"merchant",type:"text"}),Object(D.jsx)("label",{htmlFor:"terminal_id",children:"Terminal ID"}),Object(D.jsx)("input",{onChange:this.changeInput,apiName:"terminal_id",id:"terminal_id",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"base",children:"\u0411\u0430\u0437\u043e\u0432\u0456 \u043f\u043e\u043b\u044f"}),Object(D.jsx)("input",{apiName:"base",id:"base",type:"checkbox"}),Object(D.jsx)("label",{htmlFor:"DICT_PAYMENT_SYSTEM",children:"\u041a\u0430\u0440\u0442\u0438"}),Object(D.jsxs)("select",{onChange:this.changeInput,apiName:"payment_system_id",id:"dropdown-basic-button",className:"form-select",title:"\u041a\u0430\u0440\u0442\u0438",children:[Object(D.jsx)("option",{children:"-"}),this.state.isShowSelectDICT_PAYMENT_SYSTEM?this.state.DICT_PAYMENT_SYSTEM.map((function(e,t){return Object(D.jsx)(Je,{optionItem:e},t)})):Object(D.jsx)(D.Fragment,{})]}),Object(D.jsx)("label",{htmlFor:"mcc_code",children:"MCC"}),Object(D.jsx)("input",{onChange:this.changeInput,apiName:"mcc_code",id:"mcc_code",type:"text"}),Object(D.jsx)("label",{htmlFor:"format_type_id",children:"\u0424\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0443"}),Object(D.jsxs)("select",{onChange:this.changeInput,apiName:"format_type_id",id:"format_type_id",className:"form-select",title:"DICT_REPORT_FORMAT",children:[Object(D.jsx)("option",{children:"-"}),this.state.isShowSelectDICT_REPORT_FORMAT?this.state.DICT_REPORT_FORMAT.map((function(e,t){return console.log(e),Object(D.jsx)(Xe,{optionItem:e},t)})):Object(D.jsx)(D.Fragment,{})]})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("div",{className:"coverInput",children:Object(D.jsxs)("div",{className:"coverDate",children:[Object(D.jsx)("label",{htmlFor:"date_type_id",children:"\u0414\u0430\u0442\u0430 \u0437\u0432\u0456\u0442\u0443"}),Object(D.jsxs)("select",{onChange:this.changeInput,apiName:"date_type_id",id:"date_type_id",className:"form-select",title:"DICT_DATE_TYPE",children:[Object(D.jsx)("option",{children:"-"}),this.state.isShowSelectDICT_DATE_TYPE?this.state.DICT_DATE_TYPE.map((function(e,t){return console.log(e),Object(D.jsx)(et,{optionItem:e},t)})):Object(D.jsx)(D.Fragment,{})]})]})}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("span",{children:"\u041f\u0435\u0440\u0456\u043e\u0434 \u0437\u0432\u0456\u0442\u0443"}),Object(D.jsxs)("div",{className:"coverInputs",children:[Object(D.jsxs)("div",{className:"coverDate",children:[Object(D.jsx)("label",{htmlFor:"date_report_from",children:"\u0417"}),Object(D.jsx)("input",{onChange:this.changeInputDateReport_from,apiName:"date_from",className:"customInput",id:"date_from",type:"date"})]}),Object(D.jsxs)("div",{className:"coverDate",children:[Object(D.jsx)("label",{htmlFor:"date_report_to",children:"\u041f\u043e"}),Object(D.jsx)("input",{onChange:this.changeInputDateReport_to,apiName:"date_to",className:"customInput",id:"date_to",type:"date"})]})]})]})]})]}),Object(D.jsx)("div",{className:"btnBlock",children:Object(D.jsx)("button",{className:"search",onClick:this.search,children:"\u041f\u043e\u0431\u0443\u0434\u0443\u0432\u0430\u0442\u0438 \u0437\u0432\u0456\u0442"})}),this.state.isShowPopupError?Object(D.jsx)(D.Fragment,{children:Object(D.jsx)("div",{className:"coverPopupError",children:Object(D.jsxs)("div",{className:"innerBlock",children:[Object(D.jsx)("div",{className:"title alert alert-primary",children:"\u041d\u0435\u043c\u0430\u0454 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443 \u043f\u043e \u0434\u0430\u043d\u043e\u043c\u0443 \u043f\u043e\u0448\u0443\u043a\u0443"}),Object(D.jsx)("div",{className:"msg",children:"\u0421\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0432\u0432\u0435\u0441\u0442\u0438 \u0456\u043d\u0448\u0456 \u0434\u0430\u043d\u0456 \u0434\u043b\u044f \u043f\u043e\u0448\u0443\u043a\u0443"}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:this.closePopupError,children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"})]})})}):Object(D.jsx)(D.Fragment,{}),this.state.isShowPopupErrorSave?Object(D.jsx)(D.Fragment,{children:Object(D.jsx)("div",{className:"coverPopupError",children:Object(D.jsxs)("div",{className:"innerBlock",children:[Object(D.jsx)("div",{className:"title alert alert-primary",children:"\u0423\u043f\u04411 \u0421\u0442\u0430\u043b\u0430\u0441\u044f \u043f\u043e\u043c\u0438\u043b\u043a\u0430"}),Object(D.jsx)("div",{className:"msg",children:":("}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:this.closePopupErrorSave,children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"})]})})}):Object(D.jsx)(D.Fragment,{})]})}}]),n}(s.a.Component),it=n(287),rt=n.n(it),ot=(n(426),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).selectDates=function(){var e=Object(C.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.target.value){e.next=3;break}return a.setState({ReportsMonitor:[]}),e.abrupt("return");case 3:return a.props.store.changeLoading(!0),n="/api/Reports/ReportsMonitorByDate?reportGroup=REPORT_GROUP_ACQUIRING&date=".concat(t.target.value),e.next=7,R.get(n,{headers:{Token:"".concat(a.props.store.userState.token)}}).then((function(e){a.setState({ReportsMonitor:e.data.reports,isShowReportsDates:!0,selectDate:t}),a.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),a.props.store.changeLoading(!1)}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.formatDateFile=function(e){var t=e.getDate(),n=("0"+(e.getMonth()+1)).slice(-2),a=e.getFullYear(),s=e.getHours(),i=e.getMinutes();return"Report.".concat(t,".").concat(n,".").concat(a,".").concat(s,"-").concat(i,".xlsx")},a.activeOperation=function(e,t){var n;return e.map((function(e,a){e.operation==t&&(console.log(e.name),n=e.name)})),n},a.state={ReportsMonitor:null,isShowReportsMonitor:!1,ReportsDates:null,isShowReportsDates:!1,selectDate:null},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.requestReportsMonitor(this.props.store.userState.token),this.requestReportsDates(this.props.store.userState.token),this.timer=setInterval((function(){"/dashboard/REPORTS_ACQUIRING_MONITOR"===window.location.pathname&&(console.log(window.location.pathname+" test"),e.state.selectDate?e.selectDates(e.state.selectDate):e.requestReportsMonitor(e.props.store.userState.token))}),8e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"requestReportsMonitor",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Reports/ReportsMonitor?reportGroup=REPORT_GROUP_ACQUIRING",e.next=5,R.get("/api/Reports/ReportsMonitor?reportGroup=REPORT_GROUP_ACQUIRING",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({ReportsMonitor:e.data.reports,isShowReportsMonitor:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestReportsDates",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Reports/ReportsMonitorDates?reportGroup=REPORT_GROUP_ACQUIRING",e.next=4,R.get("/api/Reports/ReportsMonitorDates?reportGroup=REPORT_GROUP_ACQUIRING",{headers:{Token:"".concat(t)}}).then((function(e){console.log("dates:",e.data),n.setState({ReportsDates:e.data.ReportDates,isShowReportsDates:!0})})).catch((function(e){console.log(e.response)}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestReports_GetReport",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n){var a,s=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),a="/api/Reports/GetReport?reportId=".concat(n),e.next=5,R.get(a,{responseType:"blob",headers:{Token:"".concat(t),"Access-Control-Expose-Headers":"Content-Disposition"}}).then((function(e){var t=decodeURI(e.headers["content-disposition"].split("filename*=UTF-8''")[1]);rt()(e.data,t),s.props.store.changeLoading(!1)})).catch((function(e){console.log(e),console.log(e.response)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;console.log(this.props.store),console.log(this.state);return Object(D.jsxs)("div",{className:"coverTable REPORTS_ACQUIRING_MONITOR",children:[Object(D.jsx)("div",{className:"headerTable",children:Object(D.jsx)("div",{className:"titleTable",children:"\u0410\u0440\u0445\u0456\u0432"})}),Object(D.jsx)("div",{className:"innerTable",children:Object(D.jsxs)("div",{className:"col-2",children:[Object(D.jsx)("label",{children:" \u0412\u0438\u0431\u0435\u0440\u0456\u0442\u044c \u0434\u0430\u0442\u0443: "}),Object(D.jsxs)("select",{onChange:this.selectDates,apiName:"institution_id",id:"dropdown-basic-button",className:"form-select",children:[Object(D.jsx)("option",{}),this.state.isShowReportsDates?this.state.ReportsDates.map((function(e,t){return Object(D.jsx)("option",{value:e.date_submitted_char,children:e.date_submitted},t)})):null]})]})}),Object(D.jsxs)("div",{className:"headerTable",children:[Object(D.jsx)("div",{className:"titleTable",children:this.activeOperation(this.props.store.userState.OPERATIONS,this.props.store.location.pathname.substr(11))}),Object(D.jsx)("div",{className:"optionBlock"})]}),this.state.isShowReportsMonitor?Object(D.jsx)(D.Fragment,{children:Object(D.jsx)("div",{className:"innerTable",children:Object(D.jsx)("div",{className:"Table",children:Object(D.jsxs)(ce.BootstrapTable,{data:this.state.ReportsMonitor,children:[Object(D.jsx)(ce.TableHeaderColumn,{isKey:!0,dataField:"report_name",width:"400",tdStyle:{whiteSpace:"normal",wordWrap:"break-word"},filter:{type:"TextFilter",delay:1e3},children:"\u041d\u0430\u0437\u0432\u0430 \u0437\u0432\u0456\u0442\u0443"}),Object(D.jsx)(ce.TableHeaderColumn,{dataField:"date_submitted",filter:{type:"TextFilter",delay:1e3},children:"\u0414\u0430\u0442\u0430 \u0437\u0430\u043f\u0438\u0442\u0443"}),Object(D.jsx)(ce.TableHeaderColumn,{dataField:"date_updated",filter:{type:"TextFilter",delay:1e3},children:"\u0414\u0430\u0442\u0430 \u043e\u043d\u043e\u0432\u043b\u0435\u043d\u043d\u044f"}),Object(D.jsx)(ce.TableHeaderColumn,{dataField:"status",filter:{type:"TextFilter",delay:1e3},children:"\u0421\u0442\u0430\u0442\u0443\u0441"}),Object(D.jsx)(ce.TableHeaderColumn,{dataField:"user",filter:{type:"TextFilter",delay:1e3},children:"\u041a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447"}),Object(D.jsx)(ce.TableHeaderColumn,{dataField:"report_id",width:"100",dataFormat:function(t,n,a){return Object(D.jsx)(D.Fragment,{children:Object(D.jsx)("button",{onClick:function(a){console.log(t),console.log(n),e.requestReports_GetReport(e.props.store.userState.token,t)},disabled:function(t){for(var n=0;n<e.state.ReportsMonitor.length;n++)if(e.state.ReportsMonitor[n].report_id==t&&"C"==e.state.ReportsMonitor[n].status_code)return!0}(t)?"":"disabled",className:"btn btn-primary",type:"button",children:"\u0421\u043a\u0430\u0447\u0430\u0442\u0438"})})}})]})})})}):null]})}}]),n}(s.a.Component)),ct=function(e){return Object(D.jsx)("option",{value:e.optionItem.institution_id,children:e.optionItem.institution_name})},lt=function(e){return Object(D.jsx)("option",{value:e.optionItem.date_type_id,children:e.optionItem.date_type_name})},dt=function(e){return Object(D.jsx)("option",{selected:e.optionItem.report_format_id==e.report_format_id?"selected":"",value:e.optionItem.report_format_id,children:e.optionItem.report_format_name})},ut=function(e){return Object(D.jsx)("option",{selected:e.optionItem.report_period_type_id==e.report_period_type_id?"selected":"",value:e.optionItem.report_period_type_id,children:e.optionItem.report_period_type_name})},pt=function(e){return Object(D.jsx)("option",{selected:e.optionItem.report_channel_type_id==e.channel_type_id?"selected":"",value:e.optionItem.report_channel_type_id,children:e.optionItem.report_channel_type_name})},_t=function(e){return Object(D.jsx)("div",{className:"blockSelectItem",value:e.item.mcc_code,onClick:function(t){return e.onClickBlockSelectItem(t)},children:e.item.mcc_name})},ht=function(e){return Object(D.jsx)("div",{className:"blockSelectItem",value:e.item.merchant_id,name:e.item.merchant_id,onClick:function(t){return e.onClickBlockSelectItem(t)},children:e.item.merchant_id})},mt=function(e){return Object(D.jsx)("div",{className:"blockSelectItem",value:e.item.terminal_id,name:e.item.terminal_id,onClick:function(t){return e.onClickBlockSelectItem(t)},children:e.item.terminal_id})},bt=function(e){return Object(D.jsxs)("div",{className:"blockSelectItem",value:e.item.client_id,name:e.item.client_name,"data-id":e.item.institution_id,onClick:function(t){return e.onClickBlockSelectItem(t)},children:[e.item.client_name," - ",e.item.institution_id]})},jt=function(e){return Object(D.jsxs)("div",{className:"blockSelectItem",value:e.item.ident_code,onClick:function(t){return e.onClickBlockSelectItem(t)},"data-id":e.item.client_id,children:[e.item.ident_code," - ",e.item.institution_id]})},Tt=(s.a.Component,function(e){return Object(D.jsx)("option",{className:"blockSelectItem",onClick:function(t){return e.onClickBlockSelectItem(t)},value:e.item.brand_id,name:e.item.brand_name,children:e.item.brand_name})}),gt=(s.a.Component,s.a.Component,s.a.Component,s.a.Component,s.a.Component,function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).selectDICT_INSTITUTION=function(e){var t=e.target.value,n=e.currentTarget.getAttribute("apiName"),s=a.state.AcquiringReportsCriteria;s[n]=t,""==t?(console.log(t),a.setState({isShowSelectTVBV:!0,TSPReportSettingsSearchObj:s,isInstitution_idValidation:!1})):a.setState({isShowSelectTVBV:!1,TSPReportSettingsSearchObj:s,AcquiringReportsCriteria:s,isInstitution_idValidation:!0,institution_id:t})},a.changeInputDateReport=function(e){var t=e.currentTarget.getAttribute("apiName"),n=e.target.value,s=a.state.AcquiringReportsCriteria;s[t]=a.formatDate(new Date(n)),a.setState({AcquiringReportsCriteria:s})},a.changeInputDateReport_from=function(e){var t=e.currentTarget.getAttribute("apiName"),n=e.target.value,s=a.state.AcquiringReportsCriteria;s[t]=a.formatDate(new Date(n)),""==n?a.setState({AcquiringReportsCriteria:s,isDate_fromValidation:!1}):a.setState({AcquiringReportsCriteria:s,isDate_fromValidation:!0,date_from:n})},a.changeInputDateReport_to=function(e){var t=e.currentTarget.getAttribute("apiName"),n=e.target.value,s=a.state.AcquiringReportsCriteria;s[t]=a.formatDate(new Date(n)),""==n?a.setState({AcquiringReportsCriteria:s,isDate_toValidation:!1}):a.setState({AcquiringReportsCriteria:s,isDate_toValidation:!0,date_to:n})},a.changeInputBase=function(e){var t=e.currentTarget.getAttribute("apiName"),n=e.target.value,s=a.state.AcquiringReportsCriteria;s[t]=n,a.setState({AcquiringReportsCriteria:s})},a.changeInput=function(e){var t=e.currentTarget.getAttribute("apiName"),n=e.target.value,s=a.state.AcquiringReportsCriteria;"format_type_id"==t||"mcc_code"==t||"payment_system_id"==t||"terminal_id"==t||"bank_branch_id"==t||"institution_id"==t?(console.log("inputValue: ",n),s[t]=n):"terminal_type_id"==t?(s[t]=n,""==n?(console.log(n),a.setState({AcquiringReportsCriteria:s,isTerminal_type_idValidation:!1})):a.setState({AcquiringReportsCriteria:s,isTerminal_type_idValidation:!0,terminal_type_id:n})):"merchant_id"==t?(s[t]=n,""==n?(console.log(n),a.setState({AcquiringReportsCriteria:s,isMerchant_idValidation:!1})):a.setState({AcquiringReportsCriteria:s,isMerchant_idValidation:!0,merchant_id:n})):"date_type_id"==t?(s[t]=Number(n),""==n?(console.log(n),a.setState({AcquiringReportsCriteria:s,isDate_type_idValidation:!1})):a.setState({AcquiringReportsCriteria:s,isDate_type_idValidation:!0,date_type_id:n})):s[t]=n,console.log(s),a.setState({AcquiringReportsCriteria:s}),console.log(a.state),console.log("here:",a.state.AcquiringReportsCriteria)},a.formatDate=function(e){var t=e.getDate(),n=("0"+(e.getMonth()+1)).slice(-2);return t.toString().length<2&&(t="0"+t),e.getFullYear()+n+t},a.search=function(){a.defineValidationInputs()},a.defineValidationInputs=function(){var e=new Date(a.state.date_from),t=new Date(a.state.date_to),n=Math.abs(t-e),s=Math.ceil(n/864e5);null!=a.state.date_type_id&&""!=a.state.date_type_id||a.setState({isDate_type_idValidation:!1}),null!=a.state.date_from&&""!=a.state.date_from||a.setState({isDate_fromValidation:!1}),null!==a.state.date_to&&""!==a.state.date_to||a.setState({isDate_toValidation:!1}),s>31&&a.setState({isDate_month_Validation:!1}),0==a.state.AcquiringReportsCriteria.tsp_id&&0==a.state.AcquiringReportsCriteria.network_brand_id&&0==a.state.AcquiringReportsCriteria.ident_code?a.setState({isForm_toValidation:!1}):a.setState({isForm_toValidation:!0}),a.setState({},(function(){return a.sendOptionToServer()}))},a.Tsp_list=function(e){return console.log(e),e.map((function(e,t){return console.log(e),Object(D.jsx)("li",{className:"dropdownMenuItem",children:Object(D.jsxs)("p",{children:[Object(D.jsx)("input",{name:"tsp_list",id:e.tsp_name,type:"radio",onClick:a.itemTsp,value:e.tsp_id})," ",e.tsp_name]})})}))},a.itemTsp=function(e){var t=e.target.value;console.log(t),console.log(a.state),a.state.settings.map((function(e,n){e.tsp_id==t&&(null==e.main_settings?a.setState({type_acquiring:2,report_format_id:1,report_period_type_id:1,channel_type_id:1,file_name_mask:""}):e.main_settings.length&&(console.log(e.main_settings[0].acquiring_type_id),a.setState({type_acquiring:e.main_settings[0].acquiring_type_id,report_format_id:e.main_settings[0].report_format_id,report_period_type_id:e.main_settings[0].report_period_type_id,channel_type_id:e.main_settings[0].channel_type_id,file_name_mask:e.main_settings[0].file_name_mask})))})),a.setState({currentTsp:Number(t),TSPReportSettingsSTD:null,isShowTypeAcquiring:!0}),a.requestDICT_REPORT_FORMAT(a.props.store.userState.token),a.requestDICT_REPORT_PERIOD_TYPE(a.props.store.userState.token),a.requestDICT_REPORT_CHANNEL_TYPE(a.props.store.userState.token)},a.changeTypeAcquiring=function(e){var t=e.currentTarget.getAttribute("type_acquiring");console.log(t),a.state.settings.map((function(e,n){console.log(a.state.currentTsp),console.log(e.tsp_id),e.tsp_id==a.state.currentTsp&&e.main_settings.length>1&&(console.log(e.main_settings.length>1),e.main_settings.map((function(e,n){e.acquiring_type_id==t&&(console.log(e.acquiring_type_id==t),a.setState({type_acquiring:Number(t),report_format_id:e.report_format_id,report_period_type_id:e.report_period_type_id,channel_type_id:e.channel_type_id,file_name_mask:e.file_name_mask}))})))}))},a.openStandardReport=function(){a.requestTSPReportSettingsSTD(a.props.store.userState.token)},a.closePopupTable=function(){a.setState({isShowTableTSPReportSettingsSTD:!1})},a.changeReport_format_id=function(e){var t=e.target.value;console.log(t),a.setState({report_format_id:Number(t)})},a.changeReport_period_type_id=function(e){var t=e.target.value;console.log(t),a.setState({report_period_type_id:Number(t)})},a.changeChannel_type_id=function(e){var t=e.target.value;console.log(t),a.setState({channel_type_id:Number(t)})},a.changeFile_name_mask=function(e){var t=e.target.value;console.log(t),a.setState({file_name_mask:t})},a.saveReport=function(){var e={acquiring_type_id:a.state.type_acquiring,tsp_list:[{tsp_id:a.state.currentTsp}],main_settings:{acquiring_type_id:a.state.type_acquiring,report_format_id:a.state.report_format_id,report_period_type_id:a.state.report_period_type_id,channel_type_id:a.state.channel_type_id,file_name_mask:a.state.file_name_mask}};null!=a.state.TSPReportSettingsSTD&&(e.std_settings=a.state.TSPReportSettingsSTD),a.requestTSPReportSettingsSTD_SAVE(a.props.store.userState.token)},a.showReport=function(e){return console.log(e),a.state.settings.map((function(t,n){if(console.log(t),console.log(t.tsp_id),console.log(t.tsp_id==e),t.tsp_id==e){if(console.log(t.main_settings),null==t.main_settings){return Object(D.jsxs)("div",{className:"report border",children:[Object(D.jsx)("div",{className:"title",children:"\u041f\u0435\u0440\u0435\u043b\u0456\u043a \u043f\u043e\u043b\u0456\u0432 \u0437\u0432\u0456\u0442\u0443 \u0422\u0421\u041f"}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:a.openStandardReport,children:"\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:!0,children:"\u0420\u043e\u0437\u0448\u0438\u0440\u0435\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:!0,children:"\u0417\u0432\u0456\u0442 \u043f\u043e \u043e\u043f\u0435\u0440\u0430\u0446\u0456\u044f\u043c Installment"}),Object(D.jsx)("br",{}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_format",children:"\u0424\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0443"}),a.state.isShowREPORT_FORMAT?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_format_id,name:"DICT_REPORT_FORMAT",id:"DICT_REPORT_FORMAT",children:a.state.DICT_REPORT_FORMAT.map((function(e,t){return Object(D.jsx)(dt,{optionItem:e,report_format_id:1},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"report_period",children:"\u041f\u0435\u0440\u0456\u043e\u0434 \u0437\u0432\u0456\u0442\u0443"}),a.state.isShowDICT_REPORT_PERIOD_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_period_type_id,name:"DICT_REPORT_PERIOD_TYPE",id:"DICT_REPORT_PERIOD_TYPE",children:a.state.DICT_REPORT_PERIOD_TYPE.map((function(e,t){return Object(D.jsx)(ut,{optionItem:e,report_period_type_id:1},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_name_mask",children:"\u041c\u0430\u0441\u043a\u0430 \u043d\u0430\u0437\u0432\u0438 \u0444\u0430\u0439\u043b\u0443"}),Object(D.jsx)("input",{defaultValue:"",onChange:a.changeFile_name_mask,apiName:"file_name_mask",className:"customInput form-control",id:"file_name_mask",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441atalog",children:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433"}),Object(D.jsx)("input",{disabled:!0,onChange:a.changeInput,apiName:"\u0441atalog",className:"customInput form-control",id:"\u0441atalog",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441hannel",children:"\u041a\u0430\u043d\u0430\u043b"}),a.state.isShowDICT_REPORT_CHANNEL_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeChannel_type_id,name:"DICT_REPORT_CHANNEL_TYPE",id:"DICT_REPORT_CHANNEL_TYPE",children:a.state.DICT_REPORT_CHANNEL_TYPE.map((function(e,t){return Object(D.jsx)(pt,{optionItem:e,channel_type_id:1},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsx)("div",{className:"reportCoverBtn",children:Object(D.jsx)("button",{className:"btn btn-secondary",onClick:a.saveReport,children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})})]})}if(1==t.main_settings.length)return t.main_settings.map((function(e,t){var n=e.report_period_type_id,s=e.report_format_id,i=e.channel_type_id,r=e.file_name_mask;return Object(D.jsxs)("div",{className:" border report",children:[Object(D.jsxs)("div",{className:"coverBtn border",children:[Object(D.jsx)("div",{className:"title",children:"\u0412\u0438\u0434 \u0435\u043a\u0432\u0430\u0440\u0438\u043d\u0433\u0443"}),Object(D.jsx)("button",{className:"btn btn-secondary",children:1==a.state.type_acquiring?"\u0424\u0456\u0437\u0438\u0447\u043d\u0438\u0439":"\u0406\u043d\u0442\u0435\u0440\u043d\u0435\u0442"})]}),Object(D.jsxs)("div",{className:"report border",children:[Object(D.jsx)("div",{className:"title",children:"\u041f\u0435\u0440\u0435\u043b\u0456\u043a \u043f\u043e\u043b\u0456\u0432 \u0437\u0432\u0456\u0442\u0443 \u0422\u0421\u041f"}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:a.openStandardReport,children:"\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:!0,children:"\u0420\u043e\u0437\u0448\u0438\u0440\u0435\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:!0,children:"\u0417\u0432\u0456\u0442 \u043f\u043e \u043e\u043f\u0435\u0440\u0430\u0446\u0456\u044f\u043c Installment"}),Object(D.jsx)("br",{}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_format",children:"\u0424\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0443"}),a.state.isShowREPORT_FORMAT?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_format_id,name:"DICT_REPORT_FORMAT",id:"DICT_REPORT_FORMAT",children:a.state.DICT_REPORT_FORMAT.map((function(e,t){return Object(D.jsx)(dt,{optionItem:e,report_format_id:s},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"report_period",children:"\u041f\u0435\u0440\u0456\u043e\u0434 \u0437\u0432\u0456\u0442\u0443"}),a.state.isShowDICT_REPORT_PERIOD_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_period_type_id,name:"DICT_REPORT_PERIOD_TYPE",id:"DICT_REPORT_PERIOD_TYPE",children:a.state.DICT_REPORT_PERIOD_TYPE.map((function(e,t){return Object(D.jsx)(ut,{optionItem:e,report_period_type_id:n},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_name_mask",children:"\u041c\u0430\u0441\u043a\u0430 \u043d\u0430\u0437\u0432\u0438 \u0444\u0430\u0439\u043b\u0443"}),Object(D.jsx)("input",{defaultValue:r,onChange:a.changeFile_name_mask,apiName:"file_name_mask",className:"customInput form-control",id:"file_name_mask",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441atalog",children:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433"}),Object(D.jsx)("input",{disabled:!0,onChange:a.changeInput,apiName:"\u0441atalog",className:"customInput form-control",id:"\u0441atalog",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441hannel",children:"\u041a\u0430\u043d\u0430\u043b"}),a.state.isShowDICT_REPORT_CHANNEL_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeChannel_type_id,name:"DICT_REPORT_CHANNEL_TYPE",id:"DICT_REPORT_CHANNEL_TYPE",children:a.state.DICT_REPORT_CHANNEL_TYPE.map((function(e,t){return Object(D.jsx)(pt,{optionItem:e,channel_type_id:i},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsx)("div",{className:"reportCoverBtn",children:Object(D.jsx)("button",{className:"btn btn-secondary",onClick:a.saveReport,children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})})]})]})}));if(2==t.main_settings.length)return Object(D.jsxs)("div",{className:"",children:[Object(D.jsxs)("div",{className:"coverBtn border",children:[Object(D.jsx)("div",{className:"title",children:"\u0412\u0438\u0434 \u0435\u043a\u0432\u0430\u0440\u0438\u043d\u0433\u0443"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:1==a.state.type_acquiring?"disabled":"",onClick:a.changeTypeAcquiring,type_acquiring:1,children:"\u0424\u0456\u0437\u0438\u0447\u043d\u0438\u0439"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:2==a.state.type_acquiring?"disabled":"",onClick:a.changeTypeAcquiring,type_acquiring:2,children:"\u0406\u043d\u0442\u0435\u0440\u043d\u0435\u0442"})]}),t.main_settings.map((function(e,t){var n=e.report_period_type_id,s=e.report_format_id,i=e.channel_type_id,r=e.file_name_mask,o=e.acquiring_type_id,c=e.standard_report,l=e.extended_report,d=e.installment_report;return console.log(o),console.log(n),console.log(s),console.log(i),console.log(r),console.log(a.state.type_acquiring),Object(D.jsxs)("div",{className:"".concat(a.state.type_acquiring==o?"":"d-none"," border report"),children:[Object(D.jsx)("div",{className:"title",children:"\u041f\u0435\u0440\u0435\u043b\u0456\u043a \u043f\u043e\u043b\u0456\u0432 \u0437\u0432\u0456\u0442\u0443 \u0422\u0421\u041f"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:c?"":"disabled",onClick:a.openStandardReport,children:"\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:l?"":"disabled",children:"\u0420\u043e\u0437\u0448\u0438\u0440\u0435\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:d?"":"disabled",children:"\u0417\u0432\u0456\u0442 \u043f\u043e \u043e\u043f\u0435\u0440\u0430\u0446\u0456\u044f\u043c Installment"}),Object(D.jsx)("br",{}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_format",children:"\u0424\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0443"}),a.state.isShowREPORT_FORMAT?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_format_id,name:"DICT_REPORT_FORMAT",id:"DICT_REPORT_FORMAT",children:a.state.DICT_REPORT_FORMAT.map((function(e,t){return Object(D.jsx)(dt,{optionItem:e,report_format_id:s},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"report_period",children:"\u041f\u0435\u0440\u0456\u043e\u0434 \u0437\u0432\u0456\u0442\u0443"}),a.state.isShowDICT_REPORT_PERIOD_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_period_type_id,name:"DICT_REPORT_PERIOD_TYPE",id:"DICT_REPORT_PERIOD_TYPE",children:a.state.DICT_REPORT_PERIOD_TYPE.map((function(e,t){return Object(D.jsx)(ut,{optionItem:e,report_period_type_id:n},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_name_mask",children:"\u041c\u0430\u0441\u043a\u0430 \u043d\u0430\u0437\u0432\u0438 \u0444\u0430\u0439\u043b\u0443"}),Object(D.jsx)("input",{defaultValue:r,onChange:a.changeFile_name_mask,apiName:"file_name_mask",className:"customInput form-control",id:"file_name_mask",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441atalog",children:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433"}),Object(D.jsx)("input",{disabled:!0,onChange:a.changeInput,apiName:"\u0441atalog",className:"customInput form-control",id:"\u0441atalog",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441hannel",children:"\u041a\u0430\u043d\u0430\u043b"}),a.state.isShowDICT_REPORT_CHANNEL_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeChannel_type_id,name:"DICT_REPORT_CHANNEL_TYPE",id:"DICT_REPORT_CHANNEL_TYPE",children:a.state.DICT_REPORT_CHANNEL_TYPE.map((function(e,t){return Object(D.jsx)(pt,{optionItem:e,channel_type_id:i},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsx)("br",{}),Object(D.jsx)("div",{className:"reportCoverBtn",children:Object(D.jsx)("button",{className:"btn btn-secondary",onClick:a.saveReport,children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})})]})}))]})}}))},a.closePopupError=function(){a.setState({isShowPopupError:!1})},a.closePopupErrorSave=function(){a.setState({isShowPopupErrorSave:!1})},a.activeOperation=function(e,t){var n;return e.map((function(e,a){e.operation==t&&(n=e.name)})),n},a.onChangeAutocompleteInput=function(e){var t=e.target.value;console.log(t),a.setState({InputDICT_MCC:t}),""!=t&&a.requestDICT_MCC(a.props.store.userState.token,t,!0)},a.onClickAutocompleteInput=function(e){var t=e.target.value;console.log(t),a.setState({isShowBlockSelectDICT_MCC:!0})},a.onClickAutocompleteInputRes=function(){a.setState({mcc_code:null,isShowBlockSelectDICT_MCC:!0,isShowInputResDICT_MCC:!1,isShowInputDICT_MCC:!0})},a.onBlurBlockSelect=function(){a.setState({isShowBlockSelectDICT_MCC:!1})},a.onClickBlockSelectItem=function(e){var t=e.currentTarget.getAttribute("value");if(""!=t){if(t!=a.state.InputDICT_MCC){a.requestDICT_MCC(a.props.store.userState.token,t,!1);var n=a.state.AcquiringReportsCriteria;n.mcc_code=t,console.log(t),a.setState({AcquiringReportsCriteria:n,InputDICT_MCC:t,isShowBlockSelectDICT_MCC:!1,isShowInputResDICT_MCC:!0,isShowInputDICT_MCC:!1})}a.setState({isShowBlockSelectDICT_MCC:!1})}},a.clickTest=function(e){},a.addMerchantName=function(e){var t=a.state.AcquiringReportsCriteria;t.merchant_id=e,a.setState({AcquiringReportsCriteria:t}),console.log(a.state.AcquiringReportsCriteria.tsp_name)},a.addTerminalName=function(e){console.log(e);var t=a.state.AcquiringReportsCriteria;t.terminal_id=e,console.log(t),a.setState({AcquiringReportsCriteria:t}),console.log(a.state.AcquiringReportsCriteria.tsp_name)},a.addTspName=function(e){var t=a.state.AcquiringReportsCriteria;t.tsp_id=e,a.setState({AcquiringReportsCriteria:t})},a.addBrandName=function(e){var t=a.state.AcquiringReportsCriteria;t.network_brand_id=e.brand_id,a.setState({AcquiringReportsCriteria:t})},a.addIdentCode=function(e){var t=a.state.AcquiringReportsCriteria;t.ident_code=e,a.setState({AcquiringReportsCriteria:t})},a.addClientID=function(e){var t=a.state.AcquiringReportsCriteria;t.tsp_id=e,a.setState({AcquiringReportsCriteria:t})},a.addMccCode=function(e){var t=a.state.AcquiringReportsCriteria;t.mcc_code=e,a.setState({AcquiringReportsCriteria:t})},a.handleSelect=function(e){var t,n=a.state.AcquiringReportsCriteria;t=0===e.length?0:e.map((function(e){return e.value})).join(","),n.payment_system_id=t,a.setState({AcquiringReportsCriteria:n})},a.state={DICT_INSTITUTION:null,isShowSelectDICT_INSTITUTION:!1,DICT_BRANCH:null,isDisableTVBV:!0,isShowSelectTVBV:!1,DICT_ACQUIRING_REPORTS:null,isShowSelectDICT_ACQUIRING_REPORTS:!1,DICT_ACQUIRING_TYPE:null,isShowSelectDICT_ACQUIRING_TYPE:!1,DICT_PAYMENT_SYSTEM:null,isShowSelectDICT_PAYMENT_SYSTEM:!1,DICT_TERMINAL_SYSTEM:null,isShowSelectDICT_MERCHANT_SYSTEM:!1,DICT_MERCHANT_SYSTEM:null,isShowSelectDICT_TERMINAL_SYSTEM:!1,DICT_REPORT_FORMAT:null,isShowSelectDICT_REPORT_FORMAT:!1,DICT_DATE_TYPE:null,isShowSelectDICT_DATE_TYPE:!1,AcquiringReportsCriteria:{institution_id:0,report_type_id:"REPORT_FIX_COMMISSION",date_from:"".concat((new Date).getFullYear()).concat((new Date).getMonth()+1<10?"0"+((new Date).getMonth()+1):(new Date).getMonth()+1,"01"),date_to:"20211224",date_type_id:1,format_type_id:1,terminal_type_id:2},date_from:"".concat((new Date).getFullYear()).concat((new Date).getMonth()+1<10?"0"+((new Date).getMonth()+1):(new Date).getMonth()+1,"01"),date_to:null,date_type_id:1,institution_id:0,merchant_id:null,isInstitution_idValidation:!0,isMerchant_idValidation:!0,isTerminal_type_idValidation:!0,isDate_type_idValidation:!0,isDate_fromValidation:!0,isDate_toValidation:!0,isForm_toValidation:!0,isDate_month_Validation:!0,DICT_MCC_SYSTEM:null,isShowSelectDICT_MCC_SYSTEM:!1,DICT_MCC:null,InputDICT_MCC:null,isShowBlockSelectDICT_MCC:!1,isShowInputResDICT_MCC:!1,isShowInputDICT_MCC:!0,error_text:"\u0417\u0430\u043f\u043e\u0432\u043d\u0456\u0442\u044c, \u0431\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0434\u0430\u0442\u0438!",isSuccess:!1,merchant_error:"",date_from_default:"".concat((new Date).getFullYear(),"-").concat((new Date).getMonth()+1<10?"0"+((new Date).getMonth()+1):(new Date).getMonth()+1,"-01")},a.myRef=s.a.createRef(),a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.requestDICT_INSTITUTION(this.props.store.userState.token),this.requestDICT_ACQUIRING_REPORTS(this.props.store.userState.token),this.requestDICT_ACQUIRING_TYPE(this.props.store.userState.token),this.requestDICT_PAYMENT_SYSTEM(this.props.store.userState.token),this.requestDICT_REPORT_FORMAT(this.props.store.userState.token),this.requestDICT_DATE_TYPE(this.props.store.userState.token)}},{key:"componentWillUnmount",value:function(){window.addEventListener("mousedown",null)}},{key:"requestDICT_INSTITUTION",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_INSTITUTION",e.next=5,R.get("/api/Dictionary/DICT_INSTITUTION",{headers:{Token:"".concat(t)}}).then((function(e){if(1===e.data.Table.TableRows.length){var t=e.data.Table.TableRows[0].institution_id,a=n.state.AcquiringReportsCriteria;a.institution_id=t,n.setState({isShowSelectTVBV:!1,TSPReportSettingsSearchObj:a,AcquiringReportsCriteria:a,isInstitution_idValidation:!0,institution_id:t})}n.setState({DICT_INSTITUTION:e.data.Table.TableRows,isShowSelectDICT_INSTITUTION:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_BRANCH",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n){var a,s=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),a="/api/Dictionary/DICT_BRANCH/?param1=".concat(n),{param1:n},e.next=6,R.get(a,{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),s.setState({DICT_BRANCH:e.data.Table.TableRows,isShowSelectTVBV:!0,isDisableTVBV:!1}),s.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"requestDICT_REPORT_FORMAT",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_REPORT_FORMAT",e.next=5,R.get("/api/Dictionary/DICT_REPORT_FORMAT",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_REPORT_FORMAT:e.data.Table.TableRows,isShowSelectDICT_REPORT_FORMAT:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_REPORT_PERIOD_TYPE",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_REPORT_PERIOD_TYPE",e.next=5,R.get("/api/Dictionary/DICT_REPORT_PERIOD_TYPE",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_REPORT_PERIOD_TYPE:e.data.Table.TableRows,isShowDICT_REPORT_PERIOD_TYPE:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_ACQUIRING_REPORTS",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_ACQUIRING_REPORTS",e.next=5,R.get("/api/Dictionary/DICT_ACQUIRING_REPORTS",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_ACQUIRING_REPORTS:e.data.Table.TableRows,isShowSelectDICT_ACQUIRING_REPORTS:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_ACQUIRING_TYPE",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_ACQUIRING_TYPE",e.next=5,R.get("/api/Dictionary/DICT_ACQUIRING_TYPE",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_ACQUIRING_TYPE:e.data.Table.TableRows,isShowSelectDICT_ACQUIRING_TYPE:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_PAYMENT_SYSTEM",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_PAYMENT_SYSTEM",e.next=5,R.get("/api/Dictionary/DICT_PAYMENT_SYSTEM",{headers:{Token:"".concat(t)}}).then((function(e){n.setState({DICT_PAYMENT_SYSTEM:e.data.Table.TableRows.map((function(e){return{value:e.payment_system_id,label:e.payment_system_name}})),isShowSelectDICT_PAYMENT_SYSTEM:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_MERCHANT_SYSTEM",value:function(){var e=Object(C.a)(f.a.mark((function e(){var t,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Dictionary/QueryMerchant",t={institution_id:+this.state.institution_id,merchant_id:+this.state.merchant_id||0},this.state.AcquiringReportsCriteria.tsp_id?t.client_id=+this.state.AcquiringReportsCriteria.tsp_id:this.state.AcquiringReportsCriteria.ident_code?t.client_id=+this.state.AcquiringReportsCriteria.ident_code:t.client_id=0,e.next=6,R.post("/api/Dictionary/QueryMerchant",t,{headers:{Token:"".concat(this.props.store.userState.token)}}).then((function(e){console.log(e.data),n.setState({DICT_MERCHANT_SYSTEM:e.data.merchant_list.TableRows,isShowSelectDICT_MERCHANT_SYSTEM:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"requestDICT_TERMINAL_SYSTEM",value:function(){var e=Object(C.a)(f.a.mark((function e(){var t,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Dictionary/QueryMCC",t={institution_id:+this.state.institution_id,merchant_id:+this.state.merchant_id||0},this.state.AcquiringReportsCriteria.tsp_id?t.client_id=+this.state.AcquiringReportsCriteria.tsp_id:this.state.AcquiringReportsCriteria.ident_code?t.client_id=+this.state.AcquiringReportsCriteria.ident_code:t.client_id=0,e.next=6,R.post("/api/Dictionary/QueryMCC",t,{headers:{Token:"".concat(this.props.store.userState.token)}}).then((function(e){0!==e.data.record_count&&n.setState({DICT_TERMINAL_SYSTEM:e.data.Table.TableRows,DICT_MCC_SYSTEM:e.data.Table.TableRows,isShowSelectDICT_TERMINAL_SYSTEM:!0,isShowSelectDICT_MCC_SYSTEM:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"requestDICT_DATE_TYPE",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_DATE_TYPE",e.next=5,R.get("/api/Dictionary/DICT_DATE_TYPE",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_DATE_TYPE:e.data.Table.TableRows,isShowSelectDICT_DATE_TYPE:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_MCC_SYSTEM",value:function(){var e=Object(C.a)(f.a.mark((function e(){var t,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Dictionary/QueryMCC",t={terminal_id:+this.state.AcquiringReportsCriteria.tsp_id,merchant_id:+this.state.merchant_id||0},this.state.AcquiringReportsCriteria.ident_code?t.client_id=+this.state.AcquiringReportsCriteria.ident_code:t.client_id=0,e.next=6,R.post("/api/Dictionary/QueryMCC",t,{headers:{Token:"".concat(this.props.store.userState.token)}}).then((function(e){n.setState({DICT_TERMINAL_SYSTEM:e.data.mcc_list.TableRows,isShowSelectDICT_MCC_SYSTEM:!0,DICT_MCC_SYSTEM:e.data.Table.TableRows}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"requestReports_Acquiring",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Reports/Acquiring",e.next=4,R.post("/api/Reports/Acquiring",n,{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(e){window.location.href="/dashboard/REPORTS_ACQUIRING_MONITOR"})).catch((function(e){console.log(e.response)}));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"sendOptionToServer",value:function(){this.state.isDate_fromValidation&&this.state.isDate_toValidation&&this.state.isForm_toValidation&&this.state.isDate_month_Validation&&this.requestReports_Acquiring(this.props.store.userState.token,this.state.AcquiringReportsCriteria)}},{key:"handleCheckId",value:function(){var e=this;this.checkMerchantID().then((function(t){0!==t.data.ErrorStatus.ErrorCode&&e.setState({merchant_error:t.data.ErrorStatus.ErrorMessage,isShowPopupError:!0})}))}},{key:"checkMerchantID",value:function(){var e=Object(C.a)(f.a.mark((function e(){var t,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Dictionary/QueryMerchant",t={institution_id:+this.state.institution_id,merchant_id:+this.state.merchant_id||0},this.state.tsp_id?t.client_id=+this.state.tsp_id:this.state.ident_code?t.client_id=+this.state.ident_code:t.client_id=0,e.next=6,R.post("/api/Dictionary/QueryMerchant",t,{headers:{Token:"".concat(this.props.store.userState.token),"Content-Type":"application/json"}}).then((function(e){return n.props.store.changeLoading(!1),e})).catch((function(e){console.log(e.response)}));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"requestDICT_MCC",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n,a){var s,i=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),s="/api/Dictionary/DICT_MCC/?param1=".concat(n),console.log(s),e.next=6,R.get(s,{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),null==e.data.Table.TableRows?i.setState({DICT_MCC:[{mcc_code:"",mcc_name:"\u0417\u0430 \u0434\u0430\u043d\u0438\u043c \u043a\u043e\u0434\u043e\u043c \u043d\u0435\u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0436\u043e\u0434\u043d\u043e\u0433\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443"}]}):i.setState({DICT_MCC:e.data.Table.TableRows}),a?i.setState({isShowBlockSelectDICT_MCC:!0}):i.setState({isShowBlockSelectDICT_MCC:!1}),i.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(D.jsxs)("div",{className:"coverTable REPORT_aquiring REPORT_ACQ_DETAILED",children:[this.state.isSuccess?Object(D.jsxs)(U.a,{variant:"success",children:["\u0417\u0432\u0456\u0442 \u0412\u0438\u043f\u0438\u0441\u043a\u0430 \u043e\u043f\u0435\u0440\u0430\u0446\u0456\u0439 \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0441\u0444\u043e\u0440\u043c\u043e\u0432\u0430\u043d\u0430. \u041f\u0435\u0440\u0435\u0439\u0434\u0456\u0442\u044c \u043f\u043e"," ",Object(D.jsx)(U.a.Link,{href:"/dashboard/REPORTS_ACQUIRING_MONITOR",children:"\u043b\u0456\u043d\u043a\u0443"}),". \u0414\u043b\u044f \u043f\u0435\u0440\u0435\u0433\u043b\u044f\u0434\u0443 \u0437\u0432\u0456\u0442\u0430."]}):null,Object(D.jsxs)("div",{className:"headerTable",children:[Object(D.jsx)("div",{className:"titleTable",children:this.activeOperation(this.props.store.userState.OPERATIONS,this.props.store.location.pathname.substr(11))}),Object(D.jsx)("div",{className:"optionBlock"})]}),Object(D.jsx)("div",{className:"filter justify-content-between",children:Object(D.jsxs)("div",{className:"coverInput col-5",children:[Object(D.jsx)("label",{htmlFor:"DICT_INSTITUTION",children:"\u0420\u0423 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430"}),Object(D.jsx)("select",{onChange:this.selectDICT_INSTITUTION,apiName:"institution_id",id:"dropdown-basic-button",className:"".concat(this.state.isInstitution_idValidation?"":"validError"," form-select"),title:"\u0420\u0435\u0433\u0456\u043e\u043d\u0430\u043b\u044c\u043d\u0456 \u0443\u043f\u0440\u0430\u0432\u043b\u0456\u043d\u043d\u044f",children:this.state.isShowSelectDICT_INSTITUTION?this.state.DICT_INSTITUTION.map((function(e,t){return Object(D.jsx)(ct,{optionItem:e},t)})):Object(D.jsx)(D.Fragment,{})}),Object(D.jsx)("p",{className:"error",children:this.state.isInstitution_idValidation?null:this.state.error_text}),Object(D.jsxs)("div",{className:"coverInput col-12",children:[Object(D.jsx)("div",{className:"coverInput col-12",children:Object(D.jsxs)("div",{className:"coverDate",children:[Object(D.jsx)("label",{htmlFor:"date_type_id",children:"\u0414\u0430\u0442\u0430 \u0437\u0432\u0456\u0442\u0443"}),Object(D.jsx)("select",{onChange:this.changeInput,apiName:"date_type_id",id:"date_type_id",className:"".concat(this.state.isDate_type_idValidation?"":"validError"," form-select"),title:"DICT_DATE_TYPE",children:this.state.isShowSelectDICT_DATE_TYPE?this.state.DICT_DATE_TYPE.map((function(e,t){return Object(D.jsx)(lt,{optionItem:e},t)})):null}),Object(D.jsx)("p",{className:"error",children:this.state.isDate_type_idValidation?null:this.state.error_text})]})}),Object(D.jsxs)("div",{className:"coverInput col-11",children:[Object(D.jsx)("span",{children:"\u041f\u0435\u0440\u0456\u043e\u0434 \u0437\u0432\u0456\u0442\u0443"}),Object(D.jsxs)("div",{className:"row",children:[Object(D.jsxs)("div",{className:"coverDate col-6",children:[Object(D.jsx)("label",{htmlFor:"date_report_from",children:"\u0417"}),Object(D.jsx)("input",{onChange:this.changeInputDateReport_from,apiName:"date_from",className:"".concat(this.state.isDate_fromValidation?"":"validError"," customInput form-control"),id:"date_from",type:"date",defaultValue:this.state.date_from_default})]}),Object(D.jsxs)("div",{className:"coverDate col-6",children:[Object(D.jsx)("label",{htmlFor:"date_report_to",children:"\u041f\u043e"}),Object(D.jsx)("input",{onChange:this.changeInputDateReport_to,apiName:"date_to",className:"".concat(this.state.isDate_toValidation?"":"validError"," customInput form-control"),id:"date_to",type:"date"})]})]}),Object(D.jsxs)("p",{className:"error",children:[this.state.isDate_fromValidation&&this.state.isDate_toValidation?null:"\u0417\u0430\u043f\u043e\u0432\u043d\u0456\u0442\u044c, \u0431\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0434\u0430\u0442y!",this.state.isDate_month_Validation?null:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0438\u0439 \u0442\u0435\u0440\u043c\u0456\u043d 31 \u0434\u0435\u043d\u044c!"]})]})]})]})}),Object(D.jsx)("div",{className:"btnBlock",children:Object(D.jsx)("button",{className:"search btn btn-primary",onClick:this.search,children:"\u041f\u043e\u0431\u0443\u0434\u0443\u0432\u0430\u0442\u0438 \u0437\u0432\u0456\u0442"})}),this.state.isShowPopupError?Object(D.jsx)(D.Fragment,{children:Object(D.jsx)("div",{className:"coverPopupError",children:Object(D.jsxs)("div",{className:"innerBlock",children:[Object(D.jsx)("div",{className:"title alert alert-danger",children:"\u041d\u0435\u043c\u0430\u0454 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443 \u043f\u043e \u0434\u0430\u043d\u043e\u043c\u0443 \u043f\u043e\u0448\u0443\u043a\u0443"}),Object(D.jsx)("div",{className:"msg",children:this.state.merchant_error}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:this.closePopupError,children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"})]})})}):Object(D.jsx)(D.Fragment,{}),this.state.isShowPopupErrorSave?Object(D.jsx)(D.Fragment,{children:Object(D.jsx)("div",{className:"coverPopupError",children:Object(D.jsxs)("div",{className:"innerBlock",children:[Object(D.jsx)("div",{className:"title alert alert-primary",children:"\u0423\u043f\u04411 \u0421\u0442\u0430\u043b\u0430\u0441\u044f \u043f\u043e\u043c\u0438\u043b\u043a\u0430"}),Object(D.jsx)("div",{className:"msg",children:":("}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:this.closePopupErrorSave,children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"})]})})}):Object(D.jsx)(D.Fragment,{})]})}}]),n}(s.a.Component)),Ot=function(e){return Object(D.jsx)("option",{value:e.optionItem.institution_id,children:e.optionItem.institution_name})},St=function(e){return Object(D.jsx)("option",{value:e.optionItem.date_type_id,children:e.optionItem.date_type_name})},It=function(e){return Object(D.jsx)("option",{selected:e.optionItem.report_format_id==e.report_format_id?"selected":"",value:e.optionItem.report_format_id,children:e.optionItem.report_format_name})},ft=function(e){return Object(D.jsx)("option",{selected:e.optionItem.report_period_type_id==e.report_period_type_id?"selected":"",value:e.optionItem.report_period_type_id,children:e.optionItem.report_period_type_name})},Ct=function(e){return Object(D.jsx)("option",{selected:e.optionItem.report_channel_type_id==e.channel_type_id?"selected":"",value:e.optionItem.report_channel_type_id,children:e.optionItem.report_channel_type_name})},Rt=function(e){return Object(D.jsx)("div",{className:"blockSelectItem",value:e.item.mcc_code,onClick:function(t){return e.onClickBlockSelectItem(t)},children:e.item.mcc_name})},vt=function(e){return Object(D.jsx)("div",{className:"blockSelectItem",value:e.item.merchant_id,name:e.item.merchant_id,onClick:function(t){return e.onClickBlockSelectItem(t)},children:e.item.merchant_id})},xt=function(e){return Object(D.jsx)("div",{className:"blockSelectItem",value:e.item.terminal_id,name:e.item.terminal_id,onClick:function(t){return e.onClickBlockSelectItem(t)},children:e.item.terminal_id})},Nt=function(e){return Object(D.jsxs)("div",{className:"blockSelectItem",value:e.item.client_id,name:e.item.client_name,"data-id":e.item.institution_id,onClick:function(t){return e.onClickBlockSelectItem(t)},children:[e.item.client_name," - ",e.item.institution_id]})},Dt=function(e){return Object(D.jsxs)("div",{className:"blockSelectItem",value:e.item.ident_code,onClick:function(t){return e.onClickBlockSelectItem(t)},"data-id":e.item.client_id,children:[e.item.ident_code," - ",e.item.institution_id]})},yt=(s.a.Component,function(e){return Object(D.jsx)("option",{className:"blockSelectItem",onClick:function(t){return e.onClickBlockSelectItem(t)},value:e.item.brand_id,name:e.item.brand_name,children:e.item.brand_name})}),Et=(s.a.Component,s.a.Component,s.a.Component,s.a.Component,s.a.Component,function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).selectDICT_INSTITUTION=function(e){var t=e.target.value,n=e.currentTarget.getAttribute("apiName"),s=a.state.AcquiringReportsCriteria;s[n]=t,""==t?(console.log(t),a.setState({isShowSelectTVBV:!0,TSPReportSettingsSearchObj:s,isInstitution_idValidation:!1})):a.setState({isShowSelectTVBV:!1,TSPReportSettingsSearchObj:s,AcquiringReportsCriteria:s,isInstitution_idValidation:!0,institution_id:t})},a.changeInputDateReport=function(e){var t=e.currentTarget.getAttribute("apiName"),n=e.target.value,s=a.state.AcquiringReportsCriteria;s[t]=a.formatDate(new Date(n)),a.setState({AcquiringReportsCriteria:s})},a.changeInputDateReport_from=function(e){var t=e.currentTarget.getAttribute("apiName"),n=e.target.value,s=a.state.AcquiringReportsCriteria;s[t]=a.formatDate(new Date(n)),""==n?a.setState({AcquiringReportsCriteria:s,isDate_fromValidation:!1}):a.setState({AcquiringReportsCriteria:s,isDate_fromValidation:!0,date_from:n})},a.changeInputDateReport_to=function(e){var t=e.currentTarget.getAttribute("apiName"),n=e.target.value,s=a.state.AcquiringReportsCriteria;s[t]=a.formatDate(new Date(n)),""==n?a.setState({AcquiringReportsCriteria:s,isDate_toValidation:!1}):a.setState({AcquiringReportsCriteria:s,isDate_toValidation:!0,date_to:n})},a.changeInputBase=function(e){var t=e.currentTarget.getAttribute("apiName"),n=e.target.value,s=a.state.AcquiringReportsCriteria;s[t]=n,a.setState({AcquiringReportsCriteria:s})},a.changeInput=function(e){var t=e.currentTarget.getAttribute("apiName"),n=e.target.value,s=a.state.AcquiringReportsCriteria;"format_type_id"==t||"mcc_code"==t||"payment_system_id"==t||"terminal_id"==t||"bank_branch_id"==t||"institution_id"==t?(console.log("inputValue: ",n),s[t]=n):"terminal_type_id"==t?(s[t]=n,""==n?(console.log(n),a.setState({AcquiringReportsCriteria:s,isTerminal_type_idValidation:!1})):a.setState({AcquiringReportsCriteria:s,isTerminal_type_idValidation:!0,terminal_type_id:n})):"merchant_id"==t?(s[t]=n,""==n?(console.log(n),a.setState({AcquiringReportsCriteria:s,isMerchant_idValidation:!1})):a.setState({AcquiringReportsCriteria:s,isMerchant_idValidation:!0,merchant_id:n})):"date_type_id"==t?(s[t]=Number(n),""==n?(console.log(n),a.setState({AcquiringReportsCriteria:s,isDate_type_idValidation:!1})):a.setState({AcquiringReportsCriteria:s,isDate_type_idValidation:!0,date_type_id:n})):s[t]=n,console.log(s),a.setState({AcquiringReportsCriteria:s}),console.log(a.state),console.log("here:",a.state.AcquiringReportsCriteria)},a.formatDate=function(e){var t=e.getDate(),n=("0"+(e.getMonth()+1)).slice(-2);return t.toString().length<2&&(t="0"+t),e.getFullYear()+n+t},a.search=function(){a.defineValidationInputs()},a.defineValidationInputs=function(){var e=new Date(a.state.date_from),t=new Date(a.state.date_to),n=Math.abs(t-e),s=Math.ceil(n/864e5);null!=a.state.date_type_id&&""!=a.state.date_type_id||a.setState({isDate_type_idValidation:!1}),null!=a.state.date_from&&""!=a.state.date_from||a.setState({isDate_fromValidation:!1}),null!==a.state.date_to&&""!==a.state.date_to||a.setState({isDate_toValidation:!1}),s>31&&a.setState({isDate_month_Validation:!1}),0==a.state.AcquiringReportsCriteria.tsp_id&&0==a.state.AcquiringReportsCriteria.network_brand_id&&0==a.state.AcquiringReportsCriteria.ident_code?a.setState({isForm_toValidation:!1}):a.setState({isForm_toValidation:!0}),a.setState({},(function(){return a.sendOptionToServer()}))},a.Tsp_list=function(e){return console.log(e),e.map((function(e,t){return console.log(e),Object(D.jsx)("li",{className:"dropdownMenuItem",children:Object(D.jsxs)("p",{children:[Object(D.jsx)("input",{name:"tsp_list",id:e.tsp_name,type:"radio",onClick:a.itemTsp,value:e.tsp_id})," ",e.tsp_name]})})}))},a.itemTsp=function(e){var t=e.target.value;console.log(t),console.log(a.state),a.state.settings.map((function(e,n){e.tsp_id==t&&(null==e.main_settings?a.setState({type_acquiring:2,report_format_id:1,report_period_type_id:1,channel_type_id:1,file_name_mask:""}):e.main_settings.length&&(console.log(e.main_settings[0].acquiring_type_id),a.setState({type_acquiring:e.main_settings[0].acquiring_type_id,report_format_id:e.main_settings[0].report_format_id,report_period_type_id:e.main_settings[0].report_period_type_id,channel_type_id:e.main_settings[0].channel_type_id,file_name_mask:e.main_settings[0].file_name_mask})))})),a.setState({currentTsp:Number(t),TSPReportSettingsSTD:null,isShowTypeAcquiring:!0}),a.requestDICT_REPORT_FORMAT(a.props.store.userState.token),a.requestDICT_REPORT_PERIOD_TYPE(a.props.store.userState.token),a.requestDICT_REPORT_CHANNEL_TYPE(a.props.store.userState.token)},a.changeTypeAcquiring=function(e){var t=e.currentTarget.getAttribute("type_acquiring");console.log(t),a.state.settings.map((function(e,n){console.log(a.state.currentTsp),console.log(e.tsp_id),e.tsp_id==a.state.currentTsp&&e.main_settings.length>1&&(console.log(e.main_settings.length>1),e.main_settings.map((function(e,n){e.acquiring_type_id==t&&(console.log(e.acquiring_type_id==t),a.setState({type_acquiring:Number(t),report_format_id:e.report_format_id,report_period_type_id:e.report_period_type_id,channel_type_id:e.channel_type_id,file_name_mask:e.file_name_mask}))})))}))},a.openStandardReport=function(){a.requestTSPReportSettingsSTD(a.props.store.userState.token)},a.closePopupTable=function(){a.setState({isShowTableTSPReportSettingsSTD:!1})},a.changeReport_format_id=function(e){var t=e.target.value;console.log(t),a.setState({report_format_id:Number(t)})},a.changeReport_period_type_id=function(e){var t=e.target.value;console.log(t),a.setState({report_period_type_id:Number(t)})},a.changeChannel_type_id=function(e){var t=e.target.value;console.log(t),a.setState({channel_type_id:Number(t)})},a.changeFile_name_mask=function(e){var t=e.target.value;console.log(t),a.setState({file_name_mask:t})},a.saveReport=function(){var e={acquiring_type_id:a.state.type_acquiring,tsp_list:[{tsp_id:a.state.currentTsp}],main_settings:{acquiring_type_id:a.state.type_acquiring,report_format_id:a.state.report_format_id,report_period_type_id:a.state.report_period_type_id,channel_type_id:a.state.channel_type_id,file_name_mask:a.state.file_name_mask}};null!=a.state.TSPReportSettingsSTD&&(e.std_settings=a.state.TSPReportSettingsSTD),a.requestTSPReportSettingsSTD_SAVE(a.props.store.userState.token)},a.showReport=function(e){return console.log(e),a.state.settings.map((function(t,n){if(console.log(t),console.log(t.tsp_id),console.log(t.tsp_id==e),t.tsp_id==e){if(console.log(t.main_settings),null==t.main_settings){return Object(D.jsxs)("div",{className:"report border",children:[Object(D.jsx)("div",{className:"title",children:"\u041f\u0435\u0440\u0435\u043b\u0456\u043a \u043f\u043e\u043b\u0456\u0432 \u0437\u0432\u0456\u0442\u0443 \u0422\u0421\u041f"}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:a.openStandardReport,children:"\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:!0,children:"\u0420\u043e\u0437\u0448\u0438\u0440\u0435\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:!0,children:"\u0417\u0432\u0456\u0442 \u043f\u043e \u043e\u043f\u0435\u0440\u0430\u0446\u0456\u044f\u043c Installment"}),Object(D.jsx)("br",{}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_format",children:"\u0424\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0443"}),a.state.isShowREPORT_FORMAT?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_format_id,name:"DICT_REPORT_FORMAT",id:"DICT_REPORT_FORMAT",children:a.state.DICT_REPORT_FORMAT.map((function(e,t){return Object(D.jsx)(It,{optionItem:e,report_format_id:1},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"report_period",children:"\u041f\u0435\u0440\u0456\u043e\u0434 \u0437\u0432\u0456\u0442\u0443"}),a.state.isShowDICT_REPORT_PERIOD_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_period_type_id,name:"DICT_REPORT_PERIOD_TYPE",id:"DICT_REPORT_PERIOD_TYPE",children:a.state.DICT_REPORT_PERIOD_TYPE.map((function(e,t){return Object(D.jsx)(ft,{optionItem:e,report_period_type_id:1},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_name_mask",children:"\u041c\u0430\u0441\u043a\u0430 \u043d\u0430\u0437\u0432\u0438 \u0444\u0430\u0439\u043b\u0443"}),Object(D.jsx)("input",{defaultValue:"",onChange:a.changeFile_name_mask,apiName:"file_name_mask",className:"customInput form-control",id:"file_name_mask",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441atalog",children:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433"}),Object(D.jsx)("input",{disabled:!0,onChange:a.changeInput,apiName:"\u0441atalog",className:"customInput form-control",id:"\u0441atalog",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441hannel",children:"\u041a\u0430\u043d\u0430\u043b"}),a.state.isShowDICT_REPORT_CHANNEL_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeChannel_type_id,name:"DICT_REPORT_CHANNEL_TYPE",id:"DICT_REPORT_CHANNEL_TYPE",children:a.state.DICT_REPORT_CHANNEL_TYPE.map((function(e,t){return Object(D.jsx)(Ct,{optionItem:e,channel_type_id:1},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsx)("div",{className:"reportCoverBtn",children:Object(D.jsx)("button",{className:"btn btn-secondary",onClick:a.saveReport,children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})})]})}if(1==t.main_settings.length)return t.main_settings.map((function(e,t){var n=e.report_period_type_id,s=e.report_format_id,i=e.channel_type_id,r=e.file_name_mask;return Object(D.jsxs)("div",{className:" border report",children:[Object(D.jsxs)("div",{className:"coverBtn border",children:[Object(D.jsx)("div",{className:"title",children:"\u0412\u0438\u0434 \u0435\u043a\u0432\u0430\u0440\u0438\u043d\u0433\u0443"}),Object(D.jsx)("button",{className:"btn btn-secondary",children:1==a.state.type_acquiring?"\u0424\u0456\u0437\u0438\u0447\u043d\u0438\u0439":"\u0406\u043d\u0442\u0435\u0440\u043d\u0435\u0442"})]}),Object(D.jsxs)("div",{className:"report border",children:[Object(D.jsx)("div",{className:"title",children:"\u041f\u0435\u0440\u0435\u043b\u0456\u043a \u043f\u043e\u043b\u0456\u0432 \u0437\u0432\u0456\u0442\u0443 \u0422\u0421\u041f"}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:a.openStandardReport,children:"\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:!0,children:"\u0420\u043e\u0437\u0448\u0438\u0440\u0435\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:!0,children:"\u0417\u0432\u0456\u0442 \u043f\u043e \u043e\u043f\u0435\u0440\u0430\u0446\u0456\u044f\u043c Installment"}),Object(D.jsx)("br",{}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_format",children:"\u0424\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0443"}),a.state.isShowREPORT_FORMAT?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_format_id,name:"DICT_REPORT_FORMAT",id:"DICT_REPORT_FORMAT",children:a.state.DICT_REPORT_FORMAT.map((function(e,t){return Object(D.jsx)(It,{optionItem:e,report_format_id:s},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"report_period",children:"\u041f\u0435\u0440\u0456\u043e\u0434 \u0437\u0432\u0456\u0442\u0443"}),a.state.isShowDICT_REPORT_PERIOD_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_period_type_id,name:"DICT_REPORT_PERIOD_TYPE",id:"DICT_REPORT_PERIOD_TYPE",children:a.state.DICT_REPORT_PERIOD_TYPE.map((function(e,t){return Object(D.jsx)(ft,{optionItem:e,report_period_type_id:n},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_name_mask",children:"\u041c\u0430\u0441\u043a\u0430 \u043d\u0430\u0437\u0432\u0438 \u0444\u0430\u0439\u043b\u0443"}),Object(D.jsx)("input",{defaultValue:r,onChange:a.changeFile_name_mask,apiName:"file_name_mask",className:"customInput form-control",id:"file_name_mask",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441atalog",children:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433"}),Object(D.jsx)("input",{disabled:!0,onChange:a.changeInput,apiName:"\u0441atalog",className:"customInput form-control",id:"\u0441atalog",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441hannel",children:"\u041a\u0430\u043d\u0430\u043b"}),a.state.isShowDICT_REPORT_CHANNEL_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeChannel_type_id,name:"DICT_REPORT_CHANNEL_TYPE",id:"DICT_REPORT_CHANNEL_TYPE",children:a.state.DICT_REPORT_CHANNEL_TYPE.map((function(e,t){return Object(D.jsx)(Ct,{optionItem:e,channel_type_id:i},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsx)("div",{className:"reportCoverBtn",children:Object(D.jsx)("button",{className:"btn btn-secondary",onClick:a.saveReport,children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})})]})]})}));if(2==t.main_settings.length)return Object(D.jsxs)("div",{className:"",children:[Object(D.jsxs)("div",{className:"coverBtn border",children:[Object(D.jsx)("div",{className:"title",children:"\u0412\u0438\u0434 \u0435\u043a\u0432\u0430\u0440\u0438\u043d\u0433\u0443"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:1==a.state.type_acquiring?"disabled":"",onClick:a.changeTypeAcquiring,type_acquiring:1,children:"\u0424\u0456\u0437\u0438\u0447\u043d\u0438\u0439"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:2==a.state.type_acquiring?"disabled":"",onClick:a.changeTypeAcquiring,type_acquiring:2,children:"\u0406\u043d\u0442\u0435\u0440\u043d\u0435\u0442"})]}),t.main_settings.map((function(e,t){var n=e.report_period_type_id,s=e.report_format_id,i=e.channel_type_id,r=e.file_name_mask,o=e.acquiring_type_id,c=e.standard_report,l=e.extended_report,d=e.installment_report;return console.log(o),console.log(n),console.log(s),console.log(i),console.log(r),console.log(a.state.type_acquiring),Object(D.jsxs)("div",{className:"".concat(a.state.type_acquiring==o?"":"d-none"," border report"),children:[Object(D.jsx)("div",{className:"title",children:"\u041f\u0435\u0440\u0435\u043b\u0456\u043a \u043f\u043e\u043b\u0456\u0432 \u0437\u0432\u0456\u0442\u0443 \u0422\u0421\u041f"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:c?"":"disabled",onClick:a.openStandardReport,children:"\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:l?"":"disabled",children:"\u0420\u043e\u0437\u0448\u0438\u0440\u0435\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:d?"":"disabled",children:"\u0417\u0432\u0456\u0442 \u043f\u043e \u043e\u043f\u0435\u0440\u0430\u0446\u0456\u044f\u043c Installment"}),Object(D.jsx)("br",{}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_format",children:"\u0424\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0443"}),a.state.isShowREPORT_FORMAT?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_format_id,name:"DICT_REPORT_FORMAT",id:"DICT_REPORT_FORMAT",children:a.state.DICT_REPORT_FORMAT.map((function(e,t){return Object(D.jsx)(It,{optionItem:e,report_format_id:s},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"report_period",children:"\u041f\u0435\u0440\u0456\u043e\u0434 \u0437\u0432\u0456\u0442\u0443"}),a.state.isShowDICT_REPORT_PERIOD_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_period_type_id,name:"DICT_REPORT_PERIOD_TYPE",id:"DICT_REPORT_PERIOD_TYPE",children:a.state.DICT_REPORT_PERIOD_TYPE.map((function(e,t){return Object(D.jsx)(ft,{optionItem:e,report_period_type_id:n},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_name_mask",children:"\u041c\u0430\u0441\u043a\u0430 \u043d\u0430\u0437\u0432\u0438 \u0444\u0430\u0439\u043b\u0443"}),Object(D.jsx)("input",{defaultValue:r,onChange:a.changeFile_name_mask,apiName:"file_name_mask",className:"customInput form-control",id:"file_name_mask",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441atalog",children:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433"}),Object(D.jsx)("input",{disabled:!0,onChange:a.changeInput,apiName:"\u0441atalog",className:"customInput form-control",id:"\u0441atalog",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441hannel",children:"\u041a\u0430\u043d\u0430\u043b"}),a.state.isShowDICT_REPORT_CHANNEL_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeChannel_type_id,name:"DICT_REPORT_CHANNEL_TYPE",id:"DICT_REPORT_CHANNEL_TYPE",children:a.state.DICT_REPORT_CHANNEL_TYPE.map((function(e,t){return Object(D.jsx)(Ct,{optionItem:e,channel_type_id:i},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsx)("br",{}),Object(D.jsx)("div",{className:"reportCoverBtn",children:Object(D.jsx)("button",{className:"btn btn-secondary",onClick:a.saveReport,children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})})]})}))]})}}))},a.closePopupError=function(){a.setState({isShowPopupError:!1})},a.closePopupErrorSave=function(){a.setState({isShowPopupErrorSave:!1})},a.activeOperation=function(e,t){var n;return e.map((function(e,a){e.operation==t&&(n=e.name)})),n},a.onChangeAutocompleteInput=function(e){var t=e.target.value;console.log(t),a.setState({InputDICT_MCC:t}),""!=t&&a.requestDICT_MCC(a.props.store.userState.token,t,!0)},a.onClickAutocompleteInput=function(e){var t=e.target.value;console.log(t),a.setState({isShowBlockSelectDICT_MCC:!0})},a.onClickAutocompleteInputRes=function(){a.setState({mcc_code:null,isShowBlockSelectDICT_MCC:!0,isShowInputResDICT_MCC:!1,isShowInputDICT_MCC:!0})},a.onBlurBlockSelect=function(){a.setState({isShowBlockSelectDICT_MCC:!1})},a.onClickBlockSelectItem=function(e){var t=e.currentTarget.getAttribute("value");if(""!=t){if(t!=a.state.InputDICT_MCC){a.requestDICT_MCC(a.props.store.userState.token,t,!1);var n=a.state.AcquiringReportsCriteria;n.mcc_code=t,console.log(t),a.setState({AcquiringReportsCriteria:n,InputDICT_MCC:t,isShowBlockSelectDICT_MCC:!1,isShowInputResDICT_MCC:!0,isShowInputDICT_MCC:!1})}a.setState({isShowBlockSelectDICT_MCC:!1})}},a.clickTest=function(e){},a.addMerchantName=function(e){var t=a.state.AcquiringReportsCriteria;t.merchant_id=e,a.setState({AcquiringReportsCriteria:t}),console.log(a.state.AcquiringReportsCriteria.tsp_name)},a.addTerminalName=function(e){console.log(e);var t=a.state.AcquiringReportsCriteria;t.terminal_id=e,console.log(t),a.setState({AcquiringReportsCriteria:t}),console.log(a.state.AcquiringReportsCriteria.tsp_name)},a.addTspName=function(e){var t=a.state.AcquiringReportsCriteria;t.tsp_id=e,a.setState({AcquiringReportsCriteria:t})},a.addBrandName=function(e){var t=a.state.AcquiringReportsCriteria;t.network_brand_id=e.brand_id,a.setState({AcquiringReportsCriteria:t})},a.addIdentCode=function(e){var t=a.state.AcquiringReportsCriteria;t.ident_code=e,a.setState({AcquiringReportsCriteria:t})},a.addClientID=function(e){var t=a.state.AcquiringReportsCriteria;t.tsp_id=e,a.setState({AcquiringReportsCriteria:t})},a.addMccCode=function(e){var t=a.state.AcquiringReportsCriteria;t.mcc_code=e,a.setState({AcquiringReportsCriteria:t})},a.handleSelect=function(e){var t,n=a.state.AcquiringReportsCriteria;t=0===e.length?0:e.map((function(e){return e.value})).join(","),n.payment_system_id=t,a.setState({AcquiringReportsCriteria:n})},a.state={DICT_INSTITUTION:null,isShowSelectDICT_INSTITUTION:!1,DICT_BRANCH:null,isDisableTVBV:!0,isShowSelectTVBV:!1,DICT_ACQUIRING_REPORTS:null,isShowSelectDICT_ACQUIRING_REPORTS:!1,DICT_ACQUIRING_TYPE:null,isShowSelectDICT_ACQUIRING_TYPE:!1,DICT_PAYMENT_SYSTEM:null,isShowSelectDICT_PAYMENT_SYSTEM:!1,DICT_TERMINAL_SYSTEM:null,isShowSelectDICT_MERCHANT_SYSTEM:!1,DICT_MERCHANT_SYSTEM:null,isShowSelectDICT_TERMINAL_SYSTEM:!1,DICT_REPORT_FORMAT:null,isShowSelectDICT_REPORT_FORMAT:!1,DICT_DATE_TYPE:null,isShowSelectDICT_DATE_TYPE:!1,AcquiringReportsCriteria:{institution_id:0,report_type_id:"REPORT_ACQ_DETAILED",date_from:"20211224",date_to:"20211224",date_type_id:1,format_type_id:1,terminal_type_id:2,no_transactions:0},no_transactions:!1,date_from:null,date_to:null,date_type_id:1,institution_id:0,merchant_id:null,isInstitution_idValidation:!0,isMerchant_idValidation:!0,isTerminal_type_idValidation:!0,isDate_type_idValidation:!0,isDate_fromValidation:!0,isDate_toValidation:!0,isForm_toValidation:!0,isDate_month_Validation:!0,DICT_MCC_SYSTEM:null,isShowSelectDICT_MCC_SYSTEM:!1,DICT_MCC:null,InputDICT_MCC:null,isShowBlockSelectDICT_MCC:!1,isShowInputResDICT_MCC:!1,isShowInputDICT_MCC:!0,error_text:"\u0417\u0430\u043f\u043e\u0432\u043d\u0456\u0442\u044c, \u0431\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0434\u0430\u0442\u0438!",isSuccess:!1,merchant_error:""},a.myRef=s.a.createRef(),a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.requestDICT_INSTITUTION(this.props.store.userState.token),this.requestDICT_ACQUIRING_REPORTS(this.props.store.userState.token),this.requestDICT_ACQUIRING_TYPE(this.props.store.userState.token),this.requestDICT_PAYMENT_SYSTEM(this.props.store.userState.token),this.requestDICT_REPORT_FORMAT(this.props.store.userState.token),this.requestDICT_DATE_TYPE(this.props.store.userState.token)}},{key:"componentWillUnmount",value:function(){window.addEventListener("mousedown",null)}},{key:"requestDICT_INSTITUTION",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_INSTITUTION",e.next=5,R.get("/api/Dictionary/DICT_INSTITUTION",{headers:{Token:"".concat(t)}}).then((function(e){if(1===e.data.Table.TableRows.length){var t=e.data.Table.TableRows[0].institution_id,a=n.state.AcquiringReportsCriteria;a.institution_id=t,n.setState({isShowSelectTVBV:!1,TSPReportSettingsSearchObj:a,AcquiringReportsCriteria:a,isInstitution_idValidation:!0,institution_id:t})}n.setState({DICT_INSTITUTION:e.data.Table.TableRows,isShowSelectDICT_INSTITUTION:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_BRANCH",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n){var a,s=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),a="/api/Dictionary/DICT_BRANCH/?param1=".concat(n),{param1:n},e.next=6,R.get(a,{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),s.setState({DICT_BRANCH:e.data.Table.TableRows,isShowSelectTVBV:!0,isDisableTVBV:!1}),s.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"requestDICT_REPORT_FORMAT",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_REPORT_FORMAT",e.next=5,R.get("/api/Dictionary/DICT_REPORT_FORMAT",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_REPORT_FORMAT:e.data.Table.TableRows,isShowSelectDICT_REPORT_FORMAT:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_REPORT_PERIOD_TYPE",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_REPORT_PERIOD_TYPE",e.next=5,R.get("/api/Dictionary/DICT_REPORT_PERIOD_TYPE",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_REPORT_PERIOD_TYPE:e.data.Table.TableRows,isShowDICT_REPORT_PERIOD_TYPE:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_ACQUIRING_REPORTS",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_ACQUIRING_REPORTS",e.next=5,R.get("/api/Dictionary/DICT_ACQUIRING_REPORTS",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_ACQUIRING_REPORTS:e.data.Table.TableRows,isShowSelectDICT_ACQUIRING_REPORTS:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_ACQUIRING_TYPE",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_ACQUIRING_TYPE",e.next=5,R.get("/api/Dictionary/DICT_ACQUIRING_TYPE",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_ACQUIRING_TYPE:e.data.Table.TableRows,isShowSelectDICT_ACQUIRING_TYPE:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_PAYMENT_SYSTEM",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_PAYMENT_SYSTEM",e.next=5,R.get("/api/Dictionary/DICT_PAYMENT_SYSTEM",{headers:{Token:"".concat(t)}}).then((function(e){n.setState({DICT_PAYMENT_SYSTEM:e.data.Table.TableRows.map((function(e){return{value:e.payment_system_id,label:e.payment_system_name}})),isShowSelectDICT_PAYMENT_SYSTEM:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_MERCHANT_SYSTEM",value:function(){var e=Object(C.a)(f.a.mark((function e(){var t,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Dictionary/QueryMerchant",t={institution_id:+this.state.institution_id,merchant_id:+this.state.merchant_id||0},this.state.AcquiringReportsCriteria.tsp_id?t.client_id=+this.state.AcquiringReportsCriteria.tsp_id:this.state.AcquiringReportsCriteria.ident_code?t.client_id=+this.state.AcquiringReportsCriteria.ident_code:t.client_id=0,e.next=6,R.post("/api/Dictionary/QueryMerchant",t,{headers:{Token:"".concat(this.props.store.userState.token)}}).then((function(e){console.log(e.data),n.setState({DICT_MERCHANT_SYSTEM:e.data.merchant_list.TableRows,isShowSelectDICT_MERCHANT_SYSTEM:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"requestDICT_TERMINAL_SYSTEM",value:function(){var e=Object(C.a)(f.a.mark((function e(){var t,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Dictionary/QueryMCC",t={institution_id:+this.state.institution_id,merchant_id:+this.state.merchant_id||0},this.state.AcquiringReportsCriteria.tsp_id?t.client_id=+this.state.AcquiringReportsCriteria.tsp_id:this.state.AcquiringReportsCriteria.ident_code?t.client_id=+this.state.AcquiringReportsCriteria.ident_code:t.client_id=0,e.next=6,R.post("/api/Dictionary/QueryMCC",t,{headers:{Token:"".concat(this.props.store.userState.token)}}).then((function(e){0!==e.data.record_count&&n.setState({DICT_TERMINAL_SYSTEM:e.data.Table.TableRows,DICT_MCC_SYSTEM:e.data.Table.TableRows,isShowSelectDICT_TERMINAL_SYSTEM:!0,isShowSelectDICT_MCC_SYSTEM:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"requestDICT_DATE_TYPE",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_DATE_TYPE",e.next=5,R.get("/api/Dictionary/DICT_DATE_TYPE",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_DATE_TYPE:e.data.Table.TableRows,isShowSelectDICT_DATE_TYPE:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_MCC_SYSTEM",value:function(){var e=Object(C.a)(f.a.mark((function e(){var t,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Dictionary/QueryMCC",t={terminal_id:+this.state.AcquiringReportsCriteria.tsp_id,merchant_id:+this.state.merchant_id||0},this.state.AcquiringReportsCriteria.ident_code?t.client_id=+this.state.AcquiringReportsCriteria.ident_code:t.client_id=0,e.next=6,R.post("/api/Dictionary/QueryMCC",t,{headers:{Token:"".concat(this.props.store.userState.token)}}).then((function(e){n.setState({DICT_TERMINAL_SYSTEM:e.data.mcc_list.TableRows,isShowSelectDICT_MCC_SYSTEM:!0,DICT_MCC_SYSTEM:e.data.Table.TableRows}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"requestReports_Acquiring",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Reports/Acquiring",e.next=4,R.post("/api/Reports/Acquiring",n,{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(e){window.location.href="/dashboard/REPORTS_ACQUIRING_MONITOR"})).catch((function(e){console.log(e.response)}));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"sendOptionToServer",value:function(){this.state.isDate_fromValidation&&this.state.isDate_toValidation&&this.state.isForm_toValidation&&this.state.isDate_month_Validation&&(this.state.AcquiringReportsCriteria.no_transactions=this.state.no_transactions?1:0,this.requestReports_Acquiring(this.props.store.userState.token,this.state.AcquiringReportsCriteria))}},{key:"handleCheckId",value:function(){var e=this;this.checkMerchantID().then((function(t){0!==t.data.ErrorStatus.ErrorCode&&e.setState({merchant_error:t.data.ErrorStatus.ErrorMessage,isShowPopupError:!0})}))}},{key:"checkMerchantID",value:function(){var e=Object(C.a)(f.a.mark((function e(){var t,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Dictionary/QueryMerchant",t={institution_id:+this.state.institution_id,merchant_id:+this.state.merchant_id||0},this.state.tsp_id?t.client_id=+this.state.tsp_id:this.state.ident_code?t.client_id=+this.state.ident_code:t.client_id=0,e.next=6,R.post("/api/Dictionary/QueryMerchant",t,{headers:{Token:"".concat(this.props.store.userState.token),"Content-Type":"application/json"}}).then((function(e){return n.props.store.changeLoading(!1),e})).catch((function(e){console.log(e.response)}));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"requestDICT_MCC",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n,a){var s,i=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),s="/api/Dictionary/DICT_MCC/?param1=".concat(n),console.log(s),e.next=6,R.get(s,{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),null==e.data.Table.TableRows?i.setState({DICT_MCC:[{mcc_code:"",mcc_name:"\u0417\u0430 \u0434\u0430\u043d\u0438\u043c \u043a\u043e\u0434\u043e\u043c \u043d\u0435\u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0436\u043e\u0434\u043d\u043e\u0433\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443"}]}):i.setState({DICT_MCC:e.data.Table.TableRows}),a?i.setState({isShowBlockSelectDICT_MCC:!0}):i.setState({isShowBlockSelectDICT_MCC:!1}),i.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(D.jsxs)("div",{className:"coverTable REPORT_aquiring REPORT_ACQ_DETAILED",children:[this.state.isSuccess?Object(D.jsxs)(U.a,{variant:"success",children:["\u0417\u0432\u0456\u0442 \u0412\u0438\u043f\u0438\u0441\u043a\u0430 \u043e\u043f\u0435\u0440\u0430\u0446\u0456\u0439 \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0441\u0444\u043e\u0440\u043c\u043e\u0432\u0430\u043d\u0430. \u041f\u0435\u0440\u0435\u0439\u0434\u0456\u0442\u044c \u043f\u043e"," ",Object(D.jsx)(U.a.Link,{href:"/dashboard/REPORTS_ACQUIRING_MONITOR",children:"\u043b\u0456\u043d\u043a\u0443"}),". \u0414\u043b\u044f \u043f\u0435\u0440\u0435\u0433\u043b\u044f\u0434\u0443 \u0437\u0432\u0456\u0442\u0430."]}):null,Object(D.jsxs)("div",{className:"headerTable",children:[Object(D.jsx)("div",{className:"titleTable",children:this.activeOperation(this.props.store.userState.OPERATIONS,this.props.store.location.pathname.substr(11))}),Object(D.jsx)("div",{className:"optionBlock"})]}),Object(D.jsx)("div",{className:"filter justify-content-between",children:Object(D.jsxs)("div",{className:"coverInput col-5",children:[Object(D.jsx)("label",{htmlFor:"DICT_INSTITUTION",children:"\u0420\u0423 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430"}),Object(D.jsx)("select",{onChange:this.selectDICT_INSTITUTION,apiName:"institution_id",id:"dropdown-basic-button",className:"".concat(this.state.isInstitution_idValidation?"":"validError"," form-select"),title:"\u0420\u0435\u0433\u0456\u043e\u043d\u0430\u043b\u044c\u043d\u0456 \u0443\u043f\u0440\u0430\u0432\u043b\u0456\u043d\u043d\u044f",children:this.state.isShowSelectDICT_INSTITUTION?this.state.DICT_INSTITUTION.map((function(e,t){return Object(D.jsx)(Ot,{optionItem:e},t)})):Object(D.jsx)(D.Fragment,{})}),Object(D.jsx)("p",{className:"error",children:this.state.isInstitution_idValidation?null:this.state.error_text}),Object(D.jsxs)("div",{className:"coverInput col-12",children:[Object(D.jsx)("div",{className:"coverInput col-12",children:Object(D.jsxs)("div",{className:"coverDate",children:[Object(D.jsx)("label",{htmlFor:"date_type_id",children:"\u0414\u0430\u0442\u0430 \u0437\u0432\u0456\u0442\u0443"}),Object(D.jsx)("select",{onChange:this.changeInput,apiName:"date_type_id",id:"date_type_id",className:"".concat(this.state.isDate_type_idValidation?"":"validError"," form-select"),title:"DICT_DATE_TYPE",children:this.state.isShowSelectDICT_DATE_TYPE?this.state.DICT_DATE_TYPE.map((function(e,t){return Object(D.jsx)(St,{optionItem:e},t)})):null}),Object(D.jsx)("p",{className:"error",children:this.state.isDate_type_idValidation?null:this.state.error_text})]})}),Object(D.jsxs)("div",{className:"base-field",children:[Object(D.jsx)("label",{htmlFor:"base",style:{fontSize:"18px",cursor:"pointer"},children:"\u0437 \u043d\u0443\u043b\u044c\u043e\u0432\u0438\u043c\u0438 \u043e\u0431\u043e\u0440\u043e\u0442\u0430\u043c\u0438"}),Object(D.jsx)("input",{apiName:"base",id:"base",type:"checkbox",checked:this.state.no_transactions,style:{width:"15px",height:"15px"},onChange:function(){return e.setState({no_transactions:!e.state.no_transactions})}})]}),Object(D.jsxs)("div",{className:"coverInput col-11",children:[Object(D.jsx)("span",{children:"\u041f\u0435\u0440\u0456\u043e\u0434 \u0437\u0432\u0456\u0442\u0443"}),Object(D.jsxs)("div",{className:"row",children:[Object(D.jsxs)("div",{className:"coverDate col-6",children:[Object(D.jsx)("label",{htmlFor:"date_report_from",children:"\u0417"}),Object(D.jsx)("input",{onChange:this.changeInputDateReport_from,apiName:"date_from",className:"".concat(this.state.isDate_fromValidation&&this.state.isDate_month_Validation?"":"validError"," customInput form-control"),id:"date_from",type:"date"})]}),Object(D.jsxs)("div",{className:"coverDate col-6",children:[Object(D.jsx)("label",{htmlFor:"date_report_to",children:"\u041f\u043e"}),Object(D.jsx)("input",{onChange:this.changeInputDateReport_to,apiName:"date_to",className:"".concat(this.state.isDate_toValidation&&this.state.isDate_month_Validation?"":"validError"," customInput form-control"),id:"date_to",type:"date"})]})]}),Object(D.jsxs)("p",{className:"error",children:[this.state.isDate_fromValidation&&this.state.isDate_toValidation?null:"\u0417\u0430\u043f\u043e\u0432\u043d\u0456\u0442\u044c, \u0431\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0434\u0430\u0442\u0438!",this.state.isDate_month_Validation?null:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0438\u0439 \u0442\u0435\u0440\u043c\u0456\u043d 31 \u0434\u0435\u043d\u044c!"]})]})]})]})}),Object(D.jsx)("div",{className:"btnBlock",children:Object(D.jsx)("button",{className:"search btn btn-primary",onClick:this.search,children:"\u041f\u043e\u0431\u0443\u0434\u0443\u0432\u0430\u0442\u0438 \u0437\u0432\u0456\u0442"})}),this.state.isShowPopupError?Object(D.jsx)(D.Fragment,{children:Object(D.jsx)("div",{className:"coverPopupError",children:Object(D.jsxs)("div",{className:"innerBlock",children:[Object(D.jsx)("div",{className:"title alert alert-danger",children:"\u041d\u0435\u043c\u0430\u0454 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443 \u043f\u043e \u0434\u0430\u043d\u043e\u043c\u0443 \u043f\u043e\u0448\u0443\u043a\u0443"}),Object(D.jsx)("div",{className:"msg",children:this.state.merchant_error}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:this.closePopupError,children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"})]})})}):Object(D.jsx)(D.Fragment,{}),this.state.isShowPopupErrorSave?Object(D.jsx)(D.Fragment,{children:Object(D.jsx)("div",{className:"coverPopupError",children:Object(D.jsxs)("div",{className:"innerBlock",children:[Object(D.jsx)("div",{className:"title alert alert-primary",children:"\u0423\u043f\u04411 \u0421\u0442\u0430\u043b\u0430\u0441\u044f \u043f\u043e\u043c\u0438\u043b\u043a\u0430"}),Object(D.jsx)("div",{className:"msg",children:":("}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:this.closePopupErrorSave,children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"})]})})}):Object(D.jsx)(D.Fragment,{})]})}}]),n}(s.a.Component)),kt=function(e){return Object(D.jsx)("option",{value:e.optionItem.institution_id,children:e.optionItem.institution_name})},At=function(e){return Object(D.jsx)("option",{value:e.optionItem.date_type_id,children:e.optionItem.date_type_name})},wt=function(e){return Object(D.jsx)("option",{selected:e.optionItem.report_format_id==e.report_format_id?"selected":"",value:e.optionItem.report_format_id,children:e.optionItem.report_format_name})},Pt=function(e){return Object(D.jsx)("option",{selected:e.optionItem.report_period_type_id==e.report_period_type_id?"selected":"",value:e.optionItem.report_period_type_id,children:e.optionItem.report_period_type_name})},qt=function(e){return Object(D.jsx)("option",{selected:e.optionItem.report_channel_type_id==e.channel_type_id?"selected":"",value:e.optionItem.report_channel_type_id,children:e.optionItem.report_channel_type_name})},Mt=function(e){return Object(D.jsx)("div",{className:"blockSelectItem",value:e.item.mcc_code,onClick:function(t){return e.onClickBlockSelectItem(t)},children:e.item.mcc_name})},Bt=function(e){return Object(D.jsx)("div",{className:"blockSelectItem",value:e.item.merchant_id,name:e.item.merchant_id,onClick:function(t){return e.onClickBlockSelectItem(t)},children:e.item.merchant_id})},Lt=function(e){return Object(D.jsx)("div",{className:"blockSelectItem",value:e.item.terminal_id,name:e.item.terminal_id,onClick:function(t){return e.onClickBlockSelectItem(t)},children:e.item.terminal_id})},Ft=function(e){return Object(D.jsxs)("div",{className:"blockSelectItem",value:e.item.client_id,name:e.item.client_name,"data-id":e.item.institution_id,onClick:function(t){return e.onClickBlockSelectItem(t)},children:[e.item.client_name," - ",e.item.institution_id]})},Yt=function(e){return Object(D.jsxs)("div",{className:"blockSelectItem",value:e.item.ident_code,onClick:function(t){return e.onClickBlockSelectItem(t)},"data-id":e.item.client_id,children:[e.item.ident_code," - ",e.item.institution_id]})},Vt=(s.a.Component,function(e){return Object(D.jsx)("option",{className:"blockSelectItem",onClick:function(t){return e.onClickBlockSelectItem(t)},value:e.item.brand_id,name:e.item.brand_name,children:e.item.brand_name})}),Ut=(s.a.Component,s.a.Component,s.a.Component,s.a.Component,s.a.Component,function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).selectDICT_INSTITUTION=function(e){var t=e.target.value,n=e.currentTarget.getAttribute("apiName"),s=a.state.AcquiringReportsCriteria;s[n]=t,""==t?(console.log(t),a.setState({isShowSelectTVBV:!0,TSPReportSettingsSearchObj:s,isInstitution_idValidation:!1})):a.setState({isShowSelectTVBV:!1,TSPReportSettingsSearchObj:s,AcquiringReportsCriteria:s,isInstitution_idValidation:!0,institution_id:t})},a.changeInputDateReport=function(e){var t=e.currentTarget.getAttribute("apiName"),n=e.target.value,s=a.state.AcquiringReportsCriteria;s[t]=a.formatDate(new Date(n)),a.setState({AcquiringReportsCriteria:s})},a.changeInputDateReport_from=function(e){var t=e.currentTarget.getAttribute("apiName"),n=e.target.value,s=a.state.AcquiringReportsCriteria;s[t]=a.formatDate(new Date(n)),""==n?a.setState({AcquiringReportsCriteria:s,isDate_fromValidation:!1}):a.setState({AcquiringReportsCriteria:s,isDate_fromValidation:!0,date_from:n})},a.changeInputDateReport_to=function(e){var t=e.currentTarget.getAttribute("apiName"),n=e.target.value,s=a.state.AcquiringReportsCriteria;s[t]=a.formatDate(new Date(n)),""==n?a.setState({AcquiringReportsCriteria:s,isDate_toValidation:!1}):a.setState({AcquiringReportsCriteria:s,isDate_toValidation:!0,date_to:n})},a.changeInputBase=function(e){var t=e.currentTarget.getAttribute("apiName"),n=e.target.value,s=a.state.AcquiringReportsCriteria;s[t]=n,a.setState({AcquiringReportsCriteria:s})},a.changeInput=function(e){var t=e.currentTarget.getAttribute("apiName"),n=e.target.value,s=a.state.AcquiringReportsCriteria;"format_type_id"==t||"mcc_code"==t||"payment_system_id"==t||"terminal_id"==t||"bank_branch_id"==t||"institution_id"==t?(console.log("inputValue: ",n),s[t]=n):"terminal_type_id"==t?(s[t]=n,""==n?(console.log(n),a.setState({AcquiringReportsCriteria:s,isTerminal_type_idValidation:!1})):a.setState({AcquiringReportsCriteria:s,isTerminal_type_idValidation:!0,terminal_type_id:n})):"merchant_id"==t?(s[t]=n,""==n?(console.log(n),a.setState({AcquiringReportsCriteria:s,isMerchant_idValidation:!1})):a.setState({AcquiringReportsCriteria:s,isMerchant_idValidation:!0,merchant_id:n})):"date_type_id"==t?(s[t]=Number(n),""==n?(console.log(n),a.setState({AcquiringReportsCriteria:s,isDate_type_idValidation:!1})):a.setState({AcquiringReportsCriteria:s,isDate_type_idValidation:!0,date_type_id:n})):s[t]=n,console.log(s),a.setState({AcquiringReportsCriteria:s}),console.log(a.state),console.log("here:",a.state.AcquiringReportsCriteria)},a.formatDate=function(e){var t=e.getDate(),n=("0"+(e.getMonth()+1)).slice(-2);return t.toString().length<2&&(t="0"+t),e.getFullYear()+n+t},a.search=function(){a.defineValidationInputs()},a.defineValidationInputs=function(){var e=new Date(a.state.date_from),t=new Date(a.state.date_to),n=Math.abs(t-e),s=Math.ceil(n/864e5);null!=a.state.date_type_id&&""!=a.state.date_type_id||a.setState({isDate_type_idValidation:!1}),null!=a.state.date_from&&""!=a.state.date_from||a.setState({isDate_fromValidation:!1}),null!==a.state.date_to&&""!==a.state.date_to||a.setState({isDate_toValidation:!1}),s>31&&a.setState({isDate_month_Validation:!1}),0==a.state.AcquiringReportsCriteria.tsp_id&&0==a.state.AcquiringReportsCriteria.network_brand_id&&0==a.state.AcquiringReportsCriteria.ident_code?a.setState({isForm_toValidation:!1}):a.setState({isForm_toValidation:!0}),a.setState({},(function(){return a.sendOptionToServer()}))},a.Tsp_list=function(e){return console.log(e),e.map((function(e,t){return console.log(e),Object(D.jsx)("li",{className:"dropdownMenuItem",children:Object(D.jsxs)("p",{children:[Object(D.jsx)("input",{name:"tsp_list",id:e.tsp_name,type:"radio",onClick:a.itemTsp,value:e.tsp_id})," ",e.tsp_name]})})}))},a.itemTsp=function(e){var t=e.target.value;console.log(t),console.log(a.state),a.state.settings.map((function(e,n){e.tsp_id==t&&(null==e.main_settings?a.setState({type_acquiring:2,report_format_id:1,report_period_type_id:1,channel_type_id:1,file_name_mask:""}):e.main_settings.length&&(console.log(e.main_settings[0].acquiring_type_id),a.setState({type_acquiring:e.main_settings[0].acquiring_type_id,report_format_id:e.main_settings[0].report_format_id,report_period_type_id:e.main_settings[0].report_period_type_id,channel_type_id:e.main_settings[0].channel_type_id,file_name_mask:e.main_settings[0].file_name_mask})))})),a.setState({currentTsp:Number(t),TSPReportSettingsSTD:null,isShowTypeAcquiring:!0}),a.requestDICT_REPORT_FORMAT(a.props.store.userState.token),a.requestDICT_REPORT_PERIOD_TYPE(a.props.store.userState.token),a.requestDICT_REPORT_CHANNEL_TYPE(a.props.store.userState.token)},a.changeTypeAcquiring=function(e){var t=e.currentTarget.getAttribute("type_acquiring");console.log(t),a.state.settings.map((function(e,n){console.log(a.state.currentTsp),console.log(e.tsp_id),e.tsp_id==a.state.currentTsp&&e.main_settings.length>1&&(console.log(e.main_settings.length>1),e.main_settings.map((function(e,n){e.acquiring_type_id==t&&(console.log(e.acquiring_type_id==t),a.setState({type_acquiring:Number(t),report_format_id:e.report_format_id,report_period_type_id:e.report_period_type_id,channel_type_id:e.channel_type_id,file_name_mask:e.file_name_mask}))})))}))},a.openStandardReport=function(){a.requestTSPReportSettingsSTD(a.props.store.userState.token)},a.closePopupTable=function(){a.setState({isShowTableTSPReportSettingsSTD:!1})},a.changeReport_format_id=function(e){var t=e.target.value;console.log(t),a.setState({report_format_id:Number(t)})},a.changeReport_period_type_id=function(e){var t=e.target.value;console.log(t),a.setState({report_period_type_id:Number(t)})},a.changeChannel_type_id=function(e){var t=e.target.value;console.log(t),a.setState({channel_type_id:Number(t)})},a.changeFile_name_mask=function(e){var t=e.target.value;console.log(t),a.setState({file_name_mask:t})},a.saveReport=function(){var e={acquiring_type_id:a.state.type_acquiring,tsp_list:[{tsp_id:a.state.currentTsp}],main_settings:{acquiring_type_id:a.state.type_acquiring,report_format_id:a.state.report_format_id,report_period_type_id:a.state.report_period_type_id,channel_type_id:a.state.channel_type_id,file_name_mask:a.state.file_name_mask}};null!=a.state.TSPReportSettingsSTD&&(e.std_settings=a.state.TSPReportSettingsSTD),a.requestTSPReportSettingsSTD_SAVE(a.props.store.userState.token)},a.showReport=function(e){return console.log(e),a.state.settings.map((function(t,n){if(console.log(t),console.log(t.tsp_id),console.log(t.tsp_id==e),t.tsp_id==e){if(console.log(t.main_settings),null==t.main_settings){return Object(D.jsxs)("div",{className:"report border",children:[Object(D.jsx)("div",{className:"title",children:"\u041f\u0435\u0440\u0435\u043b\u0456\u043a \u043f\u043e\u043b\u0456\u0432 \u0437\u0432\u0456\u0442\u0443 \u0422\u0421\u041f"}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:a.openStandardReport,children:"\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:!0,children:"\u0420\u043e\u0437\u0448\u0438\u0440\u0435\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:!0,children:"\u0417\u0432\u0456\u0442 \u043f\u043e \u043e\u043f\u0435\u0440\u0430\u0446\u0456\u044f\u043c Installment"}),Object(D.jsx)("br",{}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_format",children:"\u0424\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0443"}),a.state.isShowREPORT_FORMAT?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_format_id,name:"DICT_REPORT_FORMAT",id:"DICT_REPORT_FORMAT",children:a.state.DICT_REPORT_FORMAT.map((function(e,t){return Object(D.jsx)(wt,{optionItem:e,report_format_id:1},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"report_period",children:"\u041f\u0435\u0440\u0456\u043e\u0434 "}),a.state.isShowDICT_REPORT_PERIOD_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_period_type_id,name:"DICT_REPORT_PERIOD_TYPE",id:"DICT_REPORT_PERIOD_TYPE",children:a.state.DICT_REPORT_PERIOD_TYPE.map((function(e,t){return Object(D.jsx)(Pt,{optionItem:e,report_period_type_id:1},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_name_mask",children:"\u041c\u0430\u0441\u043a\u0430 \u043d\u0430\u0437\u0432\u0438 \u0444\u0430\u0439\u043b\u0443"}),Object(D.jsx)("input",{defaultValue:"",onChange:a.changeFile_name_mask,apiName:"file_name_mask",className:"customInput form-control",id:"file_name_mask",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441atalog",children:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433"}),Object(D.jsx)("input",{disabled:!0,onChange:a.changeInput,apiName:"\u0441atalog",className:"customInput form-control",id:"\u0441atalog",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441hannel",children:"\u041a\u0430\u043d\u0430\u043b"}),a.state.isShowDICT_REPORT_CHANNEL_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeChannel_type_id,name:"DICT_REPORT_CHANNEL_TYPE",id:"DICT_REPORT_CHANNEL_TYPE",children:a.state.DICT_REPORT_CHANNEL_TYPE.map((function(e,t){return Object(D.jsx)(qt,{optionItem:e,channel_type_id:1},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsx)("div",{className:"reportCoverBtn",children:Object(D.jsx)("button",{className:"btn btn-secondary",onClick:a.saveReport,children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})})]})}if(1==t.main_settings.length)return t.main_settings.map((function(e,t){var n=e.report_period_type_id,s=e.report_format_id,i=e.channel_type_id,r=e.file_name_mask;return Object(D.jsxs)("div",{className:" border report",children:[Object(D.jsxs)("div",{className:"coverBtn border",children:[Object(D.jsx)("div",{className:"title",children:"\u0412\u0438\u0434 \u0435\u043a\u0432\u0430\u0440\u0438\u043d\u0433\u0443"}),Object(D.jsx)("button",{className:"btn btn-secondary",children:1==a.state.type_acquiring?"\u0424\u0456\u0437\u0438\u0447\u043d\u0438\u0439":"\u0406\u043d\u0442\u0435\u0440\u043d\u0435\u0442"})]}),Object(D.jsxs)("div",{className:"report border",children:[Object(D.jsx)("div",{className:"title",children:"\u041f\u0435\u0440\u0435\u043b\u0456\u043a \u043f\u043e\u043b\u0456\u0432 \u0437\u0432\u0456\u0442\u0443 \u0422\u0421\u041f"}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:a.openStandardReport,children:"\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:!0,children:"\u0420\u043e\u0437\u0448\u0438\u0440\u0435\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:!0,children:"\u0417\u0432\u0456\u0442 \u043f\u043e \u043e\u043f\u0435\u0440\u0430\u0446\u0456\u044f\u043c Installment"}),Object(D.jsx)("br",{}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_format",children:"\u0424\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0443"}),a.state.isShowREPORT_FORMAT?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_format_id,name:"DICT_REPORT_FORMAT",id:"DICT_REPORT_FORMAT",children:a.state.DICT_REPORT_FORMAT.map((function(e,t){return Object(D.jsx)(wt,{optionItem:e,report_format_id:s},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"report_period",children:"\u041f\u0435\u0440\u0456\u043e\u0434 \u0437\u0432\u0456\u0442\u0443"}),a.state.isShowDICT_REPORT_PERIOD_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_period_type_id,name:"DICT_REPORT_PERIOD_TYPE",id:"DICT_REPORT_PERIOD_TYPE",children:a.state.DICT_REPORT_PERIOD_TYPE.map((function(e,t){return Object(D.jsx)(Pt,{optionItem:e,report_period_type_id:n},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_name_mask",children:"\u041c\u0430\u0441\u043a\u0430 \u043d\u0430\u0437\u0432\u0438 \u0444\u0430\u0439\u043b\u0443"}),Object(D.jsx)("input",{defaultValue:r,onChange:a.changeFile_name_mask,apiName:"file_name_mask",className:"customInput form-control",id:"file_name_mask",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441atalog",children:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433"}),Object(D.jsx)("input",{disabled:!0,onChange:a.changeInput,apiName:"\u0441atalog",className:"customInput form-control",id:"\u0441atalog",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441hannel",children:"\u041a\u0430\u043d\u0430\u043b"}),a.state.isShowDICT_REPORT_CHANNEL_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeChannel_type_id,name:"DICT_REPORT_CHANNEL_TYPE",id:"DICT_REPORT_CHANNEL_TYPE",children:a.state.DICT_REPORT_CHANNEL_TYPE.map((function(e,t){return Object(D.jsx)(qt,{optionItem:e,channel_type_id:i},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsx)("div",{className:"reportCoverBtn",children:Object(D.jsx)("button",{className:"btn btn-secondary",onClick:a.saveReport,children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})})]})]})}));if(2==t.main_settings.length)return Object(D.jsxs)("div",{className:"",children:[Object(D.jsxs)("div",{className:"coverBtn border",children:[Object(D.jsx)("div",{className:"title",children:"\u0412\u0438\u0434 \u0435\u043a\u0432\u0430\u0440\u0438\u043d\u0433\u0443"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:1==a.state.type_acquiring?"disabled":"",onClick:a.changeTypeAcquiring,type_acquiring:1,children:"\u0424\u0456\u0437\u0438\u0447\u043d\u0438\u0439"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:2==a.state.type_acquiring?"disabled":"",onClick:a.changeTypeAcquiring,type_acquiring:2,children:"\u0406\u043d\u0442\u0435\u0440\u043d\u0435\u0442"})]}),t.main_settings.map((function(e,t){var n=e.report_period_type_id,s=e.report_format_id,i=e.channel_type_id,r=e.file_name_mask,o=e.acquiring_type_id,c=e.standard_report,l=e.extended_report,d=e.installment_report;return console.log(o),console.log(n),console.log(s),console.log(i),console.log(r),console.log(a.state.type_acquiring),Object(D.jsxs)("div",{className:"".concat(a.state.type_acquiring==o?"":"d-none"," border report"),children:[Object(D.jsx)("div",{className:"title",children:"\u041f\u0435\u0440\u0435\u043b\u0456\u043a \u043f\u043e\u043b\u0456\u0432 \u0437\u0432\u0456\u0442\u0443 \u0422\u0421\u041f"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:c?"":"disabled",onClick:a.openStandardReport,children:"\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:l?"":"disabled",children:"\u0420\u043e\u0437\u0448\u0438\u0440\u0435\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:d?"":"disabled",children:"\u0417\u0432\u0456\u0442 \u043f\u043e \u043e\u043f\u0435\u0440\u0430\u0446\u0456\u044f\u043c Installment"}),Object(D.jsx)("br",{}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_format",children:"\u0424\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0443"}),a.state.isShowREPORT_FORMAT?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_format_id,name:"DICT_REPORT_FORMAT",id:"DICT_REPORT_FORMAT",children:a.state.DICT_REPORT_FORMAT.map((function(e,t){return Object(D.jsx)(wt,{optionItem:e,report_format_id:s},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"report_period",children:"\u041f\u0435\u0440\u0456\u043e\u0434 \u0437\u0432\u0456\u0442\u0443"}),a.state.isShowDICT_REPORT_PERIOD_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_period_type_id,name:"DICT_REPORT_PERIOD_TYPE",id:"DICT_REPORT_PERIOD_TYPE",children:a.state.DICT_REPORT_PERIOD_TYPE.map((function(e,t){return Object(D.jsx)(Pt,{optionItem:e,report_period_type_id:n},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_name_mask",children:"\u041c\u0430\u0441\u043a\u0430 \u043d\u0430\u0437\u0432\u0438 \u0444\u0430\u0439\u043b\u0443"}),Object(D.jsx)("input",{defaultValue:r,onChange:a.changeFile_name_mask,apiName:"file_name_mask",className:"customInput form-control",id:"file_name_mask",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441atalog",children:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433"}),Object(D.jsx)("input",{disabled:!0,onChange:a.changeInput,apiName:"\u0441atalog",className:"customInput form-control",id:"\u0441atalog",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441hannel",children:"\u041a\u0430\u043d\u0430\u043b"}),a.state.isShowDICT_REPORT_CHANNEL_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeChannel_type_id,name:"DICT_REPORT_CHANNEL_TYPE",id:"DICT_REPORT_CHANNEL_TYPE",children:a.state.DICT_REPORT_CHANNEL_TYPE.map((function(e,t){return Object(D.jsx)(qt,{optionItem:e,channel_type_id:i},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsx)("br",{}),Object(D.jsx)("div",{className:"reportCoverBtn",children:Object(D.jsx)("button",{className:"btn btn-secondary",onClick:a.saveReport,children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})})]})}))]})}}))},a.closePopupError=function(){a.setState({isShowPopupError:!1})},a.closePopupErrorSave=function(){a.setState({isShowPopupErrorSave:!1})},a.activeOperation=function(e,t){var n;return e.map((function(e,a){e.operation==t&&(n=e.name)})),n},a.onChangeAutocompleteInput=function(e){var t=e.target.value;console.log(t),a.setState({InputDICT_MCC:t}),""!=t&&a.requestDICT_MCC(a.props.store.userState.token,t,!0)},a.onClickAutocompleteInput=function(e){var t=e.target.value;console.log(t),a.setState({isShowBlockSelectDICT_MCC:!0})},a.onClickAutocompleteInputRes=function(){a.setState({mcc_code:null,isShowBlockSelectDICT_MCC:!0,isShowInputResDICT_MCC:!1,isShowInputDICT_MCC:!0})},a.onBlurBlockSelect=function(){a.setState({isShowBlockSelectDICT_MCC:!1})},a.onClickBlockSelectItem=function(e){var t=e.currentTarget.getAttribute("value");if(""!=t){if(t!=a.state.InputDICT_MCC){a.requestDICT_MCC(a.props.store.userState.token,t,!1);var n=a.state.AcquiringReportsCriteria;n.mcc_code=t,console.log(t),a.setState({AcquiringReportsCriteria:n,InputDICT_MCC:t,isShowBlockSelectDICT_MCC:!1,isShowInputResDICT_MCC:!0,isShowInputDICT_MCC:!1})}a.setState({isShowBlockSelectDICT_MCC:!1})}},a.clickTest=function(e){},a.addMerchantName=function(e){var t=a.state.AcquiringReportsCriteria;t.merchant_id=e,a.setState({AcquiringReportsCriteria:t}),console.log(a.state.AcquiringReportsCriteria.tsp_name)},a.addTerminalName=function(e){console.log(e);var t=a.state.AcquiringReportsCriteria;t.terminal_id=e,console.log(t),a.setState({AcquiringReportsCriteria:t}),console.log(a.state.AcquiringReportsCriteria.tsp_name)},a.addTspName=function(e){var t=a.state.AcquiringReportsCriteria;t.tsp_id=e,a.setState({AcquiringReportsCriteria:t})},a.addBrandName=function(e){var t=a.state.AcquiringReportsCriteria;t.network_brand_id=e.brand_id,a.setState({AcquiringReportsCriteria:t})},a.addIdentCode=function(e){var t=a.state.AcquiringReportsCriteria;t.ident_code=e,a.setState({AcquiringReportsCriteria:t})},a.addClientID=function(e){var t=a.state.AcquiringReportsCriteria;t.tsp_id=e,a.setState({AcquiringReportsCriteria:t})},a.addMccCode=function(e){var t=a.state.AcquiringReportsCriteria;t.mcc_code=e,a.setState({AcquiringReportsCriteria:t})},a.handleSelect=function(e){var t,n=a.state.AcquiringReportsCriteria;t=0===e.length?0:e.map((function(e){return e.value})).join(","),n.payment_system_id=t,a.setState({AcquiringReportsCriteria:n})},a.state={DICT_INSTITUTION:null,isShowSelectDICT_INSTITUTION:!1,DICT_BRANCH:null,isDisableTVBV:!0,isShowSelectTVBV:!1,DICT_ACQUIRING_REPORTS:null,isShowSelectDICT_ACQUIRING_REPORTS:!1,DICT_ACQUIRING_TYPE:null,isShowSelectDICT_ACQUIRING_TYPE:!1,DICT_PAYMENT_SYSTEM:null,isShowSelectDICT_PAYMENT_SYSTEM:!1,DICT_TERMINAL_SYSTEM:null,isShowSelectDICT_MERCHANT_SYSTEM:!1,DICT_MERCHANT_SYSTEM:null,isShowSelectDICT_TERMINAL_SYSTEM:!1,DICT_REPORT_FORMAT:null,isShowSelectDICT_REPORT_FORMAT:!1,DICT_DATE_TYPE:null,isShowSelectDICT_DATE_TYPE:!1,AcquiringReportsCriteria:{institution_id:0,report_type_id:"REPORT_ACQ_DETAILED",date_from:"20211224",date_to:"20211224",date_type_id:1,format_type_id:1,terminal_type_id:1,no_transactions:0},date_from:null,date_to:null,date_type_id:1,institution_id:0,merchant_id:null,isInstitution_idValidation:!0,isMerchant_idValidation:!0,isTerminal_type_idValidation:!0,isDate_type_idValidation:!0,isDate_fromValidation:!0,isDate_month_Validation:!0,isDate_toValidation:!0,isForm_toValidation:!0,DICT_MCC_SYSTEM:null,isShowSelectDICT_MCC_SYSTEM:!1,DICT_MCC:null,InputDICT_MCC:null,isShowBlockSelectDICT_MCC:!1,isShowInputResDICT_MCC:!1,isShowInputDICT_MCC:!0,error_text:"\u0417\u0430\u043f\u043e\u0432\u043d\u0456\u0442\u044c, \u0431\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0434\u0430\u0442\u0438!",isSuccess:!1,merchant_error:"",no_transactions:!1},a.myRef=s.a.createRef(),a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.requestDICT_INSTITUTION(this.props.store.userState.token),this.requestDICT_ACQUIRING_REPORTS(this.props.store.userState.token),this.requestDICT_ACQUIRING_TYPE(this.props.store.userState.token),this.requestDICT_PAYMENT_SYSTEM(this.props.store.userState.token),this.requestDICT_REPORT_FORMAT(this.props.store.userState.token),this.requestDICT_DATE_TYPE(this.props.store.userState.token)}},{key:"componentWillUnmount",value:function(){window.addEventListener("mousedown",null)}},{key:"requestDICT_INSTITUTION",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_INSTITUTION",e.next=5,R.get("/api/Dictionary/DICT_INSTITUTION",{headers:{Token:"".concat(t)}}).then((function(e){if(1===e.data.Table.TableRows.length){var t=e.data.Table.TableRows[0].institution_id,a=n.state.AcquiringReportsCriteria;a.institution_id=t,n.setState({isShowSelectTVBV:!1,TSPReportSettingsSearchObj:a,AcquiringReportsCriteria:a,isInstitution_idValidation:!0,institution_id:t})}n.setState({DICT_INSTITUTION:e.data.Table.TableRows,isShowSelectDICT_INSTITUTION:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_BRANCH",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n){var a,s=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),a="/api/Dictionary/DICT_BRANCH/?param1=".concat(n),{param1:n},e.next=6,R.get(a,{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),s.setState({DICT_BRANCH:e.data.Table.TableRows,isShowSelectTVBV:!0,isDisableTVBV:!1}),s.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"requestDICT_REPORT_FORMAT",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_REPORT_FORMAT",e.next=5,R.get("/api/Dictionary/DICT_REPORT_FORMAT",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_REPORT_FORMAT:e.data.Table.TableRows,isShowSelectDICT_REPORT_FORMAT:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_REPORT_PERIOD_TYPE",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_REPORT_PERIOD_TYPE",e.next=5,R.get("/api/Dictionary/DICT_REPORT_PERIOD_TYPE",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_REPORT_PERIOD_TYPE:e.data.Table.TableRows,isShowDICT_REPORT_PERIOD_TYPE:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_ACQUIRING_REPORTS",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_ACQUIRING_REPORTS",e.next=5,R.get("/api/Dictionary/DICT_ACQUIRING_REPORTS",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_ACQUIRING_REPORTS:e.data.Table.TableRows,isShowSelectDICT_ACQUIRING_REPORTS:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_ACQUIRING_TYPE",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_ACQUIRING_TYPE",e.next=5,R.get("/api/Dictionary/DICT_ACQUIRING_TYPE",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_ACQUIRING_TYPE:e.data.Table.TableRows,isShowSelectDICT_ACQUIRING_TYPE:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_PAYMENT_SYSTEM",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_PAYMENT_SYSTEM",e.next=5,R.get("/api/Dictionary/DICT_PAYMENT_SYSTEM",{headers:{Token:"".concat(t)}}).then((function(e){n.setState({DICT_PAYMENT_SYSTEM:e.data.Table.TableRows.map((function(e){return{value:e.payment_system_id,label:e.payment_system_name}})),isShowSelectDICT_PAYMENT_SYSTEM:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_MERCHANT_SYSTEM",value:function(){var e=Object(C.a)(f.a.mark((function e(){var t,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Dictionary/QueryMerchant",t={institution_id:+this.state.institution_id,merchant_id:+this.state.merchant_id||0},this.state.AcquiringReportsCriteria.tsp_id?t.client_id=+this.state.AcquiringReportsCriteria.tsp_id:this.state.AcquiringReportsCriteria.ident_code?t.client_id=+this.state.AcquiringReportsCriteria.ident_code:t.client_id=0,e.next=6,R.post("/api/Dictionary/QueryMerchant",t,{headers:{Token:"".concat(this.props.store.userState.token)}}).then((function(e){console.log(e.data),n.setState({DICT_MERCHANT_SYSTEM:e.data.merchant_list.TableRows,isShowSelectDICT_MERCHANT_SYSTEM:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"requestDICT_TERMINAL_SYSTEM",value:function(){var e=Object(C.a)(f.a.mark((function e(){var t,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Dictionary/QueryMCC",t={institution_id:+this.state.institution_id,merchant_id:+this.state.merchant_id||0},this.state.AcquiringReportsCriteria.tsp_id?t.client_id=+this.state.AcquiringReportsCriteria.tsp_id:this.state.AcquiringReportsCriteria.ident_code?t.client_id=+this.state.AcquiringReportsCriteria.ident_code:t.client_id=0,e.next=6,R.post("/api/Dictionary/QueryMCC",t,{headers:{Token:"".concat(this.props.store.userState.token)}}).then((function(e){0!==e.data.record_count&&n.setState({DICT_TERMINAL_SYSTEM:e.data.Table.TableRows,DICT_MCC_SYSTEM:e.data.Table.TableRows,isShowSelectDICT_TERMINAL_SYSTEM:!0,isShowSelectDICT_MCC_SYSTEM:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"requestDICT_DATE_TYPE",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_DATE_TYPE",e.next=5,R.get("/api/Dictionary/DICT_DATE_TYPE",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_DATE_TYPE:e.data.Table.TableRows,isShowSelectDICT_DATE_TYPE:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_MCC_SYSTEM",value:function(){var e=Object(C.a)(f.a.mark((function e(){var t,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Dictionary/QueryMCC",t={terminal_id:+this.state.AcquiringReportsCriteria.tsp_id,merchant_id:+this.state.merchant_id||0},this.state.AcquiringReportsCriteria.ident_code?t.client_id=+this.state.AcquiringReportsCriteria.ident_code:t.client_id=0,e.next=6,R.post("/api/Dictionary/QueryMCC",t,{headers:{Token:"".concat(this.props.store.userState.token)}}).then((function(e){n.setState({DICT_TERMINAL_SYSTEM:e.data.mcc_list.TableRows,isShowSelectDICT_MCC_SYSTEM:!0,DICT_MCC_SYSTEM:e.data.Table.TableRows}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"requestReports_Acquiring",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Reports/Acquiring",e.next=4,R.post("/api/Reports/Acquiring",n,{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(e){window.location.href="/dashboard/REPORTS_ACQUIRING_MONITOR"})).catch((function(e){console.log(e.response)}));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"sendOptionToServer",value:function(){this.state.isDate_fromValidation&&this.state.isDate_toValidation&&this.state.isForm_toValidation&&this.state.isDate_month_Validation&&(this.state.AcquiringReportsCriteria.no_transactions=this.state.no_transactions?1:0,this.requestReports_Acquiring(this.props.store.userState.token,this.state.AcquiringReportsCriteria))}},{key:"handleCheckId",value:function(){var e=this;this.checkMerchantID().then((function(t){0!==t.data.ErrorStatus.ErrorCode&&e.setState({merchant_error:t.data.ErrorStatus.ErrorMessage,isShowPopupError:!0})}))}},{key:"checkMerchantID",value:function(){var e=Object(C.a)(f.a.mark((function e(){var t,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Dictionary/QueryMerchant",t={institution_id:+this.state.institution_id,merchant_id:+this.state.merchant_id||0},this.state.tsp_id?t.client_id=+this.state.tsp_id:this.state.ident_code?t.client_id=+this.state.ident_code:t.client_id=0,e.next=6,R.post("/api/Dictionary/QueryMerchant",t,{headers:{Token:"".concat(this.props.store.userState.token),"Content-Type":"application/json"}}).then((function(e){return n.props.store.changeLoading(!1),e})).catch((function(e){console.log(e.response)}));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"requestDICT_MCC",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n,a){var s,i=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),s="/api/Dictionary/DICT_MCC/?param1=".concat(n),console.log(s),e.next=6,R.get(s,{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),null==e.data.Table.TableRows?i.setState({DICT_MCC:[{mcc_code:"",mcc_name:"\u0417\u0430 \u0434\u0430\u043d\u0438\u043c \u043a\u043e\u0434\u043e\u043c \u043d\u0435\u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0436\u043e\u0434\u043d\u043e\u0433\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443"}]}):i.setState({DICT_MCC:e.data.Table.TableRows}),a?i.setState({isShowBlockSelectDICT_MCC:!0}):i.setState({isShowBlockSelectDICT_MCC:!1}),i.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(D.jsxs)("div",{className:"coverTable REPORT_aquiring REPORT_ACQ_DETAILED",children:[this.state.isSuccess?Object(D.jsxs)(U.a,{variant:"success",children:["\u0417\u0432\u0456\u0442 \u0412\u0438\u043f\u0438\u0441\u043a\u0430 \u043e\u043f\u0435\u0440\u0430\u0446\u0456\u0439 \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0441\u0444\u043e\u0440\u043c\u043e\u0432\u0430\u043d\u0430. \u041f\u0435\u0440\u0435\u0439\u0434\u0456\u0442\u044c \u043f\u043e"," ",Object(D.jsx)(U.a.Link,{href:"/dashboard/REPORTS_ACQUIRING_MONITOR",children:"\u043b\u0456\u043d\u043a\u0443"}),". \u0414\u043b\u044f \u043f\u0435\u0440\u0435\u0433\u043b\u044f\u0434\u0443 \u0437\u0432\u0456\u0442\u0430."]}):null,Object(D.jsxs)("div",{className:"headerTable",children:[Object(D.jsx)("div",{className:"titleTable",children:this.activeOperation(this.props.store.userState.OPERATIONS,this.props.store.location.pathname.substr(11))}),Object(D.jsx)("div",{className:"optionBlock"})]}),Object(D.jsx)("div",{className:"filter justify-content-between",children:Object(D.jsxs)("div",{className:"coverInput col-5",children:[Object(D.jsx)("label",{htmlFor:"DICT_INSTITUTION",children:"\u0420\u0423 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430"}),Object(D.jsx)("select",{onChange:this.selectDICT_INSTITUTION,apiName:"institution_id",id:"dropdown-basic-button",className:"".concat(this.state.isInstitution_idValidation?"":"validError"," form-select"),title:"\u0420\u0435\u0433\u0456\u043e\u043d\u0430\u043b\u044c\u043d\u0456 \u0443\u043f\u0440\u0430\u0432\u043b\u0456\u043d\u043d\u044f",children:this.state.isShowSelectDICT_INSTITUTION?this.state.DICT_INSTITUTION.map((function(e,t){return Object(D.jsx)(kt,{optionItem:e},t)})):Object(D.jsx)(D.Fragment,{})}),Object(D.jsx)("p",{className:"error",children:this.state.isInstitution_idValidation?null:this.state.error_text}),Object(D.jsxs)("div",{className:"coverInput col-12",children:[Object(D.jsx)("div",{className:"coverInput col-12",children:Object(D.jsxs)("div",{className:"coverDate",children:[Object(D.jsx)("label",{htmlFor:"date_type_id",children:"\u0414\u0430\u0442\u0430 \u0437\u0432\u0456\u0442\u0443"}),Object(D.jsx)("select",{onChange:this.changeInput,apiName:"date_type_id",id:"date_type_id",className:"".concat(this.state.isDate_type_idValidation?"":"validError"," form-select"),title:"DICT_DATE_TYPE",children:this.state.isShowSelectDICT_DATE_TYPE?this.state.DICT_DATE_TYPE.map((function(e,t){return Object(D.jsx)(At,{optionItem:e},t)})):null}),Object(D.jsx)("p",{className:"error",children:this.state.isDate_type_idValidation?null:this.state.error_text})]})}),Object(D.jsxs)("div",{className:"base-field",children:[Object(D.jsx)("label",{htmlFor:"base",style:{fontSize:"18px",cursor:"pointer"},children:"\u0437 \u043d\u0443\u043b\u044c\u043e\u0432\u0438\u043c\u0438 \u043e\u0431\u043e\u0440\u043e\u0442\u0430\u043c\u0438"}),Object(D.jsx)("input",{apiName:"base",id:"base",type:"checkbox",checked:this.state.no_transactions,style:{width:"15px",height:"15px"},onChange:function(){return e.setState({no_transactions:!e.state.no_transactions})}})]}),Object(D.jsxs)("div",{className:"coverInput col-11",children:[Object(D.jsx)("span",{children:"\u041f\u0435\u0440\u0456\u043e\u0434 \u0437\u0432\u0456\u0442\u0443"}),Object(D.jsxs)("div",{className:"row",children:[Object(D.jsxs)("div",{className:"coverDate col-6",children:[Object(D.jsx)("label",{htmlFor:"date_report_from",children:"\u0417"}),Object(D.jsx)("input",{onChange:this.changeInputDateReport_from,apiName:"date_from",className:"".concat(this.state.isDate_fromValidation&&this.state.isDate_month_Validation?"":"validError"," customInput form-control"),id:"date_from",type:"date"})]}),Object(D.jsxs)("div",{className:"coverDate col-6",children:[Object(D.jsx)("label",{htmlFor:"date_report_to",children:"\u041f\u043e"}),Object(D.jsx)("input",{onChange:this.changeInputDateReport_to,apiName:"date_to",className:"".concat(this.state.isDate_toValidation&&this.state.isDate_month_Validation?"":"validError"," customInput form-control"),id:"date_to",type:"date"})]})]}),Object(D.jsxs)("p",{className:"error",children:[this.state.isDate_fromValidation&&this.state.isDate_toValidation?null:"\u0417\u0430\u043f\u043e\u0432\u043d\u0456\u0442\u044c, \u0431\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0434\u0430\u0442\u0438!",this.state.isDate_month_Validation?null:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0438\u0439 \u0442\u0435\u0440\u043c\u0456\u043d 31 \u0434\u0435\u043d\u044c!"]})]})]})]})}),Object(D.jsx)("div",{className:"btnBlock",children:Object(D.jsx)("button",{className:"search btn btn-primary",onClick:this.search,children:"\u041f\u043e\u0431\u0443\u0434\u0443\u0432\u0430\u0442\u0438 \u0437\u0432\u0456\u0442"})}),this.state.isShowPopupError?Object(D.jsx)(D.Fragment,{children:Object(D.jsx)("div",{className:"coverPopupError",children:Object(D.jsxs)("div",{className:"innerBlock",children:[Object(D.jsx)("div",{className:"title alert alert-danger",children:"\u041d\u0435\u043c\u0430\u0454 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443 \u043f\u043e \u0434\u0430\u043d\u043e\u043c\u0443 \u043f\u043e\u0448\u0443\u043a\u0443"}),Object(D.jsx)("div",{className:"msg",children:this.state.merchant_error}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:this.closePopupError,children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"})]})})}):Object(D.jsx)(D.Fragment,{}),this.state.isShowPopupErrorSave?Object(D.jsx)(D.Fragment,{children:Object(D.jsx)("div",{className:"coverPopupError",children:Object(D.jsxs)("div",{className:"innerBlock",children:[Object(D.jsx)("div",{className:"title alert alert-primary",children:"\u0423\u043f\u04411 \u0421\u0442\u0430\u043b\u0430\u0441\u044f \u043f\u043e\u043c\u0438\u043b\u043a\u0430"}),Object(D.jsx)("div",{className:"msg",children:":("}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:this.closePopupErrorSave,children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"})]})})}):Object(D.jsx)(D.Fragment,{})]})}}]),n}(s.a.Component)),Ht=function(e){return Object(D.jsx)("option",{value:e.optionItem.institution_id,children:e.optionItem.institution_name})},Qt=function(e){return Object(D.jsx)("option",{value:e.optionItem.date_type_id,children:e.optionItem.date_type_name})},Gt=function(e){return Object(D.jsx)("option",{selected:e.optionItem.report_format_id==e.report_format_id?"selected":"",value:e.optionItem.report_format_id,children:e.optionItem.report_format_name})},Wt=function(e){return Object(D.jsx)("option",{selected:e.optionItem.report_period_type_id==e.report_period_type_id?"selected":"",value:e.optionItem.report_period_type_id,children:e.optionItem.report_period_type_name})},Kt=function(e){return Object(D.jsx)("option",{selected:e.optionItem.report_channel_type_id==e.channel_type_id?"selected":"",value:e.optionItem.report_channel_type_id,children:e.optionItem.report_channel_type_name})},Zt=function(e){return Object(D.jsx)("div",{className:"blockSelectItem",value:e.item.mcc_code,onClick:function(t){return e.onClickBlockSelectItem(t)},children:e.item.mcc_name})},zt=function(e){return Object(D.jsx)("div",{className:"blockSelectItem",value:e.item.merchant_id,name:e.item.merchant_id,onClick:function(t){return e.onClickBlockSelectItem(t)},children:e.item.merchant_id})},$t=function(e){return Object(D.jsx)("div",{className:"blockSelectItem",value:e.item.terminal_id,name:e.item.terminal_id,onClick:function(t){return e.onClickBlockSelectItem(t)},children:e.item.terminal_id})},Jt=function(e){return Object(D.jsxs)("div",{className:"blockSelectItem",value:e.item.client_id,name:e.item.client_name,"data-id":e.item.institution_id,onClick:function(t){return e.onClickBlockSelectItem(t)},children:[e.item.client_name," - ",e.item.institution_id]})},Xt=function(e){return Object(D.jsxs)("div",{className:"blockSelectItem",value:e.item.ident_code,onClick:function(t){return e.onClickBlockSelectItem(t)},"data-id":e.item.client_id,children:[e.item.ident_code," - ",e.item.institution_id]})},en=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).onChangeAutocompleteInput=function(e){var t=e.target.value;console.log("param",t),a.props.addTspName(Number(0)),a.setState({inputRequest:t,selected:!1}),""!=t&&t.length>=3&&a.request(a.props.token,t,!0)},a.onClickAutocompleteInput=function(e){var t=e.target.value;console.log(t),a.request(a.props.token,t,!0)},a.onBlurAutocompleteInput=function(e){var t=e.target.value;console.log(t)},a.onClickAutocompleteInputRes=function(){a.setState({inputResult:null,isShowBlockSelect:!1,isShowInputResult:!1,isShowInputRequest:!0})},a.onBlurBlockSelect=function(){a.setState({isShowBlockSelect:!1})},a.onClickBlockSelectItem=function(e){var t=e.currentTarget.getAttribute("value"),n=e.currentTarget.getAttribute("name"),s=e.currentTarget.getAttribute("data-id");""!=t&&(a.props.addTspName(t),t!=a.state.inputRequest&&(a.request(a.props.token,t,!1),a.setState({inputResult:"".concat(n," - ").concat(s),inputRequest:"".concat(n," - ").concat(s),isShowBlockSelect:!1,selected:!0})),a.setState({isShowBlockSelect:!1}))},a.state={data:null,inputRequest:"",inputResult:a.props.tsp_name,isShowBlockSelect:!1,isShowInputResult:!1,isShowInputRequest:!0,isLoading:!1,selected:!1},a.myRef=s.a.createRef(),a}return Object(c.a)(n,[{key:"componentWillUnmount",value:function(){window.addEventListener("mousedown",null)}},{key:"request",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n,a){var s,i,r=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),console.log(t),s="/api/Dictionary/QueryTSPGross",console.log(s),i={institution_id:this.props.institution_id,branch_id:this.props.branch_id,client_name:n},console.log(i),e.next=8,R.post(s,i,{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(e){console.log(e.data),null==e.data.tsp_list.TableRows?r.setState({data:[{client_name:"\u041d\u0435\u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0436\u043e\u0434\u043d\u043e\u0433\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443"}]}):r.setState({data:e.data.tsp_list.TableRows}),a?r.setState({isShowBlockSelect:!0}):r.setState({isShowBlockSelect:!1}),r.setState({isLoading:!1})})).catch((function(e){console.log(e.response)}));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(D.jsxs)("div",{className:"autocomplete",children:[Object(D.jsx)("input",{className:"".concat(this.props.isError?"":"validError "," ").concat(this.state.selected?"selected ":"").concat(this.state.isShowInputRequest?"":"dn ","form-control"),placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043f\u0435\u0440\u0448\u0456 \u0431\u0443\u043a\u0432\u0438...",type:"text",onBlur:this.onBlurAutocompleteInput,onChange:this.onChangeAutocompleteInput,onClick:function(t){return e.state.isShowBlockSelect?e.setState({isShowBlockSelect:!1}):e.onClickAutocompleteInput(t)},value:this.state.inputRequest}),Object(D.jsx)("input",{className:"".concat(this.state.selected?"selected ":"").concat(this.state.isShowInputResult?"":"dn ","form-control"),placeholder:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442",type:"text",value:this.state.inputResult,onClick:this.onClickAutocompleteInputRes}),Object(D.jsx)("div",{className:"".concat(this.state.isShowBlockSelect?"":"dn ","blockSelect"),onBlur:this.onBlurBlockSelect,ref:this.myRef,children:this.state.isShowBlockSelect&&null!=this.state.data?this.state.data.map((function(t,n){return Object(D.jsx)(Jt,{item:t,onClickBlockSelectItem:e.onClickBlockSelectItem},n)})):null}),this.state.isLoading?Object(D.jsx)("div",{className:"coverloader",children:Object(D.jsx)("div",{className:"loader"})}):null]})}}]),n}(s.a.Component),tn=function(e){return Object(D.jsx)("option",{className:"blockSelectItem",onClick:function(t){return e.onClickBlockSelectItem(t)},value:e.item.brand_id,name:e.item.brand_name,children:e.item.brand_name})},nn=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a,i;return Object(o.a)(this,n),(i=t.call(this,e)).onChangeAutocompleteInput=function(e){var t=e.target.value;i.setState({inputRequest:t,selected:!1}),t.length>2&&i.search(t)},i.onClickAutocompleteInput=function(e){var t=e.target.value;i.search(t)},i.onClickAutocompleteInputRes=function(){i.setState({inputResult:null,isShowBlockSelect:!0,isShowInputResult:!1,isShowInputRequest:!0})},i.onBlurBlockSelect=function(){i.setState({isShowBlockSelect:!1})},i.onClickBlockSelectItem=function(e){var t=e.currentTarget.getAttribute("value"),n=e.currentTarget.getAttribute("name");""!==t&&(i.props.addBrandName(i.state.data.filter((function(e){return e.brand_id===+t}))[0]),t!==i.state.inputRequest&&(i.search(t),i.setState({inputRequest:n,isShowBlockSelect:!1,selected:!0})),i.setState({isShowBlockSelect:!1}))},i.state=(a={data:null,inputRequest:"",inputResult:i.props.tsp_name,isShowBlockSelect:!1,isShowInputResult:!1,isShowInputRequest:!0,isLoading:!1,selected:!1},Object(B.a)(a,"data",null),Object(B.a)(a,"brand_arr",null),a),i.myRef=s.a.createRef(),i}return Object(c.a)(n,[{key:"request",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n){var a=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),"/api/Dictionary/DICT_NET_BRAND_GROSS",e.next=4,R.get("/api/Dictionary/DICT_NET_BRAND_GROSS",{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(e){null===e.data.Table.TableRows?a.setState({brand_arr:[]}):a.setState({data:e.data.Table.TableRows,brand_arr:e.data.Table.TableRows}),a.setState({isLoading:!1,isShowBlockSelect:!0})})).catch((function(e){console.log(e.response)}));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"search",value:function(e){this.setState({isShowBlockSelect:!0});var t=null!==this.state.data?this.state.data.filter((function(t){return t.brand_name.toString().toLowerCase().includes(e.toString().toLowerCase())})):null;null===t?this.setState({brand_arr:[{client_name:"\u041d\u0435\u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0436\u043e\u0434\u043d\u043e\u0433\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443"}]}):this.setState({brand_arr:t})}},{key:"componentDidUpdate",value:function(e,t,n){e.update!==this.props.update&&this.setState({inputRequest:""})}},{key:"render",value:function(){var e=this;return Object(D.jsxs)("div",{className:"autocomplete",children:[Object(D.jsx)("input",{className:"".concat(this.props.isError?"":"validError "," ").concat(this.state.selected?"selected ":"").concat(this.state.isShowInputRequest?"":"dn ","form-control merchant-input"),placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043d\u0430\u0437\u0432\u0443 \u043c\u0435\u0440\u0435\u0436\u0456...",type:"text",id:"brand_name_val",onBlur:this.props.onBlur,onChange:this.onChangeAutocompleteInput,onClick:function(){return e.state.isShowBlockSelect?e.setState({isShowBlockSelect:!1}):e.request(e.props.token,"",!1)},value:this.state.inputRequest}),Object(D.jsx)("div",{className:"".concat(this.state.isShowBlockSelect?"":"dn ","blockSelect"),ref:this.myRef,children:this.state.isShowBlockSelect&&null!=this.state.brand_arr?this.state.brand_arr.map((function(t,n){return Object(D.jsx)(tn,{item:t,onClickBlockSelectItem:e.onClickBlockSelectItem},n)})):Object(D.jsx)(D.Fragment,{})}),this.state.isLoading?Object(D.jsx)("div",{className:"coverloader",children:Object(D.jsx)("div",{className:"loader"})}):null]})}}]),n}(s.a.Component),an=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).onChangeAutocompleteInput=function(e){var t=e.target.value;a.props.addClientID(Number(0)),a.props.addIdentCode(Number(0)),a.setState({inputRequest:t,selected:!1}),""!=t&&t.length>=0&&a.request(a.props.token,t,!0)},a.onClickAutocompleteInput=function(e){var t=e.target.value;""!=t&&t.length>=3&&a.request(a.props.token,t,!0)},a.onBlurAutocompleteInput=function(e){var t=e.target.value;console.log(t)},a.onClickAutocompleteInputRes=function(){a.setState({inputRequest:a.state.inputResult,inputResult:null,isShowBlockSelect:!0,isShowInputResult:!1,isShowInputRequest:!0})},a.onBlurBlockSelect=function(){a.setState({isShowBlockSelect:!1})},a.onClickBlockSelectItem=function(e){if(e){var t=e.currentTarget.getAttribute("value"),n=a.state.data.filter((function(e){return e.ident_code.toString().includes(t)}))[0],s=void 0===n.client_id?e.currentTarget.getAttribute("name"):n.client_id;console.log(e.currentTarget.getAttribute("name"),s,"client_id"),""!=t&&(a.props.addIdentCode(Number(n.ident_code)),a.props.addClientID(Number(s)),a.setState({inputResult:"".concat(n.ident_code," - ").concat(n.institution_id),inputRequest:"".concat(n.ident_code," - ").concat(n.institution_id),isShowBlockSelect:!1,isShowInputRequest:!0,selected:!0}),a.setState({isShowBlockSelect:!1}))}},a.state={data:null,inputRequest:null,inputResult:a.props.ident_code,isShowBlockSelect:!1,isShowInputResult:!1,isShowInputRequest:!0,isLoading:!1,selected:!1},a.myRef=s.a.createRef(),a}return Object(c.a)(n,[{key:"componentWillUnmount",value:function(){window.addEventListener("mousedown",null)}},{key:"request",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n,a){var s,i,r=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),console.log(t),s="/api/Dictionary/QueryTSPGross ",console.log(s),i={institution_id:this.props.institution_id,branch_id:this.props.branch_id,ident_code:n},console.log(i),e.next=8,R.post(s,i,{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(e){console.log(e.data),null==e.data.tsp_list.TableRows?r.setState({data:[{ident_code:"\u041d\u0435\u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0436\u043e\u0434\u043d\u043e\u0433\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443"}]}):r.setState({data:e.data.tsp_list.TableRows}),a?r.setState({isShowBlockSelect:!0}):r.setState({isShowBlockSelect:!1}),r.setState({isLoading:!1})})).catch((function(e){console.log(e.response)}));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this;return Object(D.jsxs)("div",{className:"autocomplete",children:[Object(D.jsx)(W.a,(e={type:"text",maskChar:"",alwaysShowMask:"false",pattern:"[0-9]",className:"".concat(this.props.isError?"":"validError ").concat(this.state.selected?"selected ":"").concat(this.state.isShowInputRequest?"":"dn ","form-control"),placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0446\u0438\u0444\u0440\u0438..."},Object(B.a)(e,"type","text"),Object(B.a)(e,"onBlur",this.onClickBlockSelectItem),Object(B.a)(e,"onChange",this.onChangeAutocompleteInput),Object(B.a)(e,"onClick",(function(e){return t.state.isShowBlockSelect?t.setState({isShowBlockSelect:!1}):t.onClickAutocompleteInput(e)})),Object(B.a)(e,"value",this.state.inputRequest),e)),Object(D.jsx)("input",{className:"".concat(this.state.selected?"selected ":"").concat(this.state.isShowInputResult?"":"dn ","form-control"),placeholder:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442",type:"text",value:this.state.inputResult,onClick:this.onClickAutocompleteInputRes}),Object(D.jsx)("div",{className:"".concat(this.state.isShowBlockSelect?"":"dn ","blockSelect"),onBlur:this.onBlurBlockSelect,ref:this.myRef,children:this.state.isShowBlockSelect&&null!=this.state.data?this.state.data.map((function(e,n){return Object(D.jsx)(Xt,{item:e,onClickBlockSelectItem:t.onClickBlockSelectItem},n)})):Object(D.jsx)(D.Fragment,{})}),this.state.isLoading?Object(D.jsx)("div",{className:"coverloader",children:Object(D.jsx)("div",{className:"loader"})}):Object(D.jsx)(D.Fragment,{})]})}}]),n}(s.a.Component),sn=(s.a.Component,s.a.Component,s.a.Component,function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).selectDICT_INSTITUTION=function(e){var t=e.target.value,n=e.currentTarget.getAttribute("apiName"),s=a.state.AcquiringReportsCriteria;s[n]=t,""==t?(console.log(t),a.setState({isShowSelectTVBV:!0,TSPReportSettingsSearchObj:s,isInstitution_idValidation:!1})):a.setState({isShowSelectTVBV:!1,TSPReportSettingsSearchObj:s,AcquiringReportsCriteria:s,isInstitution_idValidation:!0,institution_id:t})},a.changeInputDateReport=function(e){var t=e.currentTarget.getAttribute("apiName"),n=e.target.value,s=a.state.AcquiringReportsCriteria;s[t]=a.formatDate(new Date(n)),a.setState({AcquiringReportsCriteria:s})},a.changeInputDateReport_from=function(e){var t=e.currentTarget.getAttribute("apiName"),n=e.target.value,s=a.state.AcquiringReportsCriteria;s[t]=a.formatDate(new Date(n)),""==n?a.setState({AcquiringReportsCriteria:s,isDate_fromValidation:!1}):a.setState({AcquiringReportsCriteria:s,isDate_fromValidation:!0,date_from:n})},a.changeInputDateReport_to=function(e){var t=e.currentTarget.getAttribute("apiName"),n=e.target.value,s=a.state.AcquiringReportsCriteria;s[t]=a.formatDate(new Date(n)),""==n?a.setState({AcquiringReportsCriteria:s,isDate_toValidation:!1}):a.setState({AcquiringReportsCriteria:s,isDate_toValidation:!0,date_to:n})},a.changeInputBase=function(e){var t=e.currentTarget.getAttribute("apiName"),n=e.target.value,s=a.state.AcquiringReportsCriteria;s[t]=n,a.setState({AcquiringReportsCriteria:s})},a.changeInput=function(e){var t=e.currentTarget.getAttribute("apiName"),n=e.target.value,s=a.state.AcquiringReportsCriteria;"format_type_id"==t||"mcc_code"==t||"payment_system_id"==t||"terminal_id"==t||"bank_branch_id"==t||"institution_id"==t?(console.log("inputValue: ",n),s[t]=n):"terminal_type_id"==t?(s[t]=n,""==n?(console.log(n),a.setState({AcquiringReportsCriteria:s,isTerminal_type_idValidation:!1})):a.setState({AcquiringReportsCriteria:s,isTerminal_type_idValidation:!0,terminal_type_id:n})):"merchant_id"==t?(s[t]=n,""==n?(console.log(n),a.setState({AcquiringReportsCriteria:s,isMerchant_idValidation:!1})):a.setState({AcquiringReportsCriteria:s,isMerchant_idValidation:!0,merchant_id:n})):"date_type_id"==t?(s[t]=Number(n),""==n?(console.log(n),a.setState({AcquiringReportsCriteria:s,isDate_type_idValidation:!1})):a.setState({AcquiringReportsCriteria:s,isDate_type_idValidation:!0,date_type_id:n})):s[t]=n,console.log(s),a.setState({AcquiringReportsCriteria:s}),console.log(a.state),console.log("here:",a.state.AcquiringReportsCriteria)},a.formatDate=function(e){var t=e.getDate(),n=("0"+(e.getMonth()+1)).slice(-2);return t.toString().length<2&&(t="0"+t),e.getFullYear()+n+t},a.search=function(){a.defineValidationInputs()},a.defineValidationInputs=function(){var e=new Date(a.state.date_from),t=new Date(a.state.date_to),n=Math.abs(t-e),s=Math.ceil(n/864e5);null!=a.state.date_type_id&&""!=a.state.date_type_id||a.setState({isDate_type_idValidation:!1}),null!=a.state.date_from&&""!=a.state.date_from||a.setState({isDate_fromValidation:!1}),null!==a.state.date_to&&""!==a.state.date_to||a.setState({isDate_toValidation:!1}),s>31&&a.setState({isDate_month_Validation:!1}),0==a.state.AcquiringReportsCriteria.tsp_id&&0==a.state.AcquiringReportsCriteria.network_brand_id&&0==a.state.AcquiringReportsCriteria.ident_code?a.setState({isForm_toValidation:!1}):a.setState({isForm_toValidation:!0}),a.setState({},(function(){return a.sendOptionToServer()}))},a.Tsp_list=function(e){return console.log(e),e.map((function(e,t){return console.log(e),Object(D.jsx)("li",{className:"dropdownMenuItem",children:Object(D.jsxs)("p",{children:[Object(D.jsx)("input",{name:"tsp_list",id:e.tsp_name,type:"radio",onClick:a.itemTsp,value:e.tsp_id})," ",e.tsp_name]})})}))},a.itemTsp=function(e){var t=e.target.value;console.log(t),console.log(a.state),a.state.settings.map((function(e,n){e.tsp_id==t&&(null==e.main_settings?a.setState({type_acquiring:2,report_format_id:1,report_period_type_id:1,channel_type_id:1,file_name_mask:""}):e.main_settings.length&&(console.log(e.main_settings[0].acquiring_type_id),a.setState({type_acquiring:e.main_settings[0].acquiring_type_id,report_format_id:e.main_settings[0].report_format_id,report_period_type_id:e.main_settings[0].report_period_type_id,channel_type_id:e.main_settings[0].channel_type_id,file_name_mask:e.main_settings[0].file_name_mask})))})),a.setState({currentTsp:Number(t),TSPReportSettingsSTD:null,isShowTypeAcquiring:!0}),a.requestDICT_REPORT_FORMAT(a.props.store.userState.token),a.requestDICT_REPORT_PERIOD_TYPE(a.props.store.userState.token),a.requestDICT_REPORT_CHANNEL_TYPE(a.props.store.userState.token)},a.changeTypeAcquiring=function(e){var t=e.currentTarget.getAttribute("type_acquiring");console.log(t),a.state.settings.map((function(e,n){console.log(a.state.currentTsp),console.log(e.tsp_id),e.tsp_id==a.state.currentTsp&&e.main_settings.length>1&&(console.log(e.main_settings.length>1),e.main_settings.map((function(e,n){e.acquiring_type_id==t&&(console.log(e.acquiring_type_id==t),a.setState({type_acquiring:Number(t),report_format_id:e.report_format_id,report_period_type_id:e.report_period_type_id,channel_type_id:e.channel_type_id,file_name_mask:e.file_name_mask}))})))}))},a.openStandardReport=function(){a.requestTSPReportSettingsSTD(a.props.store.userState.token)},a.closePopupTable=function(){a.setState({isShowTableTSPReportSettingsSTD:!1})},a.changeReport_format_id=function(e){var t=e.target.value;console.log(t),a.setState({report_format_id:Number(t)})},a.changeReport_period_type_id=function(e){var t=e.target.value;console.log(t),a.setState({report_period_type_id:Number(t)})},a.changeChannel_type_id=function(e){var t=e.target.value;console.log(t),a.setState({channel_type_id:Number(t)})},a.changeFile_name_mask=function(e){var t=e.target.value;console.log(t),a.setState({file_name_mask:t})},a.saveReport=function(){var e={acquiring_type_id:a.state.type_acquiring,tsp_list:[{tsp_id:a.state.currentTsp}],main_settings:{acquiring_type_id:a.state.type_acquiring,report_format_id:a.state.report_format_id,report_period_type_id:a.state.report_period_type_id,channel_type_id:a.state.channel_type_id,file_name_mask:a.state.file_name_mask}};null!=a.state.TSPReportSettingsSTD&&(e.std_settings=a.state.TSPReportSettingsSTD),a.requestTSPReportSettingsSTD_SAVE(a.props.store.userState.token)},a.showReport=function(e){return console.log(e),a.state.settings.map((function(t,n){if(console.log(t),console.log(t.tsp_id),console.log(t.tsp_id==e),t.tsp_id==e){if(console.log(t.main_settings),null==t.main_settings){return Object(D.jsxs)("div",{className:"report border",children:[Object(D.jsx)("div",{className:"title",children:"\u041f\u0435\u0440\u0435\u043b\u0456\u043a \u043f\u043e\u043b\u0456\u0432 \u0437\u0432\u0456\u0442\u0443 \u0422\u0421\u041f"}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:a.openStandardReport,children:"\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:!0,children:"\u0420\u043e\u0437\u0448\u0438\u0440\u0435\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:!0,children:"\u0417\u0432\u0456\u0442 \u043f\u043e \u043e\u043f\u0435\u0440\u0430\u0446\u0456\u044f\u043c Installment"}),Object(D.jsx)("br",{}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_format",children:"\u0424\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0443"}),a.state.isShowREPORT_FORMAT?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_format_id,name:"DICT_REPORT_FORMAT",id:"DICT_REPORT_FORMAT",children:a.state.DICT_REPORT_FORMAT.map((function(e,t){return Object(D.jsx)(Gt,{optionItem:e,report_format_id:1},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"report_period",children:"\u041f\u0435\u0440\u0456\u043e\u0434 \u0437\u0432\u0456\u0442\u0443"}),a.state.isShowDICT_REPORT_PERIOD_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_period_type_id,name:"DICT_REPORT_PERIOD_TYPE",id:"DICT_REPORT_PERIOD_TYPE",children:a.state.DICT_REPORT_PERIOD_TYPE.map((function(e,t){return Object(D.jsx)(Wt,{optionItem:e,report_period_type_id:1},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_name_mask",children:"\u041c\u0430\u0441\u043a\u0430 \u043d\u0430\u0437\u0432\u0438 \u0444\u0430\u0439\u043b\u0443"}),Object(D.jsx)("input",{defaultValue:"",onChange:a.changeFile_name_mask,apiName:"file_name_mask",className:"customInput form-control",id:"file_name_mask",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441atalog",children:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433"}),Object(D.jsx)("input",{disabled:!0,onChange:a.changeInput,apiName:"\u0441atalog",className:"customInput form-control",id:"\u0441atalog",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441hannel",children:"\u041a\u0430\u043d\u0430\u043b"}),a.state.isShowDICT_REPORT_CHANNEL_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeChannel_type_id,name:"DICT_REPORT_CHANNEL_TYPE",id:"DICT_REPORT_CHANNEL_TYPE",children:a.state.DICT_REPORT_CHANNEL_TYPE.map((function(e,t){return Object(D.jsx)(Kt,{optionItem:e,channel_type_id:1},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsx)("div",{className:"reportCoverBtn",children:Object(D.jsx)("button",{className:"btn btn-secondary",onClick:a.saveReport,children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})})]})}if(1==t.main_settings.length)return t.main_settings.map((function(e,t){var n=e.report_period_type_id,s=e.report_format_id,i=e.channel_type_id,r=e.file_name_mask;return Object(D.jsxs)("div",{className:" border report",children:[Object(D.jsxs)("div",{className:"coverBtn border",children:[Object(D.jsx)("div",{className:"title",children:"\u0412\u0438\u0434 \u0435\u043a\u0432\u0430\u0440\u0438\u043d\u0433\u0443"}),Object(D.jsx)("button",{className:"btn btn-secondary",children:1==a.state.type_acquiring?"\u0424\u0456\u0437\u0438\u0447\u043d\u0438\u0439":"\u0406\u043d\u0442\u0435\u0440\u043d\u0435\u0442"})]}),Object(D.jsxs)("div",{className:"report border",children:[Object(D.jsx)("div",{className:"title",children:"\u041f\u0435\u0440\u0435\u043b\u0456\u043a \u043f\u043e\u043b\u0456\u0432 \u0437\u0432\u0456\u0442\u0443 \u0422\u0421\u041f"}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:a.openStandardReport,children:"\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:!0,children:"\u0420\u043e\u0437\u0448\u0438\u0440\u0435\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:!0,children:"\u0417\u0432\u0456\u0442 \u043f\u043e \u043e\u043f\u0435\u0440\u0430\u0446\u0456\u044f\u043c Installment"}),Object(D.jsx)("br",{}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_format",children:"\u0424\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0443"}),a.state.isShowREPORT_FORMAT?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_format_id,name:"DICT_REPORT_FORMAT",id:"DICT_REPORT_FORMAT",children:a.state.DICT_REPORT_FORMAT.map((function(e,t){return Object(D.jsx)(Gt,{optionItem:e,report_format_id:s},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"report_period",children:"\u041f\u0435\u0440\u0456\u043e\u0434 \u0437\u0432\u0456\u0442\u0443"}),a.state.isShowDICT_REPORT_PERIOD_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_period_type_id,name:"DICT_REPORT_PERIOD_TYPE",id:"DICT_REPORT_PERIOD_TYPE",children:a.state.DICT_REPORT_PERIOD_TYPE.map((function(e,t){return Object(D.jsx)(Wt,{optionItem:e,report_period_type_id:n},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_name_mask",children:"\u041c\u0430\u0441\u043a\u0430 \u043d\u0430\u0437\u0432\u0438 \u0444\u0430\u0439\u043b\u0443"}),Object(D.jsx)("input",{defaultValue:r,onChange:a.changeFile_name_mask,apiName:"file_name_mask",className:"customInput form-control",id:"file_name_mask",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441atalog",children:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433"}),Object(D.jsx)("input",{disabled:!0,onChange:a.changeInput,apiName:"\u0441atalog",className:"customInput form-control",id:"\u0441atalog",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441hannel",children:"\u041a\u0430\u043d\u0430\u043b"}),a.state.isShowDICT_REPORT_CHANNEL_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeChannel_type_id,name:"DICT_REPORT_CHANNEL_TYPE",id:"DICT_REPORT_CHANNEL_TYPE",children:a.state.DICT_REPORT_CHANNEL_TYPE.map((function(e,t){return Object(D.jsx)(Kt,{optionItem:e,channel_type_id:i},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsx)("div",{className:"reportCoverBtn",children:Object(D.jsx)("button",{className:"btn btn-secondary",onClick:a.saveReport,children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})})]})]})}));if(2==t.main_settings.length)return Object(D.jsxs)("div",{className:"",children:[Object(D.jsxs)("div",{className:"coverBtn border",children:[Object(D.jsx)("div",{className:"title",children:"\u0412\u0438\u0434 \u0435\u043a\u0432\u0430\u0440\u0438\u043d\u0433\u0443"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:1==a.state.type_acquiring?"disabled":"",onClick:a.changeTypeAcquiring,type_acquiring:1,children:"\u0424\u0456\u0437\u0438\u0447\u043d\u0438\u0439"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:2==a.state.type_acquiring?"disabled":"",onClick:a.changeTypeAcquiring,type_acquiring:2,children:"\u0406\u043d\u0442\u0435\u0440\u043d\u0435\u0442"})]}),t.main_settings.map((function(e,t){var n=e.report_period_type_id,s=e.report_format_id,i=e.channel_type_id,r=e.file_name_mask,o=e.acquiring_type_id,c=e.standard_report,l=e.extended_report,d=e.installment_report;return console.log(o),console.log(n),console.log(s),console.log(i),console.log(r),console.log(a.state.type_acquiring),Object(D.jsxs)("div",{className:"".concat(a.state.type_acquiring==o?"":"d-none"," border report"),children:[Object(D.jsx)("div",{className:"title",children:"\u041f\u0435\u0440\u0435\u043b\u0456\u043a \u043f\u043e\u043b\u0456\u0432 \u0437\u0432\u0456\u0442\u0443 \u0422\u0421\u041f"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:c?"":"disabled",onClick:a.openStandardReport,children:"\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:l?"":"disabled",children:"\u0420\u043e\u0437\u0448\u0438\u0440\u0435\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:d?"":"disabled",children:"\u0417\u0432\u0456\u0442 \u043f\u043e \u043e\u043f\u0435\u0440\u0430\u0446\u0456\u044f\u043c Installment"}),Object(D.jsx)("br",{}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_format",children:"\u0424\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0443"}),a.state.isShowREPORT_FORMAT?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_format_id,name:"DICT_REPORT_FORMAT",id:"DICT_REPORT_FORMAT",children:a.state.DICT_REPORT_FORMAT.map((function(e,t){return Object(D.jsx)(Gt,{optionItem:e,report_format_id:s},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"report_period",children:"\u041f\u0435\u0440\u0456\u043e\u0434 \u0437\u0432\u0456\u0442\u0443"}),a.state.isShowDICT_REPORT_PERIOD_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_period_type_id,name:"DICT_REPORT_PERIOD_TYPE",id:"DICT_REPORT_PERIOD_TYPE",children:a.state.DICT_REPORT_PERIOD_TYPE.map((function(e,t){return Object(D.jsx)(Wt,{optionItem:e,report_period_type_id:n},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_name_mask",children:"\u041c\u0430\u0441\u043a\u0430 \u043d\u0430\u0437\u0432\u0438 \u0444\u0430\u0439\u043b\u0443"}),Object(D.jsx)("input",{defaultValue:r,onChange:a.changeFile_name_mask,apiName:"file_name_mask",className:"customInput form-control",id:"file_name_mask",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441atalog",children:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433"}),Object(D.jsx)("input",{disabled:!0,onChange:a.changeInput,apiName:"\u0441atalog",className:"customInput form-control",id:"\u0441atalog",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441hannel",children:"\u041a\u0430\u043d\u0430\u043b"}),a.state.isShowDICT_REPORT_CHANNEL_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeChannel_type_id,name:"DICT_REPORT_CHANNEL_TYPE",id:"DICT_REPORT_CHANNEL_TYPE",children:a.state.DICT_REPORT_CHANNEL_TYPE.map((function(e,t){return Object(D.jsx)(Kt,{optionItem:e,channel_type_id:i},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsx)("br",{}),Object(D.jsx)("div",{className:"reportCoverBtn",children:Object(D.jsx)("button",{className:"btn btn-secondary",onClick:a.saveReport,children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})})]})}))]})}}))},a.closePopupError=function(){a.setState({isShowPopupError:!1})},a.closePopupErrorSave=function(){a.setState({isShowPopupErrorSave:!1})},a.activeOperation=function(e,t){var n;return e.map((function(e,a){e.operation==t&&(n=e.name)})),n},a.onChangeAutocompleteInput=function(e){var t=e.target.value;console.log(t),a.setState({InputDICT_MCC:t}),""!=t&&a.requestDICT_MCC(a.props.store.userState.token,t,!0)},a.onClickAutocompleteInput=function(e){var t=e.target.value;console.log(t),a.setState({isShowBlockSelectDICT_MCC:!0})},a.onClickAutocompleteInputRes=function(){a.setState({mcc_code:null,isShowBlockSelectDICT_MCC:!0,isShowInputResDICT_MCC:!1,isShowInputDICT_MCC:!0})},a.onBlurBlockSelect=function(){a.setState({isShowBlockSelectDICT_MCC:!1})},a.onClickBlockSelectItem=function(e){var t=e.currentTarget.getAttribute("value");if(""!=t){if(t!=a.state.InputDICT_MCC){a.requestDICT_MCC(a.props.store.userState.token,t,!1);var n=a.state.AcquiringReportsCriteria;n.mcc_code=t,console.log(t),a.setState({AcquiringReportsCriteria:n,InputDICT_MCC:t,isShowBlockSelectDICT_MCC:!1,isShowInputResDICT_MCC:!0,isShowInputDICT_MCC:!1})}a.setState({isShowBlockSelectDICT_MCC:!1})}},a.clickTest=function(e){},a.addMerchantName=function(e){var t=a.state.AcquiringReportsCriteria;t.merchant_id=e,a.setState({AcquiringReportsCriteria:t}),console.log(a.state.AcquiringReportsCriteria.tsp_name)},a.addTerminalName=function(e){console.log(e);var t=a.state.AcquiringReportsCriteria;t.terminal_id=e,console.log(t),a.setState({AcquiringReportsCriteria:t}),console.log(a.state.AcquiringReportsCriteria.tsp_name)},a.addTspName=function(e){var t=a.state.AcquiringReportsCriteria;t.tsp_id=e,a.setState({AcquiringReportsCriteria:t})},a.addBrandName=function(e){var t=a.state.AcquiringReportsCriteria;t.network_brand_id=e.brand_id,a.setState({AcquiringReportsCriteria:t})},a.addIdentCode=function(e){var t=a.state.AcquiringReportsCriteria;t.ident_code=e,a.setState({AcquiringReportsCriteria:t})},a.addClientID=function(e){var t=a.state.AcquiringReportsCriteria;t.tsp_id=e,a.setState({AcquiringReportsCriteria:t})},a.addMccCode=function(e){var t=a.state.AcquiringReportsCriteria;t.mcc_code=e,a.setState({AcquiringReportsCriteria:t})},a.handleSelect=function(e){var t,n=a.state.AcquiringReportsCriteria;t=0===e.length?0:e.map((function(e){return e.value})).join(","),n.payment_system_id=t,a.setState({AcquiringReportsCriteria:n})},a.state={DICT_INSTITUTION:null,isShowSelectDICT_INSTITUTION:!1,DICT_BRANCH:null,isDisableTVBV:!0,isShowSelectTVBV:!1,DICT_ACQUIRING_REPORTS:null,isShowSelectDICT_ACQUIRING_REPORTS:!1,DICT_ACQUIRING_TYPE:null,isShowSelectDICT_ACQUIRING_TYPE:!1,DICT_PAYMENT_SYSTEM:null,isShowSelectDICT_PAYMENT_SYSTEM:!1,DICT_TERMINAL_SYSTEM:null,isShowSelectDICT_MERCHANT_SYSTEM:!1,DICT_MERCHANT_SYSTEM:null,isShowSelectDICT_TERMINAL_SYSTEM:!1,DICT_REPORT_FORMAT:null,isShowSelectDICT_REPORT_FORMAT:!1,DICT_DATE_TYPE:null,isShowSelectDICT_DATE_TYPE:!1,AcquiringReportsCriteria:{institution_id:0,report_type_id:"REPORT_GROSS_COMM",network_brand_id:0,tsp_id:0,date_from:"20211224",date_to:"20211224",date_type_id:1,ident_code:0,terminal_type_id:1},date_from:null,date_to:null,date_type_id:1,institution_id:0,merchant_id:null,isInstitution_idValidation:!0,isMerchant_idValidation:!0,isTerminal_type_idValidation:!0,isDate_type_idValidation:!0,isDate_fromValidation:!0,isDate_month_Validation:!0,isDate_toValidation:!0,isForm_toValidation:!0,DICT_MCC_SYSTEM:null,isShowSelectDICT_MCC_SYSTEM:!1,DICT_MCC:null,InputDICT_MCC:null,isShowBlockSelectDICT_MCC:!1,isShowInputResDICT_MCC:!1,isShowInputDICT_MCC:!0,error_text:"\u0417\u0430\u043f\u043e\u0432\u043d\u0456\u0442\u044c, \u0431\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0434\u0430\u0442\u0438!",isSuccess:!1,merchant_error:""},a.myRef=s.a.createRef(),a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.requestDICT_INSTITUTION(this.props.store.userState.token),this.requestDICT_ACQUIRING_REPORTS(this.props.store.userState.token),this.requestDICT_ACQUIRING_TYPE(this.props.store.userState.token),this.requestDICT_PAYMENT_SYSTEM(this.props.store.userState.token),this.requestDICT_REPORT_FORMAT(this.props.store.userState.token),this.requestDICT_DATE_TYPE(this.props.store.userState.token)}},{key:"componentWillUnmount",value:function(){window.addEventListener("mousedown",null)}},{key:"requestDICT_INSTITUTION",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_INSTITUTION",e.next=5,R.get("/api/Dictionary/DICT_INSTITUTION",{headers:{Token:"".concat(t)}}).then((function(e){if(1===e.data.Table.TableRows.length){var t=e.data.Table.TableRows[0].institution_id,a=n.state.AcquiringReportsCriteria;a.institution_id=t,n.setState({isShowSelectTVBV:!1,TSPReportSettingsSearchObj:a,AcquiringReportsCriteria:a,isInstitution_idValidation:!0,institution_id:t})}n.setState({DICT_INSTITUTION:e.data.Table.TableRows,isShowSelectDICT_INSTITUTION:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_BRANCH",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n){var a,s=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),a="/api/Dictionary/DICT_BRANCH/?param1=".concat(n),{param1:n},e.next=6,R.get(a,{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),s.setState({DICT_BRANCH:e.data.Table.TableRows,isShowSelectTVBV:!0,isDisableTVBV:!1}),s.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"requestDICT_REPORT_FORMAT",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_REPORT_FORMAT",e.next=5,R.get("/api/Dictionary/DICT_REPORT_FORMAT",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_REPORT_FORMAT:e.data.Table.TableRows,isShowSelectDICT_REPORT_FORMAT:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_REPORT_PERIOD_TYPE",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_REPORT_PERIOD_TYPE",e.next=5,R.get("/api/Dictionary/DICT_REPORT_PERIOD_TYPE",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_REPORT_PERIOD_TYPE:e.data.Table.TableRows,isShowDICT_REPORT_PERIOD_TYPE:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_ACQUIRING_REPORTS",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_ACQUIRING_REPORTS",e.next=5,R.get("/api/Dictionary/DICT_ACQUIRING_REPORTS",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_ACQUIRING_REPORTS:e.data.Table.TableRows,isShowSelectDICT_ACQUIRING_REPORTS:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_ACQUIRING_TYPE",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_ACQUIRING_TYPE",e.next=5,R.get("/api/Dictionary/DICT_ACQUIRING_TYPE",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_ACQUIRING_TYPE:e.data.Table.TableRows,isShowSelectDICT_ACQUIRING_TYPE:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_PAYMENT_SYSTEM",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_PAYMENT_SYSTEM",e.next=5,R.get("/api/Dictionary/DICT_PAYMENT_SYSTEM",{headers:{Token:"".concat(t)}}).then((function(e){n.setState({DICT_PAYMENT_SYSTEM:e.data.Table.TableRows.map((function(e){return{value:e.payment_system_id,label:e.payment_system_name}})),isShowSelectDICT_PAYMENT_SYSTEM:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_MERCHANT_SYSTEM",value:function(){var e=Object(C.a)(f.a.mark((function e(){var t,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Dictionary/QueryMerchant",t={institution_id:+this.state.institution_id,merchant_id:+this.state.merchant_id||0},this.state.AcquiringReportsCriteria.tsp_id?t.client_id=+this.state.AcquiringReportsCriteria.tsp_id:this.state.AcquiringReportsCriteria.ident_code?t.client_id=+this.state.AcquiringReportsCriteria.ident_code:t.client_id=0,e.next=6,R.post("/api/Dictionary/QueryMerchant",t,{headers:{Token:"".concat(this.props.store.userState.token)}}).then((function(e){console.log(e.data),n.setState({DICT_MERCHANT_SYSTEM:e.data.merchant_list.TableRows,isShowSelectDICT_MERCHANT_SYSTEM:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"requestDICT_TERMINAL_SYSTEM",value:function(){var e=Object(C.a)(f.a.mark((function e(){var t,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Dictionary/QueryMCC",t={institution_id:+this.state.institution_id,merchant_id:+this.state.merchant_id||0},this.state.AcquiringReportsCriteria.tsp_id?t.client_id=+this.state.AcquiringReportsCriteria.tsp_id:this.state.AcquiringReportsCriteria.ident_code?t.client_id=+this.state.AcquiringReportsCriteria.ident_code:t.client_id=0,e.next=6,R.post("/api/Dictionary/QueryMCC",t,{headers:{Token:"".concat(this.props.store.userState.token)}}).then((function(e){0!==e.data.record_count&&n.setState({DICT_TERMINAL_SYSTEM:e.data.Table.TableRows,DICT_MCC_SYSTEM:e.data.Table.TableRows,isShowSelectDICT_TERMINAL_SYSTEM:!0,isShowSelectDICT_MCC_SYSTEM:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"requestDICT_DATE_TYPE",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_DATE_TYPE",e.next=5,R.get("/api/Dictionary/DICT_DATE_TYPE",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_DATE_TYPE:e.data.Table.TableRows,isShowSelectDICT_DATE_TYPE:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_MCC_SYSTEM",value:function(){var e=Object(C.a)(f.a.mark((function e(){var t,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Dictionary/QueryMCC",t={terminal_id:+this.state.AcquiringReportsCriteria.tsp_id,merchant_id:+this.state.merchant_id||0},this.state.AcquiringReportsCriteria.ident_code?t.client_id=+this.state.AcquiringReportsCriteria.ident_code:t.client_id=0,e.next=6,R.post("/api/Dictionary/QueryMCC",t,{headers:{Token:"".concat(this.props.store.userState.token)}}).then((function(e){n.setState({DICT_TERMINAL_SYSTEM:e.data.mcc_list.TableRows,isShowSelectDICT_MCC_SYSTEM:!0,DICT_MCC_SYSTEM:e.data.Table.TableRows}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"requestReports_Acquiring",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Reports/Acquiring",e.next=4,R.post("/api/Reports/Acquiring",n,{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(e){window.location.href="/dashboard/REPORTS_ACQUIRING_MONITOR"})).catch((function(e){console.log(e.response)}));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"sendOptionToServer",value:function(){this.state.isDate_fromValidation&&this.state.isDate_toValidation&&this.state.isForm_toValidation&&this.requestReports_Acquiring(this.props.store.userState.token,this.state.AcquiringReportsCriteria)}},{key:"handleCheckId",value:function(){var e=this;this.checkMerchantID().then((function(t){0!==t.data.ErrorStatus.ErrorCode&&e.setState({merchant_error:t.data.ErrorStatus.ErrorMessage,isShowPopupError:!0})}))}},{key:"checkMerchantID",value:function(){var e=Object(C.a)(f.a.mark((function e(){var t,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Dictionary/QueryMerchant",t={institution_id:+this.state.institution_id,merchant_id:+this.state.merchant_id||0},this.state.tsp_id?t.client_id=+this.state.tsp_id:this.state.ident_code?t.client_id=+this.state.ident_code:t.client_id=0,e.next=6,R.post("/api/Dictionary/QueryMerchant",t,{headers:{Token:"".concat(this.props.store.userState.token),"Content-Type":"application/json"}}).then((function(e){return n.props.store.changeLoading(!1),e})).catch((function(e){console.log(e.response)}));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"requestDICT_MCC",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n,a){var s,i=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),s="/api/Dictionary/DICT_MCC/?param1=".concat(n),console.log(s),e.next=6,R.get(s,{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),null==e.data.Table.TableRows?i.setState({DICT_MCC:[{mcc_code:"",mcc_name:"\u0417\u0430 \u0434\u0430\u043d\u0438\u043c \u043a\u043e\u0434\u043e\u043c \u043d\u0435\u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0436\u043e\u0434\u043d\u043e\u0433\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443"}]}):i.setState({DICT_MCC:e.data.Table.TableRows}),a?i.setState({isShowBlockSelectDICT_MCC:!0}):i.setState({isShowBlockSelectDICT_MCC:!1}),i.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(D.jsxs)("div",{className:"coverTable REPORT_aquiring REPORT_GROSS_COMM",children:[this.state.isSuccess?Object(D.jsxs)(U.a,{variant:"success",children:["\u0417\u0432\u0456\u0442 \u0412\u0438\u043f\u0438\u0441\u043a\u0430 \u043e\u043f\u0435\u0440\u0430\u0446\u0456\u0439 \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0441\u0444\u043e\u0440\u043c\u043e\u0432\u0430\u043d\u0430. \u041f\u0435\u0440\u0435\u0439\u0434\u0456\u0442\u044c \u043f\u043e"," ",Object(D.jsx)(U.a.Link,{href:"/dashboard/REPORTS_ACQUIRING_MONITOR",children:"\u043b\u0456\u043d\u043a\u0443"}),". \u0414\u043b\u044f \u043f\u0435\u0440\u0435\u0433\u043b\u044f\u0434\u0443 \u0437\u0432\u0456\u0442\u0430."]}):null,Object(D.jsxs)("div",{className:"headerTable",children:[Object(D.jsx)("div",{className:"titleTable",children:this.activeOperation(this.props.store.userState.OPERATIONS,this.props.store.location.pathname.substr(11))}),Object(D.jsx)("div",{className:"optionBlock"})]}),Object(D.jsxs)("div",{className:"filter justify-content-between",children:[Object(D.jsxs)("div",{className:"coverInput col-5",children:[Object(D.jsx)("label",{htmlFor:"DICT_INSTITUTION",children:"\u0420\u0423 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430"}),Object(D.jsx)("select",{onChange:this.selectDICT_INSTITUTION,apiName:"institution_id",id:"dropdown-basic-button",className:"".concat(this.state.isInstitution_idValidation?"":"validError"," form-select"),title:"\u0420\u0435\u0433\u0456\u043e\u043d\u0430\u043b\u044c\u043d\u0456 \u0443\u043f\u0440\u0430\u0432\u043b\u0456\u043d\u043d\u044f",children:this.state.isShowSelectDICT_INSTITUTION?this.state.DICT_INSTITUTION.map((function(e,t){return Object(D.jsx)(Ht,{optionItem:e},t)})):Object(D.jsx)(D.Fragment,{})}),Object(D.jsx)("p",{className:"error",children:this.state.isInstitution_idValidation?null:this.state.error_text}),Object(D.jsx)("label",{htmlFor:"INN",children:"\u0406\u041d\u041d/\u0404\u0414\u0420\u041f\u041e\u0423"}),Object(D.jsx)(an,{token:this.props.store.userState.token,institution_id:this.state.AcquiringReportsCriteria.institution_id,branch_id:this.state.AcquiringReportsCriteria.bank_branch_id,addIdentCode:this.addIdentCode,addClientID:this.addClientID,isError:this.state.isForm_toValidation,ident_code:this.state.AcquiringReportsCriteria.ident_code}),Object(D.jsx)("label",{htmlFor:"tsp_name",children:"\u041d\u0430\u0437\u0432\u0430 \u0422\u0421\u041f"}),Object(D.jsx)(en,{isError:this.state.isForm_toValidation,token:this.props.store.userState.token,institution_id:this.state.AcquiringReportsCriteria.institution_id,branch_id:this.state.AcquiringReportsCriteria.bank_branch_id,addTspName:this.addTspName,tsp_name:this.state.AcquiringReportsCriteria.tsp_id}),Object(D.jsx)("label",{htmlFor:"tsp_name",children:"\u041d\u0430\u0437\u0432\u0430 \u041c\u0435\u0440\u0435\u0436\u0456"}),Object(D.jsx)(nn,{token:this.props.store.userState.token,addBrandName:this.addBrandName,update:null,isError:this.state.isForm_toValidation}),Object(D.jsx)("p",{className:"error",children:this.state.isForm_toValidation?null:"\u0417\u0430\u043f\u043e\u0432\u043d\u0456\u0442\u044c, \u0431\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u043e\u0434\u043d\u0435 \u0437 3-\u0445 \u0437\u043d\u0430\u0447\u0435\u043d\u044c"})]}),Object(D.jsxs)("div",{className:"coverInput col-5",children:[Object(D.jsx)("div",{className:"coverInput col-11",children:Object(D.jsxs)("div",{className:"coverDate",children:[Object(D.jsx)("label",{htmlFor:"date_type_id",children:"\u0414\u0430\u0442\u0430 \u0437\u0432\u0456\u0442\u0443"}),Object(D.jsx)("select",{onChange:this.changeInput,apiName:"date_type_id",id:"date_type_id",className:"".concat(this.state.isDate_type_idValidation?"":"validError"," form-select"),title:"DICT_DATE_TYPE",children:this.state.isShowSelectDICT_DATE_TYPE?this.state.DICT_DATE_TYPE.map((function(e,t){return Object(D.jsx)(Qt,{optionItem:e},t)})):null}),Object(D.jsx)("p",{className:"error",children:this.state.isDate_type_idValidation?null:this.state.error_text})]})}),Object(D.jsxs)("div",{className:"coverInput col-11",children:[Object(D.jsx)("span",{children:"\u041f\u0435\u0440\u0456\u043e\u0434 \u0437\u0432\u0456\u0442\u0443"}),Object(D.jsxs)("div",{className:"row",children:[Object(D.jsxs)("div",{className:"coverDate col-6",children:[Object(D.jsx)("label",{htmlFor:"date_report_from",children:"\u0417"}),Object(D.jsx)("input",{onChange:this.changeInputDateReport_from,apiName:"date_from",className:"".concat(this.state.isDate_fromValidation&&this.state.isDate_month_Validation?"":"validError"," customInput form-control"),id:"date_from",type:"date"})]}),Object(D.jsxs)("div",{className:"coverDate col-6",children:[Object(D.jsx)("label",{htmlFor:"date_report_to",children:"\u041f\u043e"}),Object(D.jsx)("input",{onChange:this.changeInputDateReport_to,apiName:"date_to",className:"".concat(this.state.isDate_toValidation&&this.state.isDate_month_Validation?"":"validError"," customInput form-control"),id:"date_to",type:"date"})]})]}),Object(D.jsxs)("p",{className:"error",children:[this.state.isDate_fromValidation&&this.state.isDate_toValidation?null:"\u0417\u0430\u043f\u043e\u0432\u043d\u0456\u0442\u044c, \u0431\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0434\u0430\u0442\u0438!",this.state.isDate_month_Validation?null:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0438\u0439 \u0442\u0435\u0440\u043c\u0456\u043d 31 \u0434\u0435\u043d\u044c!"]})]})]})]}),Object(D.jsx)("div",{className:"btnBlock",children:Object(D.jsx)("button",{className:"search btn btn-primary",onClick:this.search,children:"\u041f\u043e\u0431\u0443\u0434\u0443\u0432\u0430\u0442\u0438 \u0437\u0432\u0456\u0442"})}),this.state.isShowPopupError?Object(D.jsx)(D.Fragment,{children:Object(D.jsx)("div",{className:"coverPopupError",children:Object(D.jsxs)("div",{className:"innerBlock",children:[Object(D.jsx)("div",{className:"title alert alert-danger",children:"\u041d\u0435\u043c\u0430\u0454 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443 \u043f\u043e \u0434\u0430\u043d\u043e\u043c\u0443 \u043f\u043e\u0448\u0443\u043a\u0443"}),Object(D.jsx)("div",{className:"msg",children:this.state.merchant_error}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:this.closePopupError,children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"})]})})}):Object(D.jsx)(D.Fragment,{}),this.state.isShowPopupErrorSave?Object(D.jsx)(D.Fragment,{children:Object(D.jsx)("div",{className:"coverPopupError",children:Object(D.jsxs)("div",{className:"innerBlock",children:[Object(D.jsx)("div",{className:"title alert alert-primary",children:"\u0423\u043f\u04411 \u0421\u0442\u0430\u043b\u0430\u0441\u044f \u043f\u043e\u043c\u0438\u043b\u043a\u0430"}),Object(D.jsx)("div",{className:"msg",children:":("}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:this.closePopupErrorSave,children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"})]})})}):Object(D.jsx)(D.Fragment,{})]})}}]),n}(s.a.Component)),rn=function(e){return Object(D.jsx)("option",{value:e.optionItem.institution_id,children:e.optionItem.institution_name})},on=function(e){return Object(D.jsx)("option",{value:e.optionItem.date_type_id,children:e.optionItem.date_type_name})},cn=function(e){return Object(D.jsx)("option",{selected:e.optionItem.report_format_id==e.report_format_id?"selected":"",value:e.optionItem.report_format_id,children:e.optionItem.report_format_name})},ln=function(e){return Object(D.jsx)("option",{selected:e.optionItem.report_period_type_id==e.report_period_type_id?"selected":"",value:e.optionItem.report_period_type_id,children:e.optionItem.report_period_type_name})},dn=function(e){return Object(D.jsx)("option",{selected:e.optionItem.report_channel_type_id==e.channel_type_id?"selected":"",value:e.optionItem.report_channel_type_id,children:e.optionItem.report_channel_type_name})},un=function(e){return Object(D.jsx)("div",{className:"blockSelectItem",value:e.item.mcc_code,onClick:function(t){return e.onClickBlockSelectItem(t)},children:e.item.mcc_name})},pn=function(e){return Object(D.jsx)("div",{className:"blockSelectItem",value:e.item.merchant_id,name:e.item.merchant_id,onClick:function(t){return e.onClickBlockSelectItem(t)},children:e.item.merchant_id})},_n=function(e){return Object(D.jsx)("div",{className:"blockSelectItem",value:e.item.terminal_id,name:e.item.terminal_id,onClick:function(t){return e.onClickBlockSelectItem(t)},children:e.item.terminal_id})},hn=function(e){return Object(D.jsxs)("div",{className:"blockSelectItem",value:e.item.client_id,name:e.item.client_name,"data-id":e.item.institution_id,onClick:function(t){return e.onClickBlockSelectItem(t)},children:[e.item.client_name," - ",e.item.institution_id]})},mn=function(e){return Object(D.jsxs)("div",{className:"blockSelectItem",value:e.item.ident_code,onClick:function(t){return e.onClickBlockSelectItem(t)},"data-id":e.item.client_id,children:[e.item.ident_code," - ",e.item.institution_id]})},bn=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).onChangeAutocompleteInput=function(e){var t=e.target.value;console.log("param",t),a.props.addTspName(Number(0)),a.setState({inputRequest:t,selected:!1}),""!=t&&t.length>=3&&a.request(a.props.token,t,!0)},a.onClickAutocompleteInput=function(e){var t=e.target.value;console.log(t),a.request(a.props.token,t,!0)},a.onBlurAutocompleteInput=function(e){var t=e.target.value;console.log(t)},a.onClickAutocompleteInputRes=function(){a.setState({inputResult:null,isShowBlockSelect:!1,isShowInputResult:!1,isShowInputRequest:!0})},a.onBlurBlockSelect=function(){a.setState({isShowBlockSelect:!1})},a.onClickBlockSelectItem=function(e){var t=e.currentTarget.getAttribute("value"),n=e.currentTarget.getAttribute("name"),s=e.currentTarget.getAttribute("data-id");""!=t&&(a.props.addTspName(t),t!=a.state.inputRequest&&(a.request(a.props.token,t,!1),a.setState({inputResult:"".concat(n," - ").concat(s),inputRequest:"".concat(n," - ").concat(s),isShowBlockSelect:!1,selected:!0})),a.setState({isShowBlockSelect:!1}))},a.state={data:null,inputRequest:"",inputResult:a.props.tsp_name,isShowBlockSelect:!1,isShowInputResult:!1,isShowInputRequest:!0,isLoading:!1,selected:!1},a.myRef=s.a.createRef(),a}return Object(c.a)(n,[{key:"componentWillUnmount",value:function(){window.addEventListener("mousedown",null)}},{key:"request",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n,a){var s,i,r=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),console.log(t),s="/api/Dictionary/QueryTSPGross",console.log(s),i={institution_id:this.props.institution_id,branch_id:this.props.branch_id,client_name:n},console.log(i),e.next=8,R.post(s,i,{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(e){console.log(e.data),null==e.data.tsp_list.TableRows?r.setState({data:[{client_name:"\u041d\u0435\u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0436\u043e\u0434\u043d\u043e\u0433\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443"}]}):r.setState({data:e.data.tsp_list.TableRows}),a?r.setState({isShowBlockSelect:!0}):r.setState({isShowBlockSelect:!1}),r.setState({isLoading:!1})})).catch((function(e){console.log(e.response)}));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(D.jsxs)("div",{className:"autocomplete",children:[Object(D.jsx)("input",{className:"".concat(this.props.isError?"":"validError "," ").concat(this.state.selected?"selected ":"").concat(this.state.isShowInputRequest?"":"dn ","form-control"),placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043f\u0435\u0440\u0448\u0456 \u0431\u0443\u043a\u0432\u0438...",type:"text",onBlur:this.onBlurAutocompleteInput,onChange:this.onChangeAutocompleteInput,onClick:function(t){return e.state.isShowBlockSelect?e.setState({isShowBlockSelect:!1}):e.onClickAutocompleteInput(t)},value:this.state.inputRequest}),Object(D.jsx)("input",{className:"".concat(this.state.selected?"selected ":"").concat(this.state.isShowInputResult?"":"dn ","form-control"),placeholder:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442",type:"text",value:this.state.inputResult,onClick:this.onClickAutocompleteInputRes}),Object(D.jsx)("div",{className:"".concat(this.state.isShowBlockSelect?"":"dn ","blockSelect"),onBlur:this.onBlurBlockSelect,ref:this.myRef,children:this.state.isShowBlockSelect&&null!=this.state.data?this.state.data.map((function(t,n){return Object(D.jsx)(hn,{item:t,onClickBlockSelectItem:e.onClickBlockSelectItem},n)})):null}),this.state.isLoading?Object(D.jsx)("div",{className:"coverloader",children:Object(D.jsx)("div",{className:"loader"})}):null]})}}]),n}(s.a.Component),jn=function(e){return Object(D.jsx)("option",{className:"blockSelectItem",onClick:function(t){return e.onClickBlockSelectItem(t)},value:e.item.brand_id,name:e.item.brand_name,children:e.item.brand_name})},Tn=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a,i;return Object(o.a)(this,n),(i=t.call(this,e)).onChangeAutocompleteInput=function(e){var t=e.target.value;i.setState({inputRequest:t,selected:!1}),t.length>2&&i.search(t)},i.onClickAutocompleteInput=function(e){var t=e.target.value;i.search(t)},i.onClickAutocompleteInputRes=function(){i.setState({inputResult:null,isShowBlockSelect:!0,isShowInputResult:!1,isShowInputRequest:!0})},i.onBlurBlockSelect=function(){i.setState({isShowBlockSelect:!1})},i.onClickBlockSelectItem=function(e){var t=e.currentTarget.getAttribute("value"),n=e.currentTarget.getAttribute("name");""!==t&&(i.props.addBrandName(i.state.data.filter((function(e){return e.brand_id===+t}))[0]),t!==i.state.inputRequest&&(i.search(t),i.setState({inputRequest:n,isShowBlockSelect:!1,selected:!0})),i.setState({isShowBlockSelect:!1}))},i.state=(a={data:null,inputRequest:"",inputResult:i.props.tsp_name,isShowBlockSelect:!1,isShowInputResult:!1,isShowInputRequest:!0,isLoading:!1,selected:!1},Object(B.a)(a,"data",null),Object(B.a)(a,"brand_arr",null),a),i.myRef=s.a.createRef(),i}return Object(c.a)(n,[{key:"request",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n){var a=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),"/api/Dictionary/DICT_NET_BRAND_GROSS",e.next=4,R.get("/api/Dictionary/DICT_NET_BRAND_GROSS",{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(e){null===e.data.Table.TableRows?a.setState({brand_arr:[]}):a.setState({data:e.data.Table.TableRows,brand_arr:e.data.Table.TableRows}),a.setState({isLoading:!1,isShowBlockSelect:!0})})).catch((function(e){console.log(e.response)}));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"search",value:function(e){this.setState({isShowBlockSelect:!0});var t=null!==this.state.data?this.state.data.filter((function(t){return t.brand_name.toString().toLowerCase().includes(e.toString().toLowerCase())})):null;null===t?this.setState({brand_arr:[{client_name:"\u041d\u0435\u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0436\u043e\u0434\u043d\u043e\u0433\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443"}]}):this.setState({brand_arr:t})}},{key:"componentDidUpdate",value:function(e,t,n){e.update!==this.props.update&&this.setState({inputRequest:""})}},{key:"render",value:function(){var e=this;return Object(D.jsxs)("div",{className:"autocomplete",children:[Object(D.jsx)("input",{className:"".concat(this.props.isError?"":"validError "," ").concat(this.state.selected?"selected ":"").concat(this.state.isShowInputRequest?"":"dn ","form-control merchant-input"),placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043d\u0430\u0437\u0432\u0443 \u043c\u0435\u0440\u0435\u0436\u0456...",type:"text",id:"brand_name_val",onBlur:this.props.onBlur,onChange:this.onChangeAutocompleteInput,onClick:function(){return e.state.isShowBlockSelect?e.setState({isShowBlockSelect:!1}):e.request(e.props.token,"",!1)},value:this.state.inputRequest}),Object(D.jsx)("div",{className:"".concat(this.state.isShowBlockSelect?"":"dn ","blockSelect"),ref:this.myRef,children:this.state.isShowBlockSelect&&null!=this.state.brand_arr?this.state.brand_arr.map((function(t,n){return Object(D.jsx)(jn,{item:t,onClickBlockSelectItem:e.onClickBlockSelectItem},n)})):Object(D.jsx)(D.Fragment,{})}),this.state.isLoading?Object(D.jsx)("div",{className:"coverloader",children:Object(D.jsx)("div",{className:"loader"})}):null]})}}]),n}(s.a.Component),gn=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).onChangeAutocompleteInput=function(e){var t=e.target.value;a.props.addClientID(Number(0)),a.props.addIdentCode(Number(0)),a.setState({inputRequest:t,selected:!1}),""!=t&&t.length>=0&&a.request(a.props.token,t,!0)},a.onClickAutocompleteInput=function(e){var t=e.target.value;""!=t&&t.length>=3&&a.request(a.props.token,t,!0)},a.onBlurAutocompleteInput=function(e){var t=e.target.value;console.log(t)},a.onClickAutocompleteInputRes=function(){a.setState({inputRequest:a.state.inputResult,inputResult:null,isShowBlockSelect:!0,isShowInputResult:!1,isShowInputRequest:!0})},a.onBlurBlockSelect=function(){a.setState({isShowBlockSelect:!1})},a.onClickBlockSelectItem=function(e){if(e){var t=e.currentTarget.getAttribute("value"),n=a.state.data.filter((function(e){return e.ident_code.toString().includes(t)}))[0],s=void 0===n.client_id?e.currentTarget.getAttribute("name"):n.client_id;console.log(e.currentTarget.getAttribute("name"),s,"client_id"),""!=t&&(a.props.addIdentCode(Number(n.ident_code)),a.props.addClientID(Number(s)),a.setState({inputResult:"".concat(n.ident_code," - ").concat(n.institution_id),inputRequest:"".concat(n.ident_code," - ").concat(n.institution_id),isShowBlockSelect:!1,isShowInputRequest:!0,selected:!0}),a.setState({isShowBlockSelect:!1}))}},a.state={data:null,inputRequest:null,inputResult:a.props.ident_code,isShowBlockSelect:!1,isShowInputResult:!1,isShowInputRequest:!0,isLoading:!1,selected:!1},a.myRef=s.a.createRef(),a}return Object(c.a)(n,[{key:"componentWillUnmount",value:function(){window.addEventListener("mousedown",null)}},{key:"request",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n,a){var s,i,r=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),console.log(t),s="/api/Dictionary/QueryTSPGross ",console.log(s),i={institution_id:this.props.institution_id,branch_id:this.props.branch_id,ident_code:n},console.log(i),e.next=8,R.post(s,i,{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(e){console.log(e.data),null==e.data.tsp_list.TableRows?r.setState({data:[{ident_code:"\u041d\u0435\u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0436\u043e\u0434\u043d\u043e\u0433\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443"}]}):r.setState({data:e.data.tsp_list.TableRows}),a?r.setState({isShowBlockSelect:!0}):r.setState({isShowBlockSelect:!1}),r.setState({isLoading:!1})})).catch((function(e){console.log(e.response)}));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this;return Object(D.jsxs)("div",{className:"autocomplete",children:[Object(D.jsx)(W.a,(e={type:"text",maskChar:"",alwaysShowMask:"false",pattern:"[0-9]",className:"".concat(this.props.isError?"":"validError ").concat(this.state.selected?"selected ":"").concat(this.state.isShowInputRequest?"":"dn ","form-control"),placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0446\u0438\u0444\u0440\u0438..."},Object(B.a)(e,"type","text"),Object(B.a)(e,"onBlur",this.onClickBlockSelectItem),Object(B.a)(e,"onChange",this.onChangeAutocompleteInput),Object(B.a)(e,"onClick",(function(e){return t.state.isShowBlockSelect?t.setState({isShowBlockSelect:!1}):t.onClickAutocompleteInput(e)})),Object(B.a)(e,"value",this.state.inputRequest),e)),Object(D.jsx)("input",{className:"".concat(this.state.selected?"selected ":"").concat(this.state.isShowInputResult?"":"dn ","form-control"),placeholder:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442",type:"text",value:this.state.inputResult,onClick:this.onClickAutocompleteInputRes}),Object(D.jsx)("div",{className:"".concat(this.state.isShowBlockSelect?"":"dn ","blockSelect"),onBlur:this.onBlurBlockSelect,ref:this.myRef,children:this.state.isShowBlockSelect&&null!=this.state.data?this.state.data.map((function(e,n){return Object(D.jsx)(mn,{item:e,onClickBlockSelectItem:t.onClickBlockSelectItem},n)})):Object(D.jsx)(D.Fragment,{})}),this.state.isLoading?Object(D.jsx)("div",{className:"coverloader",children:Object(D.jsx)("div",{className:"loader"})}):Object(D.jsx)(D.Fragment,{})]})}}]),n}(s.a.Component),On=(s.a.Component,s.a.Component,s.a.Component,function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).selectDICT_INSTITUTION=function(e){var t=e.target.value,n=e.currentTarget.getAttribute("apiName"),s=a.state.AcquiringReportsCriteria;s[n]=t,""==t?(console.log(t),a.setState({isShowSelectTVBV:!0,TSPReportSettingsSearchObj:s,isInstitution_idValidation:!1})):a.setState({isShowSelectTVBV:!1,TSPReportSettingsSearchObj:s,AcquiringReportsCriteria:s,isInstitution_idValidation:!0,institution_id:t})},a.changeInputDateReport=function(e){var t=e.currentTarget.getAttribute("apiName"),n=e.target.value,s=a.state.AcquiringReportsCriteria;s[t]=a.formatDate(new Date(n)),a.setState({AcquiringReportsCriteria:s})},a.changeInputDateReport_from=function(e){var t=e.currentTarget.getAttribute("apiName"),n=e.target.value,s=a.state.AcquiringReportsCriteria;s[t]=a.formatDate(new Date(n)),""==n?a.setState({AcquiringReportsCriteria:s,isDate_fromValidation:!1}):a.setState({AcquiringReportsCriteria:s,isDate_fromValidation:!0,date_from:n})},a.changeInputDateReport_to=function(e){var t=e.currentTarget.getAttribute("apiName"),n=e.target.value,s=a.state.AcquiringReportsCriteria;s[t]=a.formatDate(new Date(n)),""==n?a.setState({AcquiringReportsCriteria:s,isDate_toValidation:!1}):a.setState({AcquiringReportsCriteria:s,isDate_toValidation:!0,date_to:n})},a.changeInputBase=function(e){var t=e.currentTarget.getAttribute("apiName"),n=e.target.value,s=a.state.AcquiringReportsCriteria;s[t]=n,a.setState({AcquiringReportsCriteria:s})},a.changeInput=function(e){var t=e.currentTarget.getAttribute("apiName"),n=e.target.value,s=a.state.AcquiringReportsCriteria;"format_type_id"==t||"mcc_code"==t||"payment_system_id"==t||"terminal_id"==t||"bank_branch_id"==t||"institution_id"==t?(console.log("inputValue: ",n),s[t]=n):"terminal_type_id"==t?(s[t]=n,""==n?(console.log(n),a.setState({AcquiringReportsCriteria:s,isTerminal_type_idValidation:!1})):a.setState({AcquiringReportsCriteria:s,isTerminal_type_idValidation:!0,terminal_type_id:n})):"merchant_id"==t?(s[t]=n,""==n?(console.log(n),a.setState({AcquiringReportsCriteria:s,isMerchant_idValidation:!1})):a.setState({AcquiringReportsCriteria:s,isMerchant_idValidation:!0,merchant_id:n})):"date_type_id"==t?(s[t]=Number(n),""==n?(console.log(n),a.setState({AcquiringReportsCriteria:s,isDate_type_idValidation:!1})):a.setState({AcquiringReportsCriteria:s,isDate_type_idValidation:!0,date_type_id:n})):s[t]=n,console.log(s),a.setState({AcquiringReportsCriteria:s}),console.log(a.state),console.log("here:",a.state.AcquiringReportsCriteria)},a.formatDate=function(e){var t=e.getDate(),n=("0"+(e.getMonth()+1)).slice(-2);return t.toString().length<2&&(t="0"+t),e.getFullYear()+n+t},a.search=function(){a.defineValidationInputs()},a.defineValidationInputs=function(){var e=new Date(a.state.date_from),t=new Date(a.state.date_to),n=Math.abs(t-e),s=Math.ceil(n/864e5);null!=a.state.date_type_id&&""!=a.state.date_type_id||a.setState({isDate_type_idValidation:!1}),null!=a.state.date_from&&""!=a.state.date_from||a.setState({isDate_fromValidation:!1}),null!==a.state.date_to&&""!==a.state.date_to||a.setState({isDate_toValidation:!1}),s>31&&a.setState({isDate_month_Validation:!1}),0==a.state.AcquiringReportsCriteria.tsp_id&&0==a.state.AcquiringReportsCriteria.network_brand_id&&0==a.state.AcquiringReportsCriteria.ident_code?a.setState({isForm_toValidation:!1}):a.setState({isForm_toValidation:!0}),a.setState({},(function(){return a.sendOptionToServer()}))},a.Tsp_list=function(e){return console.log(e),e.map((function(e,t){return console.log(e),Object(D.jsx)("li",{className:"dropdownMenuItem",children:Object(D.jsxs)("p",{children:[Object(D.jsx)("input",{name:"tsp_list",id:e.tsp_name,type:"radio",onClick:a.itemTsp,value:e.tsp_id})," ",e.tsp_name]})})}))},a.itemTsp=function(e){var t=e.target.value;console.log(t),console.log(a.state),a.state.settings.map((function(e,n){e.tsp_id==t&&(null==e.main_settings?a.setState({type_acquiring:2,report_format_id:1,report_period_type_id:1,channel_type_id:1,file_name_mask:""}):e.main_settings.length&&(console.log(e.main_settings[0].acquiring_type_id),a.setState({type_acquiring:e.main_settings[0].acquiring_type_id,report_format_id:e.main_settings[0].report_format_id,report_period_type_id:e.main_settings[0].report_period_type_id,channel_type_id:e.main_settings[0].channel_type_id,file_name_mask:e.main_settings[0].file_name_mask})))})),a.setState({currentTsp:Number(t),TSPReportSettingsSTD:null,isShowTypeAcquiring:!0}),a.requestDICT_REPORT_FORMAT(a.props.store.userState.token),a.requestDICT_REPORT_PERIOD_TYPE(a.props.store.userState.token),a.requestDICT_REPORT_CHANNEL_TYPE(a.props.store.userState.token)},a.changeTypeAcquiring=function(e){var t=e.currentTarget.getAttribute("type_acquiring");console.log(t),a.state.settings.map((function(e,n){console.log(a.state.currentTsp),console.log(e.tsp_id),e.tsp_id==a.state.currentTsp&&e.main_settings.length>1&&(console.log(e.main_settings.length>1),e.main_settings.map((function(e,n){e.acquiring_type_id==t&&(console.log(e.acquiring_type_id==t),a.setState({type_acquiring:Number(t),report_format_id:e.report_format_id,report_period_type_id:e.report_period_type_id,channel_type_id:e.channel_type_id,file_name_mask:e.file_name_mask}))})))}))},a.openStandardReport=function(){a.requestTSPReportSettingsSTD(a.props.store.userState.token)},a.closePopupTable=function(){a.setState({isShowTableTSPReportSettingsSTD:!1})},a.changeReport_format_id=function(e){var t=e.target.value;console.log(t),a.setState({report_format_id:Number(t)})},a.changeReport_period_type_id=function(e){var t=e.target.value;console.log(t),a.setState({report_period_type_id:Number(t)})},a.changeChannel_type_id=function(e){var t=e.target.value;console.log(t),a.setState({channel_type_id:Number(t)})},a.changeFile_name_mask=function(e){var t=e.target.value;console.log(t),a.setState({file_name_mask:t})},a.saveReport=function(){var e={acquiring_type_id:a.state.type_acquiring,tsp_list:[{tsp_id:a.state.currentTsp}],main_settings:{acquiring_type_id:a.state.type_acquiring,report_format_id:a.state.report_format_id,report_period_type_id:a.state.report_period_type_id,channel_type_id:a.state.channel_type_id,file_name_mask:a.state.file_name_mask}};null!=a.state.TSPReportSettingsSTD&&(e.std_settings=a.state.TSPReportSettingsSTD),a.requestTSPReportSettingsSTD_SAVE(a.props.store.userState.token)},a.showReport=function(e){return console.log(e),a.state.settings.map((function(t,n){if(console.log(t),console.log(t.tsp_id),console.log(t.tsp_id==e),t.tsp_id==e){if(console.log(t.main_settings),null==t.main_settings){return Object(D.jsxs)("div",{className:"report border",children:[Object(D.jsx)("div",{className:"title",children:"\u041f\u0435\u0440\u0435\u043b\u0456\u043a \u043f\u043e\u043b\u0456\u0432 \u0437\u0432\u0456\u0442\u0443 \u0422\u0421\u041f"}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:a.openStandardReport,children:"\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:!0,children:"\u0420\u043e\u0437\u0448\u0438\u0440\u0435\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:!0,children:"\u0417\u0432\u0456\u0442 \u043f\u043e \u043e\u043f\u0435\u0440\u0430\u0446\u0456\u044f\u043c Installment"}),Object(D.jsx)("br",{}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_format",children:"\u0424\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0443"}),a.state.isShowREPORT_FORMAT?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_format_id,name:"DICT_REPORT_FORMAT",id:"DICT_REPORT_FORMAT",children:a.state.DICT_REPORT_FORMAT.map((function(e,t){return Object(D.jsx)(cn,{optionItem:e,report_format_id:1},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"report_period",children:"\u041f\u0435\u0440\u0456\u043e\u0434 \u0437\u0432\u0456\u0442\u0443"}),a.state.isShowDICT_REPORT_PERIOD_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_period_type_id,name:"DICT_REPORT_PERIOD_TYPE",id:"DICT_REPORT_PERIOD_TYPE",children:a.state.DICT_REPORT_PERIOD_TYPE.map((function(e,t){return Object(D.jsx)(ln,{optionItem:e,report_period_type_id:1},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_name_mask",children:"\u041c\u0430\u0441\u043a\u0430 \u043d\u0430\u0437\u0432\u0438 \u0444\u0430\u0439\u043b\u0443"}),Object(D.jsx)("input",{defaultValue:"",onChange:a.changeFile_name_mask,apiName:"file_name_mask",className:"customInput form-control",id:"file_name_mask",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441atalog",children:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433"}),Object(D.jsx)("input",{disabled:!0,onChange:a.changeInput,apiName:"\u0441atalog",className:"customInput form-control",id:"\u0441atalog",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441hannel",children:"\u041a\u0430\u043d\u0430\u043b"}),a.state.isShowDICT_REPORT_CHANNEL_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeChannel_type_id,name:"DICT_REPORT_CHANNEL_TYPE",id:"DICT_REPORT_CHANNEL_TYPE",children:a.state.DICT_REPORT_CHANNEL_TYPE.map((function(e,t){return Object(D.jsx)(dn,{optionItem:e,channel_type_id:1},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsx)("div",{className:"reportCoverBtn",children:Object(D.jsx)("button",{className:"btn btn-secondary",onClick:a.saveReport,children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})})]})}if(1==t.main_settings.length)return t.main_settings.map((function(e,t){var n=e.report_period_type_id,s=e.report_format_id,i=e.channel_type_id,r=e.file_name_mask;return Object(D.jsxs)("div",{className:" border report",children:[Object(D.jsxs)("div",{className:"coverBtn border",children:[Object(D.jsx)("div",{className:"title",children:"\u0412\u0438\u0434 \u0435\u043a\u0432\u0430\u0440\u0438\u043d\u0433\u0443"}),Object(D.jsx)("button",{className:"btn btn-secondary",children:1==a.state.type_acquiring?"\u0424\u0456\u0437\u0438\u0447\u043d\u0438\u0439":"\u0406\u043d\u0442\u0435\u0440\u043d\u0435\u0442"})]}),Object(D.jsxs)("div",{className:"report border",children:[Object(D.jsx)("div",{className:"title",children:"\u041f\u0435\u0440\u0435\u043b\u0456\u043a \u043f\u043e\u043b\u0456\u0432 \u0437\u0432\u0456\u0442\u0443 \u0422\u0421\u041f"}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:a.openStandardReport,children:"\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:!0,children:"\u0420\u043e\u0437\u0448\u0438\u0440\u0435\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:!0,children:"\u0417\u0432\u0456\u0442 \u043f\u043e \u043e\u043f\u0435\u0440\u0430\u0446\u0456\u044f\u043c Installment"}),Object(D.jsx)("br",{}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_format",children:"\u0424\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0443"}),a.state.isShowREPORT_FORMAT?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_format_id,name:"DICT_REPORT_FORMAT",id:"DICT_REPORT_FORMAT",children:a.state.DICT_REPORT_FORMAT.map((function(e,t){return Object(D.jsx)(cn,{optionItem:e,report_format_id:s},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"report_period",children:"\u041f\u0435\u0440\u0456\u043e\u0434 \u0437\u0432\u0456\u0442\u0443"}),a.state.isShowDICT_REPORT_PERIOD_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_period_type_id,name:"DICT_REPORT_PERIOD_TYPE",id:"DICT_REPORT_PERIOD_TYPE",children:a.state.DICT_REPORT_PERIOD_TYPE.map((function(e,t){return Object(D.jsx)(ln,{optionItem:e,report_period_type_id:n},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_name_mask",children:"\u041c\u0430\u0441\u043a\u0430 \u043d\u0430\u0437\u0432\u0438 \u0444\u0430\u0439\u043b\u0443"}),Object(D.jsx)("input",{defaultValue:r,onChange:a.changeFile_name_mask,apiName:"file_name_mask",className:"customInput form-control",id:"file_name_mask",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441atalog",children:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433"}),Object(D.jsx)("input",{disabled:!0,onChange:a.changeInput,apiName:"\u0441atalog",className:"customInput form-control",id:"\u0441atalog",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441hannel",children:"\u041a\u0430\u043d\u0430\u043b"}),a.state.isShowDICT_REPORT_CHANNEL_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeChannel_type_id,name:"DICT_REPORT_CHANNEL_TYPE",id:"DICT_REPORT_CHANNEL_TYPE",children:a.state.DICT_REPORT_CHANNEL_TYPE.map((function(e,t){return Object(D.jsx)(dn,{optionItem:e,channel_type_id:i},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsx)("div",{className:"reportCoverBtn",children:Object(D.jsx)("button",{className:"btn btn-secondary",onClick:a.saveReport,children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})})]})]})}));if(2==t.main_settings.length)return Object(D.jsxs)("div",{className:"",children:[Object(D.jsxs)("div",{className:"coverBtn border",children:[Object(D.jsx)("div",{className:"title",children:"\u0412\u0438\u0434 \u0435\u043a\u0432\u0430\u0440\u0438\u043d\u0433\u0443"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:1==a.state.type_acquiring?"disabled":"",onClick:a.changeTypeAcquiring,type_acquiring:1,children:"\u0424\u0456\u0437\u0438\u0447\u043d\u0438\u0439"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:2==a.state.type_acquiring?"disabled":"",onClick:a.changeTypeAcquiring,type_acquiring:2,children:"\u0406\u043d\u0442\u0435\u0440\u043d\u0435\u0442"})]}),t.main_settings.map((function(e,t){var n=e.report_period_type_id,s=e.report_format_id,i=e.channel_type_id,r=e.file_name_mask,o=e.acquiring_type_id,c=e.standard_report,l=e.extended_report,d=e.installment_report;return console.log(o),console.log(n),console.log(s),console.log(i),console.log(r),console.log(a.state.type_acquiring),Object(D.jsxs)("div",{className:"".concat(a.state.type_acquiring==o?"":"d-none"," border report"),children:[Object(D.jsx)("div",{className:"title",children:"\u041f\u0435\u0440\u0435\u043b\u0456\u043a \u043f\u043e\u043b\u0456\u0432 \u0437\u0432\u0456\u0442\u0443 \u0422\u0421\u041f"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:c?"":"disabled",onClick:a.openStandardReport,children:"\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:l?"":"disabled",children:"\u0420\u043e\u0437\u0448\u0438\u0440\u0435\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:d?"":"disabled",children:"\u0417\u0432\u0456\u0442 \u043f\u043e \u043e\u043f\u0435\u0440\u0430\u0446\u0456\u044f\u043c Installment"}),Object(D.jsx)("br",{}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_format",children:"\u0424\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0443"}),a.state.isShowREPORT_FORMAT?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_format_id,name:"DICT_REPORT_FORMAT",id:"DICT_REPORT_FORMAT",children:a.state.DICT_REPORT_FORMAT.map((function(e,t){return Object(D.jsx)(cn,{optionItem:e,report_format_id:s},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"report_period",children:"\u041f\u0435\u0440\u0456\u043e\u0434 \u0437\u0432\u0456\u0442\u0443"}),a.state.isShowDICT_REPORT_PERIOD_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_period_type_id,name:"DICT_REPORT_PERIOD_TYPE",id:"DICT_REPORT_PERIOD_TYPE",children:a.state.DICT_REPORT_PERIOD_TYPE.map((function(e,t){return Object(D.jsx)(ln,{optionItem:e,report_period_type_id:n},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_name_mask",children:"\u041c\u0430\u0441\u043a\u0430 \u043d\u0430\u0437\u0432\u0438 \u0444\u0430\u0439\u043b\u0443"}),Object(D.jsx)("input",{defaultValue:r,onChange:a.changeFile_name_mask,apiName:"file_name_mask",className:"customInput form-control",id:"file_name_mask",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441atalog",children:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433"}),Object(D.jsx)("input",{disabled:!0,onChange:a.changeInput,apiName:"\u0441atalog",className:"customInput form-control",id:"\u0441atalog",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441hannel",children:"\u041a\u0430\u043d\u0430\u043b"}),a.state.isShowDICT_REPORT_CHANNEL_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeChannel_type_id,name:"DICT_REPORT_CHANNEL_TYPE",id:"DICT_REPORT_CHANNEL_TYPE",children:a.state.DICT_REPORT_CHANNEL_TYPE.map((function(e,t){return Object(D.jsx)(dn,{optionItem:e,channel_type_id:i},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsx)("br",{}),Object(D.jsx)("div",{className:"reportCoverBtn",children:Object(D.jsx)("button",{className:"btn btn-secondary",onClick:a.saveReport,children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})})]})}))]})}}))},a.closePopupError=function(){a.setState({isShowPopupError:!1})},a.closePopupErrorSave=function(){a.setState({isShowPopupErrorSave:!1})},a.activeOperation=function(e,t){var n;return e.map((function(e,a){e.operation==t&&(n=e.name)})),n},a.onChangeAutocompleteInput=function(e){var t=e.target.value;console.log(t),a.setState({InputDICT_MCC:t}),""!=t&&a.requestDICT_MCC(a.props.store.userState.token,t,!0)},a.onClickAutocompleteInput=function(e){var t=e.target.value;console.log(t),a.setState({isShowBlockSelectDICT_MCC:!0})},a.onClickAutocompleteInputRes=function(){a.setState({mcc_code:null,isShowBlockSelectDICT_MCC:!0,isShowInputResDICT_MCC:!1,isShowInputDICT_MCC:!0})},a.onBlurBlockSelect=function(){a.setState({isShowBlockSelectDICT_MCC:!1})},a.onClickBlockSelectItem=function(e){var t=e.currentTarget.getAttribute("value");if(""!=t){if(t!=a.state.InputDICT_MCC){a.requestDICT_MCC(a.props.store.userState.token,t,!1);var n=a.state.AcquiringReportsCriteria;n.mcc_code=t,console.log(t),a.setState({AcquiringReportsCriteria:n,InputDICT_MCC:t,isShowBlockSelectDICT_MCC:!1,isShowInputResDICT_MCC:!0,isShowInputDICT_MCC:!1})}a.setState({isShowBlockSelectDICT_MCC:!1})}},a.clickTest=function(e){},a.addMerchantName=function(e){var t=a.state.AcquiringReportsCriteria;t.merchant_id=e,a.setState({AcquiringReportsCriteria:t}),console.log(a.state.AcquiringReportsCriteria.tsp_name)},a.addTerminalName=function(e){console.log(e);var t=a.state.AcquiringReportsCriteria;t.terminal_id=e,console.log(t),a.setState({AcquiringReportsCriteria:t}),console.log(a.state.AcquiringReportsCriteria.tsp_name)},a.addTspName=function(e){var t=a.state.AcquiringReportsCriteria;t.tsp_id=e,a.setState({AcquiringReportsCriteria:t})},a.addBrandName=function(e){var t=a.state.AcquiringReportsCriteria;t.network_brand_id=e.brand_id,a.setState({AcquiringReportsCriteria:t})},a.addIdentCode=function(e){var t=a.state.AcquiringReportsCriteria;t.ident_code=e,a.setState({AcquiringReportsCriteria:t})},a.addClientID=function(e){var t=a.state.AcquiringReportsCriteria;t.tsp_id=e,a.setState({AcquiringReportsCriteria:t})},a.addMccCode=function(e){var t=a.state.AcquiringReportsCriteria;t.mcc_code=e,a.setState({AcquiringReportsCriteria:t})},a.handleSelect=function(e){var t,n=a.state.AcquiringReportsCriteria;t=0===e.length?0:e.map((function(e){return e.value})).join(","),n.payment_system_id=t,a.setState({AcquiringReportsCriteria:n})},a.state={DICT_INSTITUTION:null,isShowSelectDICT_INSTITUTION:!1,DICT_BRANCH:null,isDisableTVBV:!0,isShowSelectTVBV:!1,DICT_ACQUIRING_REPORTS:null,isShowSelectDICT_ACQUIRING_REPORTS:!1,DICT_ACQUIRING_TYPE:null,isShowSelectDICT_ACQUIRING_TYPE:!1,DICT_PAYMENT_SYSTEM:null,isShowSelectDICT_PAYMENT_SYSTEM:!1,DICT_TERMINAL_SYSTEM:null,isShowSelectDICT_MERCHANT_SYSTEM:!1,DICT_MERCHANT_SYSTEM:null,isShowSelectDICT_TERMINAL_SYSTEM:!1,DICT_REPORT_FORMAT:null,isShowSelectDICT_REPORT_FORMAT:!1,DICT_DATE_TYPE:null,isShowSelectDICT_DATE_TYPE:!1,AcquiringReportsCriteria:{institution_id:0,report_type_id:"REPORT_GROSS_COMM",network_brand_id:0,tsp_id:0,date_from:"20211224",date_to:"20211224",date_type_id:1,ident_code:0,terminal_type_id:2},date_from:null,date_to:null,date_type_id:1,institution_id:0,merchant_id:null,isInstitution_idValidation:!0,isMerchant_idValidation:!0,isTerminal_type_idValidation:!0,isDate_type_idValidation:!0,isDate_fromValidation:!0,isDate_toValidation:!0,isForm_toValidation:!0,isDate_month_Validation:!0,DICT_MCC_SYSTEM:null,isShowSelectDICT_MCC_SYSTEM:!1,DICT_MCC:null,InputDICT_MCC:null,isShowBlockSelectDICT_MCC:!1,isShowInputResDICT_MCC:!1,isShowInputDICT_MCC:!0,error_text:"\u0417\u0430\u043f\u043e\u0432\u043d\u0456\u0442\u044c, \u0431\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0434\u0430\u0442\u0438!",isSuccess:!1,merchant_error:""},a.myRef=s.a.createRef(),a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.requestDICT_INSTITUTION(this.props.store.userState.token),this.requestDICT_ACQUIRING_REPORTS(this.props.store.userState.token),this.requestDICT_ACQUIRING_TYPE(this.props.store.userState.token),this.requestDICT_PAYMENT_SYSTEM(this.props.store.userState.token),this.requestDICT_REPORT_FORMAT(this.props.store.userState.token),this.requestDICT_DATE_TYPE(this.props.store.userState.token)}},{key:"componentWillUnmount",value:function(){window.addEventListener("mousedown",null)}},{key:"requestDICT_INSTITUTION",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_INSTITUTION",e.next=5,R.get("/api/Dictionary/DICT_INSTITUTION",{headers:{Token:"".concat(t)}}).then((function(e){if(1===e.data.Table.TableRows.length){var t=e.data.Table.TableRows[0].institution_id,a=n.state.AcquiringReportsCriteria;a.institution_id=t,n.setState({isShowSelectTVBV:!1,TSPReportSettingsSearchObj:a,AcquiringReportsCriteria:a,isInstitution_idValidation:!0,institution_id:t})}n.setState({DICT_INSTITUTION:e.data.Table.TableRows,isShowSelectDICT_INSTITUTION:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_BRANCH",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n){var a,s=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),a="/api/Dictionary/DICT_BRANCH/?param1=".concat(n),{param1:n},e.next=6,R.get(a,{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),s.setState({DICT_BRANCH:e.data.Table.TableRows,isShowSelectTVBV:!0,isDisableTVBV:!1}),s.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"requestDICT_REPORT_FORMAT",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_REPORT_FORMAT",e.next=5,R.get("/api/Dictionary/DICT_REPORT_FORMAT",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_REPORT_FORMAT:e.data.Table.TableRows,isShowSelectDICT_REPORT_FORMAT:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_REPORT_PERIOD_TYPE",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_REPORT_PERIOD_TYPE",e.next=5,R.get("/api/Dictionary/DICT_REPORT_PERIOD_TYPE",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_REPORT_PERIOD_TYPE:e.data.Table.TableRows,isShowDICT_REPORT_PERIOD_TYPE:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_ACQUIRING_REPORTS",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_ACQUIRING_REPORTS",e.next=5,R.get("/api/Dictionary/DICT_ACQUIRING_REPORTS",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_ACQUIRING_REPORTS:e.data.Table.TableRows,isShowSelectDICT_ACQUIRING_REPORTS:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_ACQUIRING_TYPE",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_ACQUIRING_TYPE",e.next=5,R.get("/api/Dictionary/DICT_ACQUIRING_TYPE",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_ACQUIRING_TYPE:e.data.Table.TableRows,isShowSelectDICT_ACQUIRING_TYPE:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_PAYMENT_SYSTEM",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_PAYMENT_SYSTEM",e.next=5,R.get("/api/Dictionary/DICT_PAYMENT_SYSTEM",{headers:{Token:"".concat(t)}}).then((function(e){n.setState({DICT_PAYMENT_SYSTEM:e.data.Table.TableRows.map((function(e){return{value:e.payment_system_id,label:e.payment_system_name}})),isShowSelectDICT_PAYMENT_SYSTEM:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_MERCHANT_SYSTEM",value:function(){var e=Object(C.a)(f.a.mark((function e(){var t,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Dictionary/QueryMerchant",t={institution_id:+this.state.institution_id,merchant_id:+this.state.merchant_id||0},this.state.AcquiringReportsCriteria.tsp_id?t.client_id=+this.state.AcquiringReportsCriteria.tsp_id:this.state.AcquiringReportsCriteria.ident_code?t.client_id=+this.state.AcquiringReportsCriteria.ident_code:t.client_id=0,e.next=6,R.post("/api/Dictionary/QueryMerchant",t,{headers:{Token:"".concat(this.props.store.userState.token)}}).then((function(e){console.log(e.data),n.setState({DICT_MERCHANT_SYSTEM:e.data.merchant_list.TableRows,isShowSelectDICT_MERCHANT_SYSTEM:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"requestDICT_TERMINAL_SYSTEM",value:function(){var e=Object(C.a)(f.a.mark((function e(){var t,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Dictionary/QueryMCC",t={institution_id:+this.state.institution_id,merchant_id:+this.state.merchant_id||0},this.state.AcquiringReportsCriteria.tsp_id?t.client_id=+this.state.AcquiringReportsCriteria.tsp_id:this.state.AcquiringReportsCriteria.ident_code?t.client_id=+this.state.AcquiringReportsCriteria.ident_code:t.client_id=0,e.next=6,R.post("/api/Dictionary/QueryMCC",t,{headers:{Token:"".concat(this.props.store.userState.token)}}).then((function(e){0!==e.data.record_count&&n.setState({DICT_TERMINAL_SYSTEM:e.data.Table.TableRows,DICT_MCC_SYSTEM:e.data.Table.TableRows,isShowSelectDICT_TERMINAL_SYSTEM:!0,isShowSelectDICT_MCC_SYSTEM:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"requestDICT_DATE_TYPE",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_DATE_TYPE",e.next=5,R.get("/api/Dictionary/DICT_DATE_TYPE",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_DATE_TYPE:e.data.Table.TableRows,isShowSelectDICT_DATE_TYPE:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_MCC_SYSTEM",value:function(){var e=Object(C.a)(f.a.mark((function e(){var t,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Dictionary/QueryMCC",t={terminal_id:+this.state.AcquiringReportsCriteria.tsp_id,merchant_id:+this.state.merchant_id||0},this.state.AcquiringReportsCriteria.ident_code?t.client_id=+this.state.AcquiringReportsCriteria.ident_code:t.client_id=0,e.next=6,R.post("/api/Dictionary/QueryMCC",t,{headers:{Token:"".concat(this.props.store.userState.token)}}).then((function(e){n.setState({DICT_TERMINAL_SYSTEM:e.data.mcc_list.TableRows,isShowSelectDICT_MCC_SYSTEM:!0,DICT_MCC_SYSTEM:e.data.Table.TableRows}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"requestReports_Acquiring",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Reports/Acquiring",e.next=4,R.post("/api/Reports/Acquiring",n,{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(e){window.location.href="/dashboard/REPORTS_ACQUIRING_MONITOR"})).catch((function(e){console.log(e.response)}));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"sendOptionToServer",value:function(){this.state.isDate_fromValidation&&this.state.isDate_toValidation&&this.state.isForm_toValidation&&this.state.isDate_month_Validation&&this.requestReports_Acquiring(this.props.store.userState.token,this.state.AcquiringReportsCriteria)}},{key:"handleCheckId",value:function(){var e=this;this.checkMerchantID().then((function(t){0!==t.data.ErrorStatus.ErrorCode&&e.setState({merchant_error:t.data.ErrorStatus.ErrorMessage,isShowPopupError:!0})}))}},{key:"checkMerchantID",value:function(){var e=Object(C.a)(f.a.mark((function e(){var t,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Dictionary/QueryMerchant",t={institution_id:+this.state.institution_id,merchant_id:+this.state.merchant_id||0},this.state.tsp_id?t.client_id=+this.state.tsp_id:this.state.ident_code?t.client_id=+this.state.ident_code:t.client_id=0,e.next=6,R.post("/api/Dictionary/QueryMerchant",t,{headers:{Token:"".concat(this.props.store.userState.token),"Content-Type":"application/json"}}).then((function(e){return n.props.store.changeLoading(!1),e})).catch((function(e){console.log(e.response)}));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"requestDICT_MCC",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n,a){var s,i=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),s="/api/Dictionary/DICT_MCC/?param1=".concat(n),console.log(s),e.next=6,R.get(s,{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),null==e.data.Table.TableRows?i.setState({DICT_MCC:[{mcc_code:"",mcc_name:"\u0417\u0430 \u0434\u0430\u043d\u0438\u043c \u043a\u043e\u0434\u043e\u043c \u043d\u0435\u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0436\u043e\u0434\u043d\u043e\u0433\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443"}]}):i.setState({DICT_MCC:e.data.Table.TableRows}),a?i.setState({isShowBlockSelectDICT_MCC:!0}):i.setState({isShowBlockSelectDICT_MCC:!1}),i.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(D.jsxs)("div",{className:"coverTable REPORT_aquiring REPORT_GROSS_COMM",children:[this.state.isSuccess?Object(D.jsxs)(U.a,{variant:"success",children:["\u0417\u0432\u0456\u0442 \u0412\u0438\u043f\u0438\u0441\u043a\u0430 \u043e\u043f\u0435\u0440\u0430\u0446\u0456\u0439 \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0441\u0444\u043e\u0440\u043c\u043e\u0432\u0430\u043d\u0430. \u041f\u0435\u0440\u0435\u0439\u0434\u0456\u0442\u044c \u043f\u043e"," ",Object(D.jsx)(U.a.Link,{href:"/dashboard/REPORTS_ACQUIRING_MONITOR",children:"\u043b\u0456\u043d\u043a\u0443"}),". \u0414\u043b\u044f \u043f\u0435\u0440\u0435\u0433\u043b\u044f\u0434\u0443 \u0437\u0432\u0456\u0442\u0430."]}):null,Object(D.jsxs)("div",{className:"headerTable",children:[Object(D.jsx)("div",{className:"titleTable",children:this.activeOperation(this.props.store.userState.OPERATIONS,this.props.store.location.pathname.substr(11))}),Object(D.jsx)("div",{className:"optionBlock"})]}),Object(D.jsxs)("div",{className:"filter justify-content-between",children:[Object(D.jsxs)("div",{className:"coverInput col-5",children:[Object(D.jsx)("label",{htmlFor:"DICT_INSTITUTION",children:"\u0420\u0423 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430"}),Object(D.jsx)("select",{onChange:this.selectDICT_INSTITUTION,apiName:"institution_id",id:"dropdown-basic-button",className:"".concat(this.state.isInstitution_idValidation?"":"validError"," form-select"),title:"\u0420\u0435\u0433\u0456\u043e\u043d\u0430\u043b\u044c\u043d\u0456 \u0443\u043f\u0440\u0430\u0432\u043b\u0456\u043d\u043d\u044f",children:this.state.isShowSelectDICT_INSTITUTION?this.state.DICT_INSTITUTION.map((function(e,t){return Object(D.jsx)(rn,{optionItem:e},t)})):Object(D.jsx)(D.Fragment,{})}),Object(D.jsx)("p",{className:"error",children:this.state.isInstitution_idValidation?null:this.state.error_text}),Object(D.jsx)("label",{htmlFor:"INN",children:"\u0406\u041d\u041d/\u0404\u0414\u0420\u041f\u041e\u0423"}),Object(D.jsx)(gn,{token:this.props.store.userState.token,institution_id:this.state.AcquiringReportsCriteria.institution_id,branch_id:this.state.AcquiringReportsCriteria.bank_branch_id,addIdentCode:this.addIdentCode,addClientID:this.addClientID,isError:this.state.isForm_toValidation,ident_code:this.state.AcquiringReportsCriteria.ident_code}),Object(D.jsx)("label",{htmlFor:"tsp_name",children:"\u041d\u0430\u0437\u0432\u0430 \u0422\u0421\u041f"}),Object(D.jsx)(bn,{isError:this.state.isForm_toValidation,token:this.props.store.userState.token,institution_id:this.state.AcquiringReportsCriteria.institution_id,branch_id:this.state.AcquiringReportsCriteria.bank_branch_id,addTspName:this.addTspName,tsp_name:this.state.AcquiringReportsCriteria.tsp_id}),Object(D.jsx)("label",{htmlFor:"tsp_name",children:"\u041d\u0430\u0437\u0432\u0430 \u041c\u0435\u0440\u0435\u0436\u0456"}),Object(D.jsx)(Tn,{token:this.props.store.userState.token,addBrandName:this.addBrandName,update:null,isError:this.state.isForm_toValidation}),Object(D.jsx)("p",{className:"error",children:this.state.isForm_toValidation?null:"\u0417\u0430\u043f\u043e\u0432\u043d\u0456\u0442\u044c, \u0431\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u043e\u0434\u043d\u0435 \u0437 3-\u0445 \u0437\u043d\u0430\u0447\u0435\u043d\u044c"})]}),Object(D.jsxs)("div",{className:"coverInput col-5",children:[Object(D.jsx)("div",{className:"coverInput col-11",children:Object(D.jsxs)("div",{className:"coverDate",children:[Object(D.jsx)("label",{htmlFor:"date_type_id",children:"\u0414\u0430\u0442\u0430 \u0437\u0432\u0456\u0442\u0443"}),Object(D.jsx)("select",{onChange:this.changeInput,apiName:"date_type_id",id:"date_type_id",className:"".concat(this.state.isDate_type_idValidation?"":"validError"," form-select"),title:"DICT_DATE_TYPE",children:this.state.isShowSelectDICT_DATE_TYPE?this.state.DICT_DATE_TYPE.map((function(e,t){return Object(D.jsx)(on,{optionItem:e},t)})):null}),Object(D.jsx)("p",{className:"error",children:this.state.isDate_type_idValidation?null:this.state.error_text})]})}),Object(D.jsxs)("div",{className:"coverInput col-11",children:[Object(D.jsx)("span",{children:"\u041f\u0435\u0440\u0456\u043e\u0434 \u0437\u0432\u0456\u0442\u0443"}),Object(D.jsxs)("div",{className:"row",children:[Object(D.jsxs)("div",{className:"coverDate col-6",children:[Object(D.jsx)("label",{htmlFor:"date_report_from",children:"\u0417"}),Object(D.jsx)("input",{onChange:this.changeInputDateReport_from,apiName:"date_from",className:"".concat(this.state.isDate_fromValidation&&this.state.isDate_month_Validation?"":"validError"," customInput form-control"),id:"date_from",type:"date"})]}),Object(D.jsxs)("div",{className:"coverDate col-6",children:[Object(D.jsx)("label",{htmlFor:"date_report_to",children:"\u041f\u043e"}),Object(D.jsx)("input",{onChange:this.changeInputDateReport_to,apiName:"date_to",className:"".concat(this.state.isDate_toValidation&&this.state.isDate_month_Validation?"":"validError"," customInput form-control"),id:"date_to",type:"date"})]})]}),Object(D.jsxs)("p",{className:"error",children:[this.state.isDate_fromValidation&&this.state.isDate_toValidation?null:"\u0417\u0430\u043f\u043e\u0432\u043d\u0456\u0442\u044c, \u0431\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0434\u0430\u0442\u0438!",this.state.isDate_month_Validation?null:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0438\u0439 \u0442\u0435\u0440\u043c\u0456\u043d 31 \u0434\u0435\u043d\u044c!"]})]})]})]}),Object(D.jsx)("div",{className:"btnBlock",children:Object(D.jsx)("button",{className:"search btn btn-primary",onClick:this.search,children:"\u041f\u043e\u0431\u0443\u0434\u0443\u0432\u0430\u0442\u0438 \u0437\u0432\u0456\u0442"})}),this.state.isShowPopupError?Object(D.jsx)(D.Fragment,{children:Object(D.jsx)("div",{className:"coverPopupError",children:Object(D.jsxs)("div",{className:"innerBlock",children:[Object(D.jsx)("div",{className:"title alert alert-danger",children:"\u041d\u0435\u043c\u0430\u0454 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443 \u043f\u043e \u0434\u0430\u043d\u043e\u043c\u0443 \u043f\u043e\u0448\u0443\u043a\u0443"}),Object(D.jsx)("div",{className:"msg",children:this.state.merchant_error}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:this.closePopupError,children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"})]})})}):Object(D.jsx)(D.Fragment,{}),this.state.isShowPopupErrorSave?Object(D.jsx)(D.Fragment,{children:Object(D.jsx)("div",{className:"coverPopupError",children:Object(D.jsxs)("div",{className:"innerBlock",children:[Object(D.jsx)("div",{className:"title alert alert-primary",children:"\u0423\u043f\u04411 \u0421\u0442\u0430\u043b\u0430\u0441\u044f \u043f\u043e\u043c\u0438\u043b\u043a\u0430"}),Object(D.jsx)("div",{className:"msg",children:":("}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:this.closePopupErrorSave,children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"})]})})}):Object(D.jsx)(D.Fragment,{})]})}}]),n}(s.a.Component)),Sn=n(56),In=function(e){return Object(D.jsx)("option",{value:e.optionItem.institution_id,children:e.optionItem.institution_name})},fn=function(e){return Object(D.jsx)("option",{value:e.optionItem.branch_id,children:e.optionItem.branch_name})},Cn=function(e){return Object(D.jsx)("option",{value:e.optionItem.mcc_code,children:e.optionItem.mcc_name})},Rn=function(e){return Object(D.jsx)("option",{value:e.optionItem.report_format_id,children:e.optionItem.report_format_name})},vn=function(e){return Object(D.jsx)("option",{value:e.optionItem.date_type_id,children:e.optionItem.date_type_name})},xn=function(e){return Object(D.jsx)("option",{selected:e.optionItem.report_format_id==e.report_format_id?"selected":"",value:e.optionItem.report_format_id,children:e.optionItem.report_format_name})},Nn=function(e){return Object(D.jsx)("option",{selected:e.optionItem.report_period_type_id==e.report_period_type_id?"selected":"",value:e.optionItem.report_period_type_id,children:e.optionItem.report_period_type_name})},Dn=function(e){return Object(D.jsx)("option",{selected:e.optionItem.report_channel_type_id==e.channel_type_id?"selected":"",value:e.optionItem.report_channel_type_id,children:e.optionItem.report_channel_type_name})},yn=function(e){return Object(D.jsx)("div",{className:"blockSelectItem",value:e.item.mcc_code,onClick:function(t){return e.onClickBlockSelectItem(t)},children:e.item.mcc_name})},En=function(e){return Object(D.jsx)("div",{className:"blockSelectItem",value:e.item.merchant_id,name:e.item.merchant_id,onClick:function(t){return e.onClickBlockSelectItem(t)},children:e.item.merchant_id})},kn=function(e){return Object(D.jsx)("div",{className:"blockSelectItem",value:e.item.terminal_id,name:e.item.terminal_id,onClick:function(t){return e.onClickBlockSelectItem(t)},children:e.item.terminal_id})},An=function(e){return Object(D.jsxs)("div",{className:"blockSelectItem",value:e.item.client_id,name:e.item.client_name,"data-id":e.item.institution_id,onClick:function(t){return e.onClickBlockSelectItem(t)},children:[e.item.client_name," - ",e.item.institution_id]})},wn=function(e){return Object(D.jsxs)("div",{className:"blockSelectItem",value:e.item.ident_code,onClick:function(t){return e.onClickBlockSelectItem(t)},"data-id":e.item.client_id,children:[e.item.ident_code," - ",e.item.institution_id]})},Pn=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).onChangeAutocompleteInput=function(e){var t=e.target.value;console.log("param",t),a.props.addTspName(Number(0)),a.setState({inputRequest:t,selected:!1}),""!=t&&t.length>=3&&a.request(a.props.token,t,!0)},a.onClickAutocompleteInput=function(e){var t=e.target.value;console.log(t),a.request(a.props.token,t,!0)},a.onBlurAutocompleteInput=function(e){var t=e.target.value;console.log(t)},a.onClickAutocompleteInputRes=function(){a.setState({inputResult:null,isShowBlockSelect:!1,isShowInputResult:!1,isShowInputRequest:!0})},a.onBlurBlockSelect=function(){a.setState({isShowBlockSelect:!1})},a.onClickBlockSelectItem=function(e){var t=e.currentTarget.getAttribute("value"),n=e.currentTarget.getAttribute("name"),s=e.currentTarget.getAttribute("data-id");""!=t&&(a.props.addTspName(t),t!=a.state.inputRequest&&(a.request(a.props.token,t,!1),a.setState({inputResult:"".concat(n," - ").concat(s),inputRequest:"".concat(n," - ").concat(s),isShowBlockSelect:!1,selected:!0})),a.setState({isShowBlockSelect:!1}))},a.state={data:null,inputRequest:"",inputResult:a.props.tsp_name,isShowBlockSelect:!1,isShowInputResult:!1,isShowInputRequest:!0,isLoading:!1,selected:!1},a.myRef=s.a.createRef(),a}return Object(c.a)(n,[{key:"componentWillUnmount",value:function(){window.addEventListener("mousedown",null)}},{key:"request",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n,a){var s,i,r=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),console.log(t),s="/api/Dictionary/QueryTSP",console.log(s),i={institution_id:this.props.institution_id,branch_id:this.props.branch_id,client_name:n},console.log(i),e.next=8,R.post(s,i,{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(e){console.log(e.data),null==e.data.tsp_list.TableRows?r.setState({data:[{client_name:"\u041d\u0435\u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0436\u043e\u0434\u043d\u043e\u0433\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443"}]}):r.setState({data:e.data.tsp_list.TableRows}),a?r.setState({isShowBlockSelect:!0}):r.setState({isShowBlockSelect:!1}),r.setState({isLoading:!1})})).catch((function(e){console.log(e.response)}));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(D.jsxs)("div",{className:"autocomplete",children:[Object(D.jsx)("input",{className:"".concat(this.props.isError?"":"validError "," ").concat(this.state.selected?"selected ":"").concat(this.state.isShowInputRequest?"":"dn ","form-control"),placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043f\u0435\u0440\u0448\u0456 \u0431\u0443\u043a\u0432\u0438...",type:"text",onBlur:this.onBlurAutocompleteInput,onChange:this.onChangeAutocompleteInput,onClick:function(t){return e.state.isShowBlockSelect?e.setState({isShowBlockSelect:!1}):e.onClickAutocompleteInput(t)},value:this.state.inputRequest}),Object(D.jsx)("input",{className:"".concat(this.state.selected?"selected ":"").concat(this.state.isShowInputResult?"":"dn ","form-control"),placeholder:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442",type:"text",value:this.state.inputResult,onClick:this.onClickAutocompleteInputRes}),Object(D.jsx)("div",{className:"".concat(this.state.isShowBlockSelect?"":"dn ","blockSelect"),onBlur:this.onBlurBlockSelect,ref:this.myRef,children:this.state.isShowBlockSelect&&null!=this.state.data?this.state.data.map((function(t,n){return Object(D.jsx)(An,{item:t,onClickBlockSelectItem:e.onClickBlockSelectItem},n)})):null}),this.state.isLoading?Object(D.jsx)("div",{className:"coverloader",children:Object(D.jsx)("div",{className:"loader"})}):null]})}}]),n}(s.a.Component),qn=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).onChangeAutocompleteInput=function(e){var t=e.target.value;a.props.addClientID(Number(0)),a.props.addIdentCode(Number(0)),a.setState({inputRequest:t,selected:!1}),""!=t&&t.length>=0&&a.request(a.props.token,t,!0)},a.onClickAutocompleteInput=function(e){var t=e.target.value;""!=t&&t.length>=3&&a.request(a.props.token,t,!0)},a.onBlurAutocompleteInput=function(e){var t=e.target.value;console.log(t)},a.onClickAutocompleteInputRes=function(){a.setState({inputRequest:a.state.inputResult,inputResult:null,isShowBlockSelect:!0,isShowInputResult:!1,isShowInputRequest:!0})},a.onBlurBlockSelect=function(){a.setState({isShowBlockSelect:!1})},a.onClickBlockSelectItem=function(e){if(e){var t=e.currentTarget.getAttribute("value"),n=a.state.data.filter((function(e){return e.ident_code.toString().includes(t)}))[0],s=void 0===n.client_id?e.currentTarget.getAttribute("name"):n.client_id;""!=t&&(a.props.addIdentCode(Number(n.ident_code)),a.props.addClientID(Number(s)),a.setState({inputResult:"".concat(n.ident_code," - ").concat(n.institution_id),inputRequest:"".concat(n.ident_code," - ").concat(n.institution_id),isShowBlockSelect:!1,isShowInputRequest:!0,selected:!0}),a.setState({isShowBlockSelect:!1}))}},a.state={data:null,inputRequest:null,inputResult:a.props.ident_code,isShowBlockSelect:!1,isShowInputResult:!1,isShowInputRequest:!0,isLoading:!1,selected:!1},a.myRef=s.a.createRef(),a}return Object(c.a)(n,[{key:"componentWillUnmount",value:function(){window.addEventListener("mousedown",null)}},{key:"request",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n,a){var s,i,r=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),console.log(t),s="/api/Dictionary/QueryTSP",console.log(s),i={institution_id:this.props.institution_id,branch_id:this.props.branch_id,ident_code:n},console.log(i),e.next=8,R.post(s,i,{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(e){console.log(e.data),null==e.data.tsp_list.TableRows?r.setState({data:[{ident_code:"\u041d\u0435\u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0436\u043e\u0434\u043d\u043e\u0433\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443"}]}):r.setState({data:e.data.tsp_list.TableRows}),a?r.setState({isShowBlockSelect:!0}):r.setState({isShowBlockSelect:!1}),r.setState({isLoading:!1})})).catch((function(e){console.log(e.response)}));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this;return Object(D.jsxs)("div",{className:"autocomplete",children:[Object(D.jsx)(W.a,(e={type:"text",maskChar:"",alwaysShowMask:"false",pattern:"[0-9]",className:"".concat(this.props.isError?"":"validError ").concat(this.state.selected?"selected ":"").concat(this.state.isShowInputRequest?"":"dn ","form-control"),placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0446\u0438\u0444\u0440\u0438..."},Object(B.a)(e,"type","text"),Object(B.a)(e,"onBlur",this.onClickBlockSelectItem),Object(B.a)(e,"onChange",this.onChangeAutocompleteInput),Object(B.a)(e,"onClick",(function(e){return t.state.isShowBlockSelect?t.setState({isShowBlockSelect:!1}):t.onClickAutocompleteInput(e)})),Object(B.a)(e,"value",this.state.inputRequest),e)),Object(D.jsx)("input",{className:"".concat(this.state.selected?"selected ":"").concat(this.state.isShowInputResult?"":"dn ","form-control"),placeholder:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442",type:"text",value:this.state.inputResult,onClick:this.onClickAutocompleteInputRes}),Object(D.jsx)("div",{className:"".concat(this.state.isShowBlockSelect?"":"dn ","blockSelect"),onBlur:this.onBlurBlockSelect,ref:this.myRef,children:this.state.isShowBlockSelect&&null!=this.state.data?this.state.data.map((function(e,n){return Object(D.jsx)(wn,{item:e,onClickBlockSelectItem:t.onClickBlockSelectItem},n)})):Object(D.jsx)(D.Fragment,{})}),this.state.isLoading?Object(D.jsx)("div",{className:"coverloader",children:Object(D.jsx)("div",{className:"loader"})}):Object(D.jsx)(D.Fragment,{})]})}}]),n}(s.a.Component),Mn=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).onChangeAutocompleteInput=function(e){var t=e.target.value;a.setState({inputRequest:t,selected:!1}),a.search(t)},a.onClickAutocompleteInput=function(e){var t=e.target.value;a.search(t)},a.onBlurAutocompleteInput=function(e){e.target.value},a.onClickAutocompleteInputRes=function(){a.setState({inputResult:null,isShowBlockSelect:!0,isShowInputResult:!1,isShowInputRequest:!0})},a.onBlurBlockSelect=function(){a.setState({isShowBlockSelect:!1})},a.onClickBlockSelectItem=function(e){var t=e.currentTarget.getAttribute("value"),n=e.currentTarget.getAttribute("name");""!==t&&(a.props.addTspName(t),+t!==+a.state.inputRequest&&(a.search(t),a.setState({inputRequest:n,isShowBlockSelect:!1,selected:!0})),a.setState({isShowBlockSelect:!1}))},a.clickTest=function(e){},a.state={data:null,inputRequest:"",inputResult:a.props.tsp_name,isShowBlockSelect:!1,isShowInputResult:!1,isShowInputRequest:!0,isLoading:!1,selected:!1,merchant_arr:null},a.myRef=s.a.createRef(),a}return Object(c.a)(n,[{key:"componentWillUnmount",value:function(){window.addEventListener("mousedown",null)}},{key:"request",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n,a){var s,i,r=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({isLoading:!0}),s="/api/Dictionary/QueryMerchant",i={institution_id:this.props.institution_id,merchant_id:0},this.props.tsp_id?i.client_id=+this.props.tsp_id:this.props.ident_code?i.client_id=+this.props.ident_code:i.client_id=0,!this.state.merchant_arr){e.next=6;break}return e.abrupt("return",this.setState({isLoading:!1}));case 6:return e.next=8,R.post(s,i,{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(e){null==e.data.merchant_list.TableRows?r.setState({data:[{client_name:"\u041d\u0435\u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0436\u043e\u0434\u043d\u043e\u0433\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443"}]}):r.setState({data:e.data.merchant_list.TableRows,merchant_arr:e.data.merchant_list.TableRows}),r.setState({isShowBlockSelect:!0}),r.setState({isLoading:!1})})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"search",value:function(e){this.setState({isShowBlockSelect:!0});var t=null!==this.state.merchant_arr?this.state.merchant_arr.filter((function(t){return t.merchant_id.toString().includes(e.toString())})):null;null===t?this.setState({data:[{client_name:"\u041d\u0435\u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0436\u043e\u0434\u043d\u043e\u0433\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443"}]}):this.setState({data:t})}},{key:"render",value:function(){var e=this;return Object(D.jsxs)("div",{className:"autocomplete",children:[Object(D.jsx)("input",{className:"".concat(this.props.isError?"":"validError "," ").concat(this.state.selected?"selected ":"").concat(this.state.isShowInputRequest?"":"dn ","form-control merchant-input"),placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0446\u0438\u0444\u0440\u0438...",type:"text",onChange:this.onChangeAutocompleteInput,onClick:function(){return e.state.isShowBlockSelect?e.setState({isShowBlockSelect:!1}):e.request(e.props.token,"",!1)},value:this.state.inputRequest}),Object(D.jsx)("input",{className:"".concat(this.state.selected?"selected ":"").concat(this.state.isShowInputResult?"":"dn ","form-control"),placeholder:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442",type:"text",value:this.state.inputResult,onClick:this.onClickAutocompleteInputRes}),Object(D.jsx)("div",{className:"".concat(this.state.isShowBlockSelect?"":"dn ","blockSelect"),onBlur:this.onBlurBlockSelect,ref:this.myRef,children:this.state.isShowBlockSelect&&null!=this.state.data?this.state.data.map((function(t,n){return Object(D.jsx)(En,{item:t,onClickBlockSelectItem:e.onClickBlockSelectItem},n)})):Object(D.jsx)(D.Fragment,{})}),this.state.isLoading?Object(D.jsx)("div",{className:"coverloader",children:Object(D.jsx)("div",{className:"loader"})}):null]})}}]),n}(s.a.Component),Bn=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).onChangeAutocompleteInput=function(e){var t=e.target.value;console.log(t),a.props.addTspName(Number(0)),a.setState({inputRequest:t,selected:!1}),a.search(t)},a.onClickAutocompleteInput=function(e){var t=e.target.value;console.log(t),""!=t&&t.length>=3&&a.search(t)},a.onBlurAutocompleteInput=function(e){var t=e.target.value;console.log(t),a.search(t)},a.onClickAutocompleteInputRes=function(){a.setState({inputResult:null,isShowBlockSelect:!0,isShowInputResult:!1,isShowInputRequest:!0})},a.onBlurBlockSelect=function(){a.setState({isShowBlockSelect:!1})},a.onClickBlockSelectItem=function(e){var t=e.currentTarget.getAttribute("value"),n=e.currentTarget.getAttribute("name");""!==t&&(+t!==+a.state.inputRequest&&(a.search(t),console.log(t),a.props.addTspName(Number(t)),a.setState({inputRequest:n,isShowBlockSelect:!1,selected:!0})),a.setState({isShowBlockSelect:!1}))},a.clickTest=function(e){},a.state={data:null,inputRequest:"",inputResult:a.props.tsp_name,isShowBlockSelect:!1,isShowInputResult:!1,isShowInputRequest:!0,isLoading:!1,selected:!1,terminal_arr:null},a.myRef=s.a.createRef(),a}return Object(c.a)(n,[{key:"componentWillUnmount",value:function(){window.addEventListener("mousedown",null)}},{key:"request",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n,a){var s,i,r=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({isLoading:!0}),console.log(t),s="/api/Dictionary/QueryTerminal",console.log(s),i={institution_id:this.props.institution_id,terminal_id:0},this.props.tsp_name&&(i.merchant_id=this.props.tsp_name),this.props.tsp_id?i.client_id=+this.props.tsp_id:this.props.ident_code?i.client_id=this.props.ident_code:i.client_id=0,!this.state.terminal_arr){e.next=9;break}return e.abrupt("return",this.setState({isLoading:!1}));case 9:return e.next=11,R.post(s,i,{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(e){null==e.data.terminal_list.TableRows?r.setState({data:[{client_name:"\u041d\u0435\u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0436\u043e\u0434\u043d\u043e\u0433\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443"}]}):r.setState({data:e.data.terminal_list.TableRows,terminal_arr:e.data.terminal_list.TableRows,isShowBlockSelect:!0}),r.setState({isLoading:!1})})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 11:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"search",value:function(e){this.setState({isShowBlockSelect:!0});var t=this.state.terminal_arr?this.state.terminal_arr.filter((function(t){return t.terminal_id.toString().includes(e.toString())})):null;null===t?this.setState({data:[{client_name:"\u041d\u0435\u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0436\u043e\u0434\u043d\u043e\u0433\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443"}]}):this.setState({data:t})}},{key:"render",value:function(){var e=this;return Object(D.jsxs)("div",{className:"autocomplete",children:[Object(D.jsx)("input",{className:"".concat(this.props.isError?"":"validError "," ").concat(this.state.selected?"selected ":"").concat(this.state.isShowInputRequest?"":"dn ","form-control terminal-input"),placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0446\u0438\u0444\u0440\u0438...",type:"text",onChange:this.onChangeAutocompleteInput,onClick:function(){return e.state.isShowBlockSelect?e.setState({isShowBlockSelect:!1}):e.request(e.props.token,"",!1)},value:this.state.inputRequest}),Object(D.jsx)("input",{className:"".concat(this.state.selected?"selected ":"").concat(this.state.isShowInputResult?"":"dn ","form-control"),placeholder:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442",type:"text",value:this.state.inputResult,onClick:this.onClickAutocompleteInputRes}),Object(D.jsx)("div",{className:"".concat(this.state.isShowBlockSelect?"":"dn ","blockSelect"),onBlur:this.onBlurBlockSelect,ref:this.myRef,children:this.state.isShowBlockSelect&&null!=this.state.data?this.state.data.map((function(t,n){return Object(D.jsx)(kn,{item:t,onClickBlockSelectItem:e.onClickBlockSelectItem},n)})):Object(D.jsx)(D.Fragment,{})}),this.state.isLoading?Object(D.jsx)("div",{className:"coverloader",children:Object(D.jsx)("div",{className:"loader"})}):null]})}}]),n}(s.a.Component),Ln=(s.a.Component,function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).selectDICT_INSTITUTION=function(e){var t=e.target.value,n=e.currentTarget.getAttribute("apiName"),s=a.state.AcquiringReportsCriteria;s[n]=t,""==t?(console.log(t),a.setState({isShowSelectTVBV:!0,TSPReportSettingsSearchObj:s,isInstitution_idValidation:!1})):(a.setState({isShowSelectTVBV:!1,TSPReportSettingsSearchObj:s,AcquiringReportsCriteria:s,isInstitution_idValidation:!0,institution_id:t}),a.requestDICT_BRANCH(a.props.store.userState.token,t))},a.changeInputDateReport=function(e){var t=e.currentTarget.getAttribute("apiName"),n=e.target.value,s=a.state.AcquiringReportsCriteria;s[t]=a.formatDate(new Date(n)),a.setState({AcquiringReportsCriteria:s})},a.changeInputDateReport_from=function(e){var t=e.currentTarget.getAttribute("apiName"),n=e.target.value,s=a.state.AcquiringReportsCriteria;s[t]=a.formatDate(new Date(n)),""==n?a.setState({AcquiringReportsCriteria:s,isDate_fromValidation:!1}):a.setState({AcquiringReportsCriteria:s,isDate_fromValidation:!0,date_from:n})},a.changeInputDateReport_to=function(e){var t=e.currentTarget.getAttribute("apiName"),n=e.target.value,s=a.state.AcquiringReportsCriteria;s[t]=a.formatDate(new Date(n)),""==n?a.setState({AcquiringReportsCriteria:s,isDate_toValidation:!1}):a.setState({AcquiringReportsCriteria:s,isDate_toValidation:!0,date_to:n})},a.changeInputBase=function(e){var t=e.currentTarget.getAttribute("apiName"),n=e.target.value,s=a.state.AcquiringReportsCriteria;s[t]=n,a.setState({AcquiringReportsCriteria:s})},a.changeInput=function(e){var t=e.currentTarget.getAttribute("apiName"),n=e.target.value,s=a.state.AcquiringReportsCriteria;"format_type_id"==t||"mcc_code"==t||"payment_system_id"==t||"terminal_id"==t||"bank_branch_id"==t||"institution_id"==t?(console.log("inputValue: ",n),s[t]=n):"terminal_type_id"==t?(s[t]=n,""==n?(console.log(n),a.setState({AcquiringReportsCriteria:s,isTerminal_type_idValidation:!1})):a.setState({AcquiringReportsCriteria:s,isTerminal_type_idValidation:!0,terminal_type_id:n})):"merchant_id"==t?(s[t]=n,""==n?(console.log(n),a.setState({AcquiringReportsCriteria:s,isMerchant_idValidation:!1})):a.setState({AcquiringReportsCriteria:s,isMerchant_idValidation:!0,merchant_id:n})):"date_type_id"==t?(s[t]=Number(n),""==n?(console.log(n),a.setState({AcquiringReportsCriteria:s,isDate_type_idValidation:!1})):a.setState({AcquiringReportsCriteria:s,isDate_type_idValidation:!0,date_type_id:n})):s[t]=n,console.log(s),a.setState({AcquiringReportsCriteria:s}),console.log(a.state),console.log("here:",a.state.AcquiringReportsCriteria)},a.formatDate=function(e){var t=e.getDate(),n=("0"+(e.getMonth()+1)).slice(-2);return t.toString().length<2&&(t="0"+t),e.getFullYear()+n+t},a.search=function(){a.defineValidationInputs()},a.defineValidationInputs=function(){var e=new Date(a.state.date_from),t=new Date(a.state.date_to),n=Math.abs(t-e),s=Math.ceil(n/864e5);null!=a.state.institution_id&&0!=a.state.institution_id||a.setState({isInstitution_idValidation:!1}),null!=a.state.date_type_id&&""!=a.state.date_type_id||a.setState({isDate_type_idValidation:!1}),null!=a.state.date_from&&""!=a.state.date_from||a.setState({isDate_fromValidation:!1}),null!==a.state.date_to&&""!==a.state.date_to||a.setState({isDate_toValidation:!1}),s>31&&a.setState({isDate_month_Validation:!1}),0!=a.state.AcquiringReportsCriteria.ident_code||0!=a.state.AcquiringReportsCriteria.tsp_id||0!=a.state.AcquiringReportsCriteria.merchant_id||a.state.AcquiringReportsCriteria.trans_rrn||0!=a.state.AcquiringReportsCriteria.terminal_id?a.setState({isForm_toValidation:!0}):a.setState({isForm_toValidation:!1}),a.setState({},(function(){return a.sendOptionToServer()}))},a.Tsp_list=function(e){return console.log(e),e.map((function(e,t){return console.log(e),Object(D.jsx)("li",{className:"dropdownMenuItem",children:Object(D.jsxs)("p",{children:[Object(D.jsx)("input",{name:"tsp_list",id:e.tsp_name,type:"radio",onClick:a.itemTsp,value:e.tsp_id})," ",e.tsp_name]})})}))},a.itemTsp=function(e){var t=e.target.value;console.log(t),console.log(a.state),a.state.settings.map((function(e,n){e.tsp_id==t&&(null==e.main_settings?a.setState({type_acquiring:2,report_format_id:1,report_period_type_id:1,channel_type_id:1,file_name_mask:""}):e.main_settings.length&&(console.log(e.main_settings[0].acquiring_type_id),a.setState({type_acquiring:e.main_settings[0].acquiring_type_id,report_format_id:e.main_settings[0].report_format_id,report_period_type_id:e.main_settings[0].report_period_type_id,channel_type_id:e.main_settings[0].channel_type_id,file_name_mask:e.main_settings[0].file_name_mask})))})),a.setState({currentTsp:Number(t),TSPReportSettingsSTD:null,isShowTypeAcquiring:!0}),a.requestDICT_REPORT_FORMAT(a.props.store.userState.token),a.requestDICT_REPORT_PERIOD_TYPE(a.props.store.userState.token),a.requestDICT_REPORT_CHANNEL_TYPE(a.props.store.userState.token)},a.changeTypeAcquiring=function(e){var t=e.currentTarget.getAttribute("type_acquiring");console.log(t),a.state.settings.map((function(e,n){console.log(a.state.currentTsp),console.log(e.tsp_id),e.tsp_id==a.state.currentTsp&&e.main_settings.length>1&&(console.log(e.main_settings.length>1),e.main_settings.map((function(e,n){e.acquiring_type_id==t&&(console.log(e.acquiring_type_id==t),a.setState({type_acquiring:Number(t),report_format_id:e.report_format_id,report_period_type_id:e.report_period_type_id,channel_type_id:e.channel_type_id,file_name_mask:e.file_name_mask}))})))}))},a.openStandardReport=function(){a.requestTSPReportSettingsSTD(a.props.store.userState.token)},a.closePopupTable=function(){a.setState({isShowTableTSPReportSettingsSTD:!1})},a.changeReport_format_id=function(e){var t=e.target.value;console.log(t),a.setState({report_format_id:Number(t)})},a.changeReport_period_type_id=function(e){var t=e.target.value;console.log(t),a.setState({report_period_type_id:Number(t)})},a.changeChannel_type_id=function(e){var t=e.target.value;console.log(t),a.setState({channel_type_id:Number(t)})},a.changeFile_name_mask=function(e){var t=e.target.value;console.log(t),a.setState({file_name_mask:t})},a.saveReport=function(){var e={acquiring_type_id:a.state.type_acquiring,tsp_list:[{tsp_id:a.state.currentTsp}],main_settings:{acquiring_type_id:a.state.type_acquiring,report_format_id:a.state.report_format_id,report_period_type_id:a.state.report_period_type_id,channel_type_id:a.state.channel_type_id,file_name_mask:a.state.file_name_mask}};null!=a.state.TSPReportSettingsSTD&&(e.std_settings=a.state.TSPReportSettingsSTD),a.requestTSPReportSettingsSTD_SAVE(a.props.store.userState.token)},a.showReport=function(e){return console.log(e),a.state.settings.map((function(t,n){if(console.log(t),console.log(t.tsp_id),console.log(t.tsp_id==e),t.tsp_id==e){if(console.log(t.main_settings),null==t.main_settings){return Object(D.jsxs)("div",{className:"report border",children:[Object(D.jsx)("div",{className:"title",children:"\u041f\u0435\u0440\u0435\u043b\u0456\u043a \u043f\u043e\u043b\u0456\u0432 \u0437\u0432\u0456\u0442\u0443 \u0422\u0421\u041f"}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:a.openStandardReport,children:"\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:!0,children:"\u0420\u043e\u0437\u0448\u0438\u0440\u0435\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:!0,children:"\u0417\u0432\u0456\u0442 \u043f\u043e \u043e\u043f\u0435\u0440\u0430\u0446\u0456\u044f\u043c Installment"}),Object(D.jsx)("br",{}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_format",children:"\u0424\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0443"}),a.state.isShowREPORT_FORMAT?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_format_id,name:"DICT_REPORT_FORMAT",id:"DICT_REPORT_FORMAT",children:a.state.DICT_REPORT_FORMAT.map((function(e,t){return Object(D.jsx)(xn,{optionItem:e,report_format_id:1},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"report_period",children:"\u041f\u0435\u0440\u0456\u043e\u0434 \u0437\u0432\u0456\u0442\u0443"}),a.state.isShowDICT_REPORT_PERIOD_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_period_type_id,name:"DICT_REPORT_PERIOD_TYPE",id:"DICT_REPORT_PERIOD_TYPE",children:a.state.DICT_REPORT_PERIOD_TYPE.map((function(e,t){return Object(D.jsx)(Nn,{optionItem:e,report_period_type_id:1},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_name_mask",children:"\u041c\u0430\u0441\u043a\u0430 \u043d\u0430\u0437\u0432\u0438 \u0444\u0430\u0439\u043b\u0443"}),Object(D.jsx)("input",{defaultValue:"",onChange:a.changeFile_name_mask,apiName:"file_name_mask",className:"customInput form-control",id:"file_name_mask",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441atalog",children:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433"}),Object(D.jsx)("input",{disabled:!0,onChange:a.changeInput,apiName:"\u0441atalog",className:"customInput form-control",id:"\u0441atalog",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441hannel",children:"\u041a\u0430\u043d\u0430\u043b"}),a.state.isShowDICT_REPORT_CHANNEL_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeChannel_type_id,name:"DICT_REPORT_CHANNEL_TYPE",id:"DICT_REPORT_CHANNEL_TYPE",children:a.state.DICT_REPORT_CHANNEL_TYPE.map((function(e,t){return Object(D.jsx)(Dn,{optionItem:e,channel_type_id:1},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsx)("div",{className:"reportCoverBtn",children:Object(D.jsx)("button",{className:"btn btn-secondary",onClick:a.saveReport,children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})})]})}if(1==t.main_settings.length)return t.main_settings.map((function(e,t){var n=e.report_period_type_id,s=e.report_format_id,i=e.channel_type_id,r=e.file_name_mask;return Object(D.jsxs)("div",{className:" border report",children:[Object(D.jsxs)("div",{className:"coverBtn border",children:[Object(D.jsx)("div",{className:"title",children:"\u0412\u0438\u0434 \u0435\u043a\u0432\u0430\u0440\u0438\u043d\u0433\u0443"}),Object(D.jsx)("button",{className:"btn btn-secondary",children:1==a.state.type_acquiring?"\u0424\u0456\u0437\u0438\u0447\u043d\u0438\u0439":"\u0406\u043d\u0442\u0435\u0440\u043d\u0435\u0442"})]}),Object(D.jsxs)("div",{className:"report border",children:[Object(D.jsx)("div",{className:"title",children:"\u041f\u0435\u0440\u0435\u043b\u0456\u043a \u043f\u043e\u043b\u0456\u0432 \u0437\u0432\u0456\u0442\u0443 \u0422\u0421\u041f"}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:a.openStandardReport,children:"\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:!0,children:"\u0420\u043e\u0437\u0448\u0438\u0440\u0435\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:!0,children:"\u0417\u0432\u0456\u0442 \u043f\u043e \u043e\u043f\u0435\u0440\u0430\u0446\u0456\u044f\u043c Installment"}),Object(D.jsx)("br",{}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_format",children:"\u0424\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0443"}),a.state.isShowREPORT_FORMAT?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_format_id,name:"DICT_REPORT_FORMAT",id:"DICT_REPORT_FORMAT",children:a.state.DICT_REPORT_FORMAT.map((function(e,t){return Object(D.jsx)(xn,{optionItem:e,report_format_id:s},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"report_period",children:"\u041f\u0435\u0440\u0456\u043e\u0434 \u0437\u0432\u0456\u0442\u0443"}),a.state.isShowDICT_REPORT_PERIOD_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_period_type_id,name:"DICT_REPORT_PERIOD_TYPE",id:"DICT_REPORT_PERIOD_TYPE",children:a.state.DICT_REPORT_PERIOD_TYPE.map((function(e,t){return Object(D.jsx)(Nn,{optionItem:e,report_period_type_id:n},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_name_mask",children:"\u041c\u0430\u0441\u043a\u0430 \u043d\u0430\u0437\u0432\u0438 \u0444\u0430\u0439\u043b\u0443"}),Object(D.jsx)("input",{defaultValue:r,onChange:a.changeFile_name_mask,apiName:"file_name_mask",className:"customInput form-control",id:"file_name_mask",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441atalog",children:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433"}),Object(D.jsx)("input",{disabled:!0,onChange:a.changeInput,apiName:"\u0441atalog",className:"customInput form-control",id:"\u0441atalog",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441hannel",children:"\u041a\u0430\u043d\u0430\u043b"}),a.state.isShowDICT_REPORT_CHANNEL_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeChannel_type_id,name:"DICT_REPORT_CHANNEL_TYPE",id:"DICT_REPORT_CHANNEL_TYPE",children:a.state.DICT_REPORT_CHANNEL_TYPE.map((function(e,t){return Object(D.jsx)(Dn,{optionItem:e,channel_type_id:i},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsx)("div",{className:"reportCoverBtn",children:Object(D.jsx)("button",{className:"btn btn-secondary",onClick:a.saveReport,children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})})]})]})}));if(2==t.main_settings.length)return Object(D.jsxs)("div",{className:"",children:[Object(D.jsxs)("div",{className:"coverBtn border",children:[Object(D.jsx)("div",{className:"title",children:"\u0412\u0438\u0434 \u0435\u043a\u0432\u0430\u0440\u0438\u043d\u0433\u0443"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:1==a.state.type_acquiring?"disabled":"",onClick:a.changeTypeAcquiring,type_acquiring:1,children:"\u0424\u0456\u0437\u0438\u0447\u043d\u0438\u0439"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:2==a.state.type_acquiring?"disabled":"",onClick:a.changeTypeAcquiring,type_acquiring:2,children:"\u0406\u043d\u0442\u0435\u0440\u043d\u0435\u0442"})]}),t.main_settings.map((function(e,t){var n=e.report_period_type_id,s=e.report_format_id,i=e.channel_type_id,r=e.file_name_mask,o=e.acquiring_type_id,c=e.standard_report,l=e.extended_report,d=e.installment_report;return console.log(a.state.type_acquiring),Object(D.jsxs)("div",{className:"".concat(a.state.type_acquiring==o?"":"d-none"," border report"),children:[Object(D.jsx)("div",{className:"title",children:"\u041f\u0435\u0440\u0435\u043b\u0456\u043a \u043f\u043e\u043b\u0456\u0432 \u0437\u0432\u0456\u0442\u0443 \u0422\u0421\u041f"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:c?"":"disabled",onClick:a.openStandardReport,children:"\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:l?"":"disabled",children:"\u0420\u043e\u0437\u0448\u0438\u0440\u0435\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:d?"":"disabled",children:"\u0417\u0432\u0456\u0442 \u043f\u043e \u043e\u043f\u0435\u0440\u0430\u0446\u0456\u044f\u043c Installment"}),Object(D.jsx)("br",{}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_format",children:"\u0424\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0443"}),a.state.isShowREPORT_FORMAT?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_format_id,name:"DICT_REPORT_FORMAT",id:"DICT_REPORT_FORMAT",children:a.state.DICT_REPORT_FORMAT.map((function(e,t){return Object(D.jsx)(xn,{optionItem:e,report_format_id:s},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"report_period",children:"\u041f\u0435\u0440\u0456\u043e\u0434 \u0437\u0432\u0456\u0442\u0443"}),a.state.isShowDICT_REPORT_PERIOD_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_period_type_id,name:"DICT_REPORT_PERIOD_TYPE",id:"DICT_REPORT_PERIOD_TYPE",children:a.state.DICT_REPORT_PERIOD_TYPE.map((function(e,t){return Object(D.jsx)(Nn,{optionItem:e,report_period_type_id:n},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_name_mask",children:"\u041c\u0430\u0441\u043a\u0430 \u043d\u0430\u0437\u0432\u0438 \u0444\u0430\u0439\u043b\u0443"}),Object(D.jsx)("input",{defaultValue:r,onChange:a.changeFile_name_mask,apiName:"file_name_mask",className:"customInput form-control",id:"file_name_mask",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441atalog",children:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433"}),Object(D.jsx)("input",{disabled:!0,onChange:a.changeInput,apiName:"\u0441atalog",className:"customInput form-control",id:"\u0441atalog",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441hannel",children:"\u041a\u0430\u043d\u0430\u043b"}),a.state.isShowDICT_REPORT_CHANNEL_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeChannel_type_id,name:"DICT_REPORT_CHANNEL_TYPE",id:"DICT_REPORT_CHANNEL_TYPE",children:a.state.DICT_REPORT_CHANNEL_TYPE.map((function(e,t){return Object(D.jsx)(Dn,{optionItem:e,channel_type_id:i},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsx)("br",{}),Object(D.jsx)("div",{className:"reportCoverBtn",children:Object(D.jsx)("button",{className:"btn btn-secondary",onClick:a.saveReport,children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})})]})}))]})}}))},a.closePopupError=function(){a.setState({isShowPopupError:!1})},a.closePopupErrorSave=function(){a.setState({isShowPopupErrorSave:!1})},a.activeOperation=function(e,t){var n;return e.map((function(e,a){e.operation==t&&(n=e.name)})),n},a.onChangeAutocompleteInput=function(e){var t=e.target.value;console.log(t),a.setState({InputDICT_MCC:t}),""!=t&&a.requestDICT_MCC(a.props.store.userState.token,t,!0)},a.onClickAutocompleteInput=function(e){var t=e.target.value;console.log(t),a.setState({isShowBlockSelectDICT_MCC:!0})},a.onClickAutocompleteInputRes=function(){a.setState({mcc_code:null,isShowBlockSelectDICT_MCC:!0,isShowInputResDICT_MCC:!1,isShowInputDICT_MCC:!0})},a.onBlurBlockSelect=function(){a.setState({isShowBlockSelectDICT_MCC:!1})},a.onClickBlockSelectItem=function(e){var t=e.currentTarget.getAttribute("value");if(""!=t){if(t!=a.state.InputDICT_MCC){a.requestDICT_MCC(a.props.store.userState.token,t,!1);var n=a.state.AcquiringReportsCriteria;n.mcc_code=t,console.log(t),a.setState({AcquiringReportsCriteria:n,InputDICT_MCC:t,isShowBlockSelectDICT_MCC:!1,isShowInputResDICT_MCC:!0,isShowInputDICT_MCC:!1})}a.setState({isShowBlockSelectDICT_MCC:!1})}},a.clickTest=function(e){},a.addMerchantName=function(e){var t=a.state.AcquiringReportsCriteria;t.merchant_id=e,a.setState({AcquiringReportsCriteria:t}),console.log(a.state.AcquiringReportsCriteria.tsp_name)},a.addTerminalName=function(e){console.log(e);var t=a.state.AcquiringReportsCriteria;t.terminal_id=e,console.log(t),a.setState({AcquiringReportsCriteria:t}),console.log(a.state.AcquiringReportsCriteria.tsp_name)},a.addTspName=function(e){console.log(e);var t=a.state.AcquiringReportsCriteria;t.tsp_id=e,console.log(t),a.setState({AcquiringReportsCriteria:t}),console.log(a.state.AcquiringReportsCriteria.tsp_name)},a.addIdentCode=function(e){var t=a.state.AcquiringReportsCriteria;t.ident_code=e,a.setState({AcquiringReportsCriteria:t})},a.addClientID=function(e){var t=a.state.AcquiringReportsCriteria;t.tsp_id=e,a.setState({AcquiringReportsCriteria:t})},a.addMccCode=function(e){var t=a.state.AcquiringReportsCriteria;t.mcc_code=e,a.setState({AcquiringReportsCriteria:t})},a.handleSelect=function(e){var t,n=a.state.AcquiringReportsCriteria;t=0===e.length?0:e.map((function(e){return e.value})).join(","),n.payment_system_id=t,a.setState({AcquiringReportsCriteria:n})},a.state={DICT_INSTITUTION:null,isShowSelectDICT_INSTITUTION:!1,DICT_BRANCH:null,isDisableTVBV:!0,isShowSelectTVBV:!1,DICT_ACQUIRING_REPORTS:null,isShowSelectDICT_ACQUIRING_REPORTS:!1,DICT_ACQUIRING_TYPE:null,isShowSelectDICT_ACQUIRING_TYPE:!1,DICT_PAYMENT_SYSTEM:null,isShowSelectDICT_PAYMENT_SYSTEM:!1,DICT_TERMINAL_SYSTEM:null,isShowSelectDICT_MERCHANT_SYSTEM:!1,DICT_MERCHANT_SYSTEM:null,isShowSelectDICT_TERMINAL_SYSTEM:!1,DICT_REPORT_FORMAT:null,isShowSelectDICT_REPORT_FORMAT:!1,DICT_DATE_TYPE:null,isShowSelectDICT_DATE_TYPE:!1,AcquiringReportsCriteria:{report_type_id:"REPORT_OPERATIONS",payment_system_id:0,format_type_id:1,terminal_type_id:1,institution_id:0,date_type_id:1,merchant_id:0,terminal_id:0,tsp_id:0,ident_code:0},date_from:null,date_to:null,date_type_id:1,institution_id:0,merchant_id:null,isInstitution_idValidation:!0,isMerchant_idValidation:!0,isTerminal_type_idValidation:!0,isDate_type_idValidation:!0,isDate_month_Validation:!0,isDate_fromValidation:!0,isDate_toValidation:!0,isForm_toValidation:!0,DICT_MCC_SYSTEM:null,isShowSelectDICT_MCC_SYSTEM:!1,DICT_MCC:null,InputDICT_MCC:null,isShowBlockSelectDICT_MCC:!1,isShowInputResDICT_MCC:!1,isShowInputDICT_MCC:!0,error_text:"\u0417\u0430\u043f\u043e\u0432\u043d\u0456\u0442\u044c, \u0431\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0434\u0430\u0442\u0438!",isSuccess:!1,merchant_error:""},a.myRef=s.a.createRef(),a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.requestDICT_INSTITUTION(this.props.store.userState.token),this.requestDICT_ACQUIRING_REPORTS(this.props.store.userState.token),this.requestDICT_ACQUIRING_TYPE(this.props.store.userState.token),this.requestDICT_PAYMENT_SYSTEM(this.props.store.userState.token),this.requestDICT_REPORT_FORMAT(this.props.store.userState.token),this.requestDICT_DATE_TYPE(this.props.store.userState.token)}},{key:"componentWillUnmount",value:function(){window.addEventListener("mousedown",null)}},{key:"requestDICT_INSTITUTION",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_INSTITUTION",e.next=5,R.get("/api/Dictionary/DICT_INSTITUTION",{headers:{Token:"".concat(t)}}).then((function(e){if(1===e.data.Table.TableRows.length){var t=e.data.Table.TableRows[0].institution_id,a=n.state.AcquiringReportsCriteria;a.institution_id=t,n.setState({isShowSelectTVBV:!1,TSPReportSettingsSearchObj:a,AcquiringReportsCriteria:a,isInstitution_idValidation:!0,institution_id:t}),n.requestDICT_BRANCH(n.props.store.userState.token,t)}n.setState({DICT_INSTITUTION:e.data.Table.TableRows,isShowSelectDICT_INSTITUTION:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_BRANCH",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n){var a,s=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),a="/api/Dictionary/DICT_BRANCH/?param1=".concat(n),{param1:n},e.next=6,R.get(a,{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),s.setState({DICT_BRANCH:e.data.Table.TableRows,isShowSelectTVBV:!0,isDisableTVBV:!1}),s.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"requestDICT_REPORT_FORMAT",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_REPORT_FORMAT",e.next=5,R.get("/api/Dictionary/DICT_REPORT_FORMAT",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_REPORT_FORMAT:e.data.Table.TableRows,isShowSelectDICT_REPORT_FORMAT:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_REPORT_PERIOD_TYPE",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_REPORT_PERIOD_TYPE",e.next=5,R.get("/api/Dictionary/DICT_REPORT_PERIOD_TYPE",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_REPORT_PERIOD_TYPE:e.data.Table.TableRows,isShowDICT_REPORT_PERIOD_TYPE:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_ACQUIRING_REPORTS",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_ACQUIRING_REPORTS",e.next=5,R.get("/api/Dictionary/DICT_ACQUIRING_REPORTS",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_ACQUIRING_REPORTS:e.data.Table.TableRows,isShowSelectDICT_ACQUIRING_REPORTS:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_ACQUIRING_TYPE",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_ACQUIRING_TYPE",e.next=5,R.get("/api/Dictionary/DICT_ACQUIRING_TYPE",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_ACQUIRING_TYPE:e.data.Table.TableRows,isShowSelectDICT_ACQUIRING_TYPE:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_PAYMENT_SYSTEM",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_PAYMENT_SYSTEM",e.next=5,R.get("/api/Dictionary/DICT_PAYMENT_SYSTEM",{headers:{Token:"".concat(t)}}).then((function(e){n.setState({DICT_PAYMENT_SYSTEM:e.data.Table.TableRows.map((function(e){return{value:e.payment_system_id,label:e.payment_system_name}})),isShowSelectDICT_PAYMENT_SYSTEM:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_MERCHANT_SYSTEM",value:function(){var e=Object(C.a)(f.a.mark((function e(){var t,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Dictionary/QueryMerchant",t={institution_id:+this.state.institution_id,merchant_id:+this.state.merchant_id||0},this.state.AcquiringReportsCriteria.tsp_id?t.client_id=+this.state.AcquiringReportsCriteria.tsp_id:this.state.AcquiringReportsCriteria.ident_code?t.client_id=+this.state.AcquiringReportsCriteria.ident_code:t.client_id=0,e.next=6,R.post("/api/Dictionary/QueryMerchant",t,{headers:{Token:"".concat(this.props.store.userState.token)}}).then((function(e){console.log(e.data),n.setState({DICT_MERCHANT_SYSTEM:e.data.merchant_list.TableRows,isShowSelectDICT_MERCHANT_SYSTEM:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"requestDICT_TERMINAL_SYSTEM",value:function(){var e=Object(C.a)(f.a.mark((function e(){var t,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Dictionary/QueryMCC",t={institution_id:+this.state.institution_id,merchant_id:+this.state.merchant_id||0},this.state.AcquiringReportsCriteria.tsp_id?t.client_id=+this.state.AcquiringReportsCriteria.tsp_id:this.state.AcquiringReportsCriteria.ident_code?t.client_id=+this.state.AcquiringReportsCriteria.ident_code:t.client_id=0,e.next=6,R.post("/api/Dictionary/QueryMCC",t,{headers:{Token:"".concat(this.props.store.userState.token)}}).then((function(e){0!==e.data.record_count&&n.setState({DICT_TERMINAL_SYSTEM:e.data.Table.TableRows,DICT_MCC_SYSTEM:e.data.Table.TableRows,isShowSelectDICT_TERMINAL_SYSTEM:!0,isShowSelectDICT_MCC_SYSTEM:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"requestDICT_DATE_TYPE",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_DATE_TYPE",e.next=5,R.get("/api/Dictionary/DICT_DATE_TYPE",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_DATE_TYPE:e.data.Table.TableRows,isShowSelectDICT_DATE_TYPE:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_MCC_SYSTEM",value:function(){var e=Object(C.a)(f.a.mark((function e(){var t,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Dictionary/QueryMCC",t={terminal_id:+this.state.AcquiringReportsCriteria.tsp_id,merchant_id:+this.state.merchant_id||0},this.state.AcquiringReportsCriteria.ident_code?t.client_id=+this.state.AcquiringReportsCriteria.ident_code:t.client_id=0,e.next=6,R.post("/api/Dictionary/QueryMCC",t,{headers:{Token:"".concat(this.props.store.userState.token)}}).then((function(e){n.setState({DICT_TERMINAL_SYSTEM:e.data.mcc_list.TableRows,isShowSelectDICT_MCC_SYSTEM:!0,DICT_MCC_SYSTEM:e.data.Table.TableRows}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"requestReports_Acquiring",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Reports/Acquiring",e.next=4,R.post("/api/Reports/Acquiring",n,{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(e){window.location.href="/dashboard/REPORTS_ACQUIRING_MONITOR"})).catch((function(e){console.log(e.response)}));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"sendOptionToServer",value:function(){this.state.isInstitution_idValidation&&this.state.isTerminal_type_idValidation&&this.state.isDate_type_idValidation&&this.state.isDate_fromValidation&&this.state.isDate_toValidation&&this.state.isForm_toValidation&&this.state.isDate_month_Validation&&this.requestReports_Acquiring(this.props.store.userState.token,this.state.AcquiringReportsCriteria)}},{key:"handleCheckId",value:function(){var e=this;this.checkMerchantID().then((function(t){0!==t.data.ErrorStatus.ErrorCode&&e.setState({merchant_error:t.data.ErrorStatus.ErrorMessage,isShowPopupError:!0})}))}},{key:"checkMerchantID",value:function(){var e=Object(C.a)(f.a.mark((function e(){var t,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Dictionary/QueryMerchant",t={institution_id:+this.state.institution_id,merchant_id:+this.state.merchant_id||0},this.state.tsp_id?t.client_id=+this.state.tsp_id:this.state.ident_code?t.client_id=+this.state.ident_code:t.client_id=0,e.next=6,R.post("/api/Dictionary/QueryMerchant",t,{headers:{Token:"".concat(this.props.store.userState.token),"Content-Type":"application/json"}}).then((function(e){return n.props.store.changeLoading(!1),e})).catch((function(e){console.log(e.response)}));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"requestDICT_MCC",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n,a){var s,i=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),s="/api/Dictionary/DICT_MCC/?param1=".concat(n),console.log(s),e.next=6,R.get(s,{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),null==e.data.Table.TableRows?i.setState({DICT_MCC:[{mcc_code:"",mcc_name:"\u0417\u0430 \u0434\u0430\u043d\u0438\u043c \u043a\u043e\u0434\u043e\u043c \u043d\u0435\u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0436\u043e\u0434\u043d\u043e\u0433\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443"}]}):i.setState({DICT_MCC:e.data.Table.TableRows}),a?i.setState({isShowBlockSelectDICT_MCC:!0}):i.setState({isShowBlockSelectDICT_MCC:!1}),i.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(D.jsxs)("div",{className:"coverTable REPORT_aquiring",children:[this.state.isSuccess?Object(D.jsxs)(U.a,{variant:"success",children:["\u0417\u0432\u0456\u0442 \u0412\u0438\u043f\u0438\u0441\u043a\u0430 \u043e\u043f\u0435\u0440\u0430\u0446\u0456\u0439 \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0441\u0444\u043e\u0440\u043c\u043e\u0432\u0430\u043d\u0430. \u041f\u0435\u0440\u0435\u0439\u0434\u0456\u0442\u044c \u043f\u043e"," ",Object(D.jsx)(U.a.Link,{href:"/dashboard/REPORTS_ACQUIRING_MONITOR",children:"\u043b\u0456\u043d\u043a\u0443"}),". \u0414\u043b\u044f \u043f\u0435\u0440\u0435\u0433\u043b\u044f\u0434\u0443 \u0437\u0432\u0456\u0442\u0430."]}):null,Object(D.jsxs)("div",{className:"headerTable",children:[Object(D.jsx)("div",{className:"titleTable",children:this.activeOperation(this.props.store.userState.OPERATIONS,this.props.store.location.pathname.substr(11))}),Object(D.jsx)("div",{className:"optionBlock"})]}),Object(D.jsxs)("div",{className:"filter",children:[Object(D.jsxs)("div",{className:"coverInput col-3",children:[Object(D.jsx)("label",{htmlFor:"DICT_INSTITUTION",children:"\u0420\u0423 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430"}),Object(D.jsx)("select",{onChange:this.selectDICT_INSTITUTION,apiName:"institution_id",id:"dropdown-basic-button",className:"".concat(this.state.isInstitution_idValidation?"":"validError"," form-select"),title:"\u0420\u0435\u0433\u0456\u043e\u043d\u0430\u043b\u044c\u043d\u0456 \u0443\u043f\u0440\u0430\u0432\u043b\u0456\u043d\u043d\u044f",children:this.state.isShowSelectDICT_INSTITUTION?this.state.DICT_INSTITUTION.map((function(e,t){return Object(D.jsx)(In,{optionItem:e},t)})):Object(D.jsx)(D.Fragment,{})}),Object(D.jsx)("p",{className:"error",children:this.state.isInstitution_idValidation?null:"\u041e\u0431\u0435\u0440\u0456\u0442\u044c, \u0431\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f!"}),Object(D.jsx)("label",{htmlFor:"TVBV",children:"\u0422\u0412\u0411\u0412"}),Object(D.jsxs)("select",{id:"dropdown-basic-button",onChange:this.changeInput,apiName:"bank_branch_id",className:"form-select",disabled:this.state.isDisableTVBV?"disabled":"",title:"\u0422\u0412\u0411\u0412",children:[Object(D.jsx)("option",{}),this.state.isShowSelectTVBV?this.state.DICT_BRANCH.map((function(e,t){return Object(D.jsx)(fn,{optionItem:e},t)})):Object(D.jsx)(D.Fragment,{})]}),Object(D.jsx)("label",{htmlFor:"tsp_name",children:"\u041d\u0430\u0437\u0432\u0430 \u0422\u0421\u041f"}),Object(D.jsx)(Pn,{isError:this.state.isForm_toValidation,token:this.props.store.userState.token,institution_id:this.state.AcquiringReportsCriteria.institution_id,branch_id:this.state.AcquiringReportsCriteria.bank_branch_id,addTspName:this.addTspName,tsp_name:this.state.AcquiringReportsCriteria.tsp_id}),Object(D.jsx)("label",{htmlFor:"INN",children:"\u0406\u041d\u041d/\u0404\u0414\u0420\u041f\u041e\u0423"}),Object(D.jsx)(qn,{token:this.props.store.userState.token,institution_id:this.state.AcquiringReportsCriteria.institution_id,branch_id:this.state.AcquiringReportsCriteria.bank_branch_id,addIdentCode:this.addIdentCode,addClientID:this.addClientID,isError:this.state.isForm_toValidation,ident_code:this.state.AcquiringReportsCriteria.ident_code}),Object(D.jsx)("label",{htmlFor:"INN",children:"\u0420\u0420\u041d"}),Object(D.jsx)("input",{onChange:this.changeInput,apiName:"trans_rrn",type:"text",class:"form-control ".concat(!this.state.isForm_toValidation&&"validError "),placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0446\u0438\u0444\u0440\u0438..."}),Object(D.jsx)("p",{className:"error",children:this.state.isForm_toValidation?null:"\u0417\u0430\u043f\u043e\u0432\u043d\u0456\u0442\u044c, \u0431\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u043e\u0434\u043d\u0435 \u0437 5-\u0438 \u0437\u043d\u0430\u0447\u0435\u043d\u044c"})]}),Object(D.jsxs)("div",{className:"coverInput col-2",children:[Object(D.jsx)("label",{htmlFor:"merchant_id",children:"merchant ID"}),Object(D.jsx)(Mn,{token:this.props.store.userState.token,institution_id:this.state.AcquiringReportsCriteria.institution_id,branch_id:this.state.AcquiringReportsCriteria.bank_branch_id,addTspName:this.addMerchantName,tsp_id:this.state.AcquiringReportsCriteria.tsp_id,ident_code:this.state.AcquiringReportsCriteria.ident_code,tsp_name:this.state.AcquiringReportsCriteria.merchant_id,isError:this.state.isForm_toValidation}),Object(D.jsx)("label",{htmlFor:"terminal_id",children:"Terminal ID"}),Object(D.jsx)(Bn,{token:this.props.store.userState.token,isError:this.state.isForm_toValidation,institution_id:this.state.AcquiringReportsCriteria.institution_id,branch_id:this.state.AcquiringReportsCriteria.bank_branch_id,addTspName:this.addTerminalName,tsp_id:this.state.AcquiringReportsCriteria.tsp_id,ident_code:this.state.AcquiringReportsCriteria.ident_code,tsp_name:this.state.AcquiringReportsCriteria.merchant_id})]}),Object(D.jsxs)("div",{className:"coverInput col-3",children:[Object(D.jsxs)("div",{className:"base-field",children:[Object(D.jsx)("label",{htmlFor:"base",children:"\u0411\u0430\u0437\u043e\u0432\u0456 \u043f\u043e\u043b\u044f"}),Object(D.jsx)("input",{apiName:"base",id:"base",type:"checkbox"})]}),Object(D.jsx)("label",{htmlFor:"DICT_PAYMENT_SYSTEM",children:"\u041a\u0430\u0440\u0442\u0438"}),Object(D.jsx)(Sn.a,{closeMenuOnSelect:!1,isMulti:!0,options:this.state.DICT_PAYMENT_SYSTEM,placeholder:"\u0412\u0441\u0456",onChange:this.handleSelect}),Object(D.jsx)("label",{htmlFor:"terminal_id",children:"MCC"}),Object(D.jsx)("select",{onChange:this.changeInput,onFocus:function(){return e.requestDICT_TERMINAL_SYSTEM()},apiName:"mcc_code",id:"dropdown-basic-button",className:"form-select",title:"Terminal ID",children:this.state.isShowSelectDICT_MCC_SYSTEM?this.state.DICT_MCC_SYSTEM.map((function(e,t){return Object(D.jsx)(Cn,{optionItem:e},t)})):Object(D.jsx)(D.Fragment,{})}),Object(D.jsx)("label",{htmlFor:"format_type_id",children:"\u0424\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0443"}),Object(D.jsx)("select",{onChange:this.changeInput,apiName:"format_type_id",id:"format_type_id",className:"form-select",title:"DICT_REPORT_FORMAT",children:this.state.isShowSelectDICT_REPORT_FORMAT?this.state.DICT_REPORT_FORMAT.map((function(e,t){return Object(D.jsx)(Rn,{optionItem:e},t)})):Object(D.jsx)(D.Fragment,{})})]}),Object(D.jsxs)("div",{className:"coverInput col-4",children:[Object(D.jsx)("div",{className:"coverInput col-11",children:Object(D.jsxs)("div",{className:"coverDate",children:[Object(D.jsx)("label",{htmlFor:"date_type_id",children:"\u0414\u0430\u0442\u0430 \u0437\u0432\u0456\u0442\u0443"}),Object(D.jsx)("select",{onChange:this.changeInput,apiName:"date_type_id",id:"date_type_id",className:"".concat(this.state.isDate_type_idValidation?"":"validError"," form-select"),title:"DICT_DATE_TYPE",children:this.state.isShowSelectDICT_DATE_TYPE?this.state.DICT_DATE_TYPE.map((function(e,t){return Object(D.jsx)(vn,{optionItem:e},t)})):null}),Object(D.jsx)("p",{className:"error",children:this.state.isDate_type_idValidation?null:this.state.error_text})]})}),Object(D.jsxs)("div",{className:"coverInput col-11",children:[Object(D.jsx)("span",{children:"\u041f\u0435\u0440\u0456\u043e\u0434 \u0437\u0432\u0456\u0442\u0443"}),Object(D.jsxs)("div",{className:"row",children:[Object(D.jsxs)("div",{className:"coverDate col-6",children:[Object(D.jsx)("label",{htmlFor:"date_report_from",children:"\u0417"}),Object(D.jsx)("input",{onChange:this.changeInputDateReport_from,apiName:"date_from",className:"".concat(this.state.isDate_fromValidation&&this.state.isDate_month_Validation?"":"validError"," customInput form-control"),id:"date_from",type:"date"})]}),Object(D.jsxs)("div",{className:"coverDate col-6",children:[Object(D.jsx)("label",{htmlFor:"date_report_to",children:"\u041f\u043e"}),Object(D.jsx)("input",{onChange:this.changeInputDateReport_to,apiName:"date_to",className:"".concat(this.state.isDate_toValidation&&this.state.isDate_month_Validation?"":"validError"," customInput form-control"),id:"date_to",type:"date"})]})]}),Object(D.jsxs)("p",{className:"error",children:[this.state.isDate_fromValidation&&this.state.isDate_toValidation?null:"\u0417\u0430\u043f\u043e\u0432\u043d\u0456\u0442\u044c, \u0431\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0434\u0430\u0442\u0438!",this.state.isDate_month_Validation?null:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0438\u0439 \u0442\u0435\u0440\u043c\u0456\u043d 31 \u0434\u0435\u043d\u044c!"]})]})]})]}),Object(D.jsx)("div",{className:"btnBlock",children:Object(D.jsx)("button",{className:"search btn btn-primary",onClick:this.search,children:"\u041f\u043e\u0431\u0443\u0434\u0443\u0432\u0430\u0442\u0438 \u0437\u0432\u0456\u0442"})}),this.state.isShowPopupError?Object(D.jsx)(D.Fragment,{children:Object(D.jsx)("div",{className:"coverPopupError",children:Object(D.jsxs)("div",{className:"innerBlock",children:[Object(D.jsx)("div",{className:"title alert alert-danger",children:"\u041d\u0435\u043c\u0430\u0454 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443 \u043f\u043e \u0434\u0430\u043d\u043e\u043c\u0443 \u043f\u043e\u0448\u0443\u043a\u0443"}),Object(D.jsx)("div",{className:"msg",children:this.state.merchant_error}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:this.closePopupError,children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"})]})})}):Object(D.jsx)(D.Fragment,{}),this.state.isShowPopupErrorSave?Object(D.jsx)(D.Fragment,{children:Object(D.jsx)("div",{className:"coverPopupError",children:Object(D.jsxs)("div",{className:"innerBlock",children:[Object(D.jsx)("div",{className:"title alert alert-primary",children:"\u0423\u043f\u04411 \u0421\u0442\u0430\u043b\u0430\u0441\u044f \u043f\u043e\u043c\u0438\u043b\u043a\u0430"}),Object(D.jsx)("div",{className:"msg",children:":("}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:this.closePopupErrorSave,children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"})]})})}):Object(D.jsx)(D.Fragment,{})]})}}]),n}(s.a.Component)),Fn=function(e){return Object(D.jsx)("option",{value:e.optionItem.institution_id,children:e.optionItem.institution_name})},Yn=function(e){return Object(D.jsx)("option",{value:e.optionItem.date_type_id,children:e.optionItem.date_type_name})},Vn=function(e){return Object(D.jsx)("option",{selected:e.optionItem.report_format_id==e.report_format_id?"selected":"",value:e.optionItem.report_format_id,children:e.optionItem.report_format_name})},Un=function(e){return Object(D.jsx)("option",{selected:e.optionItem.report_period_type_id==e.report_period_type_id?"selected":"",value:e.optionItem.report_period_type_id,children:e.optionItem.report_period_type_name})},Hn=function(e){return Object(D.jsx)("option",{selected:e.optionItem.report_channel_type_id==e.channel_type_id?"selected":"",value:e.optionItem.report_channel_type_id,children:e.optionItem.report_channel_type_name})},Qn=function(e){return Object(D.jsx)("div",{className:"blockSelectItem",value:e.item.mcc_code,onClick:function(t){return e.onClickBlockSelectItem(t)},children:e.item.mcc_name})},Gn=function(e){return Object(D.jsx)("div",{className:"blockSelectItem",value:e.item.merchant_id,name:e.item.merchant_id,onClick:function(t){return e.onClickBlockSelectItem(t)},children:e.item.merchant_id})},Wn=function(e){return Object(D.jsx)("div",{className:"blockSelectItem",value:e.item.terminal_id,name:e.item.terminal_id,onClick:function(t){return e.onClickBlockSelectItem(t)},children:e.item.terminal_id})},Kn=function(e){return Object(D.jsxs)("div",{className:"blockSelectItem",value:e.item.client_id,name:e.item.client_name,"data-id":e.item.institution_id,onClick:function(t){return e.onClickBlockSelectItem(t)},children:[e.item.client_name," - ",e.item.institution_id]})},Zn=function(e){return Object(D.jsxs)("div",{className:"blockSelectItem",value:e.item.ident_code,onClick:function(t){return e.onClickBlockSelectItem(t)},"data-id":e.item.client_id,children:[e.item.ident_code," - ",e.item.institution_id]})},zn=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).onChangeAutocompleteInput=function(e){var t=e.target.value;console.log("param",t),a.props.addTspName(Number(0)),a.setState({inputRequest:t,selected:!1}),""!=t&&t.length>=3&&a.request(a.props.token,t,!0)},a.onClickAutocompleteInput=function(e){var t=e.target.value;console.log(t),a.request(a.props.token,t,!0)},a.onBlurAutocompleteInput=function(e){var t=e.target.value;console.log(t)},a.onClickAutocompleteInputRes=function(){a.setState({inputResult:null,isShowBlockSelect:!1,isShowInputResult:!1,isShowInputRequest:!0})},a.onBlurBlockSelect=function(){a.setState({isShowBlockSelect:!1})},a.onClickBlockSelectItem=function(e){var t=e.currentTarget.getAttribute("value"),n=e.currentTarget.getAttribute("name"),s=e.currentTarget.getAttribute("data-id");""!=t&&(a.props.addTspName(t),t!=a.state.inputRequest&&(a.request(a.props.token,t,!1),a.setState({inputResult:"".concat(n," - ").concat(s),inputRequest:"".concat(n," - ").concat(s),isShowBlockSelect:!1,selected:!0})),a.setState({isShowBlockSelect:!1}))},a.state={data:null,inputRequest:"",inputResult:a.props.tsp_name,isShowBlockSelect:!1,isShowInputResult:!1,isShowInputRequest:!0,isLoading:!1,selected:!1},a.myRef=s.a.createRef(),a}return Object(c.a)(n,[{key:"componentWillUnmount",value:function(){window.addEventListener("mousedown",null)}},{key:"request",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n,a){var s,i,r=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),console.log(t),s="/api/Dictionary/QueryTSP",console.log(s),i={institution_id:this.props.institution_id,branch_id:this.props.branch_id,client_name:n},console.log(i),e.next=8,R.post(s,i,{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(e){console.log(e.data),null==e.data.tsp_list.TableRows?r.setState({data:[{client_name:"\u041d\u0435\u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0436\u043e\u0434\u043d\u043e\u0433\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443"}]}):r.setState({data:e.data.tsp_list.TableRows}),a?r.setState({isShowBlockSelect:!0}):r.setState({isShowBlockSelect:!1}),r.setState({isLoading:!1})})).catch((function(e){console.log(e.response)}));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(D.jsxs)("div",{className:"autocomplete",children:[Object(D.jsx)("input",{className:"".concat(this.props.isError?"":"validError "," ").concat(this.state.selected?"selected ":"").concat(this.state.isShowInputRequest?"":"dn ","form-control"),placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043f\u0435\u0440\u0448\u0456 \u0431\u0443\u043a\u0432\u0438...",type:"text",onBlur:this.onBlurAutocompleteInput,onChange:this.onChangeAutocompleteInput,onClick:function(t){return e.state.isShowBlockSelect?e.setState({isShowBlockSelect:!1}):e.onClickAutocompleteInput(t)},value:this.state.inputRequest}),Object(D.jsx)("input",{className:"".concat(this.state.selected?"selected ":"").concat(this.state.isShowInputResult?"":"dn ","form-control"),placeholder:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442",type:"text",value:this.state.inputResult,onClick:this.onClickAutocompleteInputRes}),Object(D.jsx)("div",{className:"".concat(this.state.isShowBlockSelect?"":"dn ","blockSelect"),onBlur:this.onBlurBlockSelect,ref:this.myRef,children:this.state.isShowBlockSelect&&null!=this.state.data?this.state.data.map((function(t,n){return Object(D.jsx)(Kn,{item:t,onClickBlockSelectItem:e.onClickBlockSelectItem},n)})):null}),this.state.isLoading?Object(D.jsx)("div",{className:"coverloader",children:Object(D.jsx)("div",{className:"loader"})}):null]})}}]),n}(s.a.Component),$n=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).onChangeAutocompleteInput=function(e){var t=e.target.value;a.props.addClientID(Number(0)),a.props.addIdentCode(Number(0)),a.setState({inputRequest:t,selected:!1}),""!=t&&t.length>=0&&a.request(a.props.token,t,!0)},a.onClickAutocompleteInput=function(e){var t=e.target.value;""!=t&&t.length>=3&&a.request(a.props.token,t,!0)},a.onBlurAutocompleteInput=function(e){var t=e.target.value;console.log(t)},a.onClickAutocompleteInputRes=function(){a.setState({inputRequest:a.state.inputResult,inputResult:null,isShowBlockSelect:!0,isShowInputResult:!1,isShowInputRequest:!0})},a.onBlurBlockSelect=function(){a.setState({isShowBlockSelect:!1})},a.onClickBlockSelectItem=function(e){if(e){var t=e.currentTarget.getAttribute("value"),n=a.state.data.filter((function(e){return e.ident_code.toString().includes(t)}))[0],s=void 0===n.client_id?e.currentTarget.getAttribute("name"):n.client_id;""!=t&&(a.props.addIdentCode(Number(n.ident_code)),a.props.addClientID(Number(s)),a.setState({inputResult:"".concat(n.ident_code," - ").concat(n.institution_id),inputRequest:"".concat(n.ident_code," - ").concat(n.institution_id),isShowBlockSelect:!1,isShowInputRequest:!0,selected:!0}),a.setState({isShowBlockSelect:!1}))}},a.state={data:null,inputRequest:null,inputResult:a.props.ident_code,isShowBlockSelect:!1,isShowInputResult:!1,isShowInputRequest:!0,isLoading:!1,selected:!1},a.myRef=s.a.createRef(),a}return Object(c.a)(n,[{key:"componentWillUnmount",value:function(){window.addEventListener("mousedown",null)}},{key:"request",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n,a){var s,i,r=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),console.log(t),s="/api/Dictionary/QueryTSP",console.log(s),i={institution_id:this.props.institution_id,branch_id:this.props.branch_id,ident_code:n},console.log(i),e.next=8,R.post(s,i,{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(e){console.log(e.data),null==e.data.tsp_list.TableRows?r.setState({data:[{ident_code:"\u041d\u0435\u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0436\u043e\u0434\u043d\u043e\u0433\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443"}]}):r.setState({data:e.data.tsp_list.TableRows}),a?r.setState({isShowBlockSelect:!0}):r.setState({isShowBlockSelect:!1}),r.setState({isLoading:!1})})).catch((function(e){console.log(e.response)}));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this;return Object(D.jsxs)("div",{className:"autocomplete",children:[Object(D.jsx)(W.a,(e={type:"text",maskChar:"",alwaysShowMask:"false",pattern:"[0-9]",className:"".concat(this.props.isError?"":"validError ").concat(this.state.selected?"selected ":"").concat(this.state.isShowInputRequest?"":"dn ","form-control"),placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0446\u0438\u0444\u0440\u0438..."},Object(B.a)(e,"type","text"),Object(B.a)(e,"onBlur",this.onClickBlockSelectItem),Object(B.a)(e,"onChange",this.onChangeAutocompleteInput),Object(B.a)(e,"onClick",(function(e){return t.state.isShowBlockSelect?t.setState({isShowBlockSelect:!1}):t.onClickAutocompleteInput(e)})),Object(B.a)(e,"value",this.state.inputRequest),e)),Object(D.jsx)("input",{className:"".concat(this.state.selected?"selected ":"").concat(this.state.isShowInputResult?"":"dn ","form-control"),placeholder:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442",type:"text",value:this.state.inputResult,onClick:this.onClickAutocompleteInputRes}),Object(D.jsx)("div",{className:"".concat(this.state.isShowBlockSelect?"":"dn ","blockSelect"),onBlur:this.onBlurBlockSelect,ref:this.myRef,children:this.state.isShowBlockSelect&&null!=this.state.data?this.state.data.map((function(e,n){return Object(D.jsx)(Zn,{item:e,onClickBlockSelectItem:t.onClickBlockSelectItem},n)})):Object(D.jsx)(D.Fragment,{})}),this.state.isLoading?Object(D.jsx)("div",{className:"coverloader",children:Object(D.jsx)("div",{className:"loader"})}):Object(D.jsx)(D.Fragment,{})]})}}]),n}(s.a.Component),Jn=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).onChangeAutocompleteInput=function(e){var t=e.target.value;a.setState({inputRequest:t,selected:!1}),a.search(t)},a.onClickAutocompleteInput=function(e){var t=e.target.value;a.search(t)},a.onBlurAutocompleteInput=function(e){e.target.value},a.onClickAutocompleteInputRes=function(){a.setState({inputResult:null,isShowBlockSelect:!0,isShowInputResult:!1,isShowInputRequest:!0})},a.onBlurBlockSelect=function(){a.setState({isShowBlockSelect:!1})},a.onClickBlockSelectItem=function(e){var t=e.currentTarget.getAttribute("value"),n=e.currentTarget.getAttribute("name");""!==t&&(a.props.addTspName(t),+t!==+a.state.inputRequest&&(a.search(t),a.setState({inputRequest:n,isShowBlockSelect:!1,selected:!0})),a.setState({isShowBlockSelect:!1}))},a.clickTest=function(e){},a.state={data:null,inputRequest:"",inputResult:a.props.tsp_name,isShowBlockSelect:!1,isShowInputResult:!1,isShowInputRequest:!0,isLoading:!1,selected:!1,merchant_arr:null},a.myRef=s.a.createRef(),a}return Object(c.a)(n,[{key:"componentWillUnmount",value:function(){window.addEventListener("mousedown",null)}},{key:"request",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n,a){var s,i,r=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({isLoading:!0}),s="/api/Dictionary/QueryMerchant",i={institution_id:this.props.institution_id,merchant_id:0},this.props.tsp_id?i.client_id=+this.props.tsp_id:this.props.ident_code?i.client_id=+this.props.ident_code:i.client_id=0,!this.state.merchant_arr){e.next=6;break}return e.abrupt("return",this.setState({isLoading:!1}));case 6:return e.next=8,R.post(s,i,{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(e){null==e.data.merchant_list.TableRows?r.setState({data:[{client_name:"\u041d\u0435\u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0436\u043e\u0434\u043d\u043e\u0433\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443"}]}):r.setState({data:e.data.merchant_list.TableRows,merchant_arr:e.data.merchant_list.TableRows}),r.setState({isShowBlockSelect:!0}),r.setState({isLoading:!1})})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"search",value:function(e){this.setState({isShowBlockSelect:!0});var t=null!==this.state.merchant_arr?this.state.merchant_arr.filter((function(t){return t.merchant_id.toString().includes(e.toString())})):null;null===t?this.setState({data:[{client_name:"\u041d\u0435\u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0436\u043e\u0434\u043d\u043e\u0433\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443"}]}):this.setState({data:t})}},{key:"render",value:function(){var e=this;return Object(D.jsxs)("div",{className:"autocomplete",children:[Object(D.jsx)("input",{className:"".concat(this.props.isError?"":"validError "," ").concat(this.state.selected?"selected ":"").concat(this.state.isShowInputRequest?"":"dn ","form-control merchant-input"),placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0446\u0438\u0444\u0440\u0438...",type:"text",onChange:this.onChangeAutocompleteInput,onClick:function(){return e.state.isShowBlockSelect?e.setState({isShowBlockSelect:!1}):e.request(e.props.token,"",!1)},value:this.state.inputRequest}),Object(D.jsx)("input",{className:"".concat(this.state.selected?"selected ":"").concat(this.state.isShowInputResult?"":"dn ","form-control"),placeholder:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442",type:"text",value:this.state.inputResult,onClick:this.onClickAutocompleteInputRes}),Object(D.jsx)("div",{className:"".concat(this.state.isShowBlockSelect?"":"dn ","blockSelect"),onBlur:this.onBlurBlockSelect,ref:this.myRef,children:this.state.isShowBlockSelect&&null!=this.state.data?this.state.data.map((function(t,n){return Object(D.jsx)(Gn,{item:t,onClickBlockSelectItem:e.onClickBlockSelectItem},n)})):Object(D.jsx)(D.Fragment,{})}),this.state.isLoading?Object(D.jsx)("div",{className:"coverloader",children:Object(D.jsx)("div",{className:"loader"})}):null]})}}]),n}(s.a.Component),Xn=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).onChangeAutocompleteInput=function(e){var t=e.target.value;console.log(t),a.props.addTspName(Number(0)),a.setState({inputRequest:t,selected:!1}),a.search(t)},a.onClickAutocompleteInput=function(e){var t=e.target.value;console.log(t),""!=t&&t.length>=3&&a.search(t)},a.onBlurAutocompleteInput=function(e){var t=e.target.value;console.log(t),a.search(t)},a.onClickAutocompleteInputRes=function(){a.setState({inputResult:null,isShowBlockSelect:!0,isShowInputResult:!1,isShowInputRequest:!0})},a.onBlurBlockSelect=function(){a.setState({isShowBlockSelect:!1})},a.onClickBlockSelectItem=function(e){var t=e.currentTarget.getAttribute("value"),n=e.currentTarget.getAttribute("name");""!==t&&(+t!==+a.state.inputRequest&&(a.search(t),console.log(t),a.props.addTspName(Number(t)),a.setState({inputRequest:n,isShowBlockSelect:!1,selected:!0})),a.setState({isShowBlockSelect:!1}))},a.clickTest=function(e){},a.state={data:null,inputRequest:"",inputResult:a.props.tsp_name,isShowBlockSelect:!1,isShowInputResult:!1,isShowInputRequest:!0,isLoading:!1,selected:!1,terminal_arr:null},a.myRef=s.a.createRef(),a}return Object(c.a)(n,[{key:"componentWillUnmount",value:function(){window.addEventListener("mousedown",null)}},{key:"request",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n,a){var s,i,r=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({isLoading:!0}),console.log(t),s="/api/Dictionary/QueryTerminal",console.log(s),i={institution_id:this.props.institution_id,terminal_id:0},this.props.tsp_name&&(i.merchant_id=this.props.tsp_name),this.props.tsp_id?i.client_id=+this.props.tsp_id:this.props.ident_code?i.client_id=this.props.ident_code:i.client_id=0,!this.state.terminal_arr){e.next=9;break}return e.abrupt("return",this.setState({isLoading:!1}));case 9:return e.next=11,R.post(s,i,{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(e){null==e.data.terminal_list.TableRows?r.setState({data:[{client_name:"\u041d\u0435\u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0436\u043e\u0434\u043d\u043e\u0433\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443"}]}):r.setState({data:e.data.terminal_list.TableRows,terminal_arr:e.data.terminal_list.TableRows,isShowBlockSelect:!0}),r.setState({isLoading:!1})})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 11:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"search",value:function(e){this.setState({isShowBlockSelect:!0});var t=this.state.terminal_arr?this.state.terminal_arr.filter((function(t){return t.terminal_id.toString().includes(e.toString())})):null;null===t?this.setState({data:[{client_name:"\u041d\u0435\u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0436\u043e\u0434\u043d\u043e\u0433\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443"}]}):this.setState({data:t})}},{key:"render",value:function(){var e=this;return Object(D.jsxs)("div",{className:"autocomplete",children:[Object(D.jsx)("input",{className:"".concat(this.props.isError?"":"validError "," ").concat(this.state.selected?"selected ":"").concat(this.state.isShowInputRequest?"":"dn ","form-control terminal-input"),placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0446\u0438\u0444\u0440\u0438...",type:"text",onChange:this.onChangeAutocompleteInput,onClick:function(){return e.state.isShowBlockSelect?e.setState({isShowBlockSelect:!1}):e.request(e.props.token,"",!1)},value:this.state.inputRequest}),Object(D.jsx)("input",{className:"".concat(this.state.selected?"selected ":"").concat(this.state.isShowInputResult?"":"dn ","form-control"),placeholder:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442",type:"text",value:this.state.inputResult,onClick:this.onClickAutocompleteInputRes}),Object(D.jsx)("div",{className:"".concat(this.state.isShowBlockSelect?"":"dn ","blockSelect"),onBlur:this.onBlurBlockSelect,ref:this.myRef,children:this.state.isShowBlockSelect&&null!=this.state.data?this.state.data.map((function(t,n){return Object(D.jsx)(Wn,{item:t,onClickBlockSelectItem:e.onClickBlockSelectItem},n)})):Object(D.jsx)(D.Fragment,{})}),this.state.isLoading?Object(D.jsx)("div",{className:"coverloader",children:Object(D.jsx)("div",{className:"loader"})}):null]})}}]),n}(s.a.Component),ea=(s.a.Component,function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).selectDICT_INSTITUTION=function(e){var t=e.target.value,n=e.currentTarget.getAttribute("apiName"),s=a.state.AcquiringReportsCriteria;s[n]=t,""==t?(console.log(t),a.setState({isShowSelectTVBV:!0,TSPReportSettingsSearchObj:s,isInstitution_idValidation:!1})):(a.setState({isShowSelectTVBV:!1,TSPReportSettingsSearchObj:s,AcquiringReportsCriteria:s,isInstitution_idValidation:!0,institution_id:t}),a.requestDICT_BRANCH(a.props.store.userState.token,t))},a.changeInputDateReport=function(e){var t=e.currentTarget.getAttribute("apiName"),n=e.target.value,s=a.state.AcquiringReportsCriteria;s[t]=a.formatDate(new Date(n)),a.setState({AcquiringReportsCriteria:s})},a.changeInputDateReport_from=function(e){var t=e.currentTarget.getAttribute("apiName"),n=e.target.value,s=a.state.AcquiringReportsCriteria;s[t]=a.formatDate(new Date(n)),""==n?a.setState({AcquiringReportsCriteria:s,isDate_fromValidation:!1}):a.setState({AcquiringReportsCriteria:s,isDate_fromValidation:!0,date_from:n})},a.changeInputDateReport_to=function(e){var t=e.currentTarget.getAttribute("apiName"),n=e.target.value,s=a.state.AcquiringReportsCriteria;s[t]=a.formatDate(new Date(n)),""==n?a.setState({AcquiringReportsCriteria:s,isDate_toValidation:!1}):a.setState({AcquiringReportsCriteria:s,isDate_toValidation:!0,date_to:n})},a.changeInputBase=function(e){var t=e.currentTarget.getAttribute("apiName"),n=e.target.value,s=a.state.AcquiringReportsCriteria;s[t]=n,a.setState({AcquiringReportsCriteria:s})},a.changeInput=function(e){var t=e.currentTarget.getAttribute("apiName"),n=e.target.value,s=a.state.AcquiringReportsCriteria;"format_type_id"==t||"mcc_code"==t||"payment_system_id"==t||"terminal_id"==t||"bank_branch_id"==t||"institution_id"==t?(console.log("inputValue: ",n),s[t]=n):"terminal_type_id"==t?(s[t]=n,""==n?(console.log(n),a.setState({AcquiringReportsCriteria:s,isTerminal_type_idValidation:!1})):a.setState({AcquiringReportsCriteria:s,isTerminal_type_idValidation:!0,terminal_type_id:n})):"merchant_id"==t?(s[t]=n,""==n?(console.log(n),a.setState({AcquiringReportsCriteria:s,isMerchant_idValidation:!1})):a.setState({AcquiringReportsCriteria:s,isMerchant_idValidation:!0,merchant_id:n})):"date_type_id"==t?(s[t]=Number(n),""==n?(console.log(n),a.setState({AcquiringReportsCriteria:s,isDate_type_idValidation:!1})):a.setState({AcquiringReportsCriteria:s,isDate_type_idValidation:!0,date_type_id:n})):s[t]=n,console.log(s),a.setState({AcquiringReportsCriteria:s}),console.log(a.state),console.log("here:",a.state.AcquiringReportsCriteria)},a.formatDate=function(e){var t=e.getDate(),n=("0"+(e.getMonth()+1)).slice(-2);return t.toString().length<2&&(t="0"+t),e.getFullYear()+n+t},a.search=function(){a.defineValidationInputs()},a.defineValidationInputs=function(){var e=new Date(a.state.date_from),t=new Date(a.state.date_to),n=Math.abs(t-e),s=Math.ceil(n/864e5);null!=a.state.institution_id&&0!=a.state.institution_id||a.setState({isInstitution_idValidation:!1}),null!=a.state.date_type_id&&""!=a.state.date_type_id||a.setState({isDate_type_idValidation:!1}),null!=a.state.date_from&&""!=a.state.date_from||a.setState({isDate_fromValidation:!1}),null!==a.state.date_to&&""!==a.state.date_to||a.setState({isDate_toValidation:!1}),s>31&&a.setState({isDate_month_Validation:!1}),a.setState({},(function(){return a.sendOptionToServer()}))},a.Tsp_list=function(e){return console.log(e),e.map((function(e,t){return console.log(e),Object(D.jsx)("li",{className:"dropdownMenuItem",children:Object(D.jsxs)("p",{children:[Object(D.jsx)("input",{name:"tsp_list",id:e.tsp_name,type:"radio",onClick:a.itemTsp,value:e.tsp_id})," ",e.tsp_name]})})}))},a.itemTsp=function(e){var t=e.target.value;console.log(t),console.log(a.state),a.state.settings.map((function(e,n){e.tsp_id==t&&(null==e.main_settings?a.setState({type_acquiring:2,report_format_id:1,report_period_type_id:1,channel_type_id:1,file_name_mask:""}):e.main_settings.length&&(console.log(e.main_settings[0].acquiring_type_id),a.setState({type_acquiring:e.main_settings[0].acquiring_type_id,report_format_id:e.main_settings[0].report_format_id,report_period_type_id:e.main_settings[0].report_period_type_id,channel_type_id:e.main_settings[0].channel_type_id,file_name_mask:e.main_settings[0].file_name_mask})))})),a.setState({currentTsp:Number(t),TSPReportSettingsSTD:null,isShowTypeAcquiring:!0}),a.requestDICT_REPORT_FORMAT(a.props.store.userState.token),a.requestDICT_REPORT_PERIOD_TYPE(a.props.store.userState.token),a.requestDICT_REPORT_CHANNEL_TYPE(a.props.store.userState.token)},a.changeTypeAcquiring=function(e){var t=e.currentTarget.getAttribute("type_acquiring");console.log(t),a.state.settings.map((function(e,n){console.log(a.state.currentTsp),console.log(e.tsp_id),e.tsp_id==a.state.currentTsp&&e.main_settings.length>1&&(console.log(e.main_settings.length>1),e.main_settings.map((function(e,n){e.acquiring_type_id==t&&(console.log(e.acquiring_type_id==t),a.setState({type_acquiring:Number(t),report_format_id:e.report_format_id,report_period_type_id:e.report_period_type_id,channel_type_id:e.channel_type_id,file_name_mask:e.file_name_mask}))})))}))},a.openStandardReport=function(){a.requestTSPReportSettingsSTD(a.props.store.userState.token)},a.closePopupTable=function(){a.setState({isShowTableTSPReportSettingsSTD:!1})},a.changeReport_format_id=function(e){var t=e.target.value;console.log(t),a.setState({report_format_id:Number(t)})},a.changeReport_period_type_id=function(e){var t=e.target.value;console.log(t),a.setState({report_period_type_id:Number(t)})},a.changeChannel_type_id=function(e){var t=e.target.value;console.log(t),a.setState({channel_type_id:Number(t)})},a.changeFile_name_mask=function(e){var t=e.target.value;console.log(t),a.setState({file_name_mask:t})},a.saveReport=function(){var e={acquiring_type_id:a.state.type_acquiring,tsp_list:[{tsp_id:a.state.currentTsp}],main_settings:{acquiring_type_id:a.state.type_acquiring,report_format_id:a.state.report_format_id,report_period_type_id:a.state.report_period_type_id,channel_type_id:a.state.channel_type_id,file_name_mask:a.state.file_name_mask}};null!=a.state.TSPReportSettingsSTD&&(e.std_settings=a.state.TSPReportSettingsSTD),a.requestTSPReportSettingsSTD_SAVE(a.props.store.userState.token)},a.showReport=function(e){return console.log(e),a.state.settings.map((function(t,n){if(console.log(t),console.log(t.tsp_id),console.log(t.tsp_id==e),t.tsp_id==e){if(console.log(t.main_settings),null==t.main_settings){return Object(D.jsxs)("div",{className:"report border",children:[Object(D.jsx)("div",{className:"title",children:"\u041f\u0435\u0440\u0435\u043b\u0456\u043a \u043f\u043e\u043b\u0456\u0432 \u0437\u0432\u0456\u0442\u0443 \u0422\u0421\u041f"}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:a.openStandardReport,children:"\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:!0,children:"\u0420\u043e\u0437\u0448\u0438\u0440\u0435\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:!0,children:"\u0417\u0432\u0456\u0442 \u043f\u043e \u043e\u043f\u0435\u0440\u0430\u0446\u0456\u044f\u043c Installment"}),Object(D.jsx)("br",{}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_format",children:"\u0424\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0443"}),a.state.isShowREPORT_FORMAT?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_format_id,name:"DICT_REPORT_FORMAT",id:"DICT_REPORT_FORMAT",children:a.state.DICT_REPORT_FORMAT.map((function(e,t){return Object(D.jsx)(Vn,{optionItem:e,report_format_id:1},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"report_period",children:"\u041f\u0435\u0440\u0456\u043e\u0434 \u0437\u0432\u0456\u0442\u0443"}),a.state.isShowDICT_REPORT_PERIOD_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_period_type_id,name:"DICT_REPORT_PERIOD_TYPE",id:"DICT_REPORT_PERIOD_TYPE",children:a.state.DICT_REPORT_PERIOD_TYPE.map((function(e,t){return Object(D.jsx)(Un,{optionItem:e,report_period_type_id:1},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_name_mask",children:"\u041c\u0430\u0441\u043a\u0430 \u043d\u0430\u0437\u0432\u0438 \u0444\u0430\u0439\u043b\u0443"}),Object(D.jsx)("input",{defaultValue:"",onChange:a.changeFile_name_mask,apiName:"file_name_mask",className:"customInput form-control",id:"file_name_mask",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441atalog",children:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433"}),Object(D.jsx)("input",{disabled:!0,onChange:a.changeInput,apiName:"\u0441atalog",className:"customInput form-control",id:"\u0441atalog",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441hannel",children:"\u041a\u0430\u043d\u0430\u043b"}),a.state.isShowDICT_REPORT_CHANNEL_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeChannel_type_id,name:"DICT_REPORT_CHANNEL_TYPE",id:"DICT_REPORT_CHANNEL_TYPE",children:a.state.DICT_REPORT_CHANNEL_TYPE.map((function(e,t){return Object(D.jsx)(Hn,{optionItem:e,channel_type_id:1},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsx)("div",{className:"reportCoverBtn",children:Object(D.jsx)("button",{className:"btn btn-secondary",onClick:a.saveReport,children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})})]})}if(1==t.main_settings.length)return t.main_settings.map((function(e,t){var n=e.report_period_type_id,s=e.report_format_id,i=e.channel_type_id,r=e.file_name_mask;return Object(D.jsxs)("div",{className:" border report",children:[Object(D.jsxs)("div",{className:"coverBtn border",children:[Object(D.jsx)("div",{className:"title",children:"\u0412\u0438\u0434 \u0435\u043a\u0432\u0430\u0440\u0438\u043d\u0433\u0443"}),Object(D.jsx)("button",{className:"btn btn-secondary",children:1==a.state.type_acquiring?"\u0424\u0456\u0437\u0438\u0447\u043d\u0438\u0439":"\u0406\u043d\u0442\u0435\u0440\u043d\u0435\u0442"})]}),Object(D.jsxs)("div",{className:"report border",children:[Object(D.jsx)("div",{className:"title",children:"\u041f\u0435\u0440\u0435\u043b\u0456\u043a \u043f\u043e\u043b\u0456\u0432 \u0437\u0432\u0456\u0442\u0443 \u0422\u0421\u041f"}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:a.openStandardReport,children:"\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:!0,children:"\u0420\u043e\u0437\u0448\u0438\u0440\u0435\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:!0,children:"\u0417\u0432\u0456\u0442 \u043f\u043e \u043e\u043f\u0435\u0440\u0430\u0446\u0456\u044f\u043c Installment"}),Object(D.jsx)("br",{}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_format",children:"\u0424\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0443"}),a.state.isShowREPORT_FORMAT?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_format_id,name:"DICT_REPORT_FORMAT",id:"DICT_REPORT_FORMAT",children:a.state.DICT_REPORT_FORMAT.map((function(e,t){return Object(D.jsx)(Vn,{optionItem:e,report_format_id:s},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"report_period",children:"\u041f\u0435\u0440\u0456\u043e\u0434 \u0437\u0432\u0456\u0442\u0443"}),a.state.isShowDICT_REPORT_PERIOD_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_period_type_id,name:"DICT_REPORT_PERIOD_TYPE",id:"DICT_REPORT_PERIOD_TYPE",children:a.state.DICT_REPORT_PERIOD_TYPE.map((function(e,t){return Object(D.jsx)(Un,{optionItem:e,report_period_type_id:n},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_name_mask",children:"\u041c\u0430\u0441\u043a\u0430 \u043d\u0430\u0437\u0432\u0438 \u0444\u0430\u0439\u043b\u0443"}),Object(D.jsx)("input",{defaultValue:r,onChange:a.changeFile_name_mask,apiName:"file_name_mask",className:"customInput form-control",id:"file_name_mask",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441atalog",children:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433"}),Object(D.jsx)("input",{disabled:!0,onChange:a.changeInput,apiName:"\u0441atalog",className:"customInput form-control",id:"\u0441atalog",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441hannel",children:"\u041a\u0430\u043d\u0430\u043b"}),a.state.isShowDICT_REPORT_CHANNEL_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeChannel_type_id,name:"DICT_REPORT_CHANNEL_TYPE",id:"DICT_REPORT_CHANNEL_TYPE",children:a.state.DICT_REPORT_CHANNEL_TYPE.map((function(e,t){return Object(D.jsx)(Hn,{optionItem:e,channel_type_id:i},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsx)("div",{className:"reportCoverBtn",children:Object(D.jsx)("button",{className:"btn btn-secondary",onClick:a.saveReport,children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})})]})]})}));if(2==t.main_settings.length)return Object(D.jsxs)("div",{className:"",children:[Object(D.jsxs)("div",{className:"coverBtn border",children:[Object(D.jsx)("div",{className:"title",children:"\u0412\u0438\u0434 \u0435\u043a\u0432\u0430\u0440\u0438\u043d\u0433\u0443"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:1==a.state.type_acquiring?"disabled":"",onClick:a.changeTypeAcquiring,type_acquiring:1,children:"\u0424\u0456\u0437\u0438\u0447\u043d\u0438\u0439"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:2==a.state.type_acquiring?"disabled":"",onClick:a.changeTypeAcquiring,type_acquiring:2,children:"\u0406\u043d\u0442\u0435\u0440\u043d\u0435\u0442"})]}),t.main_settings.map((function(e,t){var n=e.report_period_type_id,s=e.report_format_id,i=e.channel_type_id,r=e.file_name_mask,o=e.acquiring_type_id,c=e.standard_report,l=e.extended_report,d=e.installment_report;return console.log(a.state.type_acquiring),Object(D.jsxs)("div",{className:"".concat(a.state.type_acquiring==o?"":"d-none"," border report"),children:[Object(D.jsx)("div",{className:"title",children:"\u041f\u0435\u0440\u0435\u043b\u0456\u043a \u043f\u043e\u043b\u0456\u0432 \u0437\u0432\u0456\u0442\u0443 \u0422\u0421\u041f"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:c?"":"disabled",onClick:a.openStandardReport,children:"\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:l?"":"disabled",children:"\u0420\u043e\u0437\u0448\u0438\u0440\u0435\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:d?"":"disabled",children:"\u0417\u0432\u0456\u0442 \u043f\u043e \u043e\u043f\u0435\u0440\u0430\u0446\u0456\u044f\u043c Installment"}),Object(D.jsx)("br",{}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_format",children:"\u0424\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0443"}),a.state.isShowREPORT_FORMAT?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_format_id,name:"DICT_REPORT_FORMAT",id:"DICT_REPORT_FORMAT",children:a.state.DICT_REPORT_FORMAT.map((function(e,t){return Object(D.jsx)(Vn,{optionItem:e,report_format_id:s},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"report_period",children:"\u041f\u0435\u0440\u0456\u043e\u0434 \u0437\u0432\u0456\u0442\u0443"}),a.state.isShowDICT_REPORT_PERIOD_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_period_type_id,name:"DICT_REPORT_PERIOD_TYPE",id:"DICT_REPORT_PERIOD_TYPE",children:a.state.DICT_REPORT_PERIOD_TYPE.map((function(e,t){return Object(D.jsx)(Un,{optionItem:e,report_period_type_id:n},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_name_mask",children:"\u041c\u0430\u0441\u043a\u0430 \u043d\u0430\u0437\u0432\u0438 \u0444\u0430\u0439\u043b\u0443"}),Object(D.jsx)("input",{defaultValue:r,onChange:a.changeFile_name_mask,apiName:"file_name_mask",className:"customInput form-control",id:"file_name_mask",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441atalog",children:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433"}),Object(D.jsx)("input",{disabled:!0,onChange:a.changeInput,apiName:"\u0441atalog",className:"customInput form-control",id:"\u0441atalog",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441hannel",children:"\u041a\u0430\u043d\u0430\u043b"}),a.state.isShowDICT_REPORT_CHANNEL_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeChannel_type_id,name:"DICT_REPORT_CHANNEL_TYPE",id:"DICT_REPORT_CHANNEL_TYPE",children:a.state.DICT_REPORT_CHANNEL_TYPE.map((function(e,t){return Object(D.jsx)(Hn,{optionItem:e,channel_type_id:i},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsx)("br",{}),Object(D.jsx)("div",{className:"reportCoverBtn",children:Object(D.jsx)("button",{className:"btn btn-secondary",onClick:a.saveReport,children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})})]})}))]})}}))},a.closePopupError=function(){a.setState({isShowPopupError:!1})},a.closePopupErrorSave=function(){a.setState({isShowPopupErrorSave:!1})},a.activeOperation=function(e,t){var n;return e.map((function(e,a){e.operation==t&&(n=e.name)})),n},a.onChangeAutocompleteInput=function(e){var t=e.target.value;console.log(t),a.setState({InputDICT_MCC:t}),""!=t&&a.requestDICT_MCC(a.props.store.userState.token,t,!0)},a.onClickAutocompleteInput=function(e){var t=e.target.value;console.log(t),a.setState({isShowBlockSelectDICT_MCC:!0})},a.onClickAutocompleteInputRes=function(){a.setState({mcc_code:null,isShowBlockSelectDICT_MCC:!0,isShowInputResDICT_MCC:!1,isShowInputDICT_MCC:!0})},a.onBlurBlockSelect=function(){a.setState({isShowBlockSelectDICT_MCC:!1})},a.onClickBlockSelectItem=function(e){var t=e.currentTarget.getAttribute("value");if(""!=t){if(t!=a.state.InputDICT_MCC){a.requestDICT_MCC(a.props.store.userState.token,t,!1);var n=a.state.AcquiringReportsCriteria;n.mcc_code=t,console.log(t),a.setState({AcquiringReportsCriteria:n,InputDICT_MCC:t,isShowBlockSelectDICT_MCC:!1,isShowInputResDICT_MCC:!0,isShowInputDICT_MCC:!1})}a.setState({isShowBlockSelectDICT_MCC:!1})}},a.clickTest=function(e){},a.addMerchantName=function(e){var t=a.state.AcquiringReportsCriteria;t.merchant_id=e,a.setState({AcquiringReportsCriteria:t}),console.log(a.state.AcquiringReportsCriteria.tsp_name)},a.addTerminalName=function(e){console.log(e);var t=a.state.AcquiringReportsCriteria;t.terminal_id=e,console.log(t),a.setState({AcquiringReportsCriteria:t}),console.log(a.state.AcquiringReportsCriteria.tsp_name)},a.addTspName=function(e){console.log(e);var t=a.state.AcquiringReportsCriteria;t.tsp_id=e,console.log(t),a.setState({AcquiringReportsCriteria:t}),console.log(a.state.AcquiringReportsCriteria.tsp_name)},a.addIdentCode=function(e){var t=a.state.AcquiringReportsCriteria;t.ident_code=e,a.setState({AcquiringReportsCriteria:t})},a.addClientID=function(e){var t=a.state.AcquiringReportsCriteria;t.tsp_id=e,a.setState({AcquiringReportsCriteria:t})},a.addMccCode=function(e){var t=a.state.AcquiringReportsCriteria;t.mcc_code=e,a.setState({AcquiringReportsCriteria:t})},a.handleSelect=function(e){var t,n=a.state.AcquiringReportsCriteria;t=0===e.length?0:e.map((function(e){return e.value})).join(","),n.payment_system_id=t,a.setState({AcquiringReportsCriteria:n})},a.state={DICT_INSTITUTION:null,isShowSelectDICT_INSTITUTION:!1,DICT_BRANCH:null,isDisableTVBV:!0,isShowSelectTVBV:!1,DICT_ACQUIRING_REPORTS:null,isShowSelectDICT_ACQUIRING_REPORTS:!1,DICT_ACQUIRING_TYPE:null,isShowSelectDICT_ACQUIRING_TYPE:!1,DICT_PAYMENT_SYSTEM:null,isShowSelectDICT_PAYMENT_SYSTEM:!1,DICT_TERMINAL_SYSTEM:null,isShowSelectDICT_MERCHANT_SYSTEM:!1,DICT_MERCHANT_SYSTEM:null,isShowSelectDICT_TERMINAL_SYSTEM:!1,DICT_REPORT_FORMAT:null,isShowSelectDICT_REPORT_FORMAT:!1,DICT_DATE_TYPE:null,isShowSelectDICT_DATE_TYPE:!1,AcquiringReportsCriteria:{report_type_id:"REPORT_CASH_OUT",payment_system_id:0,format_type_id:1,terminal_type_id:1,institution_id:0,date_type_id:1,merchant_id:0,terminal_id:0,tsp_id:0,ident_code:0},date_from:null,date_to:null,date_type_id:1,institution_id:0,merchant_id:null,isInstitution_idValidation:!0,isMerchant_idValidation:!0,isTerminal_type_idValidation:!0,isDate_type_idValidation:!0,isDate_month_Validation:!0,isDate_fromValidation:!0,isDate_toValidation:!0,isForm_toValidation:!0,DICT_MCC_SYSTEM:null,isShowSelectDICT_MCC_SYSTEM:!1,DICT_MCC:null,InputDICT_MCC:null,isShowBlockSelectDICT_MCC:!1,isShowInputResDICT_MCC:!1,isShowInputDICT_MCC:!0,error_text:"\u0417\u0430\u043f\u043e\u0432\u043d\u0456\u0442\u044c, \u0431\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0434\u0430\u0442\u0438!",isSuccess:!1,merchant_error:""},a.myRef=s.a.createRef(),a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.requestDICT_INSTITUTION(this.props.store.userState.token),this.requestDICT_ACQUIRING_REPORTS(this.props.store.userState.token),this.requestDICT_ACQUIRING_TYPE(this.props.store.userState.token),this.requestDICT_PAYMENT_SYSTEM(this.props.store.userState.token),this.requestDICT_REPORT_FORMAT(this.props.store.userState.token),this.requestDICT_DATE_TYPE(this.props.store.userState.token)}},{key:"componentWillUnmount",value:function(){window.addEventListener("mousedown",null)}},{key:"requestDICT_INSTITUTION",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_INSTITUTION",e.next=5,R.get("/api/Dictionary/DICT_INSTITUTION",{headers:{Token:"".concat(t)}}).then((function(e){if(1===e.data.Table.TableRows.length){var t=e.data.Table.TableRows[0].institution_id,a=n.state.AcquiringReportsCriteria;a.institution_id=t,n.setState({isShowSelectTVBV:!1,TSPReportSettingsSearchObj:a,AcquiringReportsCriteria:a,isInstitution_idValidation:!0,institution_id:t}),n.requestDICT_BRANCH(n.props.store.userState.token,t)}n.setState({DICT_INSTITUTION:e.data.Table.TableRows,isShowSelectDICT_INSTITUTION:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_BRANCH",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n){var a,s=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),a="/api/Dictionary/DICT_BRANCH/?param1=".concat(n),{param1:n},e.next=6,R.get(a,{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),s.setState({DICT_BRANCH:e.data.Table.TableRows,isShowSelectTVBV:!0,isDisableTVBV:!1}),s.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"requestDICT_REPORT_FORMAT",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_REPORT_FORMAT",e.next=5,R.get("/api/Dictionary/DICT_REPORT_FORMAT",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_REPORT_FORMAT:e.data.Table.TableRows,isShowSelectDICT_REPORT_FORMAT:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_REPORT_PERIOD_TYPE",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_REPORT_PERIOD_TYPE",e.next=5,R.get("/api/Dictionary/DICT_REPORT_PERIOD_TYPE",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_REPORT_PERIOD_TYPE:e.data.Table.TableRows,isShowDICT_REPORT_PERIOD_TYPE:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_ACQUIRING_REPORTS",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_ACQUIRING_REPORTS",e.next=5,R.get("/api/Dictionary/DICT_ACQUIRING_REPORTS",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_ACQUIRING_REPORTS:e.data.Table.TableRows,isShowSelectDICT_ACQUIRING_REPORTS:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_ACQUIRING_TYPE",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_ACQUIRING_TYPE",e.next=5,R.get("/api/Dictionary/DICT_ACQUIRING_TYPE",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_ACQUIRING_TYPE:e.data.Table.TableRows,isShowSelectDICT_ACQUIRING_TYPE:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_PAYMENT_SYSTEM",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_PAYMENT_SYSTEM",e.next=5,R.get("/api/Dictionary/DICT_PAYMENT_SYSTEM",{headers:{Token:"".concat(t)}}).then((function(e){n.setState({DICT_PAYMENT_SYSTEM:e.data.Table.TableRows.map((function(e){return{value:e.payment_system_id,label:e.payment_system_name}})),isShowSelectDICT_PAYMENT_SYSTEM:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_MERCHANT_SYSTEM",value:function(){var e=Object(C.a)(f.a.mark((function e(){var t,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Dictionary/QueryMerchant",t={institution_id:+this.state.institution_id,merchant_id:+this.state.merchant_id||0},this.state.AcquiringReportsCriteria.tsp_id?t.client_id=+this.state.AcquiringReportsCriteria.tsp_id:this.state.AcquiringReportsCriteria.ident_code?t.client_id=+this.state.AcquiringReportsCriteria.ident_code:t.client_id=0,e.next=6,R.post("/api/Dictionary/QueryMerchant",t,{headers:{Token:"".concat(this.props.store.userState.token)}}).then((function(e){console.log(e.data),n.setState({DICT_MERCHANT_SYSTEM:e.data.merchant_list.TableRows,isShowSelectDICT_MERCHANT_SYSTEM:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"requestDICT_TERMINAL_SYSTEM",value:function(){var e=Object(C.a)(f.a.mark((function e(){var t,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Dictionary/QueryMCC",t={institution_id:+this.state.institution_id,merchant_id:+this.state.merchant_id||0},this.state.AcquiringReportsCriteria.tsp_id?t.client_id=+this.state.AcquiringReportsCriteria.tsp_id:this.state.AcquiringReportsCriteria.ident_code?t.client_id=+this.state.AcquiringReportsCriteria.ident_code:t.client_id=0,e.next=6,R.post("/api/Dictionary/QueryMCC",t,{headers:{Token:"".concat(this.props.store.userState.token)}}).then((function(e){0!==e.data.record_count&&n.setState({DICT_TERMINAL_SYSTEM:e.data.Table.TableRows,DICT_MCC_SYSTEM:e.data.Table.TableRows,isShowSelectDICT_TERMINAL_SYSTEM:!0,isShowSelectDICT_MCC_SYSTEM:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"requestDICT_DATE_TYPE",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_DATE_TYPE",e.next=5,R.get("/api/Dictionary/DICT_DATE_TYPE",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_DATE_TYPE:e.data.Table.TableRows,isShowSelectDICT_DATE_TYPE:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_MCC_SYSTEM",value:function(){var e=Object(C.a)(f.a.mark((function e(){var t,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Dictionary/QueryMCC",t={terminal_id:+this.state.AcquiringReportsCriteria.tsp_id,merchant_id:+this.state.merchant_id||0},this.state.AcquiringReportsCriteria.ident_code?t.client_id=+this.state.AcquiringReportsCriteria.ident_code:t.client_id=0,e.next=6,R.post("/api/Dictionary/QueryMCC",t,{headers:{Token:"".concat(this.props.store.userState.token)}}).then((function(e){n.setState({DICT_TERMINAL_SYSTEM:e.data.mcc_list.TableRows,isShowSelectDICT_MCC_SYSTEM:!0,DICT_MCC_SYSTEM:e.data.Table.TableRows}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"requestReports_Acquiring",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Reports/Acquiring",console.log(n),e.abrupt("return");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"sendOptionToServer",value:function(){this.state.isInstitution_idValidation&&this.state.isTerminal_type_idValidation&&this.state.isDate_type_idValidation&&this.state.isDate_fromValidation&&this.state.isDate_toValidation&&this.state.isForm_toValidation&&this.state.isDate_month_Validation&&this.requestReports_Acquiring(this.props.store.userState.token,this.state.AcquiringReportsCriteria)}},{key:"handleCheckId",value:function(){var e=this;this.checkMerchantID().then((function(t){0!==t.data.ErrorStatus.ErrorCode&&e.setState({merchant_error:t.data.ErrorStatus.ErrorMessage,isShowPopupError:!0})}))}},{key:"checkMerchantID",value:function(){var e=Object(C.a)(f.a.mark((function e(){var t,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Dictionary/QueryMerchant",t={institution_id:+this.state.institution_id,merchant_id:+this.state.merchant_id||0},this.state.tsp_id?t.client_id=+this.state.tsp_id:this.state.ident_code?t.client_id=+this.state.ident_code:t.client_id=0,e.next=6,R.post("/api/Dictionary/QueryMerchant",t,{headers:{Token:"".concat(this.props.store.userState.token),"Content-Type":"application/json"}}).then((function(e){return n.props.store.changeLoading(!1),e})).catch((function(e){console.log(e.response)}));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"requestDICT_MCC",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n,a){var s,i=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),s="/api/Dictionary/DICT_MCC/?param1=".concat(n),console.log(s),e.next=6,R.get(s,{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),null==e.data.Table.TableRows?i.setState({DICT_MCC:[{mcc_code:"",mcc_name:"\u0417\u0430 \u0434\u0430\u043d\u0438\u043c \u043a\u043e\u0434\u043e\u043c \u043d\u0435\u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0436\u043e\u0434\u043d\u043e\u0433\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443"}]}):i.setState({DICT_MCC:e.data.Table.TableRows}),a?i.setState({isShowBlockSelectDICT_MCC:!0}):i.setState({isShowBlockSelectDICT_MCC:!1}),i.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(D.jsxs)("div",{className:"coverTable REPORT_aquiring",children:[this.state.isSuccess?Object(D.jsxs)(U.a,{variant:"success",children:["\u0417\u0432\u0456\u0442 \u0412\u0438\u043f\u0438\u0441\u043a\u0430 \u043e\u043f\u0435\u0440\u0430\u0446\u0456\u0439 \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0441\u0444\u043e\u0440\u043c\u043e\u0432\u0430\u043d\u0430. \u041f\u0435\u0440\u0435\u0439\u0434\u0456\u0442\u044c \u043f\u043e"," ",Object(D.jsx)(U.a.Link,{href:"/dashboard/REPORTS_ACQUIRING_MONITOR",children:"\u043b\u0456\u043d\u043a\u0443"}),". \u0414\u043b\u044f \u043f\u0435\u0440\u0435\u0433\u043b\u044f\u0434\u0443 \u0437\u0432\u0456\u0442\u0430."]}):null,Object(D.jsxs)("div",{className:"headerTable",children:[Object(D.jsx)("div",{className:"titleTable",children:this.activeOperation(this.props.store.userState.OPERATIONS,this.props.store.location.pathname.substr(11))}),Object(D.jsx)("div",{className:"optionBlock"})]}),Object(D.jsxs)("div",{className:"filter d-flex justify-content-between",children:[Object(D.jsxs)("div",{className:"coverInput col-5",children:[Object(D.jsx)("label",{htmlFor:"DICT_INSTITUTION",children:"\u0420\u0423 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430"}),Object(D.jsx)("select",{onChange:this.selectDICT_INSTITUTION,apiName:"institution_id",id:"dropdown-basic-button",className:"".concat(this.state.isInstitution_idValidation?"":"validError"," form-select"),title:"\u0420\u0435\u0433\u0456\u043e\u043d\u0430\u043b\u044c\u043d\u0456 \u0443\u043f\u0440\u0430\u0432\u043b\u0456\u043d\u043d\u044f",children:this.state.isShowSelectDICT_INSTITUTION?this.state.DICT_INSTITUTION.map((function(e,t){return Object(D.jsx)(Fn,{optionItem:e},t)})):Object(D.jsx)(D.Fragment,{})}),Object(D.jsx)("p",{className:"error",children:this.state.isInstitution_idValidation?null:"\u041e\u0431\u0435\u0440\u0456\u0442\u044c, \u0431\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f!"}),Object(D.jsx)("label",{htmlFor:"tsp_name",children:"\u041d\u0430\u0437\u0432\u0430 \u0422\u0421\u041f"}),Object(D.jsx)(zn,{isError:this.state.isForm_toValidation,token:this.props.store.userState.token,institution_id:this.state.AcquiringReportsCriteria.institution_id,branch_id:this.state.AcquiringReportsCriteria.bank_branch_id,addTspName:this.addTspName,tsp_name:this.state.AcquiringReportsCriteria.tsp_id}),Object(D.jsx)("label",{htmlFor:"INN",children:"\u0406\u041d\u041d/\u0404\u0414\u0420\u041f\u041e\u0423"}),Object(D.jsx)($n,{token:this.props.store.userState.token,institution_id:this.state.AcquiringReportsCriteria.institution_id,branch_id:this.state.AcquiringReportsCriteria.bank_branch_id,addIdentCode:this.addIdentCode,addClientID:this.addClientID,isError:this.state.isForm_toValidation,ident_code:this.state.AcquiringReportsCriteria.ident_code}),Object(D.jsx)("label",{htmlFor:"merchant_id",children:"merchant ID"}),Object(D.jsx)(Jn,{token:this.props.store.userState.token,institution_id:this.state.AcquiringReportsCriteria.institution_id,branch_id:this.state.AcquiringReportsCriteria.bank_branch_id,addTspName:this.addMerchantName,tsp_id:this.state.AcquiringReportsCriteria.tsp_id,ident_code:this.state.AcquiringReportsCriteria.ident_code,tsp_name:this.state.AcquiringReportsCriteria.merchant_id,isError:this.state.isForm_toValidation}),Object(D.jsx)("label",{htmlFor:"terminal_id",children:"Terminal ID"}),Object(D.jsx)(Xn,{token:this.props.store.userState.token,isError:this.state.isForm_toValidation,institution_id:this.state.AcquiringReportsCriteria.institution_id,branch_id:this.state.AcquiringReportsCriteria.bank_branch_id,addTspName:this.addTerminalName,tsp_id:this.state.AcquiringReportsCriteria.tsp_id,ident_code:this.state.AcquiringReportsCriteria.ident_code,tsp_name:this.state.AcquiringReportsCriteria.merchant_id}),Object(D.jsx)("p",{className:"error",children:this.state.isForm_toValidation?null:"\u0417\u0430\u043f\u043e\u0432\u043d\u0456\u0442\u044c, \u0431\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u043e\u0434\u043d\u0435 \u0437 4-\u0445 \u0437\u043d\u0430\u0447\u0435\u043d\u044c"})]}),Object(D.jsxs)("div",{className:"coverInput col-5",children:[Object(D.jsx)("div",{className:"coverInput col-11",children:Object(D.jsxs)("div",{className:"coverDate",children:[Object(D.jsx)("label",{htmlFor:"date_type_id",children:"\u0414\u0430\u0442\u0430 \u0437\u0432\u0456\u0442\u0443"}),Object(D.jsx)("select",{onChange:this.changeInput,apiName:"date_type_id",id:"date_type_id",className:"".concat(this.state.isDate_type_idValidation?"":"validError"," form-select"),title:"DICT_DATE_TYPE",children:this.state.isShowSelectDICT_DATE_TYPE?this.state.DICT_DATE_TYPE.map((function(e,t){return Object(D.jsx)(Yn,{optionItem:e},t)})):null}),Object(D.jsx)("p",{className:"error",children:this.state.isDate_type_idValidation?null:this.state.error_text})]})}),Object(D.jsxs)("div",{className:"coverInput col-11",children:[Object(D.jsx)("span",{children:"\u041f\u0435\u0440\u0456\u043e\u0434 \u0437\u0432\u0456\u0442\u0443"}),Object(D.jsxs)("div",{className:"row",children:[Object(D.jsxs)("div",{className:"coverDate col-6",children:[Object(D.jsx)("label",{htmlFor:"date_report_from",children:"\u0417"}),Object(D.jsx)("input",{onChange:this.changeInputDateReport_from,apiName:"date_from",className:"".concat(this.state.isDate_fromValidation&&this.state.isDate_month_Validation?"":"validError"," customInput form-control"),id:"date_from",type:"date"})]}),Object(D.jsxs)("div",{className:"coverDate col-6",children:[Object(D.jsx)("label",{htmlFor:"date_report_to",children:"\u041f\u043e"}),Object(D.jsx)("input",{onChange:this.changeInputDateReport_to,apiName:"date_to",className:"".concat(this.state.isDate_toValidation&&this.state.isDate_month_Validation?"":"validError"," customInput form-control"),id:"date_to",type:"date"})]})]}),Object(D.jsxs)("p",{className:"error",children:[this.state.isDate_fromValidation&&this.state.isDate_toValidation?null:"\u0417\u0430\u043f\u043e\u0432\u043d\u0456\u0442\u044c, \u0431\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0434\u0430\u0442\u0438!",this.state.isDate_month_Validation?null:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0438\u0439 \u0442\u0435\u0440\u043c\u0456\u043d 31 \u0434\u0435\u043d\u044c!"]})]})]})]}),Object(D.jsx)("div",{className:"btnBlock",children:Object(D.jsx)("button",{className:"search btn btn-primary",onClick:this.search,children:"\u041f\u043e\u0431\u0443\u0434\u0443\u0432\u0430\u0442\u0438 \u0437\u0432\u0456\u0442"})}),this.state.isShowPopupError?Object(D.jsx)(D.Fragment,{children:Object(D.jsx)("div",{className:"coverPopupError",children:Object(D.jsxs)("div",{className:"innerBlock",children:[Object(D.jsx)("div",{className:"title alert alert-danger",children:"\u041d\u0435\u043c\u0430\u0454 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443 \u043f\u043e \u0434\u0430\u043d\u043e\u043c\u0443 \u043f\u043e\u0448\u0443\u043a\u0443"}),Object(D.jsx)("div",{className:"msg",children:this.state.merchant_error}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:this.closePopupError,children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"})]})})}):Object(D.jsx)(D.Fragment,{}),this.state.isShowPopupErrorSave?Object(D.jsx)(D.Fragment,{children:Object(D.jsx)("div",{className:"coverPopupError",children:Object(D.jsxs)("div",{className:"innerBlock",children:[Object(D.jsx)("div",{className:"title alert alert-primary"}),Object(D.jsx)("div",{className:"msg",children:":("}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:this.closePopupErrorSave,children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"})]})})}):Object(D.jsx)(D.Fragment,{})]})}}]),n}(s.a.Component));function ta(){return Object(D.jsx)("div",{className:"loading",children:Object(D.jsx)("div",{className:"rotating",children:Object(D.jsxs)("div",{class:"lds-roller",children:[Object(D.jsx)("div",{}),Object(D.jsx)("div",{}),Object(D.jsx)("div",{}),Object(D.jsx)("div",{}),Object(D.jsx)("div",{}),Object(D.jsx)("div",{}),Object(D.jsx)("div",{}),Object(D.jsx)("div",{})]})})})}n(427);var na=function(e){return Object(D.jsx)("option",{value:e.optionItem.institution_id,children:e.optionItem.institution_name})},aa=function(e){return Object(D.jsx)("option",{value:e.optionItem.branch_id,children:e.optionItem.branch_name})},sa=function(e){return Object(D.jsx)("option",{value:e.optionItem.mcc_code,children:e.optionItem.mcc_name})},ia=function(e){return Object(D.jsx)("option",{value:e.optionItem.report_format_id,children:e.optionItem.report_format_name})},ra=function(e){return Object(D.jsx)("option",{value:e.optionItem.date_type_id,children:e.optionItem.date_type_name})},oa=function(e){return Object(D.jsx)("option",{selected:e.optionItem.report_format_id==e.report_format_id?"selected":"",value:e.optionItem.report_format_id,children:e.optionItem.report_format_name})},ca=function(e){return Object(D.jsx)("option",{selected:e.optionItem.report_period_type_id==e.report_period_type_id?"selected":"",value:e.optionItem.report_period_type_id,children:e.optionItem.report_period_type_name})},la=function(e){return Object(D.jsx)("option",{selected:e.optionItem.report_channel_type_id==e.channel_type_id?"selected":"",value:e.optionItem.report_channel_type_id,children:e.optionItem.report_channel_type_name})},da=function(e){return Object(D.jsx)("div",{className:"blockSelectItem",value:e.item.mcc_code,onClick:function(t){return e.onClickBlockSelectItem(t)},children:e.item.mcc_name})},ua=function(e){return Object(D.jsxs)("div",{className:"blockSelectItem",value:e.item.client_id,name:e.item.client_name,"data-id":e.item.institution_id,onClick:function(t){return e.onClickBlockSelectItem(t)},children:[e.item.client_name," - ",e.item.institution_id]})},pa=function(e){return Object(D.jsx)("div",{className:"blockSelectItem",value:e.item.merchant_id,name:e.item.merchant_id,onClick:function(t){return e.onClickBlockSelectItem(t)},children:e.item.merchant_id})},_a=function(e){return Object(D.jsx)("div",{className:"blockSelectItem",value:e.item.terminal_id,name:e.item.terminal_id,onClick:function(t){return e.onClickBlockSelectItem(t)},children:e.item.terminal_id})},ha=function(e){return Object(D.jsxs)("div",{className:"blockSelectItem",value:e.item.ident_code,"data-id":e.item.client_id,onClick:function(t){return e.onClickBlockSelectItem(t)},children:[e.item.ident_code," - ",e.item.institution_id]})},ma=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).onChangeAutocompleteInput=function(e){var t=e.target.value;console.log(t),a.props.addTspName(Number(0)),a.setState({inputRequest:t,selected:!1}),""!=t&&t.length>=3&&a.request(a.props.token,t,!0)},a.onClickAutocompleteInput=function(e){var t=e.target.value;console.log(t),a.request(a.props.token,t,!0)},a.onBlurAutocompleteInput=function(e){var t=e.target.value;console.log(t)},a.onClickAutocompleteInputRes=function(){a.setState({inputResult:null,isShowBlockSelect:!0,isShowInputResult:!1,isShowInputRequest:!0})},a.onBlurBlockSelect=function(){a.setState({isShowBlockSelect:!1})},a.onClickBlockSelectItem=function(e){var t=e.currentTarget.getAttribute("value"),n=e.currentTarget.getAttribute("name"),s=e.currentTarget.getAttribute("data-id");""!=t&&(a.props.addTspName(t),t!=a.state.inputRequest&&(a.request(a.props.token,t,!1),console.log(t),a.props.addTspName(Number(t)),a.setState({inputResult:"".concat(n," - ").concat(s),inputRequest:"".concat(n," - ").concat(s),isShowBlockSelect:!1,isShowInputResult:!1,isShowInputRequest:!0,selected:!0})),a.setState({isShowBlockSelect:!1}))},a.clickTest=function(e){},a.state={data:null,inputRequest:"",inputResult:a.props.tsp_name,isShowBlockSelect:!1,isShowInputResult:!1,isShowInputRequest:!0,isLoading:!1,selected:!1},a.myRef=s.a.createRef(),a}return Object(c.a)(n,[{key:"componentWillUnmount",value:function(){window.addEventListener("mousedown",null)}},{key:"request",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n,a){var s,i,r=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),console.log(t),s="/api/Dictionary/QueryTSP",console.log(s),i={institution_id:this.props.institution_id,branch_id:this.props.branch_id,client_name:n},console.log(i),e.next=8,R.post(s,i,{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(e){console.log(e.data),null==e.data.tsp_list.TableRows?r.setState({data:[{client_name:"\u041d\u0435\u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0436\u043e\u0434\u043d\u043e\u0433\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443"}]}):r.setState({data:e.data.tsp_list.TableRows}),a?r.setState({isShowBlockSelect:!0}):r.setState({isShowBlockSelect:!1}),r.setState({isLoading:!1})})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(D.jsxs)("div",{className:"autocomplete",children:[Object(D.jsx)("input",{className:"".concat(this.props.isError?"":"validError ").concat(this.state.selected?"selected ":"").concat(this.state.isShowInputRequest?"":"dn ","form-control"),placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043f\u0435\u0440\u0448\u0456 \u0431\u0443\u043a\u0432\u0438...",type:"text",onBlur:this.onBlurAutocompleteInput,onChange:this.onChangeAutocompleteInput,onClick:function(t){return e.state.isShowBlockSelect?e.setState({isShowBlockSelect:!1}):e.onClickAutocompleteInput(t)},value:this.state.inputRequest}),Object(D.jsx)("input",{className:"".concat(this.state.selected?"selected ":"").concat(this.state.isShowInputResult?"":"dn ","form-control"),placeholder:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442",type:"text",value:this.state.inputResult,onClick:this.onClickAutocompleteInputRes}),Object(D.jsx)("div",{className:"".concat(this.state.isShowBlockSelect?"":"dn ","blockSelect"),onBlur:this.onBlurBlockSelect,ref:this.myRef,children:this.state.isShowBlockSelect&&null!=this.state.data?this.state.data.map((function(t,n){return Object(D.jsx)(ua,{item:t,onClickBlockSelectItem:e.onClickBlockSelectItem},n)})):Object(D.jsx)(D.Fragment,{})}),this.state.isLoading?Object(D.jsx)("div",{className:"coverloader",children:Object(D.jsx)("div",{className:"loader"})}):null]})}}]),n}(s.a.Component),ba=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).onChangeAutocompleteInput=function(e){var t=e.target.value;console.log(t),a.props.addTspName(Number(0)),a.setState({inputRequest:t,selected:!1}),a.search(t)},a.onClickAutocompleteInput=function(e){var t=e.target.value;console.log(t),a.search(t)},a.onBlurAutocompleteInput=function(e){var t=e.target.value;console.log(t)},a.onClickAutocompleteInputRes=function(){a.setState({inputResult:null,isShowBlockSelect:!0,isShowInputResult:!1,isShowInputRequest:!0})},a.onBlurBlockSelect=function(){a.setState({isShowBlockSelect:!1})},a.onClickBlockSelectItem=function(e){var t=e.currentTarget.getAttribute("value"),n=e.currentTarget.getAttribute("name");""!==t&&(a.props.addTspName(t),+t!==+a.state.inputRequest&&(a.search(t),console.log(t),a.setState({inputRequest:n,isShowBlockSelect:!1,selected:!0})),a.setState({isShowBlockSelect:!1}))},a.clickTest=function(e){},a.state={data:null,inputRequest:"",inputResult:a.props.tsp_name,isShowBlockSelect:!1,isShowInputResult:!1,isShowInputRequest:!0,isLoading:!1,selected:!1,merchant_arr:null},a.myRef=s.a.createRef(),a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("mousedown",this.clickTest)}},{key:"componentWillUnmount",value:function(){window.addEventListener("mousedown",null)}},{key:"request",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n,a){var s,i,r=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({isLoading:!0}),s="/api/Dictionary/QueryMerchant",i={institution_id:this.props.institution_id,merchant_id:0},this.props.tsp_id?i.client_id=+this.props.tsp_id:this.props.ident_code?i.client_id=+this.props.ident_code:i.client_id=0,!this.state.merchant_arr){e.next=6;break}return e.abrupt("return",this.setState({isLoading:!1}));case 6:return e.next=8,R.post(s,i,{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(e){console.log(e.data),null==e.data.merchant_list.TableRows?r.setState({data:[{client_name:"\u041d\u0435\u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0436\u043e\u0434\u043d\u043e\u0433\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443"}]}):r.setState({data:e.data.merchant_list.TableRows,merchant_arr:e.data.merchant_list.TableRows}),r.setState({isShowBlockSelect:!0}),r.setState({isLoading:!1})})).catch((function(e){console.log(e.response.data)}));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"search",value:function(e){this.setState({isShowBlockSelect:!0});var t=null!==this.state.merchant_arr?this.state.merchant_arr.filter((function(t){return t.merchant_id.toString().includes(e.toString())})):null;null===t?this.setState({data:[{client_name:"\u041d\u0435\u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0436\u043e\u0434\u043d\u043e\u0433\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443"}]}):this.setState({data:t})}},{key:"render",value:function(){var e=this;return Object(D.jsxs)("div",{className:"autocomplete",children:[Object(D.jsx)("input",{className:"".concat(this.props.isError?"":"validError ").concat(this.state.selected?"selected ":"").concat(this.state.isShowInputRequest?"":"dn ","form-control merchant-input"),placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0446\u0438\u0444\u0440\u0438...",type:"text",onChange:this.onChangeAutocompleteInput,onClick:function(){return e.state.isShowBlockSelect?e.setState({isShowBlockSelect:!1}):e.request(e.props.token,"",!1)},value:this.state.inputRequest}),Object(D.jsx)("input",{className:"".concat(this.state.selected?"selected ":"").concat(this.state.isShowInputResult?"":"dn ","form-control"),placeholder:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442",type:"text",value:this.state.inputResult,onClick:this.onClickAutocompleteInputRes}),Object(D.jsx)("div",{className:"".concat(this.state.isShowBlockSelect?"":"dn ","blockSelect"),onBlur:this.onBlurBlockSelect,ref:this.myRef,children:this.state.isShowBlockSelect&&null!=this.state.data?this.state.data.map((function(t,n){return Object(D.jsx)(pa,{item:t,onClickBlockSelectItem:e.onClickBlockSelectItem},n)})):Object(D.jsx)(D.Fragment,{})}),this.state.isLoading?Object(D.jsx)("div",{className:"coverloader",children:Object(D.jsx)("div",{className:"loader"})}):null]})}}]),n}(s.a.Component),ja=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).onChangeAutocompleteInput=function(e){var t=e.target.value;console.log(t),a.props.addTspName(Number(0)),a.setState({inputRequest:t,selected:!1}),a.search(t)},a.onClickAutocompleteInput=function(e){var t=e.target.value;console.log(t),""!=t&&t.length>=3&&a.search(t)},a.onBlurAutocompleteInput=function(e){var t=e.target.value;console.log(t),a.search(t)},a.onClickAutocompleteInputRes=function(){a.setState({inputResult:null,isShowBlockSelect:!0,isShowInputResult:!1,isShowInputRequest:!0})},a.onBlurBlockSelect=function(){a.setState({isShowBlockSelect:!1})},a.onClickBlockSelectItem=function(e){var t=e.currentTarget.getAttribute("value"),n=e.currentTarget.getAttribute("name");""!==t&&(+t!==+a.state.inputRequest&&(a.search(t),console.log(t),a.props.addTspName(Number(t)),a.setState({inputRequest:n,isShowBlockSelect:!1,selected:!0})),a.setState({isShowBlockSelect:!1}))},a.state={data:null,inputRequest:"",inputResult:a.props.tsp_name,isShowBlockSelect:!1,isShowInputResult:!1,isShowInputRequest:!0,isLoading:!1,selected:!1,terminal_arr:null},a.myRef=s.a.createRef(),a}return Object(c.a)(n,[{key:"componentWillUnmount",value:function(){window.addEventListener("mousedown",null)}},{key:"request",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n,a){var s,i,r=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setState({isLoading:!0}),console.log(t),s="/api/Dictionary/QueryTerminal",console.log(s),i={institution_id:this.props.institution_id,terminal_id:0},this.props.tsp_name&&(i.merchant_id=this.props.tsp_name),this.props.tsp_id?i.client_id=+this.props.tsp_id:this.props.ident_code?i.client_id=this.props.ident_code:i.client_id=0,!this.state.terminal_arr){e.next=9;break}return e.abrupt("return",this.setState({isLoading:!1}));case 9:return e.next=11,R.post(s,i,{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(e){console.log(e.data),null==e.data.terminal_list.TableRows?r.setState({data:[{client_name:"\u041d\u0435\u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0436\u043e\u0434\u043d\u043e\u0433\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443"}]}):r.setState({data:e.data.terminal_list.TableRows,terminal_arr:e.data.terminal_list.TableRows,isShowBlockSelect:!0}),r.setState({isLoading:!1})})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 11:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"search",value:function(e){this.setState({isShowBlockSelect:!0});var t=this.state.terminal_arr.filter((function(t){return t.terminal_id.toString().includes(e.toString())}));null===t?this.setState({data:[{client_name:"\u041d\u0435\u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0436\u043e\u0434\u043d\u043e\u0433\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443"}]}):this.setState({data:t})}},{key:"render",value:function(){var e=this;return Object(D.jsxs)("div",{className:"autocomplete",children:[Object(D.jsx)("input",{className:"".concat(this.props.isError?"":"validError ").concat(this.state.selected?"selected ":"").concat(this.state.isShowInputRequest?"":"dn ","form-control terminal-input"),placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0446\u0438\u0444\u0440\u0438...",type:"text",onChange:this.onChangeAutocompleteInput,onClick:function(){return e.state.isShowBlockSelect?e.setState({isShowBlockSelect:!1}):e.request(e.props.token,"",!1)},value:this.state.inputRequest}),Object(D.jsx)("input",{className:"".concat(this.state.selected?"selected ":"").concat(this.state.isShowInputResult?"":"dn ","form-control"),placeholder:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442",type:"text",value:this.state.inputResult,onClick:this.onClickAutocompleteInputRes}),Object(D.jsx)("div",{className:"".concat(this.state.isShowBlockSelect?"":"dn ","blockSelect"),onBlur:this.onBlurBlockSelect,ref:this.myRef,children:this.state.isShowBlockSelect&&null!=this.state.data?this.state.data.map((function(t,n){return Object(D.jsx)(_a,{item:t,onClickBlockSelectItem:e.onClickBlockSelectItem},n)})):Object(D.jsx)(D.Fragment,{})}),this.state.isLoading?Object(D.jsx)("div",{className:"coverloader",children:Object(D.jsx)("div",{className:"loader"})}):null]})}}]),n}(s.a.Component),Ta=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).onChangeAutocompleteInput=function(e){var t=e.target.value;console.log(t),a.props.addIdentCode(Number(0)),a.props.addClientID(Number(0)),a.setState({inputRequest:t,selected:!1}),""!=t&&t.length>=0&&a.request(a.props.token,t,!0)},a.onClickAutocompleteInput=function(e){var t=e.target.value;console.log(t),""!=t&&t.length>=3&&a.request(a.props.token,t,!0)},a.onBlurAutocompleteInput=function(e){var t=e.target.value;console.log(t)},a.onClickAutocompleteInputRes=function(){a.setState({inputResult:null,isShowBlockSelect:!0,isShowInputResult:!1,isShowInputRequest:!0,inputRequest:a.state.inputResult})},a.onBlurBlockSelect=function(){a.setState({isShowBlockSelect:!1})},a.onClickBlockSelectItem=function(e){var t=e.currentTarget.getAttribute("value"),n=a.state.data.filter((function(e){return e.ident_code.toString().includes(t)}))[0],s=n.client_id;""!=t&&(a.props.addIdentCode(Number(n.ident_code)),a.props.addClientID(Number(s)),a.setState({inputResult:"".concat(n.ident_code," - ").concat(n.institution_id),inputRequest:"".concat(n.ident_code," - ").concat(n.institution_id),isShowBlockSelect:!1,isShowInputRequest:!0,selected:!0}),t!=a.state.inputRequest&&a.request(a.props.token,t,!1),a.setState({isShowBlockSelect:!1}))},a.state={data:null,inputRequest:null,inputResult:a.props.ident_code,isShowBlockSelect:!1,isShowInputResult:!1,isShowInputRequest:!0,isLoading:!1,selected:!1},a.myRef=s.a.createRef(),a}return Object(c.a)(n,[{key:"componentWillUnmount",value:function(){window.addEventListener("mousedown",null)}},{key:"request",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n,a){var s,i=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({isLoading:!0}),"/api/Dictionary/QueryTSP",s={institution_id:this.props.institution_id,branch_id:this.props.branch_id,ident_code:n},console.log(s),e.next=6,R.post("/api/Dictionary/QueryTSP",s,{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(e){console.log(e.data),null==e.data.tsp_list.TableRows?i.setState({data:[{ident_code:"\u041d\u0435\u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0436\u043e\u0434\u043d\u043e\u0433\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443"}]}):i.setState({data:e.data.tsp_list.TableRows}),a?i.setState({isShowBlockSelect:!0}):i.setState({isShowBlockSelect:!1}),i.setState({isLoading:!1})})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t=this;return console.log(this.props),console.log(this.state),Object(D.jsxs)("div",{className:"autocomplete",children:[Object(D.jsx)(W.a,(e={type:"text",maskChar:"",alwaysShowMask:"false",pattern:"[0-9]",className:"".concat(this.props.isError?"":"validError ").concat(this.state.selected?"selected ":"").concat(this.state.isShowInputRequest?"":"dn ","form-control"),placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0446\u0438\u0444\u0440\u0438..."},Object(B.a)(e,"type","text"),Object(B.a)(e,"onBlur",this.onClickBlockSelectItem),Object(B.a)(e,"onChange",this.onChangeAutocompleteInput),Object(B.a)(e,"onClick",(function(e){return t.state.isShowBlockSelect?t.setState({isShowBlockSelect:!1}):t.onClickAutocompleteInput(e)})),Object(B.a)(e,"value",this.state.inputRequest),e)),Object(D.jsx)("input",{className:"".concat(this.state.selected?"selected ":"").concat(this.state.isShowInputResult?"":"dn ","form-control"),placeholder:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442",type:"text",value:this.state.inputResult,onClick:this.onClickAutocompleteInputRes}),Object(D.jsx)("div",{className:"".concat(this.state.isShowBlockSelect?"":"dn ","blockSelect"),onBlur:this.onBlurBlockSelect,ref:this.myRef,children:this.state.isShowBlockSelect&&null!=this.state.data?this.state.data.map((function(e,n){return Object(D.jsx)(ha,{item:e,onClickBlockSelectItem:t.onClickBlockSelectItem},n)})):Object(D.jsx)(D.Fragment,{})}),this.state.isLoading?Object(D.jsx)("div",{className:"coverloader",children:Object(D.jsx)("div",{className:"loader"})}):Object(D.jsx)(D.Fragment,{})]})}}]),n}(s.a.Component),ga=(s.a.Component,function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).selectDICT_INSTITUTION=function(e){console.log(e.target.value);var t=e.target.value;console.log(t);var n=e.currentTarget.getAttribute("apiName");console.log(n);var s=a.state.AcquiringReportsCriteria;s[n]=t,console.log(s),""==t?(console.log(t),a.setState({isShowSelectTVBV:!0,TSPReportSettingsSearchObj:s,isInstitution_idValidation:!1})):(a.setState({isShowSelectTVBV:!1,TSPReportSettingsSearchObj:s,AcquiringReportsCriteria:s,isInstitution_idValidation:!0,institution_id:t}),a.requestDICT_BRANCH(a.props.store.userState.token,t)),console.log(a.state),console.log(a.state.AcquiringReportsCriteria)},a.changeInputDateReport=function(e){var t=e.currentTarget.getAttribute("apiName");console.log(t);var n=e.target.value;console.log(n);var s=a.state.AcquiringReportsCriteria;s[t]=a.formatDate(new Date(n)),console.log(s),a.setState({AcquiringReportsCriteria:s}),console.log(a.state),console.log(a.state.AcquiringReportsCriteria)},a.changeInputDateReport_from=function(e){var t=e.currentTarget.getAttribute("apiName");console.log(t);var n=e.target.value;console.log(n);var s=a.state.AcquiringReportsCriteria;s[t]=a.formatDate(new Date(n)),""==n?(console.log(n),a.setState({AcquiringReportsCriteria:s,isDate_fromValidation:!1})):a.setState({AcquiringReportsCriteria:s,isDate_fromValidation:!0,date_from:n}),console.log(s),console.log(a.state),console.log(a.state.AcquiringReportsCriteria)},a.changeInputDateReport_to=function(e){var t=e.currentTarget.getAttribute("apiName");console.log(t);var n=e.target.value;console.log(n);var s=a.state.AcquiringReportsCriteria;s[t]=a.formatDate(new Date(n)),""==n?(console.log(n),a.setState({AcquiringReportsCriteria:s,isDate_toValidation:!1})):a.setState({AcquiringReportsCriteria:s,isDate_toValidation:!0,date_to:n}),console.log(s),console.log(a.state),console.log(a.state.AcquiringReportsCriteria)},a.changeInputBase=function(e){var t=e.currentTarget.getAttribute("apiName");console.log(t);var n=e.target.value;console.log(n);var s=a.state.AcquiringReportsCriteria;s[t]=n,console.log(s),a.setState({AcquiringReportsCriteria:s}),console.log(a.state),console.log(a.state.AcquiringReportsCriteria)},a.changeInput=function(e){var t=e.currentTarget.getAttribute("apiName");console.log(t);var n=e.target.value;console.log(n);var s=a.state.AcquiringReportsCriteria;"format_type_id"==t||"mcc_code"==t||"payment_system_id"==t||"terminal_id"==t||"bank_branch_id"==t||"institution_id"==t?s[t]=Number(n):"terminal_type_id"==t?(s[t]=n,""==n?(console.log(n),a.setState({AcquiringReportsCriteria:s,isTerminal_type_idValidation:!1})):a.setState({AcquiringReportsCriteria:s,isTerminal_type_idValidation:!0,terminal_type_id:n})):"merchant_id"==t?(s[t]=Number(n),""==n?(console.log(n),a.setState({AcquiringReportsCriteria:s,isMerchant_idValidation:!1})):a.setState({AcquiringReportsCriteria:s,isMerchant_idValidation:!0,merchant_id:n})):"date_type_id"==t?(s[t]=Number(n),""==n?(console.log(n),a.setState({AcquiringReportsCriteria:s,isDate_type_idValidation:!1})):a.setState({AcquiringReportsCriteria:s,isDate_type_idValidation:!0,date_type_id:n})):s[t]=n,console.log(s),a.setState({AcquiringReportsCriteria:s}),console.log(a.state),console.log(a.state.AcquiringReportsCriteria)},a.formatDate=function(e){var t=e.getDate(),n=("0"+(e.getMonth()+1)).slice(-2);return t.toString().length<2&&(t="0"+t),e.getFullYear()+n+t},a.search=function(){a.defineValidationInputs()},a.defineValidationInputs=function(){var e=new Date(a.state.date_from),t=new Date(a.state.date_to),n=Math.abs(t-e),s=Math.ceil(n/864e5);null!=a.state.institution_id&&0!=a.state.institution_id||a.setState({isInstitution_idValidation:!1}),null!=a.state.date_type_id&&""!=a.state.date_type_id||a.setState({isDate_type_idValidation:!1}),null!=a.state.date_from&&""!=a.state.date_from||a.setState({isDate_fromValidation:!1}),null!=a.state.date_to&&""!=a.state.date_to||a.setState({isDate_toValidation:!1}),s>31&&a.setState({isDate_month_Validation:!1}),0!==a.state.AcquiringReportsCriteria.ident_code||0!=a.state.AcquiringReportsCriteria.tsp_id||0!=a.state.AcquiringReportsCriteria.merchant_id||a.state.AcquiringReportsCriteria.trans_rrn||0!=a.state.AcquiringReportsCriteria.terminal_id?a.setState({isForm_toValidation:!0}):a.setState({isForm_toValidation:!1}),a.setState({},(function(){return a.sendOptionToServer()}))},a.Tsp_list=function(e){return e.map((function(e,t){return console.log(e),Object(D.jsx)("li",{className:"dropdownMenuItem",children:Object(D.jsxs)("p",{children:[Object(D.jsx)("input",{name:"tsp_list",id:e.tsp_name,type:"radio",onClick:a.itemTsp,value:e.tsp_id})," ",e.tsp_name]})})}))},a.itemTsp=function(e){var t=e.target.value;console.log(t),console.log(a.state),a.state.settings.map((function(e,n){e.tsp_id==t&&(null==e.main_settings?a.setState({type_acquiring:2,report_format_id:1,report_period_type_id:1,channel_type_id:1,file_name_mask:""}):e.main_settings.length&&(console.log(e.main_settings[0].acquiring_type_id),a.setState({type_acquiring:e.main_settings[0].acquiring_type_id,report_format_id:e.main_settings[0].report_format_id,report_period_type_id:e.main_settings[0].report_period_type_id,channel_type_id:e.main_settings[0].channel_type_id,file_name_mask:e.main_settings[0].file_name_mask})))})),a.setState({currentTsp:Number(t),TSPReportSettingsSTD:null,isShowTypeAcquiring:!0}),a.requestDICT_REPORT_FORMAT(a.props.store.userState.token),a.requestDICT_REPORT_PERIOD_TYPE(a.props.store.userState.token),a.requestDICT_REPORT_CHANNEL_TYPE(a.props.store.userState.token)},a.changeTypeAcquiring=function(e){var t=e.currentTarget.getAttribute("type_acquiring");console.log(t),a.state.settings.map((function(e,n){console.log(a.state.currentTsp),console.log(e.tsp_id),e.tsp_id==a.state.currentTsp&&e.main_settings.length>1&&(console.log(e.main_settings.length>1),e.main_settings.map((function(e,n){e.acquiring_type_id==t&&(console.log(e.acquiring_type_id==t),a.setState({type_acquiring:Number(t),report_format_id:e.report_format_id,report_period_type_id:e.report_period_type_id,channel_type_id:e.channel_type_id,file_name_mask:e.file_name_mask}))})))}))},a.openStandardReport=function(){a.requestTSPReportSettingsSTD(a.props.store.userState.token)},a.closePopupTable=function(){a.setState({isShowTableTSPReportSettingsSTD:!1})},a.changeReport_format_id=function(e){var t=e.target.value;console.log(t),a.setState({report_format_id:Number(t)})},a.changeReport_period_type_id=function(e){var t=e.target.value;console.log(t),a.setState({report_period_type_id:Number(t)})},a.changeChannel_type_id=function(e){var t=e.target.value;console.log(t),a.setState({channel_type_id:Number(t)})},a.changeFile_name_mask=function(e){var t=e.target.value;console.log(t),a.setState({file_name_mask:t})},a.saveReport=function(){var e={acquiring_type_id:a.state.type_acquiring,tsp_list:[{tsp_id:a.state.currentTsp}],main_settings:{acquiring_type_id:a.state.type_acquiring,report_format_id:a.state.report_format_id,report_period_type_id:a.state.report_period_type_id,channel_type_id:a.state.channel_type_id,file_name_mask:a.state.file_name_mask}};null!=a.state.TSPReportSettingsSTD&&(e.std_settings=a.state.TSPReportSettingsSTD),a.requestTSPReportSettingsSTD_SAVE(a.props.store.userState.token)},a.showReport=function(e){return console.log(e),a.state.settings.map((function(t,n){if(console.log(t),console.log(t.tsp_id),console.log(t.tsp_id==e),t.tsp_id==e){if(console.log(t.main_settings),null==t.main_settings){return console.log(1),console.log(1),console.log(1),console.log(""),Object(D.jsxs)("div",{className:"report border",children:[Object(D.jsx)("div",{className:"title",children:"\u041f\u0435\u0440\u0435\u043b\u0456\u043a \u043f\u043e\u043b\u0456\u0432 \u0437\u0432\u0456\u0442\u0443 \u0422\u0421\u041f"}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:a.openStandardReport,children:"\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:!0,children:"\u0420\u043e\u0437\u0448\u0438\u0440\u0435\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:!0,children:"\u0417\u0432\u0456\u0442 \u043f\u043e \u043e\u043f\u0435\u0440\u0430\u0446\u0456\u044f\u043c Installment"}),Object(D.jsx)("br",{}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_format",children:"\u0424\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0443"}),a.state.isShowREPORT_FORMAT?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_format_id,name:"DICT_REPORT_FORMAT",id:"DICT_REPORT_FORMAT",children:a.state.DICT_REPORT_FORMAT.map((function(e,t){return Object(D.jsx)(oa,{optionItem:e,report_format_id:1},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"report_period",children:"\u041f\u0435\u0440\u0456\u043e\u0434 \u0437\u0432\u0456\u0442\u0443"}),a.state.isShowDICT_REPORT_PERIOD_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_period_type_id,name:"DICT_REPORT_PERIOD_TYPE",id:"DICT_REPORT_PERIOD_TYPE",children:a.state.DICT_REPORT_PERIOD_TYPE.map((function(e,t){return Object(D.jsx)(ca,{optionItem:e,report_period_type_id:1},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_name_mask",children:"\u041c\u0430\u0441\u043a\u0430 \u043d\u0430\u0437\u0432\u0438 \u0444\u0430\u0439\u043b\u0443"}),Object(D.jsx)("input",{defaultValue:"",onChange:a.changeFile_name_mask,apiName:"file_name_mask",className:"customInput form-control",id:"file_name_mask",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441atalog",children:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433"}),Object(D.jsx)("input",{disabled:!0,onChange:a.changeInput,apiName:"\u0441atalog",className:"customInput form-control",id:"\u0441atalog",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441hannel",children:"\u041a\u0430\u043d\u0430\u043b"}),a.state.isShowDICT_REPORT_CHANNEL_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeChannel_type_id,name:"DICT_REPORT_CHANNEL_TYPE",id:"DICT_REPORT_CHANNEL_TYPE",children:a.state.DICT_REPORT_CHANNEL_TYPE.map((function(e,t){return Object(D.jsx)(la,{optionItem:e,channel_type_id:1},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsx)("div",{className:"reportCoverBtn",children:Object(D.jsx)("button",{className:"btn btn-secondary",onClick:a.saveReport,children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})})]})}if(1==t.main_settings.length)return t.main_settings.map((function(e,t){var n=e.report_period_type_id,s=e.report_format_id,i=e.channel_type_id,r=e.file_name_mask;return console.log(n),console.log(s),console.log(i),console.log(r),Object(D.jsxs)("div",{className:" border report",children:[Object(D.jsxs)("div",{className:"coverBtn border",children:[Object(D.jsx)("div",{className:"title",children:"\u0412\u0438\u0434 \u0435\u043a\u0432\u0430\u0440\u0438\u043d\u0433\u0443"}),Object(D.jsx)("button",{className:"btn btn-secondary",children:1==a.state.type_acquiring?"\u0424\u0456\u0437\u0438\u0447\u043d\u0438\u0439":"\u0406\u043d\u0442\u0435\u0440\u043d\u0435\u0442"})]}),Object(D.jsxs)("div",{className:"report border",children:[Object(D.jsx)("div",{className:"title",children:"\u041f\u0435\u0440\u0435\u043b\u0456\u043a \u043f\u043e\u043b\u0456\u0432 \u0437\u0432\u0456\u0442\u0443 \u0422\u0421\u041f"}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:a.openStandardReport,children:"\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:!0,children:"\u0420\u043e\u0437\u0448\u0438\u0440\u0435\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:!0,children:"\u0417\u0432\u0456\u0442 \u043f\u043e \u043e\u043f\u0435\u0440\u0430\u0446\u0456\u044f\u043c Installment"}),Object(D.jsx)("br",{}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_format",children:"\u0424\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0443"}),a.state.isShowREPORT_FORMAT?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_format_id,name:"DICT_REPORT_FORMAT",id:"DICT_REPORT_FORMAT",children:a.state.DICT_REPORT_FORMAT.map((function(e,t){return Object(D.jsx)(oa,{optionItem:e,report_format_id:s},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"report_period",children:"\u041f\u0435\u0440\u0456\u043e\u0434 \u0437\u0432\u0456\u0442\u0443"}),a.state.isShowDICT_REPORT_PERIOD_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_period_type_id,name:"DICT_REPORT_PERIOD_TYPE",id:"DICT_REPORT_PERIOD_TYPE",children:a.state.DICT_REPORT_PERIOD_TYPE.map((function(e,t){return Object(D.jsx)(ca,{optionItem:e,report_period_type_id:n},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_name_mask",children:"\u041c\u0430\u0441\u043a\u0430 \u043d\u0430\u0437\u0432\u0438 \u0444\u0430\u0439\u043b\u0443"}),Object(D.jsx)("input",{defaultValue:r,onChange:a.changeFile_name_mask,apiName:"file_name_mask",className:"customInput form-control",id:"file_name_mask",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441atalog",children:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433"}),Object(D.jsx)("input",{disabled:!0,onChange:a.changeInput,apiName:"\u0441atalog",className:"customInput form-control",id:"\u0441atalog",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441hannel",children:"\u041a\u0430\u043d\u0430\u043b"}),a.state.isShowDICT_REPORT_CHANNEL_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeChannel_type_id,name:"DICT_REPORT_CHANNEL_TYPE",id:"DICT_REPORT_CHANNEL_TYPE",children:a.state.DICT_REPORT_CHANNEL_TYPE.map((function(e,t){return Object(D.jsx)(la,{optionItem:e,channel_type_id:i},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsx)("div",{className:"reportCoverBtn",children:Object(D.jsx)("button",{className:"btn btn-secondary",onClick:a.saveReport,children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})})]})]})}));if(2==t.main_settings.length)return Object(D.jsxs)("div",{className:"",children:[Object(D.jsxs)("div",{className:"coverBtn border",children:[Object(D.jsx)("div",{className:"title",children:"\u0412\u0438\u0434 \u0435\u043a\u0432\u0430\u0440\u0438\u043d\u0433\u0443"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:1==a.state.type_acquiring?"disabled":"",onClick:a.changeTypeAcquiring,type_acquiring:1,children:"\u0424\u0456\u0437\u0438\u0447\u043d\u0438\u0439"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:2==a.state.type_acquiring?"disabled":"",onClick:a.changeTypeAcquiring,type_acquiring:2,children:"\u0406\u043d\u0442\u0435\u0440\u043d\u0435\u0442"})]}),t.main_settings.map((function(e,t){var n=e.report_period_type_id,s=e.report_format_id,i=e.channel_type_id,r=e.file_name_mask,o=e.acquiring_type_id,c=e.standard_report,l=e.extended_report,d=e.installment_report;return console.log(o),console.log(n),console.log(s),console.log(i),console.log(r),console.log(a.state.type_acquiring),Object(D.jsxs)("div",{className:"".concat(a.state.type_acquiring==o?"":"d-none"," border report"),children:[Object(D.jsx)("div",{className:"title",children:"\u041f\u0435\u0440\u0435\u043b\u0456\u043a \u043f\u043e\u043b\u0456\u0432 \u0437\u0432\u0456\u0442\u0443 \u0422\u0421\u041f"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:c?"":"disabled",onClick:a.openStandardReport,children:"\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:l?"":"disabled",children:"\u0420\u043e\u0437\u0448\u0438\u0440\u0435\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:d?"":"disabled",children:"\u0417\u0432\u0456\u0442 \u043f\u043e \u043e\u043f\u0435\u0440\u0430\u0446\u0456\u044f\u043c Installment"}),Object(D.jsx)("br",{}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_format",children:"\u0424\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0443"}),a.state.isShowREPORT_FORMAT?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_format_id,name:"DICT_REPORT_FORMAT",id:"DICT_REPORT_FORMAT",children:a.state.DICT_REPORT_FORMAT.map((function(e,t){return Object(D.jsx)(oa,{optionItem:e,report_format_id:s},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"report_period",children:"\u041f\u0435\u0440\u0456\u043e\u0434 \u0437\u0432\u0456\u0442\u0443"}),a.state.isShowDICT_REPORT_PERIOD_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_period_type_id,name:"DICT_REPORT_PERIOD_TYPE",id:"DICT_REPORT_PERIOD_TYPE",children:a.state.DICT_REPORT_PERIOD_TYPE.map((function(e,t){return Object(D.jsx)(ca,{optionItem:e,report_period_type_id:n},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_name_mask",children:"\u041c\u0430\u0441\u043a\u0430 \u043d\u0430\u0437\u0432\u0438 \u0444\u0430\u0439\u043b\u0443"}),Object(D.jsx)("input",{defaultValue:r,onChange:a.changeFile_name_mask,apiName:"file_name_mask",className:"customInput form-control",id:"file_name_mask",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441atalog",children:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433"}),Object(D.jsx)("input",{disabled:!0,onChange:a.changeInput,apiName:"\u0441atalog",className:"customInput form-control",id:"\u0441atalog",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441hannel",children:"\u041a\u0430\u043d\u0430\u043b"}),a.state.isShowDICT_REPORT_CHANNEL_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeChannel_type_id,name:"DICT_REPORT_CHANNEL_TYPE",id:"DICT_REPORT_CHANNEL_TYPE",children:a.state.DICT_REPORT_CHANNEL_TYPE.map((function(e,t){return Object(D.jsx)(la,{optionItem:e,channel_type_id:i},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsx)("br",{}),Object(D.jsx)("div",{className:"reportCoverBtn",children:Object(D.jsx)("button",{className:"btn btn-secondary",onClick:a.saveReport,children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})})]})}))]})}}))},a.closePopupError=function(){a.setState({isShowPopupError:!1})},a.closePopupErrorSave=function(){a.setState({isShowPopupErrorSave:!1})},a.activeOperation=function(e,t){var n;return e.map((function(e,a){e.operation==t&&(n=e.name)})),n},a.onChangeAutocompleteInput=function(e){var t=e.target.value;console.log(t),a.setState({InputDICT_MCC:t}),""!=t&&a.requestDICT_MCC(a.props.store.userState.token,t,!0)},a.onClickAutocompleteInput=function(e){var t=e.target.value;console.log(t),a.setState({isShowBlockSelectDICT_MCC:!0})},a.onClickAutocompleteInputRes=function(){a.setState({mcc_code:null,isShowBlockSelectDICT_MCC:!0,isShowInputResDICT_MCC:!1,isShowInputDICT_MCC:!0})},a.onBlurBlockSelect=function(){a.setState({isShowBlockSelectDICT_MCC:!1})},a.onClickBlockSelectItem=function(e){var t=e.currentTarget.getAttribute("value");if(""!=t){if(t!=a.state.InputDICT_MCC){a.requestDICT_MCC(a.props.store.userState.token,t,!1);var n=a.state.AcquiringReportsCriteria;n.mcc_code=t,console.log(t),a.setState({AcquiringReportsCriteria:n,InputDICT_MCC:t,isShowBlockSelectDICT_MCC:!1,isShowInputResDICT_MCC:!0,isShowInputDICT_MCC:!1})}a.setState({isShowBlockSelectDICT_MCC:!1})}},a.clickTest=function(e){},a.addTspName=function(e){console.log(e);var t=a.state.AcquiringReportsCriteria;t.tsp_id=e,console.log(t),a.setState({AcquiringReportsCriteria:t}),console.log(a.state.AcquiringReportsCriteria.tsp_name)},a.addMerchantName=function(e){console.log(e);var t=a.state.AcquiringReportsCriteria;t.merchant_id=e,console.log(t),a.setState({AcquiringReportsCriteria:t}),console.log(a.state.AcquiringReportsCriteria.tsp_name)},a.addTerminalName=function(e){console.log(e);var t=a.state.AcquiringReportsCriteria;t.terminal_id=e,console.log(t),a.setState({AcquiringReportsCriteria:t}),console.log(a.state.AcquiringReportsCriteria.tsp_name)},a.addIdentCode=function(e){console.log(e);var t=a.state.AcquiringReportsCriteria;t.ident_code=e,console.log(t),a.setState({AcquiringReportsCriteria:t})},a.addClientID=function(e){var t=a.state.AcquiringReportsCriteria;t.tsp_id=e,a.setState({AcquiringReportsCriteria:t})},a.addMccCode=function(e){console.log(e);var t=a.state.AcquiringReportsCriteria;t.mcc_code=e,console.log(t),a.setState({AcquiringReportsCriteria:t})},a.state={DICT_INSTITUTION:null,isShowSelectDICT_INSTITUTION:!1,DICT_BRANCH:null,isDisableTVBV:!0,isShowSelectTVBV:!1,DICT_ACQUIRING_REPORTS:null,isShowSelectDICT_ACQUIRING_REPORTS:!1,DICT_ACQUIRING_TYPE:null,isShowSelectDICT_ACQUIRING_TYPE:!1,DICT_PAYMENT_SYSTEM:null,isShowSelectDICT_PAYMENT_SYSTEM:!1,DICT_REPORT_FORMAT:null,isShowSelectDICT_REPORT_FORMAT:!1,DICT_DATE_TYPE:null,isShowSelectDICT_DATE_TYPE:!1,AcquiringReportsCriteria:{report_type_id:"REPORT_OPERATIONS",payment_system_id:0,format_type_id:1,terminal_type_id:2,institution_id:0,date_type_id:1,merchant_id:0,terminal_id:0,tsp_id:0,ident_code:0},date_from:null,date_to:null,date_type_id:1,institution_id:0,merchant_id:null,DICT_TERMINAL_SYSTEM:null,isShowSelectDICT_MERCHANT_SYSTEM:!1,DICT_MERCHANT_SYSTEM:null,isShowSelectDICT_TERMINAL_SYSTEM:!1,DICT_MCC_SYSTEM:null,isShowSelectDICT_MCC_SYSTEM:!1,isInstitution_idValidation:!0,isMerchant_idValidation:!0,isTerminal_type_idValidation:!0,isDate_month_Validation:!0,isDate_type_idValidation:!0,isDate_fromValidation:!0,isDate_toValidation:!0,isForm_toValidation:!0,DICT_MCC:null,InputDICT_MCC:null,isShowBlockSelectDICT_MCC:!1,isShowInputResDICT_MCC:!1,isShowInputDICT_MCC:!0,error_text:"\u0417\u0430\u043f\u043e\u0432\u043d\u0456\u0442\u044c, \u0431\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0434\u0430\u0442\u0438",isSuccess:!1,merchant_error:""},a.myRef=s.a.createRef(),a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.requestDICT_INSTITUTION(this.props.store.userState.token),this.requestDICT_ACQUIRING_REPORTS(this.props.store.userState.token),this.requestDICT_ACQUIRING_TYPE(this.props.store.userState.token),this.requestDICT_PAYMENT_SYSTEM(this.props.store.userState.token),this.requestDICT_REPORT_FORMAT(this.props.store.userState.token),this.requestDICT_DATE_TYPE(this.props.store.userState.token)}},{key:"componentWillUnmount",value:function(){window.addEventListener("mousedown",null)}},{key:"requestDICT_INSTITUTION",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_INSTITUTION",e.next=5,R.get("/api/Dictionary/DICT_INSTITUTION",{headers:{Token:"".concat(t)}}).then((function(e){if(console.log(e.data),1===e.data.Table.TableRows.length){var t=e.data.Table.TableRows[0].institution_id,a=n.state.AcquiringReportsCriteria;a.institution_id=t,n.setState({isShowSelectTVBV:!1,TSPReportSettingsSearchObj:a,AcquiringReportsCriteria:a,isInstitution_idValidation:!0,institution_id:t}),n.requestDICT_BRANCH(n.props.store.userState.token,t)}n.setState({DICT_INSTITUTION:e.data.Table.TableRows,isShowSelectDICT_INSTITUTION:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_BRANCH",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n){var a,s=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),a="/api/Dictionary/DICT_BRANCH/?param1=".concat(n),{param1:n},e.next=6,R.get(a,{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),s.setState({DICT_BRANCH:e.data.Table.TableRows,isShowSelectTVBV:!0,isDisableTVBV:!1}),s.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"requestDICT_REPORT_FORMAT",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_REPORT_FORMAT",e.next=5,R.get("/api/Dictionary/DICT_REPORT_FORMAT",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_REPORT_FORMAT:e.data.Table.TableRows,isShowSelectDICT_REPORT_FORMAT:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_REPORT_PERIOD_TYPE",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_REPORT_PERIOD_TYPE",e.next=5,R.get("/api/Dictionary/DICT_REPORT_PERIOD_TYPE",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_REPORT_PERIOD_TYPE:e.data.Table.TableRows,isShowDICT_REPORT_PERIOD_TYPE:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_ACQUIRING_REPORTS",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_ACQUIRING_REPORTS",e.next=5,R.get("/api/Dictionary/DICT_ACQUIRING_REPORTS",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_ACQUIRING_REPORTS:e.data.Table.TableRows,isShowSelectDICT_ACQUIRING_REPORTS:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_ACQUIRING_TYPE",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_ACQUIRING_TYPE",e.next=5,R.get("/api/Dictionary/DICT_ACQUIRING_TYPE",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_ACQUIRING_TYPE:e.data.Table.TableRows,isShowSelectDICT_ACQUIRING_TYPE:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_PAYMENT_SYSTEM",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_PAYMENT_SYSTEM",e.next=5,R.get("/api/Dictionary/DICT_PAYMENT_SYSTEM",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_PAYMENT_SYSTEM:e.data.Table.TableRows.map((function(e){return{value:e.payment_system_id,label:e.payment_system_name}})),isShowSelectDICT_PAYMENT_SYSTEM:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_MERCHANT_SYSTEM",value:function(){var e=Object(C.a)(f.a.mark((function e(){var t,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Dictionary/QueryMerchant",t={institution_id:+this.state.institution_id,merchant_id:+this.state.merchant_id||0},this.state.AcquiringReportsCriteria.tsp_id?t.client_id=+this.state.AcquiringReportsCriteria.tsp_id:this.state.AcquiringReportsCriteria.ident_code?t.client_id=+this.state.AcquiringReportsCriteria.ident_code:t.client_id=0,e.next=6,R.post("/api/Dictionary/QueryMerchant",t,{headers:{Token:"".concat(this.props.store.userState.token)}}).then((function(e){console.log(e.data),n.setState({DICT_MERCHANT_SYSTEM:e.data.merchant_list.TableRows,isShowSelectDICT_MERCHANT_SYSTEM:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"requestDICT_TERMINAL_SYSTEM",value:function(){var e=Object(C.a)(f.a.mark((function e(){var t,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Dictionary/QueryMCC",t={institution_id:+this.state.institution_id,merchant_id:+this.state.merchant_id||0},this.state.AcquiringReportsCriteria.tsp_id?t.client_id=+this.state.AcquiringReportsCriteria.tsp_id:this.state.AcquiringReportsCriteria.ident_code?t.client_id=+this.state.AcquiringReportsCriteria.ident_code:t.client_id=0,e.next=6,R.post("/api/Dictionary/QueryMCC",t,{headers:{Token:"".concat(this.props.store.userState.token)}}).then((function(e){console.log(e.data),0!==e.data.record_count&&n.setState({DICT_TERMINAL_SYSTEM:e.data.Table.TableRows,DICT_MCC_SYSTEM:e.data.Table.TableRows,isShowSelectDICT_TERMINAL_SYSTEM:!0,isShowSelectDICT_MCC_SYSTEM:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response)}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"requestDICT_MCC_SYSTEM",value:function(){var e=Object(C.a)(f.a.mark((function e(){var t,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Dictionary/QueryMCC",t={terminal_id:+this.state.AcquiringReportsCriteria.tsp_id,merchant_id:+this.state.merchant_id||0},this.state.AcquiringReportsCriteria.ident_code?t.client_id=+this.state.AcquiringReportsCriteria.ident_code:t.client_id=0,e.next=6,R.post("/api/Dictionary/QueryMCC",t,{headers:{Token:"".concat(this.props.store.userState.token)}}).then((function(e){0!==e.data.record_count&&n.setState({DICT_TERMINAL_SYSTEM:e.data.mcc_list.TableRows,isShowSelectDICT_MCC_SYSTEM:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response)}));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"requestDICT_DATE_TYPE",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),"/api/Dictionary/DICT_DATE_TYPE",e.next=5,R.get("/api/Dictionary/DICT_DATE_TYPE",{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),n.setState({DICT_DATE_TYPE:e.data.Table.TableRows,isShowSelectDICT_DATE_TYPE:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestReports_Acquiring",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Reports/Acquiring",e.next=4,R.post("/api/Reports/Acquiring",n,{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(e){console.log(e.data),window.location.href="/dashboard/REPORTS_ACQUIRING_MONITOR"})).catch((function(e){console.log(e.response)}));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"sendOptionToServer",value:function(){this.state.isInstitution_idValidation&&this.state.isTerminal_type_idValidation&&this.state.isDate_type_idValidation&&this.state.isDate_fromValidation&&this.state.isDate_toValidation&&this.state.isForm_toValidation&&this.state.isDate_month_Validation&&this.requestReports_Acquiring(this.props.store.userState.token,this.state.AcquiringReportsCriteria)}},{key:"handleCheckId",value:function(){var e=this;this.checkMerchantID().then((function(t){0!==t.data.ErrorStatus.ErrorCode&&e.setState({merchant_error:t.data.ErrorStatus.ErrorMessage,isShowPopupError:!0})}))}},{key:"checkMerchantID",value:function(){var e=Object(C.a)(f.a.mark((function e(){var t,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Dictionary/QueryMerchant",t={institution_id:+this.state.institution_id,merchant_id:+this.state.merchant_id||0},this.state.tsp_id?t.client_id=+this.state.tsp_id:this.state.ident_code?t.client_id=+this.state.ident_code:t.client_id=0,e.next=6,R.post("/api/Dictionary/QueryMerchant",t,{headers:{Token:"".concat(this.props.store.userState.token),"Content-Type":"application/json"}}).then((function(e){return n.props.store.changeLoading(!1),e})).catch((function(e){console.log(e.response)}));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"requestDICT_MCC",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n,a){var s,i=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),s="/api/Dictionary/DICT_MCC/?param1=".concat(n),console.log(s),e.next=6,R.get(s,{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),null==e.data.Table.TableRows?i.setState({DICT_MCC:[{mcc_code:"",mcc_name:"\u0417\u0430 \u0434\u0430\u043d\u0438\u043c \u043a\u043e\u0434\u043e\u043c \u043d\u0435\u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0436\u043e\u0434\u043d\u043e\u0433\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443"}]}):i.setState({DICT_MCC:e.data.Table.TableRows}),a?i.setState({isShowBlockSelectDICT_MCC:!0}):i.setState({isShowBlockSelectDICT_MCC:!1}),i.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(D.jsxs)("div",{className:"coverTable REPORT_aquiring",children:[this.state.isSuccess?Object(D.jsxs)(U.a,{variant:"success",children:["\u0417\u0432\u0456\u0442 \u0412\u0438\u043f\u0438\u0441\u043a\u0430 \u043e\u043f\u0435\u0440\u0430\u0446\u0456\u0439 \u0443\u0441\u043f\u0456\u0448\u043d\u043e \u0441\u0444\u043e\u0440\u043c\u043e\u0432\u0430\u043d\u0430. \u041f\u0435\u0440\u0435\u0439\u0434\u0456\u0442\u044c \u043f\u043e"," ",Object(D.jsx)(U.a.Link,{href:"/dashboard/REPORTS_ACQUIRING_MONITOR",children:"\u043b\u0456\u043d\u043a\u0443"}),". \u0414\u043b\u044f \u043f\u0435\u0440\u0435\u0433\u043b\u044f\u0434\u0443 \u0437\u0432\u0456\u0442\u0430."]}):null,Object(D.jsxs)("div",{className:"headerTable",children:[Object(D.jsx)("div",{className:"titleTable",children:this.activeOperation(this.props.store.userState.OPERATIONS,this.props.store.location.pathname.substr(11))}),Object(D.jsx)("div",{className:"optionBlock"})]}),Object(D.jsxs)("div",{className:"filter",children:[Object(D.jsxs)("div",{className:"coverInput col-3",children:[Object(D.jsx)("label",{htmlFor:"DICT_INSTITUTION",children:"\u0420\u0423 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430"}),Object(D.jsx)("select",{onChange:this.selectDICT_INSTITUTION,apiName:"institution_id",id:"dropdown-basic-button",className:"".concat(this.state.isInstitution_idValidation?"":"validError"," form-select"),title:"\u0420\u0435\u0433\u0456\u043e\u043d\u0430\u043b\u044c\u043d\u0456 \u0443\u043f\u0440\u0430\u0432\u043b\u0456\u043d\u043d\u044f",children:this.state.isShowSelectDICT_INSTITUTION?this.state.DICT_INSTITUTION.map((function(e,t){return Object(D.jsx)(na,{optionItem:e},t)})):null}),Object(D.jsx)("p",{className:"error",children:this.state.isInstitution_idValidation?null:"\u041e\u0431\u0435\u0440\u0456\u0442\u044c, \u0431\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f!"}),Object(D.jsx)("label",{htmlFor:"TVBV",children:"\u0422\u0412\u0411\u0412"}),Object(D.jsxs)("select",{id:"dropdown-basic-button",onChange:this.changeInput,apiName:"bank_branch_id",className:"form-select",disabled:this.state.isDisableTVBV?"disabled":"",title:"\u0422\u0412\u0411\u0412",children:[Object(D.jsx)("option",{}),this.state.isShowSelectTVBV?this.state.DICT_BRANCH.map((function(e,t){return Object(D.jsx)(aa,{optionItem:e},t)})):Object(D.jsx)(D.Fragment,{})]}),Object(D.jsx)("label",{htmlFor:"tsp_name",children:"\u041d\u0430\u0437\u0432\u0430 \u0422\u0421\u041f"}),Object(D.jsx)(ma,{token:this.props.store.userState.token,institution_id:this.state.AcquiringReportsCriteria.institution_id,branch_id:this.state.AcquiringReportsCriteria.bank_branch_id,addTspName:this.addTspName,tsp_name:this.state.AcquiringReportsCriteria.tsp_id,isError:this.state.isForm_toValidation}),Object(D.jsx)("label",{htmlFor:"INN",children:"\u0406\u041d\u041d/\u0404\u0414\u0420\u041f\u041e\u0423"}),Object(D.jsx)(Ta,{token:this.props.store.userState.token,institution_id:this.state.AcquiringReportsCriteria.institution_id,branch_id:this.state.AcquiringReportsCriteria.bank_branch_id,addIdentCode:this.addIdentCode,addClientID:this.addClientID,ident_code:this.state.AcquiringReportsCriteria.ident_code,isError:this.state.isForm_toValidation}),Object(D.jsx)("label",{htmlFor:"INN",children:"\u0420\u0420\u041d"}),Object(D.jsx)("input",{onChange:this.changeInput,apiName:"trans_rrn",type:"text",class:"form-control ".concat(!this.state.isForm_toValidation&&"validError "),placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0446\u0438\u0444\u0440\u0438..."}),Object(D.jsx)("p",{className:"error",children:this.state.isForm_toValidation?null:"\u0417\u0430\u043f\u043e\u0432\u043d\u0456\u0442\u044c, \u0431\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u043e\u0434\u043d\u0435 \u0437 5-\u0438 \u0437\u043d\u0430\u0447\u0435\u043d\u044c!"})]}),Object(D.jsxs)("div",{className:"coverInput col-2",children:[Object(D.jsx)("label",{htmlFor:"merchant_id",children:"merchant ID"}),Object(D.jsx)(ba,{token:this.props.store.userState.token,institution_id:this.state.AcquiringReportsCriteria.institution_id,branch_id:this.state.AcquiringReportsCriteria.bank_branch_id,addTspName:this.addMerchantName,tsp_id:this.state.AcquiringReportsCriteria.tsp_id,ident_code:this.state.AcquiringReportsCriteria.ident_code,tsp_name:this.state.AcquiringReportsCriteria.merchant_id,isError:this.state.isForm_toValidation}),Object(D.jsx)("label",{htmlFor:"terminal_id",children:"Terminal ID"}),Object(D.jsx)(ja,{token:this.props.store.userState.token,institution_id:this.state.AcquiringReportsCriteria.institution_id,branch_id:this.state.AcquiringReportsCriteria.bank_branch_id,addTspName:this.addTerminalName,tsp_id:this.state.AcquiringReportsCriteria.tsp_id,ident_code:this.state.AcquiringReportsCriteria.ident_code,tsp_name:this.state.AcquiringReportsCriteria.merchant_id,isError:this.state.isForm_toValidation})]}),Object(D.jsxs)("div",{className:"coverInput col-3",children:[Object(D.jsxs)("div",{className:"base-field",children:[Object(D.jsx)("label",{htmlFor:"base",children:"\u0411\u0430\u0437\u043e\u0432\u0456 \u043f\u043e\u043b\u044f"}),Object(D.jsx)("input",{apiName:"base",id:"base",type:"checkbox"})]}),Object(D.jsx)("label",{htmlFor:"DICT_PAYMENT_SYSTEM",children:"\u041a\u0430\u0440\u0442\u0438"}),Object(D.jsx)(Sn.a,{closeMenuOnSelect:!1,isMulti:!0,options:this.state.DICT_PAYMENT_SYSTEM,placeholder:"\u0412\u0441\u0456",onChange:this.handleSelect}),Object(D.jsx)("label",{htmlFor:"terminal_id",children:"MCC"}),Object(D.jsx)("select",{onChange:this.changeInput,onFocus:function(){return e.requestDICT_TERMINAL_SYSTEM()},apiName:"mcc_code",id:"dropdown-basic-button",className:"form-select",title:"Terminal ID",children:this.state.isShowSelectDICT_MCC_SYSTEM?this.state.DICT_MCC_SYSTEM.map((function(e,t){return Object(D.jsx)(sa,{optionItem:e},t)})):Object(D.jsx)(D.Fragment,{})}),Object(D.jsx)("label",{htmlFor:"format_type_id",children:"\u0424\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0443"}),Object(D.jsx)("select",{onChange:this.changeInput,apiName:"format_type_id",id:"format_type_id",className:"form-select",title:"DICT_REPORT_FORMAT",children:this.state.isShowSelectDICT_REPORT_FORMAT?this.state.DICT_REPORT_FORMAT.map((function(e,t){return Object(D.jsx)(ia,{optionItem:e},t)})):Object(D.jsx)(D.Fragment,{})})]}),Object(D.jsxs)("div",{className:"coverInput col-4",children:[Object(D.jsx)("div",{className:"coverInput col-11",children:Object(D.jsxs)("div",{className:"coverDate",children:[Object(D.jsx)("label",{htmlFor:"date_type_id",children:"\u0414\u0430\u0442\u0430 \u0437\u0432\u0456\u0442\u0443"}),Object(D.jsx)("select",{onChange:this.changeInput,apiName:"date_type_id",id:"date_type_id",className:"".concat(this.state.isDate_type_idValidation?"":"validError"," form-select"),title:"DICT_DATE_TYPE",children:this.state.isShowSelectDICT_DATE_TYPE?this.state.DICT_DATE_TYPE.map((function(e,t){return Object(D.jsx)(ra,{optionItem:e},t)})):Object(D.jsx)(D.Fragment,{})}),Object(D.jsx)("p",{className:"error",children:this.state.isDate_type_idValidation?null:this.state.error_text})]})}),Object(D.jsxs)("div",{className:"coverInput col-11",children:[Object(D.jsx)("span",{children:"\u041f\u0435\u0440\u0456\u043e\u0434 \u0437\u0432\u0456\u0442\u0443"}),Object(D.jsxs)("div",{className:"row",children:[Object(D.jsxs)("div",{className:"coverDate col-6",children:[Object(D.jsx)("label",{htmlFor:"date_report_from",children:"\u0417"}),Object(D.jsx)("input",{onChange:this.changeInputDateReport_from,apiName:"date_from",className:"".concat(this.state.isDate_fromValidation?"":"validError"," customInput form-control"),id:"date_from",type:"date"})]}),Object(D.jsxs)("div",{className:"coverDate col-6",children:[Object(D.jsx)("label",{htmlFor:"date_report_to",children:"\u041f\u043e"}),Object(D.jsx)("input",{onChange:this.changeInputDateReport_to,apiName:"date_to",className:"".concat(this.state.isDate_toValidation?"":"validError"," customInput form-control"),id:"date_to",type:"date"})]})]}),Object(D.jsxs)("p",{className:"error",children:[this.state.isDate_fromValidation&&this.state.isDate_toValidation?null:"\u0417\u0430\u043f\u043e\u0432\u043d\u0456\u0442\u044c, \u0431\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0434\u0430\u0442\u0438!",this.state.isDate_month_Validation?null:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0438\u0439 \u0442\u0435\u0440\u043c\u0456\u043d 31 \u0434\u0435\u043d\u044c!"]})]})]})]}),Object(D.jsx)("div",{className:"btnBlock",children:Object(D.jsx)("button",{className:"search btn btn-primary",onClick:this.search,children:"\u041f\u043e\u0431\u0443\u0434\u0443\u0432\u0430\u0442\u0438 \u0437\u0432\u0456\u0442"})}),this.state.isShowPopupError?Object(D.jsx)(D.Fragment,{children:Object(D.jsx)("div",{className:"coverPopupError",children:Object(D.jsxs)("div",{className:"innerBlock",children:[Object(D.jsx)("div",{className:"title alert alert-danger",children:"\u041d\u0435\u043c\u0430\u0454 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443 \u043f\u043e \u0434\u0430\u043d\u043e\u043c\u0443 \u043f\u043e\u0448\u0443\u043a\u0443"}),Object(D.jsx)("div",{className:"msg",children:this.state.merchant_error}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:this.closePopupError,children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"})]})})}):Object(D.jsx)(D.Fragment,{}),this.state.isShowPopupErrorSave?Object(D.jsx)(D.Fragment,{children:Object(D.jsx)("div",{className:"coverPopupError",children:Object(D.jsxs)("div",{className:"innerBlock",children:[Object(D.jsx)("div",{className:"title alert alert-primary",children:"\u0423\u043f\u04411 \u0421\u0442\u0430\u043b\u0430\u0441\u044f \u043f\u043e\u043c\u0438\u043b\u043a\u0430"}),Object(D.jsx)("div",{className:"msg",children:":("}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:this.closePopupErrorSave,children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"})]})})}):Object(D.jsx)(D.Fragment,{})]})}}]),n}(s.a.Component)),Oa=function(e){return Object(D.jsx)("option",{value:e.optionItem.institution_id,children:e.optionItem.institution_name})},Sa=function(e){return Object(D.jsx)("option",{value:e.optionItem.branch_id,children:e.optionItem.branch_name})},Ia=function(e){return console.log("OptionItemDICT_BRANCH_ENTITY:",e),Object(D.jsx)("option",{value:e.optionItem.entity_id,children:e.optionItem.entity_name})},fa=function(e){var t=e.name,n=e.id;return Object(D.jsx)("option",{value:n,children:t})},Ca=function(e){var t=e.optionItem;return Object(D.jsxs)("option",{value:t.id,children:[t.name," - ",t.institution_id]})},Ra=function(e){return Object(D.jsx)("option",{value:e.optionItem.report_format_id,children:e.optionItem.report_format_name})},va=function(e){return Object(D.jsx)("option",{value:e.optionItem.date_type_id,children:e.optionItem.date_type_name})},xa=function(e){return Object(D.jsx)("option",{selected:e.optionItem.report_format_id==e.report_format_id?"selected":"",value:e.optionItem.report_format_id,children:e.optionItem.report_format_name})},Na=function(e){return Object(D.jsx)("option",{selected:e.optionItem.report_period_type_id==e.report_period_type_id?"selected":"",value:e.optionItem.report_period_type_id,children:e.optionItem.report_period_type_name})},Da=function(e){return Object(D.jsx)("option",{selected:e.optionItem.report_channel_type_id==e.channel_type_id?"selected":"",value:e.optionItem.report_channel_type_id,children:e.optionItem.report_channel_type_name})},ya=function(e){return Object(D.jsx)("div",{className:"blockSelectItem",value:e.item.mcc_code,onClick:function(t){return e.onClickBlockSelectItem(t)},children:e.item.mcc_name})},Ea=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).selectDICT_INSTITUTION=function(e){var t=e.target.value,n=e.currentTarget.getAttribute("apiName"),s=e.target.value,i=a.state.AcquiringReportsCriteria;i[n]=s,""==t?a.setState({isShowSelectTVBV:!0,TSPReportSettingsSearchObj:i,isInstitution_idValidation:!1}):(a.setState({isShowSelectTVBV:!1,TSPReportSettingsSearchObj:i,isInstitution_idValidation:!0,institution_id:t}),a.requestDICT_BRANCH(a.props.store.userState.token,t))},a.changeInputDateReport=function(e){var t=e.currentTarget.getAttribute("apiName"),n=e.target.value,s=a.state.AcquiringReportsCriteria;s[t]=a.formatDate(new Date(n)),a.setState({AcquiringReportsCriteria:s})},a.changeInputDateReport_from=function(e){var t=e.currentTarget.getAttribute("apiName"),n=e.target.value,s=a.state.AcquiringReportsCriteria;s[t]=a.formatDate(new Date(n)),""==n?a.setState({AcquiringReportsCriteria:s,isDate_fromValidation:!1}):a.setState({AcquiringReportsCriteria:s,isDate_fromValidation:!0,date_from:n})},a.changeInputDateReport_to=function(e){var t=e.currentTarget.getAttribute("apiName"),n=e.target.value,s=a.state.AcquiringReportsCriteria;s[t]=a.formatDate(new Date(n)),""==n?a.setState({AcquiringReportsCriteria:s,isDate_toValidation:!1}):a.setState({AcquiringReportsCriteria:s,isDate_toValidation:!0,date_to:n})},a.changeInputBase=function(e){var t=e.currentTarget.getAttribute("apiName"),n=e.target.value,s=a.state.AcquiringReportsCriteria;s[t]=n,a.setState({AcquiringReportsCriteria:s})},a.changeInput=function(e){var t=e.currentTarget.getAttribute("apiName"),n=e.target.value,s=a.state.AcquiringReportsCriteria;"format_type_id"==t||"mcc_code"==t||"payment_system_id"==t||"terminal_id"==t||"bank_branch_id"==t||"institution_id"==t||"tsp_id"==t||"merchant_id"==t||"terminal_id"==t||"ident_code"==t||"network_entity_id"==t?s[t]=Number(n):"terminal_type_id"==t?(s[t]=n,""==n?a.setState({AcquiringReportsCriteria:s,isTerminal_type_idValidation:!1}):a.setState({AcquiringReportsCriteria:s,isTerminal_type_idValidation:!0,terminal_type_id:n})):"merchant_id"==t?(s[t]=Number(n),""==n?a.setState({AcquiringReportsCriteria:s,isMerchant_idValidation:!1}):a.setState({AcquiringReportsCriteria:s,isMerchant_idValidation:!0,merchant_id:n})):"network_entity_id"==t?s[t]=Number(n):"date_type_id"==t?(s[t]=Number(n),""==n?a.setState({AcquiringReportsCriteria:s,isDate_type_idValidation:!1}):a.setState({AcquiringReportsCriteria:s,isDate_type_idValidation:!0,date_type_id:n})):"brand_name"==t?a.setState(Object(B.a)({},t,n)):s[t]=n,a.setState({AcquiringReportsCriteria:s}),console.log(a.state.AcquiringReportsCriteria)},a.formatDate=function(e){var t=e.getDate(),n=("0"+(e.getMonth()+1)).slice(-2);return e.getFullYear()+n+t},a.search=function(){a.defineValidationInputs()},a.defineValidationInputs=function(){var e=new Date(a.state.date_from),t=new Date(a.state.date_to),n=Math.abs(t-e),s=Math.ceil(n/864e5);null!=a.state.DICT_BRAND_NAME_VAL&&""!=a.state.DICT_BRAND_NAME_VAL||a.setState({isBrandName_toValidation:!1}),null!=a.state.date_type_id&&""!=a.state.date_type_id||a.setState({isDate_type_idValidation:!1}),null!=a.state.date_from&&""!=a.state.date_from||a.setState({isDate_fromValidation:!1}),null!=a.state.date_to&&""!=a.state.date_to||a.setState({isDate_toValidation:!1}),s>31&&a.setState({isDate_month_Validation:!1}),a.setState({},(function(){return a.sendOptionToServer()}))},a.Tsp_list=function(e){return e.map((function(e,t){return Object(D.jsx)("li",{className:"dropdownMenuItem",children:Object(D.jsxs)("p",{children:[Object(D.jsx)("input",{name:"tsp_list",id:e.tsp_id,type:"radio",onClick:a.itemTsp,value:e.tsp_id})," ",e.tsp_id]})})}))},a.itemTsp=function(e){var t=e.target.value;a.state.settings.map((function(e,n){e.tsp_id==t&&(null==e.main_settings?a.setState({type_acquiring:2,report_format_id:1,report_period_type_id:1,channel_type_id:1,file_name_mask:""}):e.main_settings.length&&a.setState({type_acquiring:e.main_settings[0].acquiring_type_id,report_format_id:e.main_settings[0].report_format_id,report_period_type_id:e.main_settings[0].report_period_type_id,channel_type_id:e.main_settings[0].channel_type_id,file_name_mask:e.main_settings[0].file_name_mask}))})),a.setState({currentTsp:Number(t),TSPReportSettingsSTD:null,isShowTypeAcquiring:!0}),a.requestDICT_REPORT_FORMAT(a.props.store.userState.token),a.requestDICT_REPORT_PERIOD_TYPE(a.props.store.userState.token),a.requestDICT_REPORT_CHANNEL_TYPE(a.props.store.userState.token)},a.changeTypeAcquiring=function(e){var t=e.currentTarget.getAttribute("type_acquiring");a.state.settings.map((function(e,n){e.tsp_id==a.state.currentTsp&&e.main_settings.length>1&&e.main_settings.map((function(e,n){e.acquiring_type_id==t&&a.setState({type_acquiring:Number(t),report_format_id:e.report_format_id,report_period_type_id:e.report_period_type_id,channel_type_id:e.channel_type_id,file_name_mask:e.file_name_mask})}))}))},a.openStandardReport=function(){a.requestTSPReportSettingsSTD(a.props.store.userState.token)},a.closePopupTable=function(){a.setState({isShowTableTSPReportSettingsSTD:!1})},a.changeReport_format_id=function(e){var t=e.target.value;a.setState({report_format_id:Number(t)})},a.changeReport_period_type_id=function(e){var t=e.target.value;a.setState({report_period_type_id:Number(t)})},a.changeChannel_type_id=function(e){var t=e.target.value;a.setState({channel_type_id:Number(t)})},a.changeFile_name_mask=function(e){var t=e.target.value;a.setState({file_name_mask:t})},a.saveReport=function(){var e={acquiring_type_id:a.state.type_acquiring,tsp_list:[{tsp_id:a.state.currentTsp}],main_settings:{acquiring_type_id:a.state.type_acquiring,report_format_id:a.state.report_format_id,report_period_type_id:a.state.report_period_type_id,channel_type_id:a.state.channel_type_id,file_name_mask:a.state.file_name_mask}};null!=a.state.TSPReportSettingsSTD&&(e.std_settings=a.state.TSPReportSettingsSTD),a.requestTSPReportSettingsSTD_SAVE(a.props.store.userState.token)},a.showReport=function(e){return a.state.settings.map((function(t,n){if(t.tsp_id==e){if(null==t.main_settings){return Object(D.jsxs)("div",{className:"report border",children:[Object(D.jsx)("div",{className:"title",children:"\u041f\u0435\u0440\u0435\u043b\u0456\u043a \u043f\u043e\u043b\u0456\u0432 \u0437\u0432\u0456\u0442\u0443 \u0422\u0421\u041f"}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:a.openStandardReport,children:"\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:!0,children:"\u0420\u043e\u0437\u0448\u0438\u0440\u0435\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:!0,children:"\u0417\u0432\u0456\u0442 \u043f\u043e \u043e\u043f\u0435\u0440\u0430\u0446\u0456\u044f\u043c Installment"}),Object(D.jsx)("br",{}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_format",children:"\u0424\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0443"}),a.state.isShowREPORT_FORMAT?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_format_id,name:"DICT_REPORT_FORMAT",id:"DICT_REPORT_FORMAT",children:a.state.DICT_REPORT_FORMAT.map((function(e,t){return Object(D.jsx)(xa,{optionItem:e,report_format_id:1},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"report_period",children:"\u041f\u0435\u0440\u0456\u043e\u0434 \u0437\u0432\u0456\u0442\u0443"}),a.state.isShowDICT_REPORT_PERIOD_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_period_type_id,name:"DICT_REPORT_PERIOD_TYPE",id:"DICT_REPORT_PERIOD_TYPE",children:a.state.DICT_REPORT_PERIOD_TYPE.map((function(e,t){return Object(D.jsx)(Na,{optionItem:e,report_period_type_id:1},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_name_mask",children:"\u041c\u0430\u0441\u043a\u0430 \u043d\u0430\u0437\u0432\u0438 \u0444\u0430\u0439\u043b\u0443"}),Object(D.jsx)("input",{defaultValue:"",onChange:a.changeFile_name_mask,apiName:"file_name_mask",className:"customInput form-control",id:"file_name_mask",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441atalog",children:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433"}),Object(D.jsx)("input",{disabled:!0,onChange:a.changeInput,apiName:"\u0441atalog",className:"customInput form-control",id:"\u0441atalog",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441hannel",children:"\u041a\u0430\u043d\u0430\u043b"}),a.state.isShowDICT_REPORT_CHANNEL_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeChannel_type_id,name:"DICT_REPORT_CHANNEL_TYPE",id:"DICT_REPORT_CHANNEL_TYPE",children:a.state.DICT_REPORT_CHANNEL_TYPE.map((function(e,t){return Object(D.jsx)(Da,{optionItem:e,channel_type_id:1},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsx)("div",{className:"reportCoverBtn",children:Object(D.jsx)("button",{className:"btn btn-secondary",onClick:a.saveReport,children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})})]})}if(1==t.main_settings.length)return t.main_settings.map((function(e,t){var n=e.report_period_type_id,s=e.report_format_id,i=e.channel_type_id,r=e.file_name_mask;return Object(D.jsxs)("div",{className:" border report",children:[Object(D.jsxs)("div",{className:"coverBtn border",children:[Object(D.jsx)("div",{className:"title",children:"\u0412\u0438\u0434 \u0435\u043a\u0432\u0430\u0440\u0438\u043d\u0433\u0443"}),Object(D.jsx)("button",{className:"btn btn-secondary",children:1==a.state.type_acquiring?"\u0424\u0456\u0437\u0438\u0447\u043d\u0438\u0439":"\u0406\u043d\u0442\u0435\u0440\u043d\u0435\u0442"})]}),Object(D.jsxs)("div",{className:"report border",children:[Object(D.jsx)("div",{className:"title",children:"\u041f\u0435\u0440\u0435\u043b\u0456\u043a \u043f\u043e\u043b\u0456\u0432 \u0437\u0432\u0456\u0442\u0443 \u0422\u0421\u041f"}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:a.openStandardReport,children:"\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:!0,children:"\u0420\u043e\u0437\u0448\u0438\u0440\u0435\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:!0,children:"\u0417\u0432\u0456\u0442 \u043f\u043e \u043e\u043f\u0435\u0440\u0430\u0446\u0456\u044f\u043c Installment"}),Object(D.jsx)("br",{}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_format",children:"\u0424\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0443"}),a.state.isShowREPORT_FORMAT?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_format_id,name:"DICT_REPORT_FORMAT",id:"DICT_REPORT_FORMAT",children:a.state.DICT_REPORT_FORMAT.map((function(e,t){return Object(D.jsx)(xa,{optionItem:e,report_format_id:s},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"report_period",children:"\u041f\u0435\u0440\u0456\u043e\u0434 \u0437\u0432\u0456\u0442\u0443"}),a.state.isShowDICT_REPORT_PERIOD_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_period_type_id,name:"DICT_REPORT_PERIOD_TYPE",id:"DICT_REPORT_PERIOD_TYPE",children:a.state.DICT_REPORT_PERIOD_TYPE.map((function(e,t){return Object(D.jsx)(Na,{optionItem:e,report_period_type_id:n},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_name_mask",children:"\u041c\u0430\u0441\u043a\u0430 \u043d\u0430\u0437\u0432\u0438 \u0444\u0430\u0439\u043b\u0443"}),Object(D.jsx)("input",{defaultValue:r,onChange:a.changeFile_name_mask,apiName:"file_name_mask",className:"customInput form-control",id:"file_name_mask",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441atalog",children:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433"}),Object(D.jsx)("input",{disabled:!0,onChange:a.changeInput,apiName:"\u0441atalog",className:"customInput form-control",id:"\u0441atalog",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441hannel",children:"\u041a\u0430\u043d\u0430\u043b"}),a.state.isShowDICT_REPORT_CHANNEL_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeChannel_type_id,name:"DICT_REPORT_CHANNEL_TYPE",id:"DICT_REPORT_CHANNEL_TYPE",children:a.state.DICT_REPORT_CHANNEL_TYPE.map((function(e,t){return Object(D.jsx)(Da,{optionItem:e,channel_type_id:i},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsx)("div",{className:"reportCoverBtn",children:Object(D.jsx)("button",{className:"btn btn-secondary",onClick:a.saveReport,children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})})]})]})}));if(2==t.main_settings.length)return Object(D.jsxs)("div",{className:"",children:[Object(D.jsxs)("div",{className:"coverBtn border",children:[Object(D.jsx)("div",{className:"title",children:"\u0412\u0438\u0434 \u0435\u043a\u0432\u0430\u0440\u0438\u043d\u0433\u0443"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:1==a.state.type_acquiring?"disabled":"",onClick:a.changeTypeAcquiring,type_acquiring:1,children:"\u0424\u0456\u0437\u0438\u0447\u043d\u0438\u0439"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:2==a.state.type_acquiring?"disabled":"",onClick:a.changeTypeAcquiring,type_acquiring:2,children:"\u0406\u043d\u0442\u0435\u0440\u043d\u0435\u0442"})]}),t.main_settings.map((function(e,t){var n=e.report_period_type_id,s=e.report_format_id,i=e.channel_type_id,r=e.file_name_mask,o=e.acquiring_type_id,c=e.standard_report,l=e.extended_report,d=e.installment_report;return Object(D.jsxs)("div",{className:"".concat(a.state.type_acquiring==o?"":"d-none"," border report"),children:[Object(D.jsx)("div",{className:"title",children:"\u041f\u0435\u0440\u0435\u043b\u0456\u043a \u043f\u043e\u043b\u0456\u0432 \u0437\u0432\u0456\u0442\u0443 \u0422\u0421\u041f"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:c?"":"disabled",onClick:a.openStandardReport,children:"\u0421\u0442\u0430\u043d\u0434\u0430\u0440\u0442\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:l?"":"disabled",children:"\u0420\u043e\u0437\u0448\u0438\u0440\u0435\u043d\u0438\u0439 \u0437\u0432\u0456\u0442"}),Object(D.jsx)("button",{className:"btn btn-secondary",disabled:d?"":"disabled",children:"\u0417\u0432\u0456\u0442 \u043f\u043e \u043e\u043f\u0435\u0440\u0430\u0446\u0456\u044f\u043c Installment"}),Object(D.jsx)("br",{}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_format",children:"\u0424\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0443"}),a.state.isShowREPORT_FORMAT?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_format_id,name:"DICT_REPORT_FORMAT",id:"DICT_REPORT_FORMAT",children:a.state.DICT_REPORT_FORMAT.map((function(e,t){return Object(D.jsx)(xa,{optionItem:e,report_format_id:s},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"report_period",children:"\u041f\u0435\u0440\u0456\u043e\u0434 \u0437\u0432\u0456\u0442\u0443"}),a.state.isShowDICT_REPORT_PERIOD_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeReport_period_type_id,name:"DICT_REPORT_PERIOD_TYPE",id:"DICT_REPORT_PERIOD_TYPE",children:a.state.DICT_REPORT_PERIOD_TYPE.map((function(e,t){return Object(D.jsx)(Na,{optionItem:e,report_period_type_id:n},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"file_name_mask",children:"\u041c\u0430\u0441\u043a\u0430 \u043d\u0430\u0437\u0432\u0438 \u0444\u0430\u0439\u043b\u0443"}),Object(D.jsx)("input",{defaultValue:r,onChange:a.changeFile_name_mask,apiName:"file_name_mask",className:"customInput form-control",id:"file_name_mask",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441atalog",children:"\u041a\u0430\u0442\u0430\u043b\u043e\u0433"}),Object(D.jsx)("input",{disabled:!0,onChange:a.changeInput,apiName:"\u0441atalog",className:"customInput form-control",id:"\u0441atalog",type:"text"})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"\u0441hannel",children:"\u041a\u0430\u043d\u0430\u043b"}),a.state.isShowDICT_REPORT_CHANNEL_TYPE?Object(D.jsx)("select",{className:"form-select",onChange:a.changeChannel_type_id,name:"DICT_REPORT_CHANNEL_TYPE",id:"DICT_REPORT_CHANNEL_TYPE",children:a.state.DICT_REPORT_CHANNEL_TYPE.map((function(e,t){return Object(D.jsx)(Da,{optionItem:e,channel_type_id:i},t)}))}):Object(D.jsx)("span",{children:"\u0417\u0430\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u043d\u044f..."})]}),Object(D.jsx)("br",{}),Object(D.jsx)("div",{className:"reportCoverBtn",children:Object(D.jsx)("button",{className:"btn btn-secondary",onClick:a.saveReport,children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})})]})}))]})}}))},a.closePopupError=function(){a.setState({isShowPopupError:!1})},a.closePopupErrorSave=function(){a.setState({isShowPopupErrorSave:!1})},a.activeOperation=function(e,t){var n;return e.map((function(e,a){e.operation==t&&(n=e.name)})),n},a.onChangeAutocompleteInput=function(e){var t=e.target.value;a.setState({InputDICT_MCC:t}),""!=t&&a.requestDICT_MCC(a.props.store.userState.token,t,!0)},a.onClickAutocompleteInput=function(e){e.target.value;a.setState({isShowBlockSelectDICT_MCC:!0})},a.onClickAutocompleteInputRes=function(){a.setState({mcc_code:null,isShowBlockSelectDICT_MCC:!0,isShowInputResDICT_MCC:!1,isShowInputDICT_MCC:!0})},a.onBlurBlockSelect=function(){a.setState({isShowBlockSelectDICT_MCC:!1})},a.onClickBlockSelectItem=function(e){var t=e.currentTarget.getAttribute("value");if(""!=t){if(t!=a.state.InputDICT_MCC){a.requestDICT_MCC(a.props.store.userState.token,t,!1);var n=a.state.AcquiringReportsCriteria;n.mcc_code=t,a.setState({AcquiringReportsCriteria:n,InputDICT_MCC:t,isShowBlockSelectDICT_MCC:!1,isShowInputResDICT_MCC:!0,isShowInputDICT_MCC:!1})}a.setState({isShowBlockSelectDICT_MCC:!1})}},a.clickTest=function(e){null!=a.myRef.current&&a.myRef.current.className!=e.target.parentElement.className&&a.setState({isShowBlockSelectDICT_MCC:!1})},a.handleSelect=function(e){var t,n=a.state.AcquiringReportsCriteria;t=0===e.length?0:e.map((function(e){return e.value})).join(","),n.payment_system_id=t,a.setState({AcquiringReportsCriteria:n})},a.state={DICT_INSTITUTION:null,isShowSelectDICT_INSTITUTION:!1,DICT_BRANCH:null,isDisableTVBV:!0,isShowSelectTVBV:!1,DICT_ACQUIRING_REPORTS:null,isShowSelectDICT_ACQUIRING_REPORTS:!1,DICT_ACQUIRING_TYPE:null,isShowSelectDICT_ACQUIRING_TYPE:!1,DICT_PAYMENT_SYSTEM:null,isShowSelectDICT_PAYMENT_SYSTEM:!1,DICT_REPORT_FORMAT:null,isShowSelectDICT_REPORT_FORMAT:!1,DICT_DATE_TYPE:null,isShowSelectDICT_DATE_TYPE:!1,AcquiringReportsCriteria:{report_type_id:"REPORT_OPERATIONS_NET",payment_system_id:0,format_type_id:1,date_type_id:1},date_from:null,date_to:null,date_type_id:1,institution_id:0,merchant_id:null,terminal_type_id:null,brand_name:null,isInstitution_idValidation:!0,isMerchant_idValidation:!0,isTerminal_type_idValidation:!0,isDate_type_idValidation:!0,isDate_month_Validation:!0,isDate_fromValidation:!0,isDate_toValidation:!0,isMerchant_toValidation:!0,isTerminal_toValidation:!0,isBrandName_toValidation:!0,isTSP_toValidation:!0,isMCC_toValidation:!0,DICT_BRAND_NAME_ID:null,DICT_MCC:null,InputDICT_MCC:null,isShowBlockSelectDICT_MCC:!1,isShowInputResDICT_MCC:!1,isShowInputDICT_MCC:!0,isShow_BRANCH_NAME_VALUES:!1,DICT_BRAND_VALUES:[],DICT_BRAND_NAME_VALUES:[],DICT_BRAND_NAME_VAL:null,isShow_ENTITY_NAME_VALUES:!1,isShow_DICT_TSP:!1,DICT_TSP_VALUE:[],isShow_DICT_MERCHANT:!1,DICT_MERCHANT_VALUE:[],isShow_DICT_TERMINAL:!1,DICT_TERMINAL_VALUE:[],error_text:"\u0417\u0430\u043f\u043e\u0432\u043d\u0456\u0442\u044c, \u0431\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0437\u043d\u0430\u0447\u0435\u043d\u043d\u044f!"},a.myRef=s.a.createRef(),a.handleRequestDICT_BRANCH_NAME=a.handleRequestDICT_BRANCH_NAME.bind(Object(Le.a)(a)),a.get_DICT_BRAND_NAME_LEVEL=a.get_DICT_BRAND_NAME_LEVEL.bind(Object(Le.a)(a)),a.get_DICT_TSP=a.get_DICT_TSP.bind(Object(Le.a)(a)),a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("mousedown",this.clickTest),this.requestDICT_INSTITUTION(this.props.store.userState.token),this.requestDICT_ACQUIRING_REPORTS(this.props.store.userState.token),this.requestDICT_ACQUIRING_TYPE(this.props.store.userState.token),this.requestDICT_PAYMENT_SYSTEM(this.props.store.userState.token),this.requestDICT_REPORT_FORMAT(this.props.store.userState.token),this.requestDICT_DATE_TYPE(this.props.store.userState.token),this.requestDICT_DATE_TYPE(this.props.store.userState.token),this.get_DICT_NET_BRAND(this.props.store.userState.token)}},{key:"componentWillUnmount",value:function(){window.addEventListener("mousedown",null)}},{key:"requestDICT_BRANCH",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n){var a,s=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),console.log(t),a="/api/Dictionary/DICT_BRANCH/?param1=".concat(n),{param1:n},e.next=6,R.get(a,{headers:{Token:"".concat(t)}}).then((function(e){console.log(e.data),s.setState({DICT_BRANCH:e.data.Table.TableRows,isShowSelectTVBV:!0,isDisableTVBV:!1}),s.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"requestDICT_INSTITUTION",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Dictionary/DICT_INSTITUTION",e.next=4,R.get("/api/Dictionary/DICT_INSTITUTION",{headers:{Token:"".concat(t)}}).then((function(e){n.setState({DICT_INSTITUTION:e.data.Table.TableRows,isShowSelectDICT_INSTITUTION:!0}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response)}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"get_DICT_NET_BRAND",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Dictionary/DICT_NET_BRAND",e.next=4,R.get("/api/Dictionary/DICT_NET_BRAND",{headers:{Token:"".concat(t)}}).then((function(e){n.setState({DICT_BRAND_NAME_VALUES:e.data.Table.TableRows.map((function(e){return e.brand_name})),DICT_BRAND_VALUES:e.data.Table.TableRows}),n.props.store.changeLoading(!1)})).catch((function(e){console.log(e.response)}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"get_DICT_BRAND_NAME_LEVEL",value:function(){var e=Object(C.a)(f.a.mark((function e(){var t,n,a,s,i=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.DICT_BRAND_NAME_VAL){e.next=2;break}return e.abrupt("return");case 2:if(this.props.store.changeLoading(!0),t=this.state.DICT_BRAND_VALUES.filter((function(e){return e.brand_name===i.state.DICT_BRAND_NAME_VAL[0]}))[0],n=t.second_level_flag,a=t.brand_id,this.setState({DICT_BRAND_NAME_ID:a}),console.log("this.state",this.state),1!==n){e.next=12;break}return s="/api/Dictionary/DICT_NET_ENTITY/?param1=".concat(a),e.next=10,R.get(s,{headers:{Token:"".concat(this.props.store.userState.token)}}).then((function(e){console.log("res.data.Table.TableRows",e.data.Table.TableRows),i.setState({DICT_BRANCH_ENTITY_VALUES:e.data.Table.TableRows,isShow_ENTITY_NAME_VALUES:!0,isInstitution_idValidation:!0})}));case 10:e.next=13;break;case 12:this.setState({DICT_BRANCH_ENTITY_VALUES:[],isShow_ENTITY_NAME_VALUES:!1,isInstitution_idValidation:!0});case 13:this.props.store.changeLoading(!1),this.get_DICT_TSP(a),this.get_DICT_BRAND_MERCHANT(a),this.get_DICT_BRAND_TERMINALS(a);case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"get_DICT_BRAND_MERCHANT",value:function(){var e=Object(C.a)(f.a.mark((function e(){var t,n,a,s=this,i=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:null,this.props.store.changeLoading(!0),n={param1:t||this.state.DICT_BRAND_NAME_ID},this.state.AcquiringReportsCriteria.network_entity_id&&(n.param2=this.state.AcquiringReportsCriteria.network_entity_id),console.log("params: ",n),a="/api/Dictionary/DICT_NETWORK_MERCHANTS",e.next=8,R.get(a,{headers:{Token:"".concat(this.props.store.userState.token)},params:n}).then((function(e){console.log("res.data.Table.TableRows",e.data.Table.TableRows),s.setState({DICT_MERCHANT_VALUE:e.data.Table.TableRows,isShow_DICT_MERCHANT:null!==e.data.Table.TableRows})}));case 8:this.props.store.changeLoading(!1);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"get_DICT_BRAND_TERMINALS",value:function(){var e=Object(C.a)(f.a.mark((function e(){var t,n,a,s=this,i=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:null,this.props.store.changeLoading(!0),n={param1:t||this.state.DICT_BRAND_NAME_ID},this.state.AcquiringReportsCriteria.network_entity_id&&(n.param2=this.state.AcquiringReportsCriteria.network_entity_id),a="/api/Dictionary/DICT_NETWORK_TERMINALS",e.next=7,R.get(a,{headers:{Token:"".concat(this.props.store.userState.token)},params:n}).then((function(e){console.log("res.data.Table.TableRows",e.data.Table.TableRows),s.setState({DICT_TERMINAL_VALUE:e.data.Table.TableRows,isShow_DICT_TERMINAL:null!==e.data.Table.TableRows})}));case 7:this.props.store.changeLoading(!1);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"get_DICT_TSP",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n,a=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),n={institution_id:Number(this.state.institution_id),branch_id:this.state.AcquiringReportsCriteria.bank_branch_id,network_brand_id:t},"/api/Dictionary/QueryTSP",e.next=5,R.post("/api/Dictionary/QueryTSP",n,{headers:{token:"".concat(this.props.store.userState.token)}}).then((function(e){console.log("/api/Dictionary/QueryTSP",e.data.tsp_list.TableRows),a.setState({DICT_TSP_VALUE:e.data.tsp_list.TableRows,isShow_DICT_TSP:null!==e.data.tsp_list.TableRows})}));case 5:this.props.store.changeLoading(!1);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_REPORT_FORMAT",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Dictionary/DICT_REPORT_FORMAT",e.next=4,R.get("/api/Dictionary/DICT_REPORT_FORMAT",{headers:{Token:"".concat(t)}}).then((function(e){n.setState({DICT_REPORT_FORMAT:e.data.Table.TableRows,isShowSelectDICT_REPORT_FORMAT:!0}),n.props.store.changeLoading(!1)})).catch((function(e){}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_REPORT_PERIOD_TYPE",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Dictionary/DICT_REPORT_PERIOD_TYPE",e.next=4,R.get("/api/Dictionary/DICT_REPORT_PERIOD_TYPE",{headers:{Token:"".concat(t)}}).then((function(e){n.setState({DICT_REPORT_PERIOD_TYPE:e.data.Table.TableRows,isShowDICT_REPORT_PERIOD_TYPE:!0}),n.props.store.changeLoading(!1)})).catch((function(e){}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_ACQUIRING_REPORTS",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Dictionary/DICT_ACQUIRING_REPORTS",e.next=4,R.get("/api/Dictionary/DICT_ACQUIRING_REPORTS",{headers:{Token:"".concat(t)}}).then((function(e){n.setState({DICT_ACQUIRING_REPORTS:e.data.Table.TableRows,isShowSelectDICT_ACQUIRING_REPORTS:!0}),n.props.store.changeLoading(!1)})).catch((function(e){}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_ACQUIRING_TYPE",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Dictionary/DICT_ACQUIRING_TYPE",e.next=4,R.get("/api/Dictionary/DICT_ACQUIRING_TYPE",{headers:{Token:"".concat(t)}}).then((function(e){n.setState({DICT_ACQUIRING_TYPE:e.data.Table.TableRows,isShowSelectDICT_ACQUIRING_TYPE:!0}),n.props.store.changeLoading(!1)})).catch((function(e){}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_PAYMENT_SYSTEM",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Dictionary/DICT_PAYMENT_SYSTEM",e.next=4,R.get("/api/Dictionary/DICT_PAYMENT_SYSTEM",{headers:{Token:"".concat(t)}}).then((function(e){n.setState({DICT_PAYMENT_SYSTEM:e.data.Table.TableRows.map((function(e){return{value:e.payment_system_id,label:e.payment_system_name}})),isShowSelectDICT_PAYMENT_SYSTEM:!0}),n.props.store.changeLoading(!1)})).catch((function(e){}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestDICT_BRANCH_NAME",value:function(){var e=Object(C.a)(f.a.mark((function e(){var t,n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),t="/api/Dictionary/DICT_NET_BRAND?param1=".concat(this.state.brand_name),e.next=4,R.get(t,{headers:{Token:"".concat(this.props.store.userState.token)}}).then((function(e){n.setState({DICT_BRAND_NAME_VALUES:e.data.Table.TableRows,isShow_BRANCH_NAME_VALUES:null!==e.data.Table.TableRows}),n.props.store.changeLoading(!1)})).catch((function(e){}));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleRequestDICT_BRANCH_NAME",value:function(e){var t={brand_name:e.target.innerText,brand_id:e.target.dataset.id};this.setState({brand_name:t.brand_name,brand_id:t.brand_id,isShow_BRANCH_NAME_VALUES:!1})}},{key:"requestDICT_DATE_TYPE",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Dictionary/DICT_DATE_TYPE",e.next=4,R.get("/api/Dictionary/DICT_DATE_TYPE",{headers:{Token:"".concat(t)}}).then((function(e){n.setState({DICT_DATE_TYPE:e.data.Table.TableRows,isShowSelectDICT_DATE_TYPE:!0}),n.props.store.changeLoading(!1)})).catch((function(e){}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestReports_Acquiring",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n){var a=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),"/api/Reports/Acquiring",e.next=4,R.post("/api/Reports/Acquiring",n,{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(e){a.props.store.changeLoading(!1),window.location.href="/dashboard/REPORTS_ACQUIRING_MONITOR"})).catch((function(e){}));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"sendOptionToServer",value:function(){this.state.isBrandName_toValidation&&this.state.isDate_type_idValidation&&this.state.isDate_fromValidation&&this.state.isDate_toValidation&&this.state.isDate_month_Validation&&(this.state.DICT_BRAND_NAME_ID&&(this.state.AcquiringReportsCriteria.network_brand_id=this.state.DICT_BRAND_NAME_ID),this.state.AcquiringReportsCriteria.institution_id&&(this.state.AcquiringReportsCriteria.institution_id=Number(this.state.AcquiringReportsCriteria.institution_id)),this.state.AcquiringReportsCriteria.mcc_code&&(this.state.AcquiringReportsCriteria.mcc_code=Number(this.state.AcquiringReportsCriteria.mcc_code)),this.requestReports_Acquiring(this.props.store.userState.token,this.state.AcquiringReportsCriteria))}},{key:"requestDICT_MCC",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n,a){var s,i=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),s="/api/Dictionary/DICT_MCC/?param1=".concat(n),e.next=4,R.get(s,{headers:{Token:"".concat(t)}}).then((function(e){null==e.data.Table.TableRows?i.setState({DICT_MCC:[{mcc_code:"",mcc_name:"\u0417\u0430 \u0434\u0430\u043d\u0438\u043c \u043a\u043e\u0434\u043e\u043c \u043d\u0435\u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e \u0436\u043e\u0434\u043d\u043e\u0433\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443"}]}):i.setState({DICT_MCC:e.data.Table.TableRows}),a?i.setState({isShowBlockSelectDICT_MCC:!0}):i.setState({isShowBlockSelectDICT_MCC:!1}),i.props.store.changeLoading(!1)})).catch((function(e){}));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e,t,n=this;return Object(D.jsxs)("div",{className:"coverTable REPORT_aquiring",children:[Object(D.jsxs)("div",{className:"headerTable",children:[Object(D.jsx)("div",{className:"titleTable",children:this.activeOperation(this.props.store.userState.OPERATIONS,this.props.store.location.pathname.substr(11))}),Object(D.jsx)("div",{className:"optionBlock"})]}),Object(D.jsxs)("div",{className:"filter",children:[Object(D.jsxs)("div",{className:"col-3 coverInput",children:[Object(D.jsx)("label",{htmlFor:"DICT_INSTITUTION",children:"\u0420\u0435\u0433\u0456\u043e\u043d\u0430\u043b\u044c\u043d\u0456 \u0443\u043f\u0440\u0430\u0432\u043b\u0456\u043d\u043d\u044f"}),Object(D.jsx)("select",{onChange:this.selectDICT_INSTITUTION,apiName:"institution_id",id:"dropdown-basic-button",className:"".concat(this.state.isInstitution_idValidation?"":"validError"," form-select"),title:"\u0420\u0435\u0433\u0456\u043e\u043d\u0430\u043b\u044c\u043d\u0456 \u0443\u043f\u0440\u0430\u0432\u043b\u0456\u043d\u043d\u044f",children:this.state.isShowSelectDICT_INSTITUTION?this.state.DICT_INSTITUTION.map((function(e,t){return Object(D.jsx)(Oa,{optionItem:e},t)})):null}),Object(D.jsx)("p",{className:"error",children:this.state.isInstitution_idValidation?null:this.state.error_text}),Object(D.jsx)("label",{htmlFor:"TVBV",children:"\u0422\u0412\u0411\u0412"}),Object(D.jsxs)("select",{id:"dropdown-basic-button",onChange:this.changeInput,apiName:"bank_branch_id",className:"form-select",disabled:this.state.isDisableTVBV?"disabled":"",title:"\u0422\u0412\u0411\u0412",children:[Object(D.jsx)("option",{}),this.state.isShowSelectTVBV?this.state.DICT_BRANCH.map((function(e,t){return Object(D.jsx)(Sa,{optionItem:e},t)})):null]}),Object(D.jsx)("label",{htmlFor:"tsp_id",children:"\u041d\u0430\u0437\u0432\u0430 \u041c\u0435\u0440\u0435\u0436\u0456"}),Object(D.jsx)(Y.b,{id:"basic-typeahead-single",labelKey:"name",onChange:function(e){n.setState({DICT_BRAND_NAME_VAL:e})},options:this.state.DICT_BRAND_NAME_VALUES,placeholder:"\u041f\u043e\u0447\u043d\u0456\u0442\u044c \u0432\u0432\u043e\u0434\u0438\u0442\u0438 \u043d\u0430\u0437\u0432\u0443",selected:this.state.DICT_BRAND_NAME_VAL,onBlur:this.get_DICT_BRAND_NAME_LEVEL,className:"".concat(this.state.isBrandName_toValidation?"":"validError")}),Object(D.jsx)("p",{className:"error",children:this.state.isBrandName_toValidation?null:this.state.error_text}),Object(D.jsx)("label",{htmlFor:"TVBV",children:"\u041d\u0430\u0437\u0432\u0430 \u043c\u0435\u0440\u0435\u0436\u0456 2-\u0433\u043e \u0440\u0456\u0432\u043d\u044f"}),Object(D.jsxs)("select",{id:"dropdown-basic-button",onChange:this.changeInput,apiName:"network_entity_id",className:"form-select",disabled:this.state.isShow_ENTITY_NAME_VALUES?"":"disabled",onBlur:function(){n.get_DICT_BRAND_MERCHANT(),n.get_DICT_BRAND_TERMINALS()},children:[Object(D.jsx)("option",{}),this.state.isShow_ENTITY_NAME_VALUES?this.state.DICT_BRANCH_ENTITY_VALUES.map((function(e,t){return Object(D.jsx)(Ia,{optionItem:e},t)})):null]}),Object(D.jsx)("label",{htmlFor:"tsp_id",children:"\u041d\u0430\u0437\u0432\u0430 \u0422\u0421\u041f"}),Object(D.jsxs)("select",{onChange:this.changeInput,apiName:"tsp_id",id:"tsp_id",disabled:this.state.isShow_DICT_TSP?"":"disabled",className:"".concat(this.state.isTSP_toValidation?"":"validError"," form-select"),children:[Object(D.jsx)("option",{}),this.state.isShow_DICT_TSP?this.state.DICT_TSP_VALUE.map((function(e,t){return Object(D.jsx)(Ca,{optionItem:{id:e.client_id,name:e.client_name,institution_id:e.institution_id}},t)})):null]}),Object(D.jsx)("label",{htmlFor:"ident_code",children:"\u0406\u041d\u041d/\u0404\u0414\u0420\u041f\u041e\u0423"}),Object(D.jsxs)("select",{onChange:this.changeInput,apiName:"ident_code",id:"ident_code",className:"form-select",disabled:this.state.isShow_DICT_TSP?"":"disabled",children:[Object(D.jsx)("option",{}),this.state.isShow_DICT_TSP?this.state.DICT_TSP_VALUE.map((function(e,t){return Object(D.jsx)(Ca,{optionItem:{id:e.ident_code,name:e.ident_code,institution_id:e.institution_id}},t)})):null]}),Object(D.jsx)("label",{htmlFor:"INN",children:"\u0420\u0420\u041d"}),Object(D.jsx)("input",{onChange:this.changeInput,apiName:"trans_rrn",type:"text",class:"form-control",placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u0446\u0438\u0444\u0440\u0438..."})]}),Object(D.jsxs)("div",{className:"col-2 coverInput",children:[Object(D.jsx)("label",{htmlFor:"merchant",children:"merchant ID"}),Object(D.jsxs)("select",(e={id:"dropdown-basic-button",onChange:this.changeInput,apiName:"merchant_id"},Object(B.a)(e,"id","merchant"),Object(B.a)(e,"className","".concat(this.state.isMerchant_toValidation?"":"validError"," form-select")),Object(B.a)(e,"disabled",this.state.isShow_DICT_MERCHANT?"":"disabled"),Object(B.a)(e,"children",[Object(D.jsx)("option",{}),this.state.isShow_DICT_MERCHANT?this.state.DICT_MERCHANT_VALUE.map((function(e,t){return Object(D.jsx)(fa,{name:e.merchant_id,id:e.merchant_id},t)})):null]),e)),Object(D.jsx)("label",{htmlFor:"terminal_id",children:"Terminal ID"}),Object(D.jsxs)("select",(t={id:"dropdown-basic-button",onChange:this.changeInput,apiName:"terminal_id"},Object(B.a)(t,"id","terminal_id"),Object(B.a)(t,"className","".concat(this.state.isTerminal_toValidation?"":"validError"," form-select")),Object(B.a)(t,"disabled",this.state.isShow_DICT_TERMINAL?"":"disabled"),Object(B.a)(t,"children",[Object(D.jsx)("option",{}),this.state.isShow_DICT_TERMINAL?this.state.DICT_TERMINAL_VALUE.map((function(e,t){return Object(D.jsx)(fa,{name:e.terminal_id,id:e.terminal_id},t)})):null]),t))]}),Object(D.jsxs)("div",{className:"col-3 coverInput",children:[Object(D.jsx)("label",{htmlFor:"DICT_PAYMENT_SYSTEM",children:"\u041a\u0430\u0440\u0442\u0438"}),Object(D.jsx)(Sn.a,{closeMenuOnSelect:!1,isMulti:!0,options:this.state.DICT_PAYMENT_SYSTEM,placeholder:"\u0412\u0441\u0456",onChange:this.handleSelect}),Object(D.jsx)("label",{htmlFor:"mcc_code",children:"MCC"}),Object(D.jsxs)("div",{className:"autocomplete",children:[Object(D.jsx)("input",{className:"".concat(this.state.isShowInputDICT_MCC?"":"dn"," form-control"),placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043a\u043e\u0434",type:"text",onBlur:this.onBlurAutocompleteInput,onChange:this.onChangeAutocompleteInput,onClick:this.onClickAutocompleteInput,value:this.state.InputDICT_MCC}),Object(D.jsx)("input",{className:"".concat(this.state.isShowInputResDICT_MCC?"":"dn"," form-control"),placeholder:"\u0420\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442",type:"text",value:this.state.AcquiringReportsCriteria.mcc_code,onClick:this.onClickAutocompleteInputRes}),Object(D.jsx)("div",{className:"".concat(this.state.isShowBlockSelectDICT_MCC?"":"dn","blockSelect"),onBlur:this.onBlurBlockSelect,ref:this.myRef,children:this.state.isShowBlockSelectDICT_MCC&&null!=this.state.DICT_MCC?this.state.DICT_MCC.map((function(e,t){return Object(D.jsx)(ya,{item:e,onClickBlockSelectItem:n.onClickBlockSelectItem},t)})):Object(D.jsx)(D.Fragment,{})})]}),Object(D.jsx)("label",{htmlFor:"format_type_id",children:"\u0424\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0443"}),Object(D.jsx)("select",{onChange:this.changeInput,apiName:"format_type_id",id:"format_type_id",className:"form-select",title:"DICT_REPORT_FORMAT",children:this.state.isShowSelectDICT_REPORT_FORMAT?this.state.DICT_REPORT_FORMAT.map((function(e,t){return Object(D.jsx)(Ra,{optionItem:e},t)})):Object(D.jsx)(D.Fragment,{})})]}),Object(D.jsxs)("div",{className:"col-4 coverInput",children:[Object(D.jsx)("div",{className:"coverInput col-11",children:Object(D.jsxs)("div",{className:"coverDate",children:[Object(D.jsx)("label",{htmlFor:"date_type_id",children:"\u0414\u0430\u0442\u0430 \u0437\u0432\u0456\u0442\u0443"}),Object(D.jsx)("select",{onChange:this.changeInput,apiName:"date_type_id",id:"date_type_id",className:"".concat(this.state.isDate_type_idValidation?"":"validError"," form-select"),title:"DICT_DATE_TYPE",children:this.state.isShowSelectDICT_DATE_TYPE?this.state.DICT_DATE_TYPE.map((function(e,t){return Object(D.jsx)(va,{optionItem:e},t)})):null}),Object(D.jsx)("p",{className:"error",children:this.state.isDate_type_idValidation?null:this.state.error_text})]})}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("span",{children:"\u041f\u0435\u0440\u0456\u043e\u0434 \u0437\u0432\u0456\u0442\u0443"}),Object(D.jsxs)("div",{className:"coverInputs row col-12",children:[Object(D.jsxs)("div",{className:"coverDate col-6",children:[Object(D.jsx)("label",{htmlFor:"date_report_from",children:"\u0417"}),Object(D.jsx)("input",{onChange:this.changeInputDateReport_from,apiName:"date_from",className:"".concat(this.state.isDate_fromValidation&&this.state.isDate_month_Validation?"":"validError"," customInput form-control"),id:"date_from",type:"date"})]}),Object(D.jsxs)("div",{className:"coverDate col-6",children:[Object(D.jsx)("label",{htmlFor:"date_report_to",children:"\u041f\u043e"}),Object(D.jsx)("input",{onChange:this.changeInputDateReport_to,apiName:"date_to",className:"".concat(this.state.isDate_toValidation&&this.state.isDate_month_Validation?"":"validError"," customInput form-control"),id:"date_to",type:"date"})]})]}),Object(D.jsxs)("p",{className:"error",children:[this.state.isDate_fromValidation&&this.state.isDate_toValidation?null:"\u0417\u0430\u043f\u043e\u0432\u043d\u0456\u0442\u044c, \u0431\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0434\u0430\u0442\u0438!",this.state.isDate_month_Validation?null:"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0438\u0439 \u0442\u0435\u0440\u043c\u0456\u043d 31 \u0434\u0435\u043d\u044c!"]})]})]})]}),Object(D.jsx)("div",{className:"btnBlock",children:Object(D.jsx)("button",{className:"search btn btn-primary",onClick:this.search,children:"\u0421\u0444\u043e\u0440\u043c\u0443\u0432\u0430\u0442\u0438"})}),this.state.isShowPopupError?Object(D.jsx)(D.Fragment,{children:Object(D.jsx)("div",{className:"coverPopupError",children:Object(D.jsxs)("div",{className:"innerBlock",children:[Object(D.jsx)("div",{className:"title alert alert-primary",children:"\u041d\u0435\u043c\u0430\u0454 \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0443 \u043f\u043e \u0434\u0430\u043d\u043e\u043c\u0443 \u043f\u043e\u0448\u0443\u043a\u0443"}),Object(D.jsx)("div",{className:"msg",children:"\u0421\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0432\u0432\u0435\u0441\u0442\u0438 \u0456\u043d\u0448\u0456 \u0434\u0430\u043d\u0456 \u0434\u043b\u044f \u043f\u043e\u0448\u0443\u043a\u0443"}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:this.closePopupError,children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"})]})})}):Object(D.jsx)(D.Fragment,{}),this.state.isShowPopupErrorSave?Object(D.jsx)(D.Fragment,{children:Object(D.jsx)("div",{className:"coverPopupError",children:Object(D.jsxs)("div",{className:"innerBlock",children:[Object(D.jsx)("div",{className:"title alert alert-primary",children:"\u0423\u043f\u04411 \u0421\u0442\u0430\u043b\u0430\u0441\u044f \u043f\u043e\u043c\u0438\u043b\u043a\u0430"}),Object(D.jsx)("div",{className:"msg",children:":("}),Object(D.jsx)("button",{className:"btn btn-secondary",onClick:this.closePopupErrorSave,children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"})]})})}):Object(D.jsx)(D.Fragment,{})]})}}]),n}(s.a.Component);function ka(e){var t=e.store,n=Object(a.useState)(!1),s=Object(L.a)(n,2),i=s[0],r=(s[1],Object(a.useState)(!1)),o=Object(L.a)(r,2),c=o[0],l=(o[1],Object(a.useState)(!1)),d=Object(L.a)(l,2),u=d[0],p=d[1],_=Object(a.useState)(!1),h=Object(L.a)(_,2),m=h[0],b=h[1],j=Object(a.useState)(null),T=Object(L.a)(j,2),g=T[0],O=T[1],S=Object(a.useState)(!1),I=Object(L.a)(S,2),R=I[0],x=I[1],N=Object(a.useState)(null),y=Object(L.a)(N,2),E=y[0],k=y[1],A=Object(a.useState)(!1),w=Object(L.a)(A,2),P=w[0],q=w[1],M=Object(a.useState)(!1),B=Object(L.a)(M,2),Y=B[0],V=B[1],U=Object(a.useState)(0),H=Object(L.a)(U,2),Q=H[0],G=H[1],W=Object(a.useState)(0),K=Object(L.a)(W,2),Z=K[0],z=K[1],$=Object(a.useState)(null),J=Object(L.a)($,2),X=J[0],ee=J[1],te=Object(a.useState)(null),ne=Object(L.a)(te,2),ae=ne[0],se=ne[1],ie=function(){var e=Object(C.a)(f.a.mark((function e(){var n,a,s,i,r,o,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new Date(X),a=new Date(ae),s=Math.abs(a-n),i=Math.ceil(s/864e5),p(!1),(!Y||X)&&(Y||X&&ae)){e.next=7;break}return e.abrupt("return",p(!0));case 7:if(Y||!(i>31)){e.next=9;break}return e.abrupt("return",b(!0));case 9:return t.changeLoading(!0),r=X.split("-"),o={institution_id:Q,report_type_id:"REPORT_TERMINALS",terminal_type_id:2,terminal_status_id:Z},ae?(c=ae.split("-"),o.date_from="".concat(r[0]).concat(r[1]).concat(r[2]),o.date_to="".concat(c[0]).concat(c[1]).concat(c[2])):o.on_date="".concat(r[0]).concat(r[1]).concat(r[2]),e.next=15,v.a.post("/api/Reports/Acquiring",o,{headers:{token:t.userState.token},responseType:"blob"}).then((function(e){t.changeLoading(!1),window.location.href="/dashboard/REPORTS_ACQUIRING_MONITOR"}));case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=function(e){ee(e.target.value)},oe=function(){var e=Object(C.a)(f.a.mark((function e(n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.changeLoading(!0),"/api/Dictionary/DICT_INSTITUTION",e.next=4,v.a.get("/api/Dictionary/DICT_INSTITUTION",{headers:{Token:"".concat(n)}}).then((function(e){O(e.data.Table.TableRows),x(!0),t.changeLoading(!1)})).catch((function(e){throw new Error(e)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=Object(C.a)(f.a.mark((function e(n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.changeLoading(!0),"/api/Dictionary/DICT_TERMINAL_STATUS",e.next=4,v.a.get("/api/Dictionary/DICT_TERMINAL_STATUS",{headers:{Token:"".concat(n)}}).then((function(e){k(e.data.Table.TableRows),q(!0),t.changeLoading(!1)})).catch((function(e){throw new Error(e)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){oe(t.userState.token),ce(t.userState.token)}),[]),Object(D.jsxs)("div",{className:"coverTable DICT_NET_BRAND",children:[Object(D.jsxs)("div",{className:"headerTable",children:[Object(D.jsx)("div",{className:"titleTable",children:function(e,t){var n;return e.filter((function(e,a){e.operation===t&&(n=e.name)})),n}(t.userState.OPERATIONS,t.location.pathname.substr(11))}),Object(D.jsx)("div",{className:"optionBlock"})]}),Object(D.jsx)("div",{className:"addbBlock ",children:Object(D.jsx)("div",{className:"container",children:Object(D.jsxs)("div",{className:"row col-6",children:[Object(D.jsxs)("div",{className:"row col-12",children:[Object(D.jsx)("label",{htmlFor:"institution",children:"\u0420\u0423 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430"}),Object(D.jsx)("select",{onChange:function(e){var t=e.target.value;t&&G(t)},id:"institution",className:"".concat(i?"validError":""," form-select"),title:"\u0420\u0435\u0433\u0456\u043e\u043d\u0430\u043b\u044c\u043d\u0456 \u0443\u043f\u0440\u0430\u0432\u043b\u0456\u043d\u043d\u044f",children:R?g.map((function(e,t){return Object(D.jsx)("option",{value:e.institution_id,children:e.institution_name})})):null})]}),Object(D.jsxs)("div",{className:"row col-12",children:[Object(D.jsx)("label",{htmlFor:"terminal",children:"\u0421\u0442\u0430\u0442\u0443\u0441 \u0442\u0435\u0440\u043c\u0456\u043d\u0430\u043b\u0430"}),Object(D.jsx)("select",{onChange:function(e){var t=e.target.value;t&&z(t)},className:"".concat(c?"validError":""," form-select"),title:"\u0420\u0435\u0433\u0456\u043e\u043d\u0430\u043b\u044c\u043d\u0456 \u0443\u043f\u0440\u0430\u0432\u043b\u0456\u043d\u043d\u044f",id:"terminal",children:P?E.map((function(e,t){return Object(D.jsx)("option",{value:e.terminal_status_id,children:e.terminal_status_name})})):null})]}),Object(D.jsxs)("div",{className:"row col-12",children:[Object(D.jsx)("label",{htmlFor:"terminal",children:"\u0414\u0430\u0442\u0430 \u0437\u0432\u0456\u0442\u0443"}),Object(D.jsx)("input",{className:"".concat(c?"validError":""," form-select"),id:"type-date",value:"\u0414\u0430\u0442\u0430 \u0440\u0435\u0454\u0441\u0442\u0440\u0430\u0446\u0456\u0457 \u0442\u0435\u0440\u043c\u0456\u043d\u0430\u043b\u0443"})]}),Object(D.jsx)("div",{children:Object(D.jsx)("div",{className:"coverInput mt-3",children:Object(D.jsxs)("div",{className:"mb-3",onChange:function(e){var t=e.target.value;t&&(se(null),ee(null),V(1!==+t))},children:[Object(D.jsx)(F.a.Check,{inline:!0,label:"\u041f\u0435\u0440\u0456\u043e\u0434",name:"group1",type:"radio",id:"date-1",defaultChecked:!0,value:1}),Object(D.jsx)(F.a.Check,{inline:!0,label:"\u041d\u0430 \u0434\u0430\u0442\u0443",name:"group1",type:"radio",id:"date-2",value:2})]},"inline-radio")})}),Object(D.jsx)("div",{children:Object(D.jsx)("div",{className:"coverInput mt-3",children:Y?Object(D.jsxs)("div",{className:"row container",children:[Object(D.jsx)("div",{className:"d-flex align-items-center col-5",children:Object(D.jsx)(F.a.Control,{onChange:re,type:"date",value:X,className:"".concat(u||m?"validError":""),style:{marginLeft:"10px",minWidth:"150px"}})}),Object(D.jsx)("p",{className:"error",children:u?"\u0417\u0430\u043f\u043e\u0432\u043d\u0456\u0442\u044c, \u0431\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u043f\u043e\u043b\u0435!":null})]}):Object(D.jsxs)("div",{className:"row container",children:[Object(D.jsxs)("div",{className:"d-flex align-items-center col-6",children:[Object(D.jsx)("label",{htmlFor:"date_report_from",children:"\u0417"}),Object(D.jsx)(F.a.Control,{onChange:re,type:"date",value:X,className:"".concat(u||m?"validError":""),style:{marginLeft:"10px",minWidth:"150px"}})]}),Object(D.jsxs)("div",{className:"d-flex align-items-center col-6",children:[Object(D.jsx)("label",{htmlFor:"date_report_to",children:"\u041f\u043e"}),Object(D.jsx)(F.a.Control,{onChange:function(e){se(e.target.value)},value:ae,type:"date",className:"".concat(u||m?"validError":""),style:{marginLeft:"10px",minWidth:"150px"}})]}),Object(D.jsxs)("p",{className:"error",children:[u?"\u0417\u0430\u043f\u043e\u0432\u043d\u0456\u0442\u044c, \u0431\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u043f\u043e\u043b\u044f!":null,m?"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0438\u0439 \u0442\u0435\u0440\u043c\u0456\u043d 31 \u0434\u0435\u043d\u044c!":null]})]})})})]})})}),Object(D.jsx)("div",{class:"btnBlock",style:{background:"white",padding:"10px"},children:Object(D.jsx)("button",{class:"btn btn-success",onClick:ie,children:"\u0421\u0444\u043e\u0440\u043c\u0443\u0432\u0430\u0442\u0438 \u0437\u0432\u0456\u0442"})})]})}function Aa(e){var t=e.store,n=Object(a.useState)(!1),s=Object(L.a)(n,2),i=s[0],r=(s[1],Object(a.useState)(!1)),o=Object(L.a)(r,2),c=o[0],l=(o[1],Object(a.useState)(!1)),d=Object(L.a)(l,2),u=d[0],p=d[1],_=Object(a.useState)(!1),h=Object(L.a)(_,2),m=h[0],b=h[1],j=Object(a.useState)(null),T=Object(L.a)(j,2),g=T[0],O=T[1],S=Object(a.useState)(!1),I=Object(L.a)(S,2),R=I[0],x=I[1],N=Object(a.useState)(null),y=Object(L.a)(N,2),E=y[0],k=y[1],A=Object(a.useState)(!1),w=Object(L.a)(A,2),P=w[0],q=w[1],M=Object(a.useState)(!1),B=Object(L.a)(M,2),Y=B[0],V=B[1],U=Object(a.useState)(0),H=Object(L.a)(U,2),Q=H[0],G=H[1],W=Object(a.useState)(0),K=Object(L.a)(W,2),Z=K[0],z=K[1],$=Object(a.useState)(null),J=Object(L.a)($,2),X=J[0],ee=J[1],te=Object(a.useState)(null),ne=Object(L.a)(te,2),ae=ne[0],se=ne[1],ie=function(){var e=Object(C.a)(f.a.mark((function e(){var n,a,s,i,r,o,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new Date(X),a=new Date(ae),s=Math.abs(a-n),i=Math.ceil(s/864e5),p(!1),(!Y||X)&&(Y||X&&ae)){e.next=7;break}return e.abrupt("return",p(!0));case 7:if(!(i>31)){e.next=9;break}return e.abrupt("return",b(!0));case 9:return t.changeLoading(!0),r=X.split("-"),o={institution_id:Q,report_type_id:"REPORT_TERMINALS",terminal_type_id:1,terminal_status_id:Z},ae?(c=ae.split("-"),o.date_from="".concat(r[0]).concat(r[1]).concat(r[2]),o.date_to="".concat(c[0]).concat(c[1]).concat(c[2])):o.on_date="".concat(r[0]).concat(r[1]).concat(r[2]),e.next=15,v.a.post("/api/Reports/Acquiring",o,{headers:{token:t.userState.token},responseType:"blob"}).then((function(e){t.changeLoading(!1),window.location.href="/dashboard/REPORTS_ACQUIRING_MONITOR"}));case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),re=function(e){ee(e.target.value)},oe=function(){var e=Object(C.a)(f.a.mark((function e(n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.changeLoading(!0),"/api/Dictionary/DICT_INSTITUTION",e.next=4,v.a.get("/api/Dictionary/DICT_INSTITUTION",{headers:{Token:"".concat(n)}}).then((function(e){O(e.data.Table.TableRows),x(!0),t.changeLoading(!1)})).catch((function(e){throw new Error(e)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=Object(C.a)(f.a.mark((function e(n){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.changeLoading(!0),"/api/Dictionary/DICT_TERMINAL_STATUS",e.next=4,v.a.get("/api/Dictionary/DICT_TERMINAL_STATUS",{headers:{Token:"".concat(n)}}).then((function(e){k(e.data.Table.TableRows),q(!0),t.changeLoading(!1)})).catch((function(e){throw new Error(e)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){oe(t.userState.token),ce(t.userState.token)}),[]),Object(D.jsxs)("div",{className:"coverTable DICT_NET_BRAND",children:[Object(D.jsxs)("div",{className:"headerTable",children:[Object(D.jsx)("div",{className:"titleTable",children:function(e,t){var n;return e.filter((function(e,a){e.operation===t&&(n=e.name)})),n}(t.userState.OPERATIONS,t.location.pathname.substr(11))}),Object(D.jsx)("div",{className:"optionBlock"})]}),Object(D.jsx)("div",{className:"addbBlock ",children:Object(D.jsx)("div",{className:"container",children:Object(D.jsxs)("div",{className:"row col-6",children:[Object(D.jsxs)("div",{className:"row col-12",children:[Object(D.jsx)("label",{htmlFor:"institution",children:"\u0420\u0423 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430"}),Object(D.jsx)("select",{onChange:function(e){var t=e.target.value;t&&G(t)},id:"institution",className:"".concat(i?"validError":""," form-select"),title:"\u0420\u0435\u0433\u0456\u043e\u043d\u0430\u043b\u044c\u043d\u0456 \u0443\u043f\u0440\u0430\u0432\u043b\u0456\u043d\u043d\u044f",children:R?g.map((function(e,t){return Object(D.jsx)("option",{value:e.institution_id,children:e.institution_name})})):null})]}),Object(D.jsxs)("div",{className:"row col-12",children:[Object(D.jsx)("label",{htmlFor:"terminal",children:"\u0421\u0442\u0430\u0442\u0443\u0441 \u0442\u0435\u0440\u043c\u0456\u043d\u0430\u043b\u0430"}),Object(D.jsx)("select",{onChange:function(e){var t=e.target.value;t&&z(t)},className:"".concat(c?"validError":""," form-select"),title:"\u0420\u0435\u0433\u0456\u043e\u043d\u0430\u043b\u044c\u043d\u0456 \u0443\u043f\u0440\u0430\u0432\u043b\u0456\u043d\u043d\u044f",id:"terminal",children:P?E.map((function(e,t){return Object(D.jsx)("option",{value:e.terminal_status_id,children:e.terminal_status_name})})):null})]}),Object(D.jsxs)("div",{className:"row col-12",children:[Object(D.jsx)("label",{htmlFor:"terminal",children:"\u0414\u0430\u0442\u0430 \u0437\u0432\u0456\u0442\u0443"}),Object(D.jsx)("input",{className:"".concat(c?"validError":""," form-select"),id:"type-date",value:"\u0414\u0430\u0442\u0430 \u0440\u0435\u0454\u0441\u0442\u0440\u0430\u0446\u0456\u0457 \u0442\u0435\u0440\u043c\u0456\u043d\u0430\u043b\u0443"})]}),Object(D.jsx)("div",{children:Object(D.jsx)("div",{className:"coverInput mt-3",children:Object(D.jsxs)("div",{className:"mb-3",onChange:function(e){var t=e.target.value;t&&(se(null),ee(null),V(1!==+t))},children:[Object(D.jsx)(F.a.Check,{inline:!0,label:"\u041f\u0435\u0440\u0456\u043e\u0434",name:"group1",type:"radio",id:"date-1",defaultChecked:!0,value:1}),Object(D.jsx)(F.a.Check,{inline:!0,label:"\u041d\u0430 \u0434\u0430\u0442\u0443",name:"group1",type:"radio",id:"date-2",value:2})]},"inline-radio")})}),Object(D.jsx)("div",{children:Object(D.jsx)("div",{className:"coverInput mt-3",children:Y?Object(D.jsxs)("div",{className:"row container",children:[Object(D.jsx)("div",{className:"d-flex align-items-center col-5",children:Object(D.jsx)(F.a.Control,{onChange:re,type:"date",value:X,className:"".concat(u?"validError":""),style:{marginLeft:"10px",minWidth:"150px"}})}),Object(D.jsx)("p",{className:"error",children:u?"\u0417\u0430\u043f\u043e\u0432\u043d\u0456\u0442\u044c, \u0431\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u043f\u043e\u043b\u0435!":null})]}):Object(D.jsxs)("div",{className:"row container",children:[Object(D.jsxs)("div",{className:"d-flex align-items-center col-6",children:[Object(D.jsx)("label",{htmlFor:"date_report_from",children:"\u0417"}),Object(D.jsx)(F.a.Control,{onChange:re,type:"date",value:X,className:"".concat(u||m?"validError":""),style:{marginLeft:"10px",minWidth:"150px"}})]}),Object(D.jsxs)("div",{className:"d-flex align-items-center col-6",children:[Object(D.jsx)("label",{htmlFor:"date_report_to",children:"\u041f\u043e"}),Object(D.jsx)(F.a.Control,{onChange:function(e){se(e.target.value)},value:ae,type:"date",className:"".concat(u||m?"validError":""),style:{marginLeft:"10px",minWidth:"150px"}})]}),Object(D.jsxs)("p",{className:"error",children:[u?"\u0417\u0430\u043f\u043e\u0432\u043d\u0456\u0442\u044c,  \u0431\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u043f\u043e\u043b\u044f!":null,m?"\u041c\u0430\u043a\u0441\u0438\u043c\u0430\u043b\u044c\u043d\u0438\u0439 \u0442\u0435\u0440\u043c\u0456\u043d 31 \u0434\u0435\u043d\u044c!":null]})]})})})]})})}),Object(D.jsx)("div",{class:"btnBlock",style:{background:"white",padding:"10px"},children:Object(D.jsx)("button",{class:"btn btn-success",onClick:ie,children:"\u0421\u0444\u043e\u0440\u043c\u0443\u0432\u0430\u0442\u0438 \u0437\u0432\u0456\u0442"})})]})}function wa(){return Object(D.jsxs)("div",{className:"coverTable",children:[Object(D.jsxs)("div",{className:"headerTable",children:[Object(D.jsxs)("span",{children:["\u0412\u0430\u0441 \u0432\u0456\u0442\u0430\u0454 ",Object(D.jsx)("b",{children:"\u041e\u0449\u0430\u0434\u0431\u0430\u043d\u043a \u0417\u0432\u0456\u0442\u043d\u0456\u0441\u0442\u044c."})," ",Object(D.jsx)("br",{})," \u041f\u0435\u0440\u0435\u0439\u0434\u0456\u0442\u044c \u043d\u0430 \u043e\u0434\u043d\u0443 \u0437\u0456 \u0441\u0442\u043e\u0440\u0456\u043d\u043e\u043a \u0432 \u043c\u0435\u043d\u044e."]}),Object(D.jsx)("div",{className:"optionBlock"})]}),Object(D.jsx)("div",{className:"innerTable",children:Object(D.jsx)("div",{className:"Table"})})]})}var Pa=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).tableType=function(e){switch(e){case"ADMIN_USERS":return Object(D.jsx)(ge,{store:a.props.store});case"ADMIN_ROLES":return Object(D.jsx)(xe,{store:a.props.store});case"ADMIN_OPERATIONS":return Object(D.jsx)(Se,{store:a.props.store});case"ADMIN_ROLE_OPERATIONS":return Object(D.jsx)(fe,{store:a.props.store});case"ADMIN_USER_OPERATIONS":return Object(D.jsx)(Re,{store:a.props.store});case"REPORT_SETTINGS_TSP":return Object(D.jsx)(Be,{store:a.props.store});case"REPORT_SETTINGS_NET":return Object(D.jsx)(We,{store:a.props.store});case"REPORTS_ACQUIRING":return Object(D.jsx)(st,{store:a.props.store});case"REPORTS_ACQUIRING_MONITOR":return Object(D.jsx)(ot,{store:a.props.store});case"REPORT_TERMINALS_INTERNET":return Object(D.jsx)(ka,{store:a.props.store});case"REPORT_TERMINALS":return Object(D.jsx)(Aa,{store:a.props.store});case"REPORT_OPERATIONS":return Object(D.jsx)(Ln,{store:a.props.store});case"REPORT_ACQ_DETAILED":return Object(D.jsx)(Ut,{store:a.props.store});case"REPORT_ACQ_DETAILED_INT":return Object(D.jsx)(Et,{store:a.props.store});case"REPORT_FIX_COMMISSION":return Object(D.jsx)(gt,{store:a.props.store});case"REPORT_GROSS_COMM":return Object(D.jsx)(sn,{store:a.props.store});case"REPORT_GROSS_COMM_INTERNET":return Object(D.jsx)(On,{store:a.props.store});case"REPORT_OPERATIONS_INTERNET":return Object(D.jsx)(ga,{store:a.props.store});case"REPORT_OPERATIONS_NET":return Object(D.jsx)(Ea,{store:a.props.store});case"REPORT_CASH_OUT":return Object(D.jsx)(ea,{store:a.props.store});case"DICT_PAYMENT_SYSTEM":case"DICT_REPORT_FORMAT":case"DICT_CURRENCY":case"DICT_DATE_TYPE":case"DICT_REPORT_ACTION":case"DICT_OPERATION_TYPE":case"DICT_ACQUIRING_TYPE":case"DICT_ACQUIRING_SERVICE":case"DICT_INSTITUTION":case"DICT_BRANCH":case"DICT_REPORT_PERIOD_TYPE":case"DICT_REPORT_CHANNEL_TYPE":return Object(D.jsx)(M,{store:a.props.store});case"NETWORK_CREATE":return Object(D.jsx)(pe,{store:a.props.store});case"NETWORK_EDIT":return Object(D.jsx)(be,{store:a.props.store});case"NETWORK_AUDIT":return Object(D.jsx)(je,{store:a.props.store});case"NETWORK_ADD_CLIENT":return Object(D.jsx)(oe,{store:a.props.store});case"NETWORK_REPORT":return Object(D.jsx)(V,{store:a.props.store});case"DICT_BIN_TABLE":return Object(D.jsx)(H,{store:a.props.store});case"DICT_BANK_RANGE":return Object(D.jsx)(Q,{store:a.props.store});default:return Object(D.jsx)(wa,{})}},a}return Object(c.a)(n,[{key:"requestOperation",value:function(){var e=Object(C.a)(f.a.mark((function e(t,n){var a,s=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store.changeLoading(!0),a="/api/Dictionary/".concat(n),e.next=4,R.get(a,{headers:{Token:"".concat(t)}}).then((function(e){s.props.store.addTableData(!0,e.data.Table),s.props.store.changeLoading(!1)})).catch((function(e){throw new Error(e)}));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.tableType(this.props.params)}}]),n}(s.a.Component),qa=n(598),Ma=n(596),Ba=function(e){console.log(e);return Object(D.jsx)("div",{className:"coverInputBlock",children:Object(D.jsxs)("div",{className:"coverBtn",children:[Object(D.jsx)("button",{className:"sendCallback",onClick:function(){e.store.showPopupTable(!1,null)},children:"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438"}),Object(D.jsx)("button",{className:"closeCallback",onClick:function(){e.store.showPopupTable(!1,null)},children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"})]})})},La=Object(Ma.a)({form:"formInput"})((function(e){console.log(e);var t=function(e){var t=e.input,n=e.label,a=e.type,s=e.meta,i=s.touched,r=s.error,o=s.warning;return Object(D.jsxs)("div",{className:"inputblock",children:[Object(D.jsx)("label",{className:"control-label",htmlFor:n,children:n}),Object(D.jsxs)("div",{children:[Object(D.jsx)("input",Object(h.a)(Object(h.a)({id:n},t),{},{placeholder:n,type:a})),i&&(r&&Object(D.jsx)("span",{children:r})||o&&Object(D.jsx)("span",{children:o}))]})]})};return Object(D.jsxs)("form",{className:"coverInputBlock",onSubmit:e.handleSubmit,children:[function(e){console.log(e);var n=0;return console.log(e.TableHeaders),Object.values(e.TableHeaders).map((function(e,a){console.log(e),console.log(n++);"".concat(e,"_").concat(n++);return Object(D.jsx)(qa.a,{name:e,type:"text",component:t,label:e})}))}(e.store.menuState.tableData),Object(D.jsxs)("div",{className:"coverBtn",children:[Object(D.jsx)("button",{className:"sendCallback",type:"submit",children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"}),Object(D.jsx)("button",{className:"closeCallback",onClick:function(){e.store.showPopupTable(!1,null)},children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"})]})]})})),Fa=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).namePopup=function(e){switch(e){case"add":return"\u0414\u043e\u0434\u0430\u0432\u0430\u043d\u043d\u044f";case"edit":return"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u043d\u043d\u044f";case"delete":return"\u0412\u0438\u0434\u0430\u043b\u0435\u043d\u043d\u044f";default:return""}},a.close=function(){a.props.store.showPopupTable(!1,null)},a.renderingInputs=function(e){return console.log(e),console.log(e.TableHeaders),Object.values(e.TableHeaders).map((function(e,t){return console.log(e),Object(D.jsxs)("div",{className:"inputblock",children:[Object(D.jsx)("label",{className:"control-label",htmlFor:"data",children:e}),Object(D.jsx)("input",{type:"text",name:"data",placeholder:e,autoComplete:"off",required:"required",pattern:".{3,}"})]})}))},a.renderingInputsForm=function(e){return console.log(e),console.log(e.TableHeaders),Object.values(e.TableHeaders).map((function(e,t){return console.log(e),Object(D.jsxs)("div",{className:"inputblock",children:[Object(D.jsx)("label",{className:"control-label",htmlFor:"data",children:e}),Object(D.jsx)("input",{type:"text",name:"data",placeholder:e,autoComplete:"off",required:"required",pattern:".{3,}"})]})}))},a.formInputData=function(e){console.log(e),a.props.store.showPopupTable(!1,null)},a.typePopup=function(e){switch(e){case"add":return Object(D.jsx)(La,{store:a.props.store,onSubmit:a.formInputData});case"edit":return"\u0420\u0435\u0434\u0430\u0433\u0443\u0432\u0430\u043d\u043d\u044f";case"delete":return Object(D.jsx)(Ba,{store:a.props.store});default:return""}},a.state={toggle:!1},console.log(a.props),a}return Object(c.a)(n,[{key:"render",value:function(){return Object(D.jsx)("div",{className:"popupTable",children:Object(D.jsxs)("div",{className:"innerBlock",children:[Object(D.jsx)("h2",{children:this.namePopup(this.props.store.menuState.typePopup)}),this.typePopup(this.props.store.menuState.typePopup)]})})}}]),n}(s.a.Component),Ya=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={loading:!0},a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){window.localStorage.getItem("token")?this.authToken():this.props.history.push("/login")}},{key:"authToken",value:function(){var e=Object(C.a)(f.a.mark((function e(){var t=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/Auth/ALL",e.next=3,R.get("/api/Auth/ALL",{headers:{Token:"".concat(window.localStorage.getItem("token"))}}).then((function(e){var n=e.data,a=n.token,s=n.user_code,i=n.user_name,r=n.user_position,o=n.OPERATIONS;t.props.addUserData(a,s,i,r,o),t.setState({loading:!1})})).catch((function(e){"\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u0442\u043e\u043a\u0435\u043d\u0430."===e.response.data.ErrorStatus.ErrorMessage&&(window.localStorage.removeItem("token"),t.props.history.push("/login"))}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(D.jsxs)("div",{className:"wrapper",children:[this.state.loading?Object(D.jsx)(ta,{}):Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(y,{store:this.props}),Object(D.jsxs)("div",{className:"content",children:[Object(D.jsx)(k,{store:this.props,params:this.props.location.pathname.substr(11)}),Object(D.jsx)(Pa,{store:this.props,params:this.props.location.pathname.substr(11)})]})]}),this.props.menuState.showPopupTable?Object(D.jsx)(Fa,{store:this.props}):null,this.props.menuState.isLoading?Object(D.jsx)(ta,{}):null]})}}]),n}(s.a.Component),Va=Object(p.e)(Ya),Ua=Object(_.b)((function(e){return{userState:e.userState,menuState:e.menuState,form:e.form}}),(function(e){return{addUserData:function(t,n,a,s,i){e(b(t,n,a,s,i))},showPopupTable:function(t,n){e(function(e,t){return console.log(e),{type:"showPopupTable",showPopupTable:e,typePopup:t}}(t,n))},addTableData:function(t,n){e(function(e,t){return console.log(e),console.log(t),{type:"tableData",showTable:e,tableData:t}}(t,n))},changeLoading:function(t){e(O(t))},operationName:function(t,n){e(function(e,t){return console.log(e),console.log(t),{type:"operationName",nameOperation:e,operation:t}}(t,n))},addRoleData:function(t){e(function(e){return console.log(T),{type:T,roleData:e}}(t))}}}))(Va),Ha=function(e){var t=e.input,n=e.label,a=e.type,s=e.meta,i=s.touched,r=s.error,o=s.warning;return Object(D.jsxs)("div",{className:"coverInput ",children:[Object(D.jsx)("label",{htmlFor:"userEmail",children:n}),Object(D.jsxs)("div",{children:[Object(D.jsx)("input",Object(h.a)(Object(h.a)({id:"userEmail"},t),{},{placeholder:n,type:a})),i&&(r&&Object(D.jsx)("span",{children:r})||o&&Object(D.jsx)("span",{children:o}))]})]})},Qa=function(e){return e?void 0:"\u041e\u0431\u043e\u0432\u044f\u0437\u043a\u043e\u0432\u0435"},Ga=Object(Ma.a)({form:"loginForm"})((function(e){var t;return Object(D.jsxs)("form",{className:"form",onSubmit:e.handleSubmit,children:[Object(D.jsx)(qa.a,(t={name:"username",type:"username",autocomplete:"off"},Object(B.a)(t,"autocomplete","\u041b\u043e\u0433\u0456\u043d"),Object(B.a)(t,"component",Ha),Object(B.a)(t,"label","\u041b\u043e\u0433\u0456\u043d"),Object(B.a)(t,"validate",Qa),t)),Object(D.jsx)(qa.a,{name:"password",type:"password",component:Ha,label:"\u041f\u0430\u0440\u043e\u043b\u044c"}),Object(D.jsxs)("div",{className:"coverBtn",children:[Object(D.jsx)("p",{style:{color:"red"},children:e.errorAuth}),Object(D.jsx)("button",{type:"submit",children:"\u0423\u0432\u0456\u0439\u0442\u0438"})]})]})}));var Wa=function(e){var t=Object(a.useState)(null),n=Object(L.a)(t,2),s=n[0],i=n[1];function r(){return(r=Object(C.a)(f.a.mark((function t(n,a){var s;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.changeLoading(!0),s={user_code:n,user_pass:a},t.next=4,R.post("/api/Auth",s,{headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(t){window.localStorage.removeItem("token"),window.localStorage.setItem("token",t.data.token),e.addUserData(t.data.token,t.data.user_code,t.data.user_name,t.data.user_position,t.data.OPERATIONS),e.changeLoading(!1),e.history.push("/dashboard")})).catch((function(t){e.changeLoading(!1),i(t.response.data.ErrorStatus.ErrorMessage)}));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(a.useEffect)((function(){null!==window.localStorage.getItem("token")?e.history.push("/dashboard"):e.changeLoading(!1)}),[]),Object(D.jsx)(D.Fragment,{children:Object(D.jsxs)("div",{className:"login",children:[s?Object(D.jsx)(U.a,{variant:"danger",style:{position:"absolute",top:"20px"},children:s}):null,Object(D.jsxs)("div",{className:"innerLogin",children:[Object(D.jsx)("h3",{children:"\u0412\u0445\u0456\u0434 \u0434\u043e \u0441\u0438\u0441\u0442\u0435\u043c\u0438"}),Object(D.jsx)(Ga,{store:e,onSubmit:function(e){return function(e,t){return r.apply(this,arguments)}(e.username,e.password)}}),e.menuState.isLoading?Object(D.jsx)(ta,{}):null]})]})})},Ka=Object(p.e)(Wa),Za=Object(_.b)((function(e){return console.log(e),{userState:e.userState,menuState:e.menuState,form:e.form}}),(function(e){return{addUserData:function(t,n,a,s,i){e(b(t,n,a,s,i))},changeLoading:function(t){e(O(t))}}}))(Ka),za=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={loading:!0},console.log(a.props),a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){console.log(null!==window.localStorage.getItem("token")),null!==window.localStorage.getItem("token")?this.props.history.push("/dashboard"):this.props.history.push("/login")}},{key:"render",value:function(){return Object(D.jsx)("div",{className:"main"})}}]),n}(s.a.Component),$a=Object(p.e)(za),Ja=Object(_.b)((function(e){return console.log(e),{userState:e.userState}}),(function(e){return{addUserData:function(t){e(b(t))}}}))($a),Xa=n(280),es=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).day=function(e){return["\u041d\u0435\u0434\u0456\u043b\u044f","\u041f\u043e\u043d\u0435\u0434\u0456\u043b\u043e\u043a","\u0412\u0456\u0432\u0442\u043e\u0440\u043e\u043a","\u0421\u0435\u0440\u0435\u0434\u0430","\u0427\u0435\u0442\u0432\u0435\u0440","\u041f'\u044f\u0442\u043d\u0438\u0446\u044f","\u0421\u0443\u0431\u043e\u0442\u0430"][e.getDay()]},a.formatDate=function(e){var t=e.getDate(),n=e.getMonth(),a=e.getFullYear();return t+" "+["\u0421\u0456\u0447\u0435\u043d\u044c","\u041b\u044e\u0442\u0438\u0439","\u0411\u0435\u0440\u0435\u0437\u0435\u043d\u044c","\u041a\u0432\u0456\u0442\u0435\u043d\u044c","\u0422\u0440\u0430\u0432\u0435\u043d\u044c","\u0427\u0435\u0440\u0432\u0435\u043d\u044c","\u041b\u0438\u043f\u0435\u043d\u044c","\u0421\u0435\u0440\u043f\u0435\u043d\u044c","\u0412\u0435\u0440\u0435\u0441\u0435\u043d\u044c","\u0416\u043e\u0432\u0442\u0435\u043d\u044c","\u041b\u0438\u0441\u0442\u043e\u043f\u0430\u0434","\u0413\u0440\u0443\u0434\u0435\u043d\u044c"][n]+" "+a},a.changeInput=function(e){var t=e.currentTarget.getAttribute("apiName");console.log(t);var n=e.target.value;console.log(n);var s=a.state.inputsData;s[t]=n,console.log(s),a.setState({isDisableBtnSave:!1,inputsData:s}),console.log(a.state),console.log(a.state.inputsData)},a.saveUserData=function(){a.requestSaveUserData(a.props.userState.token)},a.closeProfile=function(){a.props.history.push("/dashboard")},a.state={showContent:!1,isDisableBtnSave:!0,inputsData:{}},console.log(a.props),a}return Object(c.a)(n,[{key:"componentDidMount",value:function(){console.log("componentDidMount"),this.props.changeLoading(!0),null==window.localStorage.getItem("token")?this.props.history.push("/login"):this.authToken()}},{key:"authToken",value:function(){var e=Object(C.a)(f.a.mark((function e(){var t=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/Auth/ALL",e.next=3,R.get("/api/Auth/ALL",{headers:{Token:"".concat(window.localStorage.getItem("token"))}}).then((function(e){console.log(e.data),t.props.addUserData(e.data.token,e.data.user_code,e.data.user_name,e.data.user_position,e.data.OPERATIONS),t.props.changeLoading(!1),t.requestUserCabinet(t.props.userState.token)})).catch((function(e){console.log(e.response)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"requestUserCabinet",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),"/api/UserCabinet",e.next=4,R.get("/api/UserCabinet",{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(e){console.log(e.data);var t=n.state.inputsData;t.user_code=e.data.user_code,n.setState({data:e.data,inputsData:t,showContent:!0}),n.props.changeLoading(!1),console.log(n.state.data)})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"requestSaveUserData",value:function(){var e=Object(C.a)(f.a.mark((function e(t){var n=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.changeLoading(!0),console.log(t),console.log(this.state.inputsData),"/api/User",{},e.next=7,R.put("/api/User",this.state.inputsData,{headers:{Token:"".concat(t),"Content-Type":"application/json"}}).then((function(e){console.log(e.data),n.props.changeLoading(!1),n.setState({isDisableBtnSave:!0})})).catch((function(e){console.log(e.response),console.log(e.response.data)}));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return console.log(this.props),console.log(this.state),console.log(this.props.menuState.isLoading),console.log("--------"),Object(D.jsxs)("div",{className:"profile",children:[this.state.showContent?Object(D.jsxs)("div",{className:"innerProfile",children:[Object(D.jsxs)("div",{className:"headerBlock",children:[Object(D.jsx)("h3",{children:"\u041c\u0456\u0439 \u043a\u0430\u0431\u0456\u043d\u0435\u0442"}),Object(D.jsxs)("div",{className:"dataBlock",children:[Object(D.jsxs)("div",{className:"date",children:[Object(D.jsx)("input",{defaultValue:this.formatDate(new Date),className:"customInput",id:"dateInput",type:"text",disabled:!0}),Object(D.jsx)("input",{defaultValue:this.day(new Date),className:"customInput",id:"dateDayInput",type:"text",disabled:!0}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"dateLastInput",children:"\u0427\u0430\u0441 \u043e\u0441\u0442\u0430\u043d\u043d\u044c\u043e\u0433\u043e \u0432\u0445\u043e\u0434\u0443"}),Object(D.jsx)("input",{defaultValue:this.state.data.last_logon_date,className:"customInput",id:"dateLastInput",type:"text",disabled:!0})]})]}),Object(D.jsxs)("div",{className:"user",children:[Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"userFullName",children:"\u041a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447"}),Object(D.jsx)("input",{defaultValue:this.state.data.user_name,className:"customInput",id:"userFullName",type:"text",disabled:!0})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"powers",children:"\u041f\u043e\u0432\u043d\u043e\u0432\u0430\u0436\u0435\u043d\u043d\u044f"}),Object(D.jsx)("input",{defaultValue:this.state.data.role_name,className:"customInput",id:"powers",type:"text",disabled:!0})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"statusInput",children:"\u0421\u0442\u0430\u0442\u0443\u0441"}),Object(D.jsx)("input",{defaultValue:this.state.data.status,className:"customInput",id:"statusInput",type:"text",disabled:!0})]})]})]})]}),Object(D.jsxs)("div",{className:"commmonBlock",children:[Object(D.jsx)("h4",{children:"\u041c\u0456\u0439 \u043f\u0440\u043e\u0444\u0456\u043b\u044c"}),Object(D.jsxs)("div",{className:"dataBlock",children:[Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"registrationDateInput",children:"\u0414\u0430\u0442\u0430 \u0440\u0435\u0454\u0441\u0442\u0440\u0430\u0446\u0456\u0457"}),Object(D.jsx)("input",{defaultValue:this.state.data.date_registered,className:"customInput",id:"registrationDateInput",type:"text",disabled:!0})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"accountInput",children:"\u041e\u0431\u043b\u0456\u043a\u043e\u0432\u0438\u0439 \u0437\u0430\u043f\u0438\u0441"}),Object(D.jsx)("input",{defaultValue:this.state.data.user_code,className:"customInput",id:"accountInput",type:"text",disabled:!0})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"lastNameInput",children:"\u041f\u0440\u0456\u0437\u0432\u0438\u0449\u0435"}),Object(D.jsx)("input",{defaultValue:this.state.data.surname,className:"customInput",id:"lastNameInput",type:"text",disabled:!0})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"nameInput",children:"\u0406\u043c\u044f"}),Object(D.jsx)("input",{defaultValue:this.state.data.name,className:"customInput",id:"nameInput",type:"text",disabled:!0})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"surnameInput",children:"\u041f\u043e \u0431\u0430\u0442\u044c\u043a\u043e\u0432\u0456"}),Object(D.jsx)("input",{defaultValue:this.state.data.middle_name,className:"customInput",id:"surnameInput",type:"text",disabled:!0})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"phoneInput",children:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"}),Object(D.jsxs)("div",{className:"coverInputs",children:[Object(D.jsx)("input",{className:"customInput",id:"phoneInput",placeholder:"044 000 00 00",type:"phone",defaultValue:this.state.data.phone,apiName:"phone",onChange:this.changeInput}),Object(D.jsx)("input",{className:"customInput",id:"phoneInput",type:"phone",apiName:"ipphone",defaultValue:this.state.data.ipphone,onChange:this.changeInput,disabled:!0}),Object(D.jsx)("input",{className:"customInput",id:"phoneInput",placeholder:"+38 000 000 00 00",type:"phone",apiName:"mobile",defaultValue:this.state.data.mobile,onChange:this.changeInput})]})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"managementAreaInput",children:"\u041e\u0431\u043b\u0430\u0441\u0442\u044c \u0443\u043f\u0440\u0430\u0432\u043b\u0456\u043d\u043d\u044f"}),Object(D.jsx)("input",{defaultValue:this.state.data.region,className:"customInput",id:"managementAreaInput",type:"text",disabled:!0})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"positionInput",children:"\u041f\u043e\u0441\u0430\u0434\u0430"}),Object(D.jsx)("input",{defaultValue:this.state.data.user_position,className:"customInput",id:"positionInput",type:"text",disabled:!0})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"emailInput",children:"\u0415\u043b. \u0430\u0434\u0440\u0435\u0441\u0430"}),Object(D.jsx)("input",{defaultValue:this.state.data.user_email,className:"customInput",id:"emailInput",type:"email",disabled:!0})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"tvbvInput",children:"\u0422\u0412\u0411\u0412"}),Object(D.jsx)("input",{defaultValue:this.state.data.tvbv,className:"customInput",id:"tvbvInput",type:"text",disabled:!0})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"departmentInput",children:"\u0414\u0435\u043f\u0430\u0440\u0442\u0430\u043c\u0435\u043d\u0442"}),Object(D.jsx)("input",{defaultValue:this.state.data.department,className:"customInput",id:"departmentInput",type:"text",disabled:!0})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"managementInput",children:"\u0423\u043f\u0440\u0430\u0432\u043b\u0456\u043d\u043d\u044f"}),Object(D.jsx)("input",{defaultValue:this.state.data.office,className:"customInput",id:"managementInput",type:"text",disabled:!0})]}),Object(D.jsxs)("div",{className:"coverInput",children:[Object(D.jsx)("label",{htmlFor:"sectionInput",children:"\u0412\u0456\u0434\u0434\u0456\u043b"}),Object(D.jsx)("input",{defaultValue:this.state.data.division,className:"customInput",id:"sectionInput",type:"text",disabled:!0})]})]})]}),Object(D.jsxs)("div",{className:"btnBlock",children:[Object(D.jsx)(Xa.a,{variant:"secondary",onClick:this.closeProfile,children:"\u0417\u0430\u043a\u0440\u0438\u0442\u0438"}),Object(D.jsx)(Xa.a,{variant:"success",onClick:this.saveUserData,disabled:this.state.isDisableBtnSave?"disabled":"",children:"\u0417\u0431\u0435\u0440\u0435\u0433\u0442\u0438"})]})]}):Object(D.jsx)(D.Fragment,{}),this.props.menuState.isLoading?Object(D.jsx)("div",{className:"coverloader",children:Object(D.jsx)("div",{className:"loader"})}):Object(D.jsx)(D.Fragment,{})]})}}]),n}(s.a.Component),ts=Object(p.e)(es),ns=Object(_.b)((function(e){return console.log(e),{userState:e.userState,menuState:e.menuState}}),(function(e){return{addUserData:function(t,n,a,s,i){e(b(t,n,a,s,i))},changeLoading:function(t){e(O(t))}}}))(ts),as=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(c.a)(n,[{key:"render",value:function(){return Object(D.jsxs)(u.a,{children:[Object(D.jsx)(p.a,{exact:!0,path:"/",render:function(){return Object(D.jsx)(Ja,{})}}),Object(D.jsx)(p.a,{path:"/dashboard/",render:function(){return Object(D.jsx)(Ua,{})}}),Object(D.jsx)(p.a,{path:"/profile",render:function(){return Object(D.jsx)(ns,{})}}),Object(D.jsx)(p.a,{path:"/login",render:function(){return Object(D.jsx)(Za,{})}})]})}}]),n}(s.a.Component),ss=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,601)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),s(e),i(e),r(e)}))},is=n(39),rs=n(600),os=Object(is.b)({userState:j,menuState:S,form:rs.a}),cs=Object(is.c)(os);window.store=cs;var ls=cs;n(585);r.a.render(Object(D.jsx)(s.a.StrictMode,{children:Object(D.jsx)(_.a,{store:ls,children:Object(D.jsx)(as,{})})}),document.getElementById("root")),ss()}},[[586,1,2]]]);
//# sourceMappingURL=main.e1479479.chunk.js.map